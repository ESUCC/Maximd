psql iep_local===================================================================================================sudo /usr/local/zend/mysql/bin/mysql.server start===================================================================================================ssh root@iep.nebraskacloud.orguwFtH!72cd /var/www/html/srsssh root@iepweb02.nebraskacloud.orgwFtH!72cd /etc/httpd/srs-zfsvn updatessh root@iepweb03.nebraska.eduwFtH!72cd /etc/httpd/srs-zfsvn updatecd /etc/httpd/srs-form-archivessh root@iepdatastage.nebraskacloud.orgwFtH!72-- primary db/usr/local/psql-primary/bin/psql -p 5434 -d nebraska_srs -U psql-primary-- archive db/usr/local/psql-archive/bin/psql -p 5435 -d nebraska_srs -U psql-archive/usr/local/pgsql/bin/psql -p 5433 -d iep_srs_db -U postgres/usr/local/pgsql/bin/psql -p 5433 -d iep_destination_db -U postgres/usr/local/pgsql/bin/psql -p 5434 -d nebraska_srs -U psql-primary-- surveysudo su postgrespsql nebraska_survey -U postgres-- unfinalize surveyselect id_neb_survey from public.neb_survey_distribute where unique_survey_string = 'QLsQQ03n';update neb_survey set status = 'edit' where id_neb_survey = '288';ssh jlavere@stylescope.unl.edustyl3m@n// new primary/usr/local/psql-primary/bin/psql -p 5434 -d nebraska_srs -U psql-primary-- restart dbsudo su psql-primary/usr/local/psql-primary/bin/pg_ctl restart -D /usr/local/psql-primary/data/usr/local/psql-primary/bin/pg_ctl reload -D /usr/local/psql-primary/data// force stop/usr/local/psql-primary/bin/pg_ctl stop -D /usr/local/psql-primary/data -m i/usr/local/psql-primary/bin/pg_ctl /usr/local/psql-primary/bin/psql template1 -p 5434 -U psql-primary/usr/local/psql-primary/data/postgresql.confchanged #default_with_oids = off todefault_with_oids = on// new archive/usr/local/psql-archive/bin/psql template1 -p 5435 -U psql-archive/usr/local/psql-archive/data/postgresql.conf===================================================================================================cd public/js/dojo_development/dojo_source/util/buildscripts/./build.sh profileFile=../../../../../../scripts/dojoBuildScripts/srs.profile.js action=release cssOptimize=comments optimize=shrinkSafe releaseDir="../../../../dojo_production" version="1.6.1.prod"cd ../../../../../../===================================================================================================cd /usr/local/zend/apache2/htdocssvn checkout https://versions.soliantconsulting.com/svn/nebraska/srs-zf/trunk srs-zf_newcp srs-zf/public/.htaccess srs-zf_new/public/cp -Rf srs-zf/application/user_images/uploaded_pdf/* srs-zf_new/application/user_images/uploaded_pdfchmod -R 777 srs-zf_new/public/sproxychmod -R 777 srs-zf_new/public/tempchmod -R 777 srs-zf_new/tempchmod -R 777 srs-zf_new/library/App/Filter/Htmlpurifier/HTMLPurifier/DefinitionCache/Serializerchmod -R 777 srs-zf_new/application/user_images/uploaded_pdfcd srs-zf_new/public/js/dojo_development/dojo_source/util/buildscripts/./build.sh profileFile=../../../../../../scripts/dojoBuildScripts/srs.profile.js action=release cssOptimize=comments optimize=shrinkSafe releaseDir="../../../../dojo_production" version="1.6.1.prod"cd ../../../../../../../-- make new version livemv srs-zf srs-zf_oldmv srs-zf_new srs-zf-- restore old versionmv srs-zf srs-zf_newmv srs-zf_old srs-zf===================================================================================================// diff/usr/local/zend/bin/php ./library/Pgdbsync/pgdbsync -s public -f primary -t archive -a diff -c /etc/httpd/srs-zf/application/configs/pgsync-conf.ini// summary/usr/local/zend/bin/php ./library/Pgdbsync/pgdbsync -s public -f primary -t archive -a summary -c /etc/httpd/srs-zf/application/configs/pgsync-conf.ini// run/usr/local/zend/bin/php ./library/Pgdbsync/pgdbsync -s public -f primary -t archive -a run -c /etc/httpd/srs-zf/application/configs/pgsync-conf.ini===================================================================================================alter table public.iep_team_district alter column timestamp_created set default ('now'::text)::timestamp without time zone;alter table public.iep_team_district alter column timestamp_last_mod set default ('now'::text)::timestamp without time zone;update iep_form_002 set mdt_00603f2f = null, mdt_00603f2f_correctable = null where id_form_002 = '1164115';update iep_form_002 set disability_vi = null where id_form_002 = '1164199';vHMvw7cVpg_dump -h iepdatastage.nebraskacloud.org -d iep_db -U postgres -s -t student_chart -irestart apache/etc/init.d/httpd restart// live postgres 8/usr/bin/psql -p 5432 template1 -U postgres// move schema from 8 to 9/usr/bin/pg_dump -p 5432 iep_db -U postgres -s | /usr/local/pgsql/bin/psql -p 5433 -d iep_srs_db -U postgres/usr/bin/pg_dump -p 5432 iep_db -U postgres -t iep_student | /usr/local/pgsql/bin/psql -p 5433 -d iep_srs_db -U postgres// dev postgres 9// create the db/usr/local/pgsql/bin/createdb -p 5433 -E SQL_ASCII iep_srs_db/usr/local/pgsql/bin/createdb -p 5433 -E SQL_ASCII iep_destination_db// connect to the new db/usr/local/pgsql/bin/psql -p 5433 iep_srs_db -U postgres/usr/bin/psql iep_db -U postgresssh root@surveyme.unl.eduwFtH!72su -p postgrespsql -h iepdatastage.nebraskacloud.org -d nebraska_survey -U postgrescd /etc/httpd/neb-surveyssh jlavere@xanthos.soliantconsulting.comPrest7+esudo su - -psu -p postgrespsql iep_engine_rebuildpsql nebraska_surveypsql -h iepdata.unl.edu -d iep_db -p 5433ssh root@129.93.254.140psql -h xanthos.soliantconsulting.com -d iep_engine_rebuild -c "select * from iep_form_004 limit 1" -U postgrespsql -h xanthos.soliantconsulting.com -d iep_engine_rebuild -c "select * from iep_form_004 limit 1" -U postgres | psql -d iep_local -c "copy iep_form_004 from stdin" -U postgres-- enable zend debuggingssh root@iepweb02.nebraskacloud.org -R 10137:localhost:10137To start/stop Apache run the following command:/usr/local/zend/bin/zendctl.sh <start-apache | stop-apache | restart-apache>passphrase: otemporaomores-- zend server web interfacehttp://iepweb02.nebraskacloud.org:10081/ZendServer2k9ma13sftp root@iepdatastage.nebraskacloud.orgwFtH!72cd /data/backups/database-full/sftp root@iepdatastage.nebraskacloud.orgwFtH!72sudo su - -pssh root@iepweb.unl.eduwFtH!72psql -h iepdata.unl.edu iep_dbcd /var/www/html/srs/===============================================================================================20070126server down in prepend===============================================================================================-- dump the databasehad trouble dumping the db from the iepdata server manually.trying running the backup script[root@iepdata database-full]# sh /data/scripts/iep_backup.shthe above line worked-- move to postgres home and unzipmv /data/backups/database-full/2009-02-17-020001_pgdata_oldstyle.gz /home/postgres/2007_preEngineRebuild.gzgunzip < 2009-02-17-020001_pgdata_oldstyle.gz > /home/postgres/feb_restore.txt===============================================================================================-- import the new dbsu - postgrescreatedb -E SQL_ASCII iep_db -p 5433psql -d iep_db -p 5433 < /home/postgres/2007_preEngineRebuild.txt-- finished without error===============================================================================================-- apply FK changes-- this is on LIVE NOT the data serversu -p postgrespsql -h iepdata.unl.edu iep_db -p 5433//// restore database from backup//cd /data/backups/database-full/gunzip < 2009-05-14-020001_pgdata_oldstyle.gz > /notraid/may_fourteenth.txtcreatedb -E SQL_ASCII may_fourteenth -p 5433psql -d may_fourteenth -p 5433 < /notraid/may_fourteenth.txt===============================================================================================-- postgres log on iepdata when started with init.d/var/log/postgresql/serverlog---- start postgres/etc/init.d/postgresql-8.1 start/etc/init.d/postgresql-8.1 stop===============================================================================================psql -h xanthos.soliantconsulting.com -d iep_engine_rebuild -p 5432 -U postgres DuPage/var/www/DuPage/dev-head the php.ini you need to change for the php5 stuff is /etc/php5/cgi/php.ini===============================================================================================ssh jlavere@iep.nebraskacloud.orgug0dr3cnalsudo su - -pg0dr3cnalsu -p postgrespsql -h iepdata.unl.edu -d iep_db -p 5433 -- typical process when moving a copy of live serverchange include path to add libinstall pear libsturn register globals onchange connection info in prependadd password for postgrescorrection to ssl in master solution call    corrections to imports - described in prependiep.nebraskacloud.orgu apache confemacs /usr/apachesecure0/conf/httpd.conf===============================================================================================20070124 - working import code on xanthos/usr/local/bin/php -c /var/www/srs/imports/php.ini /home/jlavere/srs/import.php NP.dev.conf/usr/local/bin/php -c /var/www/srs/imports/php.ini /var/www/srs/grand_island/GI_update_script.php gipsstu.csv GIPSPAR.csv- live cron import/usr/local/bin/php -c /var/www/srs/imports/import_php.ini /home/jlavere/srs/grand_island/GI_update_script.php chgstu.csv chgpar.csv/usr/local/bin/php -c /home/jlavere/srs/imports/php.ini /home/jlavere/srs/grand_island/GI_update_script.php chgstu.csv chgpar.csv===============================================================================================pg_dump iep_engine_rebuild_new | gzip >/home/postgres/20070112_fkImplemented.gzgunzip < 20070112_fkImplemented.gz > /home/postgres/20070112_fkImplemented.txt// find text in filefind . -name '*.php' -print | xargs fgrep -lr 'curl'find . -name '*.php' -print | xargs fgrep -lr 'buildFormsArray'grep -lr dob *find . -name '*.*' -print | xargs fgrep -lr 'isUTF8'grep '1150626' serverlog.1grep -B 10 -A 10 '1150626' serverlog.1add -B for lines beforeadd -A for lines afteradd -C for lines on both sides======================================srs version controlget ip address :  /sbin/ifconfig// php ini file for php 4 and 5sudo emacs /etc/php4/apache/php.inisudo emacs /etc/php5/cgi/php.ini// restart apachesudo /usr/sbin/apachectl restart// restart apache2 xanthos/etc/init.d/apache2 reload// config file/etc/apache2/httpd.confapachectlapache2ctl// postgres infopgDataDir:  /var/lib/postgresql/8.1/mainconf file:  /etc/postgresql/8.1/main/postgresql.conf// =====================================================================================//iep data backups iepdatassh jlavere@iepdatastage.nebraskacloud.orgu1t1m@t3/data/pgsql/logscd /data/backups/database-fullgunzip < 2008-10-04-020001_pgdata_oldstyle.gz > /home/postgres/jesse.data1004.txtpg_restore -C jesse_backup /data/backups/database-full/2006-09-26-020002_pgdata_oldstyle.gz-- RESTORE DB ---- backups are located here/data/backups/database-fullgunzip < 2006-09-26-020002_pgdata_oldstyle.gz > /home/postgres/jesse.data0926.txtmv jesse.data2.txt /home/jlavere/jesse.data3.txt/data/backups/database-full/jesse.data.txt/data/backups/database-full/2006-10-24-020001_pgdata_oldstyle.gzpg_restore -C jesse_backup /data/backups/database-full/2006-09-26-020002_pgdata_oldstyle.gzpg_restore -C -d jesse_backup2 /data/backups/database-full/2006-09-26-020002_pgdata_oldstyle.gzpg_restore -C -d jesse_backup2 jesse.data3.txt-pe 's/SQL_ASCII/LATIN1/;' /home/postgres/jesse.data0926.txt > /home/postgres/jesse.data0926changed.txt &----createdb -E SQL_ASCII restore_0531psql restore_0531 < /home/postgres/jesse.data0531.txt--start db serversudo -u postgres nohup /opt/postgresql-8.1.5/bin/postmaster -p 5433 -h \* -D /data/pgsql8.1/ > /tmp/pglog 2>&1 &--jlavere 20070827 - create database from restorecreatedb -E SQL_ASCII junefirst_backup -p 5433psql -p 5433 junefirst_backup < /home/postgres/2007_ppn.txt----======================================on iepdata instead of pg_dump/opt/postgresql-8.1.5/bin/pg_dump -d iep_db -p 5433 -s > 20070411_schema.txtcreatedb -p 5433 -E SQL_ASCII iep_import_testpsql -p 5433 iep_import_test < /home/postgres/20070411_schema.txt/usr/local/bin/php -c /opt/backup/scripts/php.ini /usr/apachesecure0/htdocs/import_test/import.php ELK.dev.conf======================================createdb -E SQL_ASCII nebraska_survey_unit_testpsql nebraska_survey_unit_test < /home/postgres/neb_sur.txt- servername: ssh jlavere@iepdev.harvill.netJust4U!sudo su - -psu -p postgrespsql iep_engine_rebuild - if you have access to DNS and want the name changed, the IP address   is 207.91.27.230, if you have a domain you want me to host on my DNS,   I'm willing to do that as well...- users added (all in sudo)- password for all users: Just4U! (please do not change the root password)Focus on orphans   - create a cleanup plan   - assess application implications   + bring data over to dev server   - create code to pull data and implement constraint   - test scrub code on live without commit   - go to Wade with list and propose a timeINSERT INTO iep_student (id_author, id_author_last_mod, date_web_notify, id_county, id_district, id_school, name_first, name_middle, name_last, id_case_mgr, status, dob, grade, gender, ethnic_group, pub_school_student, primary_language, ward, ward_surrogate, ward_surrogate_nn, ward_surrogate_other, address_street1, address_street2, id_student_local, nonpubcounty, nonpubdistrict, nonpubschool, address_city, address_state, address_zip, phone, sesis_exit_code, sesis_exit_date, program_provider, ell_student) VALUES ('0', '0', '11/09/2006', '99', '9999', '996', 'Bobtest', 'jesse', 'test', '1006876', 'Active', '01/01/2001', 'K', 'Male', 'A', 't', 'English', 't', 't', 't', NULL, '123 any st', NULL, NULL, NULL, NULL, NULL, 'here', 'NE', '12345', NULL, NULL, NULL, NULL, 't');drop table delete_restriction;CREATE TABLE delete_restriction (    id_author integer DEFAULT 0 NOT NULL,    id_author_last_mod integer NOT NULL,    timestamp_created timestamp with time zone DEFAULT "timestamp"('now'::text) NOT NULL,    timestamp_last_mod timestamp with time zone DEFAULT "timestamp"('now'::text) NOT NULL,    parent_table_name varchar,    child_table_name varchar,    child_fk_name varchar);insert into delete_restriction (id_author, id_author_last_mod, parent_table_name, child_table_name, child_fk_name) VALUES (1000254, 1000254, 'iep_student', 'iep_form_001', 'id_student');insert into delete_restriction (id_author, id_author_last_mod, parent_table_name, child_table_name, child_fk_name) VALUES (1000254, 1000254, 'iep_student', 'iep_form_002', 'id_student');insert into delete_restriction (id_author, id_author_last_mod, parent_table_name, child_table_name, child_fk_name) VALUES (1000254, 1000254, 'iep_student', 'iep_form_003', 'id_student');-- 20061117 jlavere-- function designed to return bool for existance of rows for tablename, pkname and key-- true if rows exist-- false if no rows exist--drop function exists_subrows(varchar, varchar, integer);CREATE or Replace FUNCTION exists_subrows(text, text, integer) RETURNS boolean as $$DECLARE    TABLE_NAME alias for $1;    FKKEY_NAME alias for $2;    FKKEY_VALUE alias for $3;    WORKING_REC record;    input_refc              refcursor;    query_string            VARCHAR(1000);BEGIN    --RAISE NOTICE 'TABLE_NAME: %', TABLE_NAME;    --RAISE NOTICE 'FKKEY_NAME: %', FKKEY_NAME;            --RAISE NOTICE 'FKKEY_VALUE: %', FKKEY_VALUE;            query_string = 'SELECT count(1) FROM ' || quote_ident(TABLE_NAME) || ' WHERE ' || quote_ident(FKKEY_NAME) || ' = ''' || FKKEY_VALUE || ''';';        RAISE NOTICE 'query_string: %', query_string;    OPEN input_refc FOR EXECUTE query_string;    FETCH input_refc into WORKING_REC;    CLOSE input_refc;    --    -- RETURN NULL IF SUBROWS FOUND    --    IF NOT FOUND THEN      --RAISE NOTICE 'select failure in validate_delete.';      return false;    ELSE        IF WORKING_REC.count > 0 THEN            --RAISE NOTICE 'forms found: %', WORKING_REC.count;            RETURN true;        ELSE            --RAISE NOTICE 'forms not found: %', WORKING_REC.count;            RETURN false;        END IF;    END IF;END;$$    LANGUAGE plpgsql;select exists_subrows('iep_student', 'id_student', '1216227') as test;select exists_subrows('iep_form_001', 'id_student', '1216227');delete from iep_student where id_student ='1216227';SELECT count(1) FROM iep_form_001 WHERE id_student = '1001077';-- select supp forms that do not have a parent iepselect count(1) from iep_form_004_supp f where not exists (select true from iep_form_004 where iep_form_004.id_form_004 = f.id_form_004);tar -czf srs_20070807JL.tar srs/================================pg8-start will start the postgres 8 DB serverpg8-stop will stop 8psql8 will fire up the appropriate psql clientrm -f /home/postgres8/data/postmaster.pidssh jlavere@iep.nebraskacloud.orgu129.93.94.14ssh jlavere@jabez.soliantconsulting.comssh jlavere@209.242.196.98g0dr3cnalg0dr3cnaldevsu - -p&UJM1qazsu -p postgrespsql -h iepdata.unl.edu iep_db/usr/local/src/php-5.0.3/sapi/cli/php /var/www/jlavere/AHG/import/users.phpsu -p postgrespsql8 ahgsu -p postgrespsql8 iep_shangsu -p postgrespsql8 test_appleselect * from users where user_id = 'U0000016';/usr/local/pgsql8/bin/postmaster -i -D /usr/local/pgsql8/data >logfile 2>&1 &cd /var/www/srs-devpostgres -i -D /var/lib/pgsql/data >logfile 2>&1 &jlavere/g0dr3cnalg1dr3cnalMaster access is:su - -pqaw0o9zx for live&UJM1qaz for devHyperion (RDC)192.168.101.116pg_dump -d iep_db -s > jesse_schema.txtsudo gunzip < 2007-01-10-020001_pgdata_oldstyle.gz > /home/jlavere/engine_rebuild_live.txtcreatedb -E SQL_ASCII april_fourthpsql april_fourth < /home/postgres/april_fourth_07.txt// =====================================================================================// =====================================================================================http://iepdev.harvill.net/srs/logon.php?count=1&option=1&ferpa=agree&userName=slane&password=ithaka999---- tail a file--tail -50 postgresql-Fri.logtail -f postgresql-Fri.log---- greping--grep -n 1048554 postgresql-Thu.log -C 6-C 6 = context of 6 lines// user classes$UC_SA  = 1;                                                // system admin$UC_DM  = 2;                                                // district manager$UC_ADM = 3;                                                // associate district manager$UC_SM  = 4;                                                // school manager$UC_ASM = 5;                                                // associate school manager$UC_CM  = 6;                                                // case manager$UC_SS  = 7;                                                // school staff$UC_SP  = 8;                                                // specialist$UC_PG  = 9;                                                // parent/guardian$UC_SC  = 10;           // service coordinatorcd /Jobs/srs/print-scriptscvs commit print-scriptsexport CVSROOT=:pserver:jlavere@jabez.soliantconsulting.com:/home/cvs/rootexport EDITOR=emacscvs logincvs update./runtest.pl test/form003.2.txtcvs commit .on srs as rootcd /home/jlavere/print-scriptscvs updatemake installssh jlavere@iep.nebraskacloud.orgug0dr3cnalsu - -pqaw0o9zx//backup serverssh iep@secd.unl.edu20061116 - when moving files to the harvill server, make sure ssl is off and passed ssl variable is used instead of just yes flag for ssl// stop postmasterpg_ctl -m fast stop did work==================AS3admin: dev/123login: dev/123======//ppn importcd /usr/apachesecure0/htdocs/srs/imports//usr/local/bin/php -c /opt/backup/scripts/php.ini /usr/apachesecure0/htdocs/srs/import.php PPN.live.confsvn commit -m 'message'svn add http://xanthos/vcontrol/srs/head/formproc -m 'adding output folder'-- searching in filesWell, most of the time, I just use a 'find' with xargs:   find . -name '*.php' -print | xargs fgrep js2   find . -name '*.inc' -print | xargs fgrep js2symlinks can be used to hide files from svn// svn changes to dev// create new dir for holding srs output that should not be accessable via the webmkdir /var/srs// make formproc foldermkdir /var/srs/formprocsrs to do:recreate the folders that were removed such aslogssesis_unique_id_exportssesis_unique_id_importsphPGadminOK - I think it is back up now.When the webserver is stopped and restarted - you needto pass a directive on the command line, thusly:/usr/apachesecure0/bin/apachectl startsslthen plug in the SSL passphrase.I'll write it in this email - might be best to keep itbetween us - theoretically one could decrypt trafficto and from the SSL Apache using it:otemporaomoresLet me know if things are still broken, OK?Have a great night,Tomcurl -o msttcorefonts-1.3-4.noarch.rpm "http://www.mjmwired.net/resources/files/msttcorefonts-1.3-4.noarch.rpm"xanthos log files for apache/var/log/apache/error.log/var/log/apache2/error.log-- xanthos - example changing php.iniemacs /etc/php5/cgi/php.ini/etc/init.d/apache restartpg_dump -d iep_engine_rebuild -s > 20071120_schema.txtturn off register_globalsAction php5-script /cgi-bin/php5-noglobalsapparently you can't turn it on with .htaccess with the cgi-version of php (but you can turn it off)select column_name from information_schema.columnswhere table_name = 'ifsp_goals';----------------------------------------------------------------------making a new SVN repos and importing into itsudo ./make_repos demo_symantecthen in the project folder to importsvn import http://xanthos.soliantconsulting.com/vcontrol/demo_symantec/head/ -m "First Import"http://xanthos.soliantconsulting.com/srs/logon.php?option=1&userName=slane&password=ithaka999&ferpa=1&sessOfflineViewerSession=1&count=1log insearch for studentsGo to http://xanthos.soliantconsulting.com/srs/srs.php?area=student&sub=list&exportStudents=1Then you can run sub searcheshttp://xanthos.soliantconsulting.com/srs/srs.php?area=offlineViewerAdditionalData&table=iep_form_001http://xanthos.soliantconsulting.com/srs/srs.php?area=offlineViewerAdditionalData&orderBy=date_family_concerns%20desc&table=iep_form_013_prevFLEXSetting up the crossdomain.xml file on xanthos// restore terminal// return charsstty sanetty's are terminal devices. �If you type 'who' in your terminal window, you'll see all the terminals in use on the computer and the terminal device names they are using.12:14On my Mac, that looks like:12:14thomasoa console �May �9 20:06 thomasoa ttys000 �May 10 22:47 thomasoa ttys001 �May 10 23:20 thomasoa ttys002 �May 13 14:42 thomasoa ttys003 �May 14 14:48 When it's not showing stuff you type, you can use:12:18"stty echo"12:18Which sets the tty to 'echo' what you type.select column_name from information_schema.columns where table_name = 'iep_form_018_agency';// app server conversion for srsxml rpcsoap// restart postgres on liveI just restarted the postgres db and things appear to work - please confirm.Procedure, on iepdata (as root):/etc/init.d/postgres8.1 stopps -ef | grep postgres (make sure its gone)/etc/init.d/postgres8.1 start // delete files in a dir older than three daysfind ./ -mtime +3 -exec rm {} \;It is running through and deleting files greater than 3 days old.-- restarting postgres on iepdata-- restarting postgres on iepdataHi Jesse,My opinion is to run this:/etc/init.d/postgresql8.1 reloador/etc/init.d/postgresql8.1 stopfollowed by/etc/init.d/postgresql8.1 startI did that and it should have read the new config... can you check that?Also - I put you in sudoers on iepdataTom -- restarting postgres on iepdata-- restarting postgres on iepdatahttp://confluence-dev.soliantconsulting.com:100813fjLotNkvHcVsftp accessconfluence-dev.soliantconsulting.comjlavere7.sNTKC;// ============================================================================// MDT issues copy code// copy the mdt to bickalinsert into iep_form_002_issues select * from iep_form_002 where id_form_002 = '1130660';update iep_form_002_issues set id_student = '1001077', id_form_002 = nextval('iep_form_002_id_form_002_seq') where id_form_002 = '1130660';insert into iep_form_002 (select * from iep_form_002_issues);-- update iep_form_002 set from Francis Gravel to All Participants:you can also do php -r 'phpinfo(); exit' | morefrom Jesse LaVere to All Participants:ahh, thanksfrom Brian Jackson to All Participants:or php -m |grep -i pdo from the command linepostgres pass - // restart apachesudo /etc/init.d/apache2 restart// apache logstail /var/log/apache2/error.log// database dump - on xanthospg_dump -d nebraska_survey > /tmp/20090826_survey_schema.txtcreatedb -E UTF8 nebraska_survey_newpsql nebraska_survey_new < /tmp/20090826_survey_schema.txtpsql -h localhost -U zend_framework nebraska_survey_too// ======================================================// ======================================================createdb -E UTF8 nebraska_survey_newpsql nebraska_survey_new < /var/www/nebraska_survey/data/css_machine_dump.txt// ======================================================// setting up a zend framework siteadd virtual host in httpd.conf    <VirtualHost *>    � �DocumentRoot /var/www/neb_srs_survey/public/    � �<Directory /var/www/neb_srs_survey/public/>    � � � �Order allow,deny    � � � �Allow from all    � � � �AllowOverride all    � �</Directory>    </VirtualHost>make sure mod_rewrite is enabledadd a .htaccess file in the public folder    RewriteEngine On        RewriteCond %{REQUEST_FILENAME} -s [OR]        RewriteCond %{REQUEST_FILENAME} -l [OR]        RewriteCond %{REQUEST_FILENAME} -d        RewriteRule ^.*$ - [NC,L]        RewriteRule ^.*$ /index.php [NC,L]    // ======================================================// ======================================================// ======================================================// localsudo /Applications/ZendServer/bin/zendctl.sh restart// ======================================================// ======================================================// update nssrs transfers with the student entry date functionupdate nssrs_transfers set nssrs_033 = to_char(get_student_entry_date (id_student), 'YYYY-MM-DD') ;// ======================================================// ======================================================// ZEND FRAMEWORK DEVELOPMENT SERVER// ======================================================// ======================================================// zend server pagehttp://76.73.42.108:10081/srs has a r9ck Star// project home pagehttp://76.73.42.108:10090/// ssh loginssh jlavere@76.73.42.108jester// postgres accesssudo su postgrespsql iep_dev// svn repositorycd /var/www/neb_srssvn update//check the bootstrap to be sure the environment is corrent// ======================================================// ======================================================// (ORGIN MACHINE) moving the db from one machine to anotherpg_dump iep_local | gzip >/Users/shared/20091019_dbout.gz// (DESTINATION MACHINE) unzip the filesudo gunzip < 20091019_dbout.gz > /home/postgres/20091019_dbout.txtcreatedb -E SQL_ASCII iep_import_testpsql -p 5433 iep_import_test < /home/postgres/20091019_dbout.txt// ======================================================// ======================================================// oct 19th move from local to dev    //local    pg_dump iep_local | gzip >/Users/shared/20091019_dbout.gz// moved file to server// unzipsudo gunzip < /home/jlavere/20091019_dbout.gz > /home/jlavere/20091019_dbout2.txtsudo mv /home/jlavere/20091019_dbout2.txt /var/lib/postgresql/20091019_dbout2.txtsudo su postgrescreatedb -E SQL_ASCII iep_devpsql iep_dev < /var/lib/postgresql/20091019_dbout2.txtcd /var/www/neb_srssvn update// /var/lib/pgsql/backups/20091101.backup===============================================================================================-- import the new dbsu - postgrescreatedb -E SQL_ASCII iep_dbpsql -d iep_db -p 5433 < /home/postgres/2007_preEngineRebuild.txt-- finished without error===============================================================================================// ======================================================surveys css machine:ssh jlavere@76.73.39.102FFxhWvH3sudo su -p postgrespsql nebraska_surveycd /var/www/neb_srs_surveygunzip < ns.gz > survey_database.txtpsql -d nebraska_survey < /var/tmp/survey_database.txt/var/www/html/srs/include_form_head_004am.php# csropenssl genrsa -out surveyme.unl.edu.key 1024openssl req -new -key surveyme.unl.edu.key -out surveyme.unl.edu.csr# starting survey site/etc/init.d/zend-server start# surveyme passphrasewadelikescheesefind . -name '*.php' -print | xargs fgrep -lr 'class Config'// configure iepweb02.nebraskacloud.orghttp://129.93.254.144:10081/openssl genrsa -out iepweb02.nebraskacloud.org.key 2048Admin Login: administrator Password: Support1brian neumann (to All):it is radar and pw is revenuepg_dump -d iep_db > /tmp/20100608dump.txttar -czf srs_20070807JL.tar srs/pg_dump -h iepdatastage.nebraskacloud.org -d iep_db -U postgres | gzip > /tmp/20100608dump.txtcp srs-zf/application/config/application.ini srs-zf_new/application/config/application.inicd srs-zf/public/js/dojo_development/dojo_source/util/buildscripts/./build.sh profileFile=../../../../../../scripts/dojoBuildScripts/srs.profile.js action=release cssOptimize=comments optimize=shrinkSafe releaseDir="../../../../dojo_production" version="1.6.1.prod"cd ../../../../../../../=========== oldssh root@iepweb01.unl.edu-- old serverssh jlavere@iepweb.unl.edug0dr3cnalsudo su - -pg0dr3cnalCOPY (SELECT foo,bar FROM whatever) TO '/tmp/dump.csv' WITH CSV HEADER reload postgres on xanthospg_ctl -D /usr/local/postgres/data stop -m fastCREATE TABLE my_template_form_data (    id_my_template_data serial,    table_id integer,    table_name character varying,    table_keys character varying,    table_data character varying,    id_student integer,    student_name character varying,    date_created date,    date_deleted date,    status character varying,    created_by integer,    id_personnel integer,    template_type character varying);// get a revisionsvn checkout -r 1811 http://xanthos.soliantconsulting.com/vcontrol/srs-zf srs-zf_newcp srs-zf/public/.htaccess srs-zf_new/public/chmod -R 777 srs-zf_new/public/sproxychmod -R 777 srs-zf_new/public/tempmkdir srs-zf_new/tempchmod -R 777 srs-zf_new/tempchmod -R 777 srs-zf_new/library/App/Filter/Htmlpurifier/HTMLPurifier/DefinitionCache/Serializerchmod -R 777 srs-zf_new/application/user_images/uploaded_pdfmv srs-zf srs-zf_oldmv srs-zf_new srs-zfapachectl restart/Library/PostgreSQL/8.4/bin/createdb -E SQL_ASCII iep_new/Library/PostgreSQL/8.4/bin/psql -d iep_new < /Users/jlavere/20110616_full.txt // dev postgres 9// create the db/usr/local/pgsql/bin/dropdb -p 5433 iep_srs_db -U postgres/usr/local/pgsql/bin/createdb -p 5433 -E SQL_ASCII iep_srs_db -U postgres -T template0// move schema and data to postgres 9/usr/bin/pg_dump -p 5432 iep_db -U postgres | /usr/local/pgsql/bin/psql -p 5433 -d iep_srs_db -U postgres/usr/local/pgsql/bin/createdb -p 5433 -E SQL_ASCII iep_destination_db -U postgres -T template0/Library/PostgreSQL/8.4/bin/createdb -E SQL_ASCII iep_srs_local -U postgres -T template0/usr/local/pgsql/bin/createdb -p 5433 -E SQL_ASCII iep_destination_db -U postgres -T template0// dropping/creating example db/usr/local/pgsql/bin/dropdb -p 5433 iep_destination_db -U postgres/usr/local/pgsql/bin/createdb -p 5433 -E SQL_ASCII iep_destination_db -U postgres -T template0/usr/local/pgsql/bin/psql -p 5433 -d iep_destination_db -U postgres/usr/local/pgsql/bin/dropdb -p 5433 iep_srs_test_db -U postgres/usr/local/pgsql/bin/createdb -p 5433 -E SQL_ASCII iep_srs_test_db -U postgres -T template0/usr/local/pgsql/bin/psql -p 5433 -d iep_srs_test_db -U postgres====================================================== 20110726 Postgres migration=========================== on iepdata===========================-- in postgres-- turned on oids as default in pg9/usr/local/psql-primary/bin/createdb -p 5434 -E SQL_ASCII nebraska_srs -T template0 -U psql-primary-- connect to db/usr/local/psql-primary/bin/psql -p 5434 -d nebraska_srs -U psql-primary-- move schema and data to postgres 9sudo su postgres/usr/bin/pg_dump -p 5432 iep_db -U postgres | /usr/local/psql-primary/bin/psql -p 5434 -d nebraska_srs -U psql-primary-- start over/usr/local/psql-primary/bin/dropdb -p 5434 nebraska_srs -U psql-primary======================================================/usr/local/psql-archive/bin/createdb -p 5435 -E SQL_ASCII nebraska_srs -T template0 -U psql-archive-- connect to db/usr/local/psql-archive/bin/psql -p 5435 -d nebraska_srs -U psql-archiveCREATE ROLE postgres;CREATE ROLE stylesoft;CREATE ROLE stylescope;-- move schema (no data) to archive db/usr/local/psql-primary/bin/pg_dump -p 5434 nebraska_srs -U psql-primary -s | /usr/local/psql-archive/bin/psql -p 5435 -d nebraska_srs -U psql-archive-- start over/usr/local/psql-archive/bin/dropdb -p 5435 nebraska_srs -U psql-archive===================================================================================================-- spellcheckeriepwe02.nebraska.orgspellcheckerhttps://iepweb02.nebraskacloud.org/spellcheck/https://iepweb02.nebraskacloud.org/spellcheck/samples/https://iepweb02.nebraskacloud.org/sproxy/sproxy.php?cmd=ver-- config spellchecker proxy/opt/WSC/WebComponents/proxy/vi /opt/WSC/WebComponents/proxy/sproxy.ini-- start/stop spellcheck server/opt/WSC/AppServer/start.sh/opt/WSC/AppServer/stop.sh-- 20111122 debugging spell checker[root@iepweb02 ~]# more /opt/WSC/WebComponents/proxy/sproxy.ini###############################################################################	Main configuration variables##############################################################################service_host=https://iepweb02.nebraskacloud.org/spellcheckcustomerid=2:1ZDvH1-CBIXK-eH67o4-exnPo1-cba103-inH612-ETXUO3-nemrL1-9lPBP2#skip_ssl_certificate_checking=yesuserid:iepweb02license:2:1ZDvH1-CBIXK-eH67o4-exnPo1-cba103-inH612-ETXUO3-nemrL1-9lPBP2update iep_form_004 set 		--	finalized_date,--	finalized_student_name,	finalized_grade = '8',--	finalized_age,--	finalized_gender,--	finalized_parents,--	finalized_id_county,--	finalized_id_district,--	finalized_id_school,--	finalized_address,	finalized_dob = (select dob from iep_student s where s.id_student = iep_form_004.id_student)where id_form_004 = '1339030';select 	finalized_date,	finalized_student_name,	finalized_grade,	finalized_age,	finalized_gender,	finalized_parents,	finalized_id_county,	finalized_id_district,	finalized_id_school,	finalized_address,	finalized_dobfrom iep_form_004 where id_form_004 = '1339030';SELECT count(1) FROM iep_form_004 where status = 'Final' and date_conference < '1/6/2009';/usr/local/psql-primary/bin/pg_dump nebraska_srs -p 5434 -U psql-primary -t iep_form_010 | gzip > /tmp/2012pgdump-form010.gzpsql iep_local -U postgres < /Users/jlavere/Documents/2012pgdump-form010// dumping out a specific table to a compressed file/usr/local/psql-primary/bin/pg_dump nebraska_srs -p 5434 -U psql-primary -t deleted_forms| gzip >/tmp/deleted_forms_03242012.gz/usr/local/psql-primary/bin/pg_dump nebraska_srs -p 5434 -U psql-primary -t iep_session| gzip >/tmp/iep_session_03242012.gz/usr/local/psql-primary/bin/pg_dump nebraska_srs -p 5434 -U psql-primary -t iep_session_zend| gzip >/tmp/iep_session_zend_03242012.gz/usr/local/psql-primary/bin/pg_dump nebraska_srs -p 5434 -U psql-primary | gzip >/tmp/nebraska_srs_03242012.gzalter table student_search rename to testrename_student_search;alter table student_search4 rename to testrename_student_search4;alter table student_search4_nostudentrec rename to testrename_student_search4_nostudentrec;alter table student_search_rows rename to testrename_student_search_rows;alter table testrename_student_search rename to student_search;alter table testrename_student_search4 rename to student_search4;alter table testrename_student_search4_nostudentrec rename to student_search4_nostudentrec;alter table testrename_student_search_rows rename to student_search_rows;/usr/local/psql-primary/bin/psql -p 5434 -d nebraska_srs -U psql-primary < /notraid/may_fourteenth.txtabort;begin;delete from iep_guardian g where exists (select 1 from iep_student where g.id_student=iep_student.id_student and id_county='77' and id_district='0027'); -- remove parentsdelete from iep_student where id_county='77' and id_district='0027' and status ='Inactive' and form_count(id_student)=0;We are Set to go on the FTP side.The address is 205.202.37.245Username: srs01Password: P0werschoolftp srs01@205.202.37.245ftp 205.202.37.245srs01P0werschool