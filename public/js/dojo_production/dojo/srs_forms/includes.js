/*
	Copyright (c) 2004-2011, The Dojo Foundation All Rights Reserved.
	Available via Academic Free License >= 2.1 OR the modified BSD license.
	see: http://dojotoolkit.org/license for details
*/

/*
	This is an optimized version of Dojo, built for deployment and not for
	development. To get sources and documentation, please visit:

		http://dojotoolkit.org
*/

if(!dojo._hasResource["dijit._base.manager"]){dojo._hasResource["dijit._base.manager"]=true;dojo.provide("dijit._base.manager");dojo.declare("dijit.WidgetSet",null,{constructor:function(){this._hash={};this.length=0;},add:function(_1){if(this._hash[_1.id]){throw new Error("Tried to register widget with id=="+_1.id+" but that id is already registered");}this._hash[_1.id]=_1;this.length++;},remove:function(id){if(this._hash[id]){delete this._hash[id];this.length--;}},forEach:function(_2,_3){_3=_3||dojo.global;var i=0,id;for(id in this._hash){_2.call(_3,this._hash[id],i++,this._hash);}return this;},filter:function(_4,_5){_5=_5||dojo.global;var _6=new dijit.WidgetSet(),i=0,id;for(id in this._hash){var w=this._hash[id];if(_4.call(_5,w,i++,this._hash)){_6.add(w);}}return _6;},byId:function(id){return this._hash[id];},byClass:function(_7){var _8=new dijit.WidgetSet(),id,_9;for(id in this._hash){_9=this._hash[id];if(_9.declaredClass==_7){_8.add(_9);}}return _8;},toArray:function(){var ar=[];for(var id in this._hash){ar.push(this._hash[id]);}return ar;},map:function(_a,_b){return dojo.map(this.toArray(),_a,_b);},every:function(_c,_d){_d=_d||dojo.global;var x=0,i;for(i in this._hash){if(!_c.call(_d,this._hash[i],x++,this._hash)){return false;}}return true;},some:function(_e,_f){_f=_f||dojo.global;var x=0,i;for(i in this._hash){if(_e.call(_f,this._hash[i],x++,this._hash)){return true;}}return false;}});(function(){dijit.registry=new dijit.WidgetSet();var _10=dijit.registry._hash,_11=dojo.attr,_12=dojo.hasAttr,_13=dojo.style;dijit.byId=function(id){return typeof id=="string"?_10[id]:id;};var _14={};dijit.getUniqueId=function(_15){var id;do{id=_15+"_"+(_15 in _14?++_14[_15]:_14[_15]=0);}while(_10[id]);return dijit._scopeName=="dijit"?id:dijit._scopeName+"_"+id;};dijit.findWidgets=function(_16){var _17=[];function _18(_19){for(var _1a=_19.firstChild;_1a;_1a=_1a.nextSibling){if(_1a.nodeType==1){var _1b=_1a.getAttribute("widgetId");if(_1b){var _1c=_10[_1b];if(_1c){_17.push(_1c);}}else{_18(_1a);}}}};_18(_16);return _17;};dijit._destroyAll=function(){dijit._curFocus=null;dijit._prevFocus=null;dijit._activeStack=[];dojo.forEach(dijit.findWidgets(dojo.body()),function(_1d){if(!_1d._destroyed){if(_1d.destroyRecursive){_1d.destroyRecursive();}else{if(_1d.destroy){_1d.destroy();}}}});};if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit._destroyAll();});}dijit.byNode=function(_1e){return _10[_1e.getAttribute("widgetId")];};dijit.getEnclosingWidget=function(_1f){while(_1f){var id=_1f.getAttribute&&_1f.getAttribute("widgetId");if(id){return _10[id];}_1f=_1f.parentNode;}return null;};var _20=(dijit._isElementShown=function(_21){var s=_13(_21);return (s.visibility!="hidden")&&(s.visibility!="collapsed")&&(s.display!="none")&&(_11(_21,"type")!="hidden");});dijit.hasDefaultTabStop=function(_22){switch(_22.nodeName.toLowerCase()){case "a":return _12(_22,"href");case "area":case "button":case "input":case "object":case "select":case "textarea":return true;case "iframe":var _23;try{var _24=_22.contentDocument;if("designMode" in _24&&_24.designMode=="on"){return true;}_23=_24.body;}catch(e1){try{_23=_22.contentWindow.document.body;}catch(e2){return false;}}return _23.contentEditable=="true"||(_23.firstChild&&_23.firstChild.contentEditable=="true");default:return _22.contentEditable=="true";}};var _25=(dijit.isTabNavigable=function(_26){if(_11(_26,"disabled")){return false;}else{if(_12(_26,"tabIndex")){return _11(_26,"tabIndex")>=0;}else{return dijit.hasDefaultTabStop(_26);}}});dijit._getTabNavigable=function(_27){var _28,_29,_2a,_2b,_2c,_2d,_2e={};function _2f(_30){return _30&&_30.tagName.toLowerCase()=="input"&&_30.type&&_30.type.toLowerCase()=="radio"&&_30.name&&_30.name.toLowerCase();};var _31=function(_32){dojo.query("> *",_32).forEach(function(_33){if((dojo.isIE&&_33.scopeName!=="HTML")||!_20(_33)){return;}if(_25(_33)){var _34=_11(_33,"tabIndex");if(!_12(_33,"tabIndex")||_34==0){if(!_28){_28=_33;}_29=_33;}else{if(_34>0){if(!_2a||_34<_2b){_2b=_34;_2a=_33;}if(!_2c||_34>=_2d){_2d=_34;_2c=_33;}}}var rn=_2f(_33);if(dojo.attr(_33,"checked")&&rn){_2e[rn]=_33;}}if(_33.nodeName.toUpperCase()!="SELECT"){_31(_33);}});};if(_20(_27)){_31(_27);}function rs(_35){return _2e[_2f(_35)]||_35;};return {first:rs(_28),last:rs(_29),lowest:rs(_2a),highest:rs(_2c)};};dijit.getFirstInTabbingOrder=function(_36){var _37=dijit._getTabNavigable(dojo.byId(_36));return _37.lowest?_37.lowest:_37.first;};dijit.getLastInTabbingOrder=function(_38){var _39=dijit._getTabNavigable(dojo.byId(_38));return _39.last?_39.last:_39.highest;};dijit.defaultDuration=dojo.config["defaultDuration"]||200;})();}if(!dojo._hasResource["dojo.Stateful"]){dojo._hasResource["dojo.Stateful"]=true;dojo.provide("dojo.Stateful");dojo.declare("dojo.Stateful",null,{postscript:function(_3a){if(_3a){dojo.mixin(this,_3a);}},get:function(_3b){return this[_3b];},set:function(_3c,_3d){if(typeof _3c==="object"){for(var x in _3c){this.set(x,_3c[x]);}return this;}var _3e=this[_3c];this[_3c]=_3d;if(this._watchCallbacks){this._watchCallbacks(_3c,_3e,_3d);}return this;},watch:function(_3f,_40){var _41=this._watchCallbacks;if(!_41){var _42=this;_41=this._watchCallbacks=function(_43,_44,_45,_46){var _47=function(_48){if(_48){_48=_48.slice();for(var i=0,l=_48.length;i<l;i++){try{_48[i].call(_42,_43,_44,_45);}catch(e){console.error(e);}}}};_47(_41["_"+_43]);if(!_46){_47(_41["*"]);}};}if(!_40&&typeof _3f==="function"){_40=_3f;_3f="*";}else{_3f="_"+_3f;}var _49=_41[_3f];if(typeof _49!=="object"){_49=_41[_3f]=[];}_49.push(_40);return {unwatch:function(){_49.splice(dojo.indexOf(_49,_40),1);}};}});}if(!dojo._hasResource["dijit._WidgetBase"]){dojo._hasResource["dijit._WidgetBase"]=true;dojo.provide("dijit._WidgetBase");(function(){dojo.declare("dijit._WidgetBase",dojo.Stateful,{id:"",lang:"",dir:"","class":"",style:"",title:"",tooltip:"",baseClass:"",srcNodeRef:null,domNode:null,containerNode:null,attributeMap:{id:"",dir:"",lang:"","class":"",style:"",title:""},_blankGif:(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif")).toString(),postscript:function(_4a,_4b){this.create(_4a,_4b);},create:function(_4c,_4d){this.srcNodeRef=dojo.byId(_4d);this._connects=[];this._subscribes=[];if(this.srcNodeRef&&(typeof this.srcNodeRef.id=="string")){this.id=this.srcNodeRef.id;}if(_4c){this.params=_4c;dojo._mixin(this,_4c);}this.postMixInProperties();if(!this.id){this.id=dijit.getUniqueId(this.declaredClass.replace(/\./g,"_"));}dijit.registry.add(this);this.buildRendering();if(this.domNode){this._applyAttributes();var _4e=this.srcNodeRef;if(_4e&&_4e.parentNode&&this.domNode!==_4e){_4e.parentNode.replaceChild(this.domNode,_4e);}}if(this.domNode){this.domNode.setAttribute("widgetId",this.id);}this.postCreate();if(this.srcNodeRef&&!this.srcNodeRef.parentNode){delete this.srcNodeRef;}this._created=true;},_applyAttributes:function(){var _4f=function(_50,_51){if((_51.params&&_50 in _51.params)||_51[_50]){_51.set(_50,_51[_50]);}};for(var _52 in this.attributeMap){_4f(_52,this);}dojo.forEach(this._getSetterAttributes(),function(a){if(!(a in this.attributeMap)){_4f(a,this);}},this);},_getSetterAttributes:function(){var _53=this.constructor;if(!_53._setterAttrs){var r=(_53._setterAttrs=[]),_54,_55=_53.prototype;for(var _56 in _55){if(dojo.isFunction(_55[_56])&&(_54=_56.match(/^_set([a-zA-Z]*)Attr$/))&&_54[1]){r.push(_54[1].charAt(0).toLowerCase()+_54[1].substr(1));}}}return _53._setterAttrs;},postMixInProperties:function(){},buildRendering:function(){if(!this.domNode){this.domNode=this.srcNodeRef||dojo.create("div");}if(this.baseClass){var _57=this.baseClass.split(" ");if(!this.isLeftToRight()){_57=_57.concat(dojo.map(_57,function(_58){return _58+"Rtl";}));}dojo.addClass(this.domNode,_57);}},postCreate:function(){},startup:function(){this._started=true;},destroyRecursive:function(_59){this._beingDestroyed=true;this.destroyDescendants(_59);this.destroy(_59);},destroy:function(_5a){this._beingDestroyed=true;this.uninitialize();var d=dojo,dfe=d.forEach,dun=d.unsubscribe;dfe(this._connects,function(_5b){dfe(_5b,d.disconnect);});dfe(this._subscribes,function(_5c){dun(_5c);});dfe(this._supportingWidgets||[],function(w){if(w.destroyRecursive){w.destroyRecursive();}else{if(w.destroy){w.destroy();}}});this.destroyRendering(_5a);dijit.registry.remove(this.id);this._destroyed=true;},destroyRendering:function(_5d){if(this.bgIframe){this.bgIframe.destroy(_5d);delete this.bgIframe;}if(this.domNode){if(_5d){dojo.removeAttr(this.domNode,"widgetId");}else{dojo.destroy(this.domNode);}delete this.domNode;}if(this.srcNodeRef){if(!_5d){dojo.destroy(this.srcNodeRef);}delete this.srcNodeRef;}},destroyDescendants:function(_5e){dojo.forEach(this.getChildren(),function(_5f){if(_5f.destroyRecursive){_5f.destroyRecursive(_5e);}});},uninitialize:function(){return false;},_setClassAttr:function(_60){var _61=this[this.attributeMap["class"]||"domNode"];dojo.replaceClass(_61,_60,this["class"]);this._set("class",_60);},_setStyleAttr:function(_62){var _63=this[this.attributeMap.style||"domNode"];if(dojo.isObject(_62)){dojo.style(_63,_62);}else{if(_63.style.cssText){_63.style.cssText+="; "+_62;}else{_63.style.cssText=_62;}}this._set("style",_62);},_attrToDom:function(_64,_65){var _66=this.attributeMap[_64];dojo.forEach(dojo.isArray(_66)?_66:[_66],function(_67){var _68=this[_67.node||_67||"domNode"];var _69=_67.type||"attribute";switch(_69){case "attribute":if(dojo.isFunction(_65)){_65=dojo.hitch(this,_65);}var _6a=_67.attribute?_67.attribute:(/^on[A-Z][a-zA-Z]*$/.test(_64)?_64.toLowerCase():_64);dojo.attr(_68,_6a,_65);break;case "innerText":_68.innerHTML="";_68.appendChild(dojo.doc.createTextNode(_65));break;case "innerHTML":_68.innerHTML=_65;break;case "class":dojo.replaceClass(_68,_65,this[_64]);break;}},this);},get:function(_6b){var _6c=this._getAttrNames(_6b);return this[_6c.g]?this[_6c.g]():this[_6b];},set:function(_6d,_6e){if(typeof _6d==="object"){for(var x in _6d){this.set(x,_6d[x]);}return this;}var _6f=this._getAttrNames(_6d);if(this[_6f.s]){var _70=this[_6f.s].apply(this,Array.prototype.slice.call(arguments,1));}else{if(_6d in this.attributeMap){this._attrToDom(_6d,_6e);}this._set(_6d,_6e);}return _70||this;},_attrPairNames:{},_getAttrNames:function(_71){var apn=this._attrPairNames;if(apn[_71]){return apn[_71];}var uc=_71.charAt(0).toUpperCase()+_71.substr(1);return (apn[_71]={n:_71+"Node",s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(_72,_73){var _74=this[_72];this[_72]=_73;if(this._watchCallbacks&&this._created&&_73!==_74){this._watchCallbacks(_72,_74,_73);}},toString:function(){return "[Widget "+this.declaredClass+", "+(this.id||"NO ID")+"]";},getDescendants:function(){return this.containerNode?dojo.query("[widgetId]",this.containerNode).map(dijit.byNode):[];},getChildren:function(){return this.containerNode?dijit.findWidgets(this.containerNode):[];},connect:function(obj,_75,_76){var _77=[dojo._connect(obj,_75,this,_76)];this._connects.push(_77);return _77;},disconnect:function(_78){for(var i=0;i<this._connects.length;i++){if(this._connects[i]==_78){dojo.forEach(_78,dojo.disconnect);this._connects.splice(i,1);return;}}},subscribe:function(_79,_7a){var _7b=dojo.subscribe(_79,this,_7a);this._subscribes.push(_7b);return _7b;},unsubscribe:function(_7c){for(var i=0;i<this._subscribes.length;i++){if(this._subscribes[i]==_7c){dojo.unsubscribe(_7c);this._subscribes.splice(i,1);return;}}},isLeftToRight:function(){return this.dir?(this.dir=="ltr"):dojo._isBodyLtr();},placeAt:function(_7d,_7e){if(_7d.declaredClass&&_7d.addChild){_7d.addChild(this,_7e);}else{dojo.place(this.domNode,_7d,_7e);}return this;}});})();}if(!dojo._hasResource["dojo.window"]){dojo._hasResource["dojo.window"]=true;dojo.provide("dojo.window");dojo.getObject("window",true,dojo);dojo.window.getBox=function(){var _7f=(dojo.doc.compatMode=="BackCompat")?dojo.body():dojo.doc.documentElement;var _80=dojo._docScroll();return {w:_7f.clientWidth,h:_7f.clientHeight,l:_80.x,t:_80.y};};dojo.window.get=function(doc){if(dojo.isIE&&window!==document.parentWindow){doc.parentWindow.execScript("document._parentWindow = window;","Javascript");var win=doc._parentWindow;doc._parentWindow=null;return win;}return doc.parentWindow||doc.defaultView;};dojo.window.scrollIntoView=function(_81,pos){try{_81=dojo.byId(_81);var doc=_81.ownerDocument||dojo.doc,_82=doc.body||dojo.body(),_83=doc.documentElement||_82.parentNode,_84=dojo.isIE,_85=dojo.isWebKit;if((!(dojo.isMoz||_84||_85||dojo.isOpera)||_81==_82||_81==_83)&&(typeof _81.scrollIntoView!="undefined")){_81.scrollIntoView(false);return;}var _86=doc.compatMode=="BackCompat",_87=(_84>=9&&_81.ownerDocument.parentWindow.frameElement)?((_83.clientHeight>0&&_83.clientWidth>0&&(_82.clientHeight==0||_82.clientWidth==0||_82.clientHeight>_83.clientHeight||_82.clientWidth>_83.clientWidth))?_83:_82):(_86?_82:_83),_88=_85?_82:_87,_89=_87.clientWidth,_8a=_87.clientHeight,rtl=!dojo._isBodyLtr(),_8b=pos||dojo.position(_81),el=_81.parentNode,_8c=function(el){return ((_84<=6||(_84&&_86))?false:(dojo.style(el,"position").toLowerCase()=="fixed"));};if(_8c(_81)){return;}while(el){if(el==_82){el=_88;}var _8d=dojo.position(el),_8e=_8c(el);if(el==_88){_8d.w=_89;_8d.h=_8a;if(_88==_83&&_84&&rtl){_8d.x+=_88.offsetWidth-_8d.w;}if(_8d.x<0||!_84){_8d.x=0;}if(_8d.y<0||!_84){_8d.y=0;}}else{var pb=dojo._getPadBorderExtents(el);_8d.w-=pb.w;_8d.h-=pb.h;_8d.x+=pb.l;_8d.y+=pb.t;var _8f=el.clientWidth,_90=_8d.w-_8f;if(_8f>0&&_90>0){_8d.w=_8f;_8d.x+=(rtl&&(_84||el.clientLeft>pb.l))?_90:0;}_8f=el.clientHeight;_90=_8d.h-_8f;if(_8f>0&&_90>0){_8d.h=_8f;}}if(_8e){if(_8d.y<0){_8d.h+=_8d.y;_8d.y=0;}if(_8d.x<0){_8d.w+=_8d.x;_8d.x=0;}if(_8d.y+_8d.h>_8a){_8d.h=_8a-_8d.y;}if(_8d.x+_8d.w>_89){_8d.w=_89-_8d.x;}}var l=_8b.x-_8d.x,t=_8b.y-Math.max(_8d.y,0),r=l+_8b.w-_8d.w,bot=t+_8b.h-_8d.h;if(r*l>0){var s=Math[l<0?"max":"min"](l,r);if(rtl&&((_84==8&&!_86)||_84>=9)){s=-s;}_8b.x+=el.scrollLeft;el.scrollLeft+=s;_8b.x-=el.scrollLeft;}if(bot*t>0){_8b.y+=el.scrollTop;el.scrollTop+=Math[t<0?"max":"min"](t,bot);_8b.y-=el.scrollTop;}el=(el!=_88)&&!_8e&&el.parentNode;}}catch(error){console.error("scrollIntoView: "+error);_81.scrollIntoView(false);}};}if(!dojo._hasResource["dijit._base.focus"]){dojo._hasResource["dijit._base.focus"]=true;dojo.provide("dijit._base.focus");dojo.mixin(dijit,{_curFocus:null,_prevFocus:null,isCollapsed:function(){return dijit.getBookmark().isCollapsed;},getBookmark:function(){var bm,rg,tg,sel=dojo.doc.selection,cf=dijit._curFocus;if(dojo.global.getSelection){sel=dojo.global.getSelection();if(sel){if(sel.isCollapsed){tg=cf?cf.tagName:"";if(tg){tg=tg.toLowerCase();if(tg=="textarea"||(tg=="input"&&(!cf.type||cf.type.toLowerCase()=="text"))){sel={start:cf.selectionStart,end:cf.selectionEnd,node:cf,pRange:true};return {isCollapsed:(sel.end<=sel.start),mark:sel};}}bm={isCollapsed:true};if(sel.rangeCount){bm.mark=sel.getRangeAt(0).cloneRange();}}else{rg=sel.getRangeAt(0);bm={isCollapsed:false,mark:rg.cloneRange()};}}}else{if(sel){tg=cf?cf.tagName:"";tg=tg.toLowerCase();if(cf&&tg&&(tg=="button"||tg=="textarea"||tg=="input")){if(sel.type&&sel.type.toLowerCase()=="none"){return {isCollapsed:true,mark:null};}else{rg=sel.createRange();return {isCollapsed:rg.text&&rg.text.length?false:true,mark:{range:rg,pRange:true}};}}bm={};try{rg=sel.createRange();bm.isCollapsed=!(sel.type=="Text"?rg.htmlText.length:rg.length);}catch(e){bm.isCollapsed=true;return bm;}if(sel.type.toUpperCase()=="CONTROL"){if(rg.length){bm.mark=[];var i=0,len=rg.length;while(i<len){bm.mark.push(rg.item(i++));}}else{bm.isCollapsed=true;bm.mark=null;}}else{bm.mark=rg.getBookmark();}}else{console.warn("No idea how to store the current selection for this browser!");}}return bm;},moveToBookmark:function(_91){var _92=dojo.doc,_93=_91.mark;if(_93){if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.removeAllRanges){if(_93.pRange){var r=_93;var n=r.node;n.selectionStart=r.start;n.selectionEnd=r.end;}else{sel.removeAllRanges();sel.addRange(_93);}}else{console.warn("No idea how to restore selection for this browser!");}}else{if(_92.selection&&_93){var rg;if(_93.pRange){rg=_93.range;}else{if(dojo.isArray(_93)){rg=_92.body.createControlRange();dojo.forEach(_93,function(n){rg.addElement(n);});}else{rg=_92.body.createTextRange();rg.moveToBookmark(_93);}}rg.select();}}}},getFocus:function(_94,_95){var _96=!dijit._curFocus||(_94&&dojo.isDescendant(dijit._curFocus,_94.domNode))?dijit._prevFocus:dijit._curFocus;return {node:_96,bookmark:(_96==dijit._curFocus)&&dojo.withGlobal(_95||dojo.global,dijit.getBookmark),openedForWindow:_95};},focus:function(_97){if(!_97){return;}var _98="node" in _97?_97.node:_97,_99=_97.bookmark,_9a=_97.openedForWindow,_9b=_99?_99.isCollapsed:false;if(_98){var _9c=(_98.tagName.toLowerCase()=="iframe")?_98.contentWindow:_98;if(_9c&&_9c.focus){try{_9c.focus();}catch(e){}}dijit._onFocusNode(_98);}if(_99&&dojo.withGlobal(_9a||dojo.global,dijit.isCollapsed)&&!_9b){if(_9a){_9a.focus();}try{dojo.withGlobal(_9a||dojo.global,dijit.moveToBookmark,null,[_99]);}catch(e2){}}},_activeStack:[],registerIframe:function(_9d){return dijit.registerWin(_9d.contentWindow,_9d);},unregisterIframe:function(_9e){dijit.unregisterWin(_9e);},registerWin:function(_9f,_a0){var _a1=function(evt){dijit._justMouseDowned=true;setTimeout(function(){dijit._justMouseDowned=false;},0);if(dojo.isIE&&evt&&evt.srcElement&&evt.srcElement.parentNode==null){return;}dijit._onTouchNode(_a0||evt.target||evt.srcElement,"mouse");};var doc=dojo.isIE?_9f.document.documentElement:_9f.document;if(doc){if(dojo.isIE){_9f.document.body.attachEvent("onmousedown",_a1);var _a2=function(evt){if(evt.srcElement.tagName.toLowerCase()!="#document"&&dijit.isTabNavigable(evt.srcElement)){dijit._onFocusNode(_a0||evt.srcElement);}else{dijit._onTouchNode(_a0||evt.srcElement);}};doc.attachEvent("onactivate",_a2);var _a3=function(evt){dijit._onBlurNode(_a0||evt.srcElement);};doc.attachEvent("ondeactivate",_a3);return function(){_9f.document.detachEvent("onmousedown",_a1);doc.detachEvent("onactivate",_a2);doc.detachEvent("ondeactivate",_a3);doc=null;};}else{doc.body.addEventListener("mousedown",_a1,true);var _a4=function(evt){dijit._onFocusNode(_a0||evt.target);};doc.addEventListener("focus",_a4,true);var _a5=function(evt){dijit._onBlurNode(_a0||evt.target);};doc.addEventListener("blur",_a5,true);return function(){doc.body.removeEventListener("mousedown",_a1,true);doc.removeEventListener("focus",_a4,true);doc.removeEventListener("blur",_a5,true);doc=null;};}}},unregisterWin:function(_a6){_a6&&_a6();},_onBlurNode:function(_a7){dijit._prevFocus=dijit._curFocus;dijit._curFocus=null;if(dijit._justMouseDowned){return;}if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);}dijit._clearActiveWidgetsTimer=setTimeout(function(){delete dijit._clearActiveWidgetsTimer;dijit._setStack([]);dijit._prevFocus=null;},100);},_onTouchNode:function(_a8,by){if(dijit._clearActiveWidgetsTimer){clearTimeout(dijit._clearActiveWidgetsTimer);delete dijit._clearActiveWidgetsTimer;}var _a9=[];try{while(_a8){var _aa=dojo.attr(_a8,"dijitPopupParent");if(_aa){_a8=dijit.byId(_aa).domNode;}else{if(_a8.tagName&&_a8.tagName.toLowerCase()=="body"){if(_a8===dojo.body()){break;}_a8=dojo.window.get(_a8.ownerDocument).frameElement;}else{var id=_a8.getAttribute&&_a8.getAttribute("widgetId"),_ab=id&&dijit.byId(id);if(_ab&&!(by=="mouse"&&_ab.get("disabled"))){_a9.unshift(id);}_a8=_a8.parentNode;}}}}catch(e){}dijit._setStack(_a9,by);},_onFocusNode:function(_ac){if(!_ac){return;}if(_ac.nodeType==9){return;}dijit._onTouchNode(_ac);if(_ac==dijit._curFocus){return;}if(dijit._curFocus){dijit._prevFocus=dijit._curFocus;}dijit._curFocus=_ac;dojo.publish("focusNode",[_ac]);},_setStack:function(_ad,by){var _ae=dijit._activeStack;dijit._activeStack=_ad;for(var _af=0;_af<Math.min(_ae.length,_ad.length);_af++){if(_ae[_af]!=_ad[_af]){break;}}var _b0;for(var i=_ae.length-1;i>=_af;i--){_b0=dijit.byId(_ae[i]);if(_b0){_b0._focused=false;_b0.set("focused",false);_b0._hasBeenBlurred=true;if(_b0._onBlur){_b0._onBlur(by);}dojo.publish("widgetBlur",[_b0,by]);}}for(i=_af;i<_ad.length;i++){_b0=dijit.byId(_ad[i]);if(_b0){_b0._focused=true;_b0.set("focused",true);if(_b0._onFocus){_b0._onFocus(by);}dojo.publish("widgetFocus",[_b0,by]);}}}});dojo.addOnLoad(function(){var _b1=dijit.registerWin(window);if(dojo.isIE){dojo.addOnWindowUnload(function(){dijit.unregisterWin(_b1);_b1=null;});}});}if(!dojo._hasResource["dojo.AdapterRegistry"]){dojo._hasResource["dojo.AdapterRegistry"]=true;dojo.provide("dojo.AdapterRegistry");dojo.AdapterRegistry=function(_b2){this.pairs=[];this.returnWrappers=_b2||false;};dojo.extend(dojo.AdapterRegistry,{register:function(_b3,_b4,_b5,_b6,_b7){this.pairs[((_b7)?"unshift":"push")]([_b3,_b4,_b5,_b6]);},match:function(){for(var i=0;i<this.pairs.length;i++){var _b8=this.pairs[i];if(_b8[1].apply(this,arguments)){if((_b8[3])||(this.returnWrappers)){return _b8[2];}else{return _b8[2].apply(this,arguments);}}}throw new Error("No match found");},unregister:function(_b9){for(var i=0;i<this.pairs.length;i++){var _ba=this.pairs[i];if(_ba[0]==_b9){this.pairs.splice(i,1);return true;}}return false;}});}if(!dojo._hasResource["dijit._base.place"]){dojo._hasResource["dijit._base.place"]=true;dojo.provide("dijit._base.place");dijit.getViewport=function(){return dojo.window.getBox();};dijit.placeOnScreen=function(_bb,pos,_bc,_bd){var _be=dojo.map(_bc,function(_bf){var c={corner:_bf,pos:{x:pos.x,y:pos.y}};if(_bd){c.pos.x+=_bf.charAt(1)=="L"?_bd.x:-_bd.x;c.pos.y+=_bf.charAt(0)=="T"?_bd.y:-_bd.y;}return c;});return dijit._place(_bb,_be);};dijit._place=function(_c0,_c1,_c2,_c3){var _c4=dojo.window.getBox();if(!_c0.parentNode||String(_c0.parentNode.tagName).toLowerCase()!="body"){dojo.body().appendChild(_c0);}var _c5=null;dojo.some(_c1,function(_c6){var _c7=_c6.corner;var pos=_c6.pos;var _c8=0;var _c9={w:_c7.charAt(1)=="L"?(_c4.l+_c4.w)-pos.x:pos.x-_c4.l,h:_c7.charAt(1)=="T"?(_c4.t+_c4.h)-pos.y:pos.y-_c4.t};if(_c2){var res=_c2(_c0,_c6.aroundCorner,_c7,_c9,_c3);_c8=typeof res=="undefined"?0:res;}var _ca=_c0.style;var _cb=_ca.display;var _cc=_ca.visibility;_ca.visibility="hidden";_ca.display="";var mb=dojo.marginBox(_c0);_ca.display=_cb;_ca.visibility=_cc;var _cd=Math.max(_c4.l,_c7.charAt(1)=="L"?pos.x:(pos.x-mb.w)),_ce=Math.max(_c4.t,_c7.charAt(0)=="T"?pos.y:(pos.y-mb.h)),_cf=Math.min(_c4.l+_c4.w,_c7.charAt(1)=="L"?(_cd+mb.w):pos.x),_d0=Math.min(_c4.t+_c4.h,_c7.charAt(0)=="T"?(_ce+mb.h):pos.y),_d1=_cf-_cd,_d2=_d0-_ce;_c8+=(mb.w-_d1)+(mb.h-_d2);if(_c5==null||_c8<_c5.overflow){_c5={corner:_c7,aroundCorner:_c6.aroundCorner,x:_cd,y:_ce,w:_d1,h:_d2,overflow:_c8,spaceAvailable:_c9};}return !_c8;});if(_c5.overflow&&_c2){_c2(_c0,_c5.aroundCorner,_c5.corner,_c5.spaceAvailable,_c3);}var l=dojo._isBodyLtr(),s=_c0.style;s.top=_c5.y+"px";s[l?"left":"right"]=(l?_c5.x:_c4.w-_c5.x-_c5.w)+"px";return _c5;};dijit.placeOnScreenAroundNode=function(_d3,_d4,_d5,_d6){_d4=dojo.byId(_d4);var _d7=dojo.position(_d4,true);return dijit._placeOnScreenAroundRect(_d3,_d7.x,_d7.y,_d7.w,_d7.h,_d5,_d6);};dijit.placeOnScreenAroundRectangle=function(_d8,_d9,_da,_db){return dijit._placeOnScreenAroundRect(_d8,_d9.x,_d9.y,_d9.width,_d9.height,_da,_db);};dijit._placeOnScreenAroundRect=function(_dc,x,y,_dd,_de,_df,_e0){var _e1=[];for(var _e2 in _df){_e1.push({aroundCorner:_e2,corner:_df[_e2],pos:{x:x+(_e2.charAt(1)=="L"?0:_dd),y:y+(_e2.charAt(0)=="T"?0:_de)}});}return dijit._place(_dc,_e1,_e0,{w:_dd,h:_de});};dijit.placementRegistry=new dojo.AdapterRegistry();dijit.placementRegistry.register("node",function(n,x){return typeof x=="object"&&typeof x.offsetWidth!="undefined"&&typeof x.offsetHeight!="undefined";},dijit.placeOnScreenAroundNode);dijit.placementRegistry.register("rect",function(n,x){return typeof x=="object"&&"x" in x&&"y" in x&&"width" in x&&"height" in x;},dijit.placeOnScreenAroundRectangle);dijit.placeOnScreenAroundElement=function(_e3,_e4,_e5,_e6){return dijit.placementRegistry.match.apply(dijit.placementRegistry,arguments);};dijit.getPopupAroundAlignment=function(_e7,_e8){var _e9={};dojo.forEach(_e7,function(pos){switch(pos){case "after":_e9[_e8?"BR":"BL"]=_e8?"BL":"BR";break;case "before":_e9[_e8?"BL":"BR"]=_e8?"BR":"BL";break;case "below-alt":_e8=!_e8;case "below":_e9[_e8?"BL":"BR"]=_e8?"TL":"TR";_e9[_e8?"BR":"BL"]=_e8?"TR":"TL";break;case "above-alt":_e8=!_e8;case "above":default:_e9[_e8?"TL":"TR"]=_e8?"BL":"BR";_e9[_e8?"TR":"TL"]=_e8?"BR":"BL";break;}});return _e9;};}if(!dojo._hasResource["dijit._base.window"]){dojo._hasResource["dijit._base.window"]=true;dojo.provide("dijit._base.window");dijit.getDocumentWindow=function(doc){return dojo.window.get(doc);};}if(!dojo._hasResource["dijit._base.popup"]){dojo._hasResource["dijit._base.popup"]=true;dojo.provide("dijit._base.popup");dijit.popup={_stack:[],_beginZIndex:1000,_idGen:1,_createWrapper:function(_ea){var _eb=_ea.declaredClass?_ea._popupWrapper:(_ea.parentNode&&dojo.hasClass(_ea.parentNode,"dijitPopup")),_ec=_ea.domNode||_ea;if(!_eb){_eb=dojo.create("div",{"class":"dijitPopup",style:{display:"none"},role:"presentation"},dojo.body());_eb.appendChild(_ec);var s=_ec.style;s.display="";s.visibility="";s.position="";s.top="0px";if(_ea.declaredClass){_ea._popupWrapper=_eb;dojo.connect(_ea,"destroy",function(){dojo.destroy(_eb);delete _ea._popupWrapper;});}}return _eb;},moveOffScreen:function(_ed){var _ee=this._createWrapper(_ed);dojo.style(_ee,{visibility:"hidden",top:"-9999px",display:""});},hide:function(_ef){var _f0=this._createWrapper(_ef);dojo.style(_f0,"display","none");},getTopPopup:function(){var _f1=this._stack;for(var pi=_f1.length-1;pi>0&&_f1[pi].parent===_f1[pi-1].widget;pi--){}return _f1[pi];},open:function(_f2){var _f3=this._stack,_f4=_f2.popup,_f5=_f2.orient||((_f2.parent?_f2.parent.isLeftToRight():dojo._isBodyLtr())?{"BL":"TL","BR":"TR","TL":"BL","TR":"BR"}:{"BR":"TR","BL":"TL","TR":"BR","TL":"BL"}),_f6=_f2.around,id=(_f2.around&&_f2.around.id)?(_f2.around.id+"_dropdown"):("popup_"+this._idGen++);while(_f3.length&&(!_f2.parent||!dojo.isDescendant(_f2.parent.domNode,_f3[_f3.length-1].widget.domNode))){dijit.popup.close(_f3[_f3.length-1].widget);}var _f7=this._createWrapper(_f4);dojo.attr(_f7,{id:id,style:{zIndex:this._beginZIndex+_f3.length},"class":"dijitPopup "+(_f4.baseClass||_f4["class"]||"").split(" ")[0]+"Popup",dijitPopupParent:_f2.parent?_f2.parent.id:""});if(dojo.isIE||dojo.isMoz){if(!_f4.bgIframe){_f4.bgIframe=new dijit.BackgroundIframe(_f7);}}var _f8=_f6?dijit.placeOnScreenAroundElement(_f7,_f6,_f5,_f4.orient?dojo.hitch(_f4,"orient"):null):dijit.placeOnScreen(_f7,_f2,_f5=="R"?["TR","BR","TL","BL"]:["TL","BL","TR","BR"],_f2.padding);_f7.style.display="";_f7.style.visibility="visible";_f4.domNode.style.visibility="visible";var _f9=[];_f9.push(dojo.connect(_f7,"onkeypress",this,function(evt){if(evt.charOrCode==dojo.keys.ESCAPE&&_f2.onCancel){dojo.stopEvent(evt);_f2.onCancel();}else{if(evt.charOrCode===dojo.keys.TAB){dojo.stopEvent(evt);var _fa=this.getTopPopup();if(_fa&&_fa.onCancel){_fa.onCancel();}}}}));if(_f4.onCancel){_f9.push(dojo.connect(_f4,"onCancel",_f2.onCancel));}_f9.push(dojo.connect(_f4,_f4.onExecute?"onExecute":"onChange",this,function(){var _fb=this.getTopPopup();if(_fb&&_fb.onExecute){_fb.onExecute();}}));_f3.push({widget:_f4,parent:_f2.parent,onExecute:_f2.onExecute,onCancel:_f2.onCancel,onClose:_f2.onClose,handlers:_f9});if(_f4.onOpen){_f4.onOpen(_f8);}return _f8;},close:function(_fc){var _fd=this._stack;while((_fc&&dojo.some(_fd,function(_fe){return _fe.widget==_fc;}))||(!_fc&&_fd.length)){var top=_fd.pop(),_ff=top.widget,_100=top.onClose;if(_ff.onClose){_ff.onClose();}dojo.forEach(top.handlers,dojo.disconnect);if(_ff&&_ff.domNode){this.hide(_ff);}if(_100){_100();}}}};dijit._frames=new function(){var _101=[];this.pop=function(){var _102;if(_101.length){_102=_101.pop();_102.style.display="";}else{if(dojo.isIE<9){var burl=dojo.config["dojoBlankHtmlUrl"]||(dojo.moduleUrl("dojo","resources/blank.html")+"")||"javascript:\"\"";var html="<iframe src='"+burl+"'"+" style='position: absolute; left: 0px; top: 0px;"+"z-index: -1; filter:Alpha(Opacity=\"0\");'>";_102=dojo.doc.createElement(html);}else{_102=dojo.create("iframe");_102.src="javascript:\"\"";_102.className="dijitBackgroundIframe";dojo.style(_102,"opacity",0.1);}_102.tabIndex=-1;dijit.setWaiRole(_102,"presentation");}return _102;};this.push=function(_103){_103.style.display="none";_101.push(_103);};}();dijit.BackgroundIframe=function(node){if(!node.id){throw new Error("no id");}if(dojo.isIE||dojo.isMoz){var _104=(this.iframe=dijit._frames.pop());node.appendChild(_104);if(dojo.isIE<7||dojo.isQuirks){this.resize(node);this._conn=dojo.connect(node,"onresize",this,function(){this.resize(node);});}else{dojo.style(_104,{width:"100%",height:"100%"});}}};dojo.extend(dijit.BackgroundIframe,{resize:function(node){if(this.iframe){dojo.style(this.iframe,{width:node.offsetWidth+"px",height:node.offsetHeight+"px"});}},destroy:function(){if(this._conn){dojo.disconnect(this._conn);this._conn=null;}if(this.iframe){dijit._frames.push(this.iframe);delete this.iframe;}}});}if(!dojo._hasResource["dijit._base.scroll"]){dojo._hasResource["dijit._base.scroll"]=true;dojo.provide("dijit._base.scroll");dijit.scrollIntoView=function(node,pos){dojo.window.scrollIntoView(node,pos);};}if(!dojo._hasResource["dojo.uacss"]){dojo._hasResource["dojo.uacss"]=true;dojo.provide("dojo.uacss");(function(){var d=dojo,html=d.doc.documentElement,ie=d.isIE,_105=d.isOpera,maj=Math.floor,ff=d.isFF,_106=d.boxModel.replace(/-/,""),_107={dj_ie:ie,dj_ie6:maj(ie)==6,dj_ie7:maj(ie)==7,dj_ie8:maj(ie)==8,dj_ie9:maj(ie)==9,dj_quirks:d.isQuirks,dj_iequirks:ie&&d.isQuirks,dj_opera:_105,dj_khtml:d.isKhtml,dj_webkit:d.isWebKit,dj_safari:d.isSafari,dj_chrome:d.isChrome,dj_gecko:d.isMozilla,dj_ff3:maj(ff)==3};_107["dj_"+_106]=true;var _108="";for(var clz in _107){if(_107[clz]){_108+=clz+" ";}}html.className=d.trim(html.className+" "+_108);dojo._loaders.unshift(function(){if(!dojo._isBodyLtr()){var _109="dj_rtl dijitRtl "+_108.replace(/ /g,"-rtl ");html.className=d.trim(html.className+" "+_109);}});})();}if(!dojo._hasResource["dijit._base.sniff"]){dojo._hasResource["dijit._base.sniff"]=true;dojo.provide("dijit._base.sniff");}if(!dojo._hasResource["dijit._base.typematic"]){dojo._hasResource["dijit._base.typematic"]=true;dojo.provide("dijit._base.typematic");dijit.typematic={_fireEventAndReload:function(){this._timer=null;this._callback(++this._count,this._node,this._evt);this._currentTimeout=Math.max(this._currentTimeout<0?this._initialDelay:(this._subsequentDelay>1?this._subsequentDelay:Math.round(this._currentTimeout*this._subsequentDelay)),this._minDelay);this._timer=setTimeout(dojo.hitch(this,"_fireEventAndReload"),this._currentTimeout);},trigger:function(evt,_10a,node,_10b,obj,_10c,_10d,_10e){if(obj!=this._obj){this.stop();this._initialDelay=_10d||500;this._subsequentDelay=_10c||0.9;this._minDelay=_10e||10;this._obj=obj;this._evt=evt;this._node=node;this._currentTimeout=-1;this._count=-1;this._callback=dojo.hitch(_10a,_10b);this._fireEventAndReload();this._evt=dojo.mixin({faux:true},evt);}},stop:function(){if(this._timer){clearTimeout(this._timer);this._timer=null;}if(this._obj){this._callback(-1,this._node,this._evt);this._obj=null;}},addKeyListener:function(node,_10f,_110,_111,_112,_113,_114){if(_10f.keyCode){_10f.charOrCode=_10f.keyCode;dojo.deprecated("keyCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}else{if(_10f.charCode){_10f.charOrCode=String.fromCharCode(_10f.charCode);dojo.deprecated("charCode attribute parameter for dijit.typematic.addKeyListener is deprecated. Use charOrCode instead.","","2.0");}}return [dojo.connect(node,"onkeypress",this,function(evt){if(evt.charOrCode==_10f.charOrCode&&(_10f.ctrlKey===undefined||_10f.ctrlKey==evt.ctrlKey)&&(_10f.altKey===undefined||_10f.altKey==evt.altKey)&&(_10f.metaKey===undefined||_10f.metaKey==(evt.metaKey||false))&&(_10f.shiftKey===undefined||_10f.shiftKey==evt.shiftKey)){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_110,node,_111,_10f,_112,_113,_114);}else{if(dijit.typematic._obj==_10f){dijit.typematic.stop();}}}),dojo.connect(node,"onkeyup",this,function(evt){if(dijit.typematic._obj==_10f){dijit.typematic.stop();}})];},addMouseListener:function(node,_115,_116,_117,_118,_119){var dc=dojo.connect;return [dc(node,"mousedown",this,function(evt){dojo.stopEvent(evt);dijit.typematic.trigger(evt,_115,node,_116,node,_117,_118,_119);}),dc(node,"mouseup",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mouseout",this,function(evt){dojo.stopEvent(evt);dijit.typematic.stop();}),dc(node,"mousemove",this,function(evt){evt.preventDefault();}),dc(node,"dblclick",this,function(evt){dojo.stopEvent(evt);if(dojo.isIE){dijit.typematic.trigger(evt,_115,node,_116,node,_117,_118,_119);setTimeout(dojo.hitch(this,dijit.typematic.stop),50);}})];},addListener:function(_11a,_11b,_11c,_11d,_11e,_11f,_120,_121){return this.addKeyListener(_11b,_11c,_11d,_11e,_11f,_120,_121).concat(this.addMouseListener(_11a,_11d,_11e,_11f,_120,_121));}};}if(!dojo._hasResource["dijit._base.wai"]){dojo._hasResource["dijit._base.wai"]=true;dojo.provide("dijit._base.wai");dijit.wai={onload:function(){var div=dojo.create("div",{id:"a11yTestNode",style:{cssText:"border: 1px solid;"+"border-color:red green;"+"position: absolute;"+"height: 5px;"+"top: -999px;"+"background-image: url(\""+(dojo.config.blankGif||dojo.moduleUrl("dojo","resources/blank.gif"))+"\");"}},dojo.body());var cs=dojo.getComputedStyle(div);if(cs){var _122=cs.backgroundImage;var _123=(cs.borderTopColor==cs.borderRightColor)||(_122!=null&&(_122=="none"||_122=="url(invalid-url:)"));dojo[_123?"addClass":"removeClass"](dojo.body(),"dijit_a11y");if(dojo.isIE){div.outerHTML="";}else{dojo.body().removeChild(div);}}}};if(dojo.isIE||dojo.isMoz){dojo._loaders.unshift(dijit.wai.onload);}dojo.mixin(dijit,{hasWaiRole:function(elem,role){var _124=this.getWaiRole(elem);return role?(_124.indexOf(role)>-1):(_124.length>0);},getWaiRole:function(elem){return dojo.trim((dojo.attr(elem,"role")||"").replace("wairole:",""));},setWaiRole:function(elem,role){dojo.attr(elem,"role",role);},removeWaiRole:function(elem,role){var _125=dojo.attr(elem,"role");if(!_125){return;}if(role){var t=dojo.trim((" "+_125+" ").replace(" "+role+" "," "));dojo.attr(elem,"role",t);}else{elem.removeAttribute("role");}},hasWaiState:function(elem,_126){return elem.hasAttribute?elem.hasAttribute("aria-"+_126):!!elem.getAttribute("aria-"+_126);},getWaiState:function(elem,_127){return elem.getAttribute("aria-"+_127)||"";},setWaiState:function(elem,_128,_129){elem.setAttribute("aria-"+_128,_129);},removeWaiState:function(elem,_12a){elem.removeAttribute("aria-"+_12a);}});}if(!dojo._hasResource["dijit._base"]){dojo._hasResource["dijit._base"]=true;dojo.provide("dijit._base");}if(!dojo._hasResource["dijit._Widget"]){dojo._hasResource["dijit._Widget"]=true;dojo.provide("dijit._Widget");dojo.connect(dojo,"_connect",function(_12b,_12c){if(_12b&&dojo.isFunction(_12b._onConnect)){_12b._onConnect(_12c);}});dijit._connectOnUseEventHandler=function(_12d){};dijit._lastKeyDownNode=null;if(dojo.isIE){(function(){var _12e=function(evt){dijit._lastKeyDownNode=evt.srcElement;};dojo.doc.attachEvent("onkeydown",_12e);dojo.addOnWindowUnload(function(){dojo.doc.detachEvent("onkeydown",_12e);});})();}else{dojo.doc.addEventListener("keydown",function(evt){dijit._lastKeyDownNode=evt.target;},true);}(function(){dojo.declare("dijit._Widget",dijit._WidgetBase,{_deferredConnects:{onClick:"",onDblClick:"",onKeyDown:"",onKeyPress:"",onKeyUp:"",onMouseMove:"",onMouseDown:"",onMouseOut:"",onMouseOver:"",onMouseLeave:"",onMouseEnter:"",onMouseUp:""},onClick:dijit._connectOnUseEventHandler,onDblClick:dijit._connectOnUseEventHandler,onKeyDown:dijit._connectOnUseEventHandler,onKeyPress:dijit._connectOnUseEventHandler,onKeyUp:dijit._connectOnUseEventHandler,onMouseDown:dijit._connectOnUseEventHandler,onMouseMove:dijit._connectOnUseEventHandler,onMouseOut:dijit._connectOnUseEventHandler,onMouseOver:dijit._connectOnUseEventHandler,onMouseLeave:dijit._connectOnUseEventHandler,onMouseEnter:dijit._connectOnUseEventHandler,onMouseUp:dijit._connectOnUseEventHandler,create:function(_12f,_130){this._deferredConnects=dojo.clone(this._deferredConnects);for(var attr in this.attributeMap){delete this._deferredConnects[attr];}for(attr in this._deferredConnects){if(this[attr]!==dijit._connectOnUseEventHandler){delete this._deferredConnects[attr];}}this.inherited(arguments);if(this.domNode){for(attr in this.params){this._onConnect(attr);}}},_onConnect:function(_131){if(_131 in this._deferredConnects){var _132=this[this._deferredConnects[_131]||"domNode"];this.connect(_132,_131.toLowerCase(),_131);delete this._deferredConnects[_131];}},focused:false,isFocusable:function(){return this.focus&&(dojo.style(this.domNode,"display")!="none");},onFocus:function(){},onBlur:function(){},_onFocus:function(e){this.onFocus();},_onBlur:function(){this.onBlur();},setAttribute:function(attr,_133){dojo.deprecated(this.declaredClass+"::setAttribute(attr, value) is deprecated. Use set() instead.","","2.0");this.set(attr,_133);},attr:function(name,_134){if(dojo.config.isDebug){var _135=arguments.callee._ach||(arguments.callee._ach={}),_136=(arguments.callee.caller||"unknown caller").toString();if(!_135[_136]){dojo.deprecated(this.declaredClass+"::attr() is deprecated. Use get() or set() instead, called from "+_136,"","2.0");_135[_136]=true;}}var args=arguments.length;if(args>=2||typeof name==="object"){return this.set.apply(this,arguments);}else{return this.get(name);}},nodesWithKeyClick:["input","button"],connect:function(obj,_137,_138){var d=dojo,dc=d._connect,_139=this.inherited(arguments,[obj,_137=="ondijitclick"?"onclick":_137,_138]);if(_137=="ondijitclick"){if(d.indexOf(this.nodesWithKeyClick,obj.nodeName.toLowerCase())==-1){var m=d.hitch(this,_138);_139.push(dc(obj,"onkeydown",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=e.target;if(!("openDropDown" in this&&obj==this._buttonNode)){e.preventDefault();}}}),dc(obj,"onkeyup",this,function(e){if((e.keyCode==d.keys.ENTER||e.keyCode==d.keys.SPACE)&&e.target==dijit._lastKeyDownNode&&!e.ctrlKey&&!e.shiftKey&&!e.altKey&&!e.metaKey){dijit._lastKeyDownNode=null;return m(e);}}));}}return _139;},_onShow:function(){this.onShow();},onShow:function(){},onHide:function(){},onClose:function(){return true;}});})();}if(!dojo._hasResource["dijit._Contained"]){dojo._hasResource["dijit._Contained"]=true;dojo.provide("dijit._Contained");dojo.declare("dijit._Contained",null,{getParent:function(){var _13a=dijit.getEnclosingWidget(this.domNode.parentNode);return _13a&&_13a.isContainer?_13a:null;},_getSibling:function(_13b){var node=this.domNode;do{node=node[_13b+"Sibling"];}while(node&&node.nodeType!=1);return node&&dijit.byNode(node);},getPreviousSibling:function(){return this._getSibling("previous");},getNextSibling:function(){return this._getSibling("next");},getIndexInParent:function(){var p=this.getParent();if(!p||!p.getIndexOfChild){return -1;}return p.getIndexOfChild(this);}});}if(!dojo._hasResource["dijit._Container"]){dojo._hasResource["dijit._Container"]=true;dojo.provide("dijit._Container");dojo.declare("dijit._Container",null,{isContainer:true,buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}},addChild:function(_13c,_13d){var _13e=this.containerNode;if(_13d&&typeof _13d=="number"){var _13f=this.getChildren();if(_13f&&_13f.length>=_13d){_13e=_13f[_13d-1].domNode;_13d="after";}}dojo.place(_13c.domNode,_13e,_13d);if(this._started&&!_13c._started){_13c.startup();}},removeChild:function(_140){if(typeof _140=="number"){_140=this.getChildren()[_140];}if(_140){var node=_140.domNode;if(node&&node.parentNode){node.parentNode.removeChild(node);}}},hasChildren:function(){return this.getChildren().length>0;},destroyDescendants:function(_141){dojo.forEach(this.getChildren(),function(_142){_142.destroyRecursive(_141);});},_getSiblingOfChild:function(_143,dir){var node=_143.domNode,_144=(dir>0?"nextSibling":"previousSibling");do{node=node[_144];}while(node&&(node.nodeType!=1||!dijit.byNode(node)));return node&&dijit.byNode(node);},getIndexOfChild:function(_145){return dojo.indexOf(this.getChildren(),_145);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_146){_146.startup();});this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout._LayoutWidget"]){dojo._hasResource["dijit.layout._LayoutWidget"]=true;dojo.provide("dijit.layout._LayoutWidget");dojo.declare("dijit.layout._LayoutWidget",[dijit._Widget,dijit._Container,dijit._Contained],{baseClass:"dijitLayoutContainer",isLayoutContainer:true,buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitContainer");},startup:function(){if(this._started){return;}this.inherited(arguments);var _147=this.getParent&&this.getParent();if(!(_147&&_147.isLayoutContainer)){this.resize();this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this.resize();});}},resize:function(_148,_149){var node=this.domNode;if(_148){dojo.marginBox(node,_148);if(_148.t){node.style.top=_148.t+"px";}if(_148.l){node.style.left=_148.l+"px";}}var mb=_149||{};dojo.mixin(mb,_148||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(node),mb);}var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var be=dojo._getBorderExtents(node,cs);var bb=(this._borderBox={w:mb.w-(me.w+be.w),h:mb.h-(me.h+be.h)});var pe=dojo._getPadExtents(node,cs);this._contentBox={l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:bb.w-pe.w,h:bb.h-pe.h};this.layout();},layout:function(){},_setupChild:function(_14a){var cls=this.baseClass+"-child "+(_14a.baseClass?this.baseClass+"-"+_14a.baseClass:"");dojo.addClass(_14a.domNode,cls);},addChild:function(_14b,_14c){this.inherited(arguments);if(this._started){this._setupChild(_14b);}},removeChild:function(_14d){var cls=this.baseClass+"-child"+(_14d.baseClass?" "+this.baseClass+"-"+_14d.baseClass:"");dojo.removeClass(_14d.domNode,cls);this.inherited(arguments);}});dijit.layout.marginBox2contentBox=function(node,mb){var cs=dojo.getComputedStyle(node);var me=dojo._getMarginExtents(node,cs);var pb=dojo._getPadBorderExtents(node,cs);return {l:dojo._toPixelValue(node,cs.paddingLeft),t:dojo._toPixelValue(node,cs.paddingTop),w:mb.w-(me.w+pb.w),h:mb.h-(me.h+pb.h)};};(function(){var _14e=function(word){return word.substring(0,1).toUpperCase()+word.substring(1);};var size=function(_14f,dim){var _150=_14f.resize?_14f.resize(dim):dojo.marginBox(_14f.domNode,dim);if(_150){dojo.mixin(_14f,_150);}else{dojo.mixin(_14f,dojo.marginBox(_14f.domNode));dojo.mixin(_14f,dim);}};dijit.layout.layoutChildren=function(_151,dim,_152,_153,_154){dim=dojo.mixin({},dim);dojo.addClass(_151,"dijitLayoutContainer");_152=dojo.filter(_152,function(item){return item.region!="center"&&item.layoutAlign!="client";}).concat(dojo.filter(_152,function(item){return item.region=="center"||item.layoutAlign=="client";}));dojo.forEach(_152,function(_155){var elm=_155.domNode,pos=(_155.region||_155.layoutAlign);var _156=elm.style;_156.left=dim.l+"px";_156.top=dim.t+"px";_156.position="absolute";dojo.addClass(elm,"dijitAlign"+_14e(pos));var _157={};if(_153&&_153==_155.id){_157[_155.region=="top"||_155.region=="bottom"?"h":"w"]=_154;}if(pos=="top"||pos=="bottom"){_157.w=dim.w;size(_155,_157);dim.h-=_155.h;if(pos=="top"){dim.t+=_155.h;}else{_156.top=dim.t+dim.h+"px";}}else{if(pos=="left"||pos=="right"){_157.h=dim.h;size(_155,_157);dim.w-=_155.w;if(pos=="left"){dim.l+=_155.w;}else{_156.left=dim.l+dim.w+"px";}}else{if(pos=="client"||pos=="center"){size(_155,dim);}}}});};})();}if(!dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]){dojo._hasResource["dijit.layout._ContentPaneResizeMixin"]=true;dojo.provide("dijit.layout._ContentPaneResizeMixin");dojo.declare("dijit.layout._ContentPaneResizeMixin",null,{doLayout:true,isContainer:true,isLayoutContainer:true,_startChildren:function(){dojo.forEach(this.getChildren(),function(_158){_158.startup();_158._started=true;});},startup:function(){if(this._started){return;}var _159=dijit._Contained.prototype.getParent.call(this);this._childOfLayoutWidget=_159&&_159.isLayoutContainer;this._needLayout=!this._childOfLayoutWidget;this.inherited(arguments);this._startChildren();if(this._isShown()){this._onShow();}if(!this._childOfLayoutWidget){this.connect(dojo.isIE?this.domNode:dojo.global,"onresize",function(){this._needLayout=!this._childOfLayoutWidget;this.resize();});}},_checkIfSingleChild:function(){var _15a=dojo.query("> *",this.containerNode).filter(function(node){return node.tagName!=="SCRIPT";}),_15b=_15a.filter(function(node){return dojo.hasAttr(node,"data-dojo-type")||dojo.hasAttr(node,"dojoType")||dojo.hasAttr(node,"widgetId");}),_15c=dojo.filter(_15b.map(dijit.byNode),function(_15d){return _15d&&_15d.domNode&&_15d.resize;});if(_15a.length==_15b.length&&_15c.length==1){this._singleChild=_15c[0];}else{delete this._singleChild;}dojo.toggleClass(this.containerNode,this.baseClass+"SingleChild",!!this._singleChild);},resize:function(_15e,_15f){if(!this._wasShown&&this.open!==false){this._onShow();}this._resizeCalled=true;this._scheduleLayout(_15e,_15f);},_scheduleLayout:function(_160,_161){if(this._isShown()){this._layout(_160,_161);}else{this._needLayout=true;this._changeSize=_160;this._resultSize=_161;}},_layout:function(_162,_163){if(_162){dojo.marginBox(this.domNode,_162);}var cn=this.containerNode;if(cn===this.domNode){var mb=_163||{};dojo.mixin(mb,_162||{});if(!("h" in mb)||!("w" in mb)){mb=dojo.mixin(dojo.marginBox(cn),mb);}this._contentBox=dijit.layout.marginBox2contentBox(cn,mb);}else{this._contentBox=dojo.contentBox(cn);}this._layoutChildren();delete this._needLayout;},_layoutChildren:function(){if(this.doLayout){this._checkIfSingleChild();}if(this._singleChild&&this._singleChild.resize){var cb=this._contentBox||dojo.contentBox(this.containerNode);this._singleChild.resize({w:cb.w,h:cb.h});}else{dojo.forEach(this.getChildren(),function(_164){if(_164.resize){_164.resize();}});}},_isShown:function(){if(this._childOfLayoutWidget){if(this._resizeCalled&&"open" in this){return this.open;}return this._resizeCalled;}else{if("open" in this){return this.open;}else{var node=this.domNode,_165=this.domNode.parentNode;return (node.style.display!="none")&&(node.style.visibility!="hidden")&&!dojo.hasClass(node,"dijitHidden")&&_165&&_165.style&&(_165.style.display!="none");}}},_onShow:function(){if(this._needLayout){this._layout(this._changeSize,this._resultSize);}this.inherited(arguments);this._wasShown=true;}});}if(!dojo._hasResource["dojo.string"]){dojo._hasResource["dojo.string"]=true;dojo.provide("dojo.string");dojo.getObject("string",true,dojo);dojo.string.rep=function(str,num){if(num<=0||!str){return "";}var buf=[];for(;;){if(num&1){buf.push(str);}if(!(num>>=1)){break;}str+=str;}return buf.join("");};dojo.string.pad=function(text,size,ch,end){if(!ch){ch="0";}var out=String(text),pad=dojo.string.rep(ch,Math.ceil((size-out.length)/ch.length));return end?out+pad:pad+out;};dojo.string.substitute=function(_166,map,_167,_168){_168=_168||dojo.global;_167=_167?dojo.hitch(_168,_167):function(v){return v;};return _166.replace(/\$\{([^\s\:\}]+)(?:\:([^\s\:\}]+))?\}/g,function(_169,key,_16a){var _16b=dojo.getObject(key,false,map);if(_16a){_16b=dojo.getObject(_16a,false,_168).call(_168,_16b,key);}return _167(_16b,key).toString();});};dojo.string.trim=String.prototype.trim?dojo.trim:function(str){str=str.replace(/^\s+/,"");for(var i=str.length-1;i>=0;i--){if(/\S/.test(str.charAt(i))){str=str.substring(0,i+1);break;}}return str;};}if(!dojo._hasResource["dojo.date.stamp"]){dojo._hasResource["dojo.date.stamp"]=true;dojo.provide("dojo.date.stamp");dojo.getObject("date.stamp",true,dojo);dojo.date.stamp.fromISOString=function(_16c,_16d){if(!dojo.date.stamp._isoRegExp){dojo.date.stamp._isoRegExp=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;}var _16e=dojo.date.stamp._isoRegExp.exec(_16c),_16f=null;if(_16e){_16e.shift();if(_16e[1]){_16e[1]--;}if(_16e[6]){_16e[6]*=1000;}if(_16d){_16d=new Date(_16d);dojo.forEach(dojo.map(["FullYear","Month","Date","Hours","Minutes","Seconds","Milliseconds"],function(prop){return _16d["get"+prop]();}),function(_170,_171){_16e[_171]=_16e[_171]||_170;});}_16f=new Date(_16e[0]||1970,_16e[1]||0,_16e[2]||1,_16e[3]||0,_16e[4]||0,_16e[5]||0,_16e[6]||0);if(_16e[0]<100){_16f.setFullYear(_16e[0]||1970);}var _172=0,_173=_16e[7]&&_16e[7].charAt(0);if(_173!="Z"){_172=((_16e[8]||0)*60)+(Number(_16e[9])||0);if(_173!="-"){_172*=-1;}}if(_173){_172-=_16f.getTimezoneOffset();}if(_172){_16f.setTime(_16f.getTime()+_172*60000);}}return _16f;};dojo.date.stamp.toISOString=function(_174,_175){var _176=function(n){return (n<10)?"0"+n:n;};_175=_175||{};var _177=[],_178=_175.zulu?"getUTC":"get",date="";if(_175.selector!="time"){var year=_174[_178+"FullYear"]();date=["0000".substr((year+"").length)+year,_176(_174[_178+"Month"]()+1),_176(_174[_178+"Date"]())].join("-");}_177.push(date);if(_175.selector!="date"){var time=[_176(_174[_178+"Hours"]()),_176(_174[_178+"Minutes"]()),_176(_174[_178+"Seconds"]())].join(":");var _179=_174[_178+"Milliseconds"]();if(_175.milliseconds){time+="."+(_179<100?"0":"")+_176(_179);}if(_175.zulu){time+="Z";}else{if(_175.selector!="time"){var _17a=_174.getTimezoneOffset();var _17b=Math.abs(_17a);time+=(_17a>0?"-":"+")+_176(Math.floor(_17b/60))+":"+_176(_17b%60);}}_177.push(time);}return _177.join("T");};}if(!dojo._hasResource["dojo.parser"]){dojo._hasResource["dojo.parser"]=true;dojo.provide("dojo.parser");new Date("X");dojo.parser=new function(){var d=dojo;function _17c(_17d){if(d.isString(_17d)){return "string";}if(typeof _17d=="number"){return "number";}if(typeof _17d=="boolean"){return "boolean";}if(d.isFunction(_17d)){return "function";}if(d.isArray(_17d)){return "array";}if(_17d instanceof Date){return "date";}if(_17d instanceof d._Url){return "url";}return "object";};function _17e(_17f,type){switch(type){case "string":return _17f;case "number":return _17f.length?Number(_17f):NaN;case "boolean":return typeof _17f=="boolean"?_17f:!(_17f.toLowerCase()=="false");case "function":if(d.isFunction(_17f)){_17f=_17f.toString();_17f=d.trim(_17f.substring(_17f.indexOf("{")+1,_17f.length-1));}try{if(_17f===""||_17f.search(/[^\w\.]+/i)!=-1){return new Function(_17f);}else{return d.getObject(_17f,false)||new Function(_17f);}}catch(e){return new Function();}case "array":return _17f?_17f.split(/\s*,\s*/):[];case "date":switch(_17f){case "":return new Date("");case "now":return new Date();default:return d.date.stamp.fromISOString(_17f);}case "url":return d.baseUrl+_17f;default:return d.fromJson(_17f);}};var _180={},_181={};d.connect(d,"extend",function(){_181={};});function _182(cls,_183){for(var name in cls){if(name.charAt(0)=="_"){continue;}if(name in _180){continue;}_183[name]=_17c(cls[name]);}return _183;};function _184(_185,_186){var c=_181[_185];if(!c){var cls=d.getObject(_185),_187=null;if(!cls){return null;}if(!_186){_187=_182(cls.prototype,{});}c={cls:cls,params:_187};}else{if(!_186&&!c.params){c.params=_182(c.cls.prototype,{});}}return c;};this._functionFromScript=function(_188,_189){var _18a="";var _18b="";var _18c=(_188.getAttribute(_189+"args")||_188.getAttribute("args"));if(_18c){d.forEach(_18c.split(/\s*,\s*/),function(part,idx){_18a+="var "+part+" = arguments["+idx+"]; ";});}var _18d=_188.getAttribute("with");if(_18d&&_18d.length){d.forEach(_18d.split(/\s*,\s*/),function(part){_18a+="with("+part+"){";_18b+="}";});}return new Function(_18a+_188.innerHTML+_18b);};this.instantiate=function(_18e,_18f,args){var _190=[],_18f=_18f||{};args=args||{};var _191=(args.scope||d._scopeName)+"Type",_192="data-"+(args.scope||d._scopeName)+"-";d.forEach(_18e,function(obj){if(!obj){return;}var node,type,_193,_194,_195,_196;if(obj.node){node=obj.node;type=obj.type;_196=obj.fastpath;_193=obj.clsInfo||(type&&_184(type,_196));_194=_193&&_193.cls;_195=obj.scripts;}else{node=obj;type=_191 in _18f?_18f[_191]:node.getAttribute(_191);_193=type&&_184(type);_194=_193&&_193.cls;_195=(_194&&(_194._noScript||_194.prototype._noScript)?[]:d.query("> script[type^='dojo/']",node));}if(!_193){throw new Error("Could not load class '"+type);}var _197={};if(args.defaults){d._mixin(_197,args.defaults);}if(obj.inherited){d._mixin(_197,obj.inherited);}if(_196){var _198=node.getAttribute(_192+"props");if(_198&&_198.length){try{_198=d.fromJson.call(args.propsThis,"{"+_198+"}");d._mixin(_197,_198);}catch(e){throw new Error(e.toString()+" in data-dojo-props='"+_198+"'");}}var _199=node.getAttribute(_192+"attach-point");if(_199){_197.dojoAttachPoint=_199;}var _19a=node.getAttribute(_192+"attach-event");if(_19a){_197.dojoAttachEvent=_19a;}dojo.mixin(_197,_18f);}else{var _19b=node.attributes;for(var name in _193.params){var item=name in _18f?{value:_18f[name],specified:true}:_19b.getNamedItem(name);if(!item||(!item.specified&&(!dojo.isIE||name.toLowerCase()!="value"))){continue;}var _19c=item.value;switch(name){case "class":_19c="className" in _18f?_18f.className:node.className;break;case "style":_19c="style" in _18f?_18f.style:(node.style&&node.style.cssText);}var _19d=_193.params[name];if(typeof _19c=="string"){_197[name]=_17e(_19c,_19d);}else{_197[name]=_19c;}}}var _19e=[],_19f=[];d.forEach(_195,function(_1a0){node.removeChild(_1a0);var _1a1=(_1a0.getAttribute(_192+"event")||_1a0.getAttribute("event")),type=_1a0.getAttribute("type"),nf=d.parser._functionFromScript(_1a0,_192);if(_1a1){if(type=="dojo/connect"){_19e.push({event:_1a1,func:nf});}else{_197[_1a1]=nf;}}else{_19f.push(nf);}});var _1a2=_194.markupFactory||_194.prototype&&_194.prototype.markupFactory;var _1a3=_1a2?_1a2(_197,node,_194):new _194(_197,node);_190.push(_1a3);var _1a4=(node.getAttribute(_192+"id")||node.getAttribute("jsId"));if(_1a4){d.setObject(_1a4,_1a3);}d.forEach(_19e,function(_1a5){d.connect(_1a3,_1a5.event,null,_1a5.func);});d.forEach(_19f,function(func){func.call(_1a3);});});if(!_18f._started){d.forEach(_190,function(_1a6){if(!args.noStart&&_1a6&&dojo.isFunction(_1a6.startup)&&!_1a6._started&&(!_1a6.getParent||!_1a6.getParent())){_1a6.startup();}});}return _190;};this.parse=function(_1a7,args){var root;if(!args&&_1a7&&_1a7.rootNode){args=_1a7;root=args.rootNode;}else{root=_1a7;}root=root?dojo.byId(root):dojo.body();args=args||{};var _1a8=(args.scope||d._scopeName)+"Type",_1a9="data-"+(args.scope||d._scopeName)+"-";function scan(_1aa,list){var _1ab=dojo.clone(_1aa.inherited);dojo.forEach(["dir","lang"],function(name){var val=_1aa.node.getAttribute(name);if(val){_1ab[name]=val;}});var _1ac=_1aa.clsInfo&&!_1aa.clsInfo.cls.prototype._noScript?_1aa.scripts:null;var _1ad=(!_1aa.clsInfo||!_1aa.clsInfo.cls.prototype.stopParser)||(args&&args.template);for(var _1ae=_1aa.node.firstChild;_1ae;_1ae=_1ae.nextSibling){if(_1ae.nodeType==1){var type,_1af=_1ad&&_1ae.getAttribute(_1a9+"type");if(_1af){type=_1af;}else{type=_1ad&&_1ae.getAttribute(_1a8);}var _1b0=_1af==type;if(type){var _1b1={"type":type,fastpath:_1b0,clsInfo:_184(type,_1b0),node:_1ae,scripts:[],inherited:_1ab};list.push(_1b1);scan(_1b1,list);}else{if(_1ac&&_1ae.nodeName.toLowerCase()=="script"){type=_1ae.getAttribute("type");if(type&&/^dojo\/\w/i.test(type)){_1ac.push(_1ae);}}else{if(_1ad){scan({node:_1ae,inherited:_1ab},list);}}}}}};var _1b2={};if(args&&args.inherited){for(var key in args.inherited){if(args.inherited[key]){_1b2[key]=args.inherited[key];}}}var list=[];scan({node:root,inherited:_1b2},list);var _1b3=args&&args.template?{template:true}:null;return this.instantiate(list,_1b3,args);};}();(function(){var _1b4=function(){if(dojo.config.parseOnLoad){dojo.parser.parse();}};if(dojo.getObject("dijit.wai.onload")===dojo._loaders[0]){dojo._loaders.splice(1,0,_1b4);}else{dojo._loaders.unshift(_1b4);}})();}if(!dojo._hasResource["dojo.html"]){dojo._hasResource["dojo.html"]=true;dojo.provide("dojo.html");dojo.getObject("html",true,dojo);(function(){var _1b5=0,d=dojo;dojo.html._secureForInnerHtml=function(cont){return cont.replace(/(?:\s*<!DOCTYPE\s[^>]+>|<title[^>]*>[\s\S]*?<\/title>)/ig,"");};dojo.html._emptyNode=dojo.empty;dojo.html._setNodeContent=function(node,cont){d.empty(node);if(cont){if(typeof cont=="string"){cont=d._toDom(cont,node.ownerDocument);}if(!cont.nodeType&&d.isArrayLike(cont)){for(var _1b6=cont.length,i=0;i<cont.length;i=_1b6==cont.length?i+1:0){d.place(cont[i],node,"last");}}else{d.place(cont,node,"last");}}return node;};dojo.declare("dojo.html._ContentSetter",null,{node:"",content:"",id:"",cleanContent:false,extractContent:false,parseContent:false,parserScope:dojo._scopeName,startup:true,constructor:function(_1b7,node){dojo.mixin(this,_1b7||{});node=this.node=dojo.byId(this.node||node);if(!this.id){this.id=["Setter",(node)?node.id||node.tagName:"",_1b5++].join("_");}},set:function(cont,_1b8){if(undefined!==cont){this.content=cont;}if(_1b8){this._mixin(_1b8);}this.onBegin();this.setContent();this.onEnd();return this.node;},setContent:function(){var node=this.node;if(!node){throw new Error(this.declaredClass+": setContent given no node");}try{node=dojo.html._setNodeContent(node,this.content);}catch(e){var _1b9=this.onContentError(e);try{node.innerHTML=_1b9;}catch(e){console.error("Fatal "+this.declaredClass+".setContent could not change content due to "+e.message,e);}}this.node=node;},empty:function(){if(this.parseResults&&this.parseResults.length){dojo.forEach(this.parseResults,function(w){if(w.destroy){w.destroy();}});delete this.parseResults;}dojo.html._emptyNode(this.node);},onBegin:function(){var cont=this.content;if(dojo.isString(cont)){if(this.cleanContent){cont=dojo.html._secureForInnerHtml(cont);}if(this.extractContent){var _1ba=cont.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_1ba){cont=_1ba[1];}}}this.empty();this.content=cont;return this.node;},onEnd:function(){if(this.parseContent){this._parse();}return this.node;},tearDown:function(){delete this.parseResults;delete this.node;delete this.content;},onContentError:function(err){return "Error occured setting content: "+err;},_mixin:function(_1bb){var _1bc={},key;for(key in _1bb){if(key in _1bc){continue;}this[key]=_1bb[key];}},_parse:function(){var _1bd=this.node;try{var _1be={};dojo.forEach(["dir","lang","textDir"],function(name){if(this[name]){_1be[name]=this[name];}},this);this.parseResults=dojo.parser.parse({rootNode:_1bd,noStart:!this.startup,inherited:_1be,scope:this.parserScope});}catch(e){this._onError("Content",e,"Error parsing in _ContentSetter#"+this.id);}},_onError:function(type,err,_1bf){var _1c0=this["on"+type+"Error"].call(this,err);if(_1bf){console.error(_1bf,err);}else{if(_1c0){dojo.html._setNodeContent(this.node,_1c0,true);}}}});dojo.html.set=function(node,cont,_1c1){if(undefined==cont){console.warn("dojo.html.set: no cont argument provided, using empty string");cont="";}if(!_1c1){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojo.html._ContentSetter(dojo.mixin(_1c1,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dojo.i18n"]){dojo._hasResource["dojo.i18n"]=true;dojo.provide("dojo.i18n");dojo.getObject("i18n",true,dojo);dojo.i18n.getLocalization=dojo.i18n.getLocalization||function(_1c2,_1c3,_1c4){_1c4=dojo.i18n.normalizeLocale(_1c4);var _1c5=_1c4.split("-");var _1c6=[_1c2,"nls",_1c3].join(".");var _1c7=dojo._loadedModules[_1c6];if(_1c7){var _1c8;for(var i=_1c5.length;i>0;i--){var loc=_1c5.slice(0,i).join("_");if(_1c7[loc]){_1c8=_1c7[loc];break;}}if(!_1c8){_1c8=_1c7.ROOT;}if(_1c8){var _1c9=function(){};_1c9.prototype=_1c8;return new _1c9();}}throw new Error("Bundle not found: "+_1c3+" in "+_1c2+" , locale="+_1c4);};dojo.i18n.normalizeLocale=function(_1ca){var _1cb=_1ca?_1ca.toLowerCase():dojo.locale;if(_1cb=="root"){_1cb="ROOT";}return _1cb;};dojo.i18n._requireLocalization=function(_1cc,_1cd,_1ce,_1cf){var _1d0=dojo.i18n.normalizeLocale(_1ce);var _1d1=[_1cc,"nls",_1cd].join(".");var _1d2="";if(_1cf){var _1d3=_1cf.split(",");for(var i=0;i<_1d3.length;i++){if(_1d0["indexOf"](_1d3[i])==0){if(_1d3[i].length>_1d2.length){_1d2=_1d3[i];}}}if(!_1d2){_1d2="ROOT";}}var _1d4=_1cf?_1d2:_1d0;var _1d5=dojo._loadedModules[_1d1];var _1d6=null;if(_1d5){if(dojo.config.localizationComplete&&_1d5._built){return;}var _1d7=_1d4.replace(/-/g,"_");var _1d8=_1d1+"."+_1d7;_1d6=dojo._loadedModules[_1d8];}if(!_1d6){_1d5=dojo["provide"](_1d1);var syms=dojo._getModuleSymbols(_1cc);var _1d9=syms.concat("nls").join("/");var _1da;dojo.i18n._searchLocalePath(_1d4,_1cf,function(loc){var _1db=loc.replace(/-/g,"_");var _1dc=_1d1+"."+_1db;var _1dd=false;if(!dojo._loadedModules[_1dc]){dojo["provide"](_1dc);var _1de=[_1d9];if(loc!="ROOT"){_1de.push(loc);}_1de.push(_1cd);var _1df=_1de.join("/")+".js";_1dd=dojo._loadPath(_1df,null,function(hash){hash=hash.root||hash;var _1e0=function(){};_1e0.prototype=_1da;_1d5[_1db]=new _1e0();for(var j in hash){_1d5[_1db][j]=hash[j];}});}else{_1dd=true;}if(_1dd&&_1d5[_1db]){_1da=_1d5[_1db];}else{_1d5[_1db]=_1da;}if(_1cf){return true;}});}if(_1cf&&_1d0!=_1d2){_1d5[_1d0.replace(/-/g,"_")]=_1d5[_1d2.replace(/-/g,"_")];}};(function(){var _1e1=dojo.config.extraLocale;if(_1e1){if(!_1e1 instanceof Array){_1e1=[_1e1];}var req=dojo.i18n._requireLocalization;dojo.i18n._requireLocalization=function(m,b,_1e2,_1e3){req(m,b,_1e2,_1e3);if(_1e2){return;}for(var i=0;i<_1e1.length;i++){req(m,b,_1e1[i],_1e3);}};}})();dojo.i18n._searchLocalePath=function(_1e4,down,_1e5){_1e4=dojo.i18n.normalizeLocale(_1e4);var _1e6=_1e4.split("-");var _1e7=[];for(var i=_1e6.length;i>0;i--){_1e7.push(_1e6.slice(0,i).join("-"));}_1e7.push(false);if(down){_1e7.reverse();}for(var j=_1e7.length-1;j>=0;j--){var loc=_1e7[j]||"ROOT";var stop=_1e5(loc);if(stop){break;}}};dojo.i18n._preloadLocalizations=function(_1e8,_1e9){function _1ea(_1eb){_1eb=dojo.i18n.normalizeLocale(_1eb);dojo.i18n._searchLocalePath(_1eb,true,function(loc){for(var i=0;i<_1e9.length;i++){if(_1e9[i]==loc){dojo["require"](_1e8+"_"+loc);return true;}}return false;});};_1ea();var _1ec=dojo.config.extraLocale||[];for(var i=0;i<_1ec.length;i++){_1ea(_1ec[i]);}};}if(!dojo._hasResource["dijit.layout.ContentPane"]){dojo._hasResource["dijit.layout.ContentPane"]=true;dojo.provide("dijit.layout.ContentPane");dojo.declare("dijit.layout.ContentPane",[dijit._Widget,dijit.layout._ContentPaneResizeMixin],{href:"",extractContent:false,parseOnLoad:true,parserScope:dojo._scopeName,preventCache:false,preload:false,refreshOnShow:false,loadingMessage:"<span class='dijitContentPaneLoading'>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'>${errorState}</span>",isLoaded:false,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[]}),stopParser:true,template:false,create:function(_1ed,_1ee){if((!_1ed||!_1ed.template)&&_1ee&&!("href" in _1ed)&&!("content" in _1ed)){var df=dojo.doc.createDocumentFragment();_1ee=dojo.byId(_1ee);while(_1ee.firstChild){df.appendChild(_1ee.firstChild);}_1ed=dojo.delegate(_1ed,{content:df});}this.inherited(arguments,[_1ed,_1ee]);},postMixInProperties:function(){this.inherited(arguments);var _1ef=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_1ef);this.errorMessage=dojo.string.substitute(this.errorMessage,_1ef);},buildRendering:function(){this.inherited(arguments);if(!this.containerNode){this.containerNode=this.domNode;}this.domNode.title="";if(!dojo.attr(this.domNode,"role")){dijit.setWaiRole(this.domNode,"group");}},_startChildren:function(){this.inherited(arguments);if(this._contentSetter){dojo.forEach(this._contentSetter.parseResults,function(obj){if(!obj._started&&!obj._destroyed&&dojo.isFunction(obj.startup)){obj.startup();obj._started=true;}},this);}},setHref:function(href){dojo.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0");return this.set("href",href);},_setHrefAttr:function(href){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._set("href",href);if(this.preload||(this._created&&this._isShown())){this._load();}else{this._hrefChanged=true;}return this.onLoadDeferred;},setContent:function(data){dojo.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0");this.set("content",data);},_setContentAttr:function(data){this._set("href","");this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));if(this._created){this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));}this._setContent(data||"");this._isDownloaded=false;return this.onLoadDeferred;},_getContentAttr:function(){return this.containerNode.innerHTML;},cancel:function(){if(this._xhrDfd&&(this._xhrDfd.fired==-1)){this._xhrDfd.cancel();}delete this._xhrDfd;this.onLoadDeferred=null;},uninitialize:function(){if(this._beingDestroyed){this.cancel();}this.inherited(arguments);},destroyRecursive:function(_1f0){if(this._beingDestroyed){return;}this.inherited(arguments);},_onShow:function(){this.inherited(arguments);if(this.href){if(!this._xhrDfd&&(!this.isLoaded||this._hrefChanged||this.refreshOnShow)){return this.refresh();}}},refresh:function(){this.cancel();this.onLoadDeferred=new dojo.Deferred(dojo.hitch(this,"cancel"));this.onLoadDeferred.addCallback(dojo.hitch(this,"onLoad"));this._load();return this.onLoadDeferred;},_load:function(){this._setContent(this.onDownloadStart(),true);var self=this;var _1f1={preventCache:(this.preventCache||this.refreshOnShow),url:this.href,handleAs:"text"};if(dojo.isObject(this.ioArgs)){dojo.mixin(_1f1,this.ioArgs);}var hand=(this._xhrDfd=(this.ioMethod||dojo.xhrGet)(_1f1));hand.addCallback(function(html){try{self._isDownloaded=true;self._setContent(html,false);self.onDownloadEnd();}catch(err){self._onError("Content",err);}delete self._xhrDfd;return html;});hand.addErrback(function(err){if(!hand.canceled){self._onError("Download",err);}delete self._xhrDfd;return err;});delete this._hrefChanged;},_onLoadHandler:function(data){this._set("isLoaded",true);try{this.onLoadDeferred.callback(data);}catch(e){console.error("Error "+this.widgetId+" running custom onLoad code: "+e.message);}},_onUnloadHandler:function(){this._set("isLoaded",false);try{this.onUnload();}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message);}},destroyDescendants:function(){if(this.isLoaded){this._onUnloadHandler();}var _1f2=this._contentSetter;dojo.forEach(this.getChildren(),function(_1f3){if(_1f3.destroyRecursive){_1f3.destroyRecursive();}});if(_1f2){dojo.forEach(_1f2.parseResults,function(_1f4){if(_1f4.destroyRecursive&&_1f4.domNode&&_1f4.domNode.parentNode==dojo.body()){_1f4.destroyRecursive();}});delete _1f2.parseResults;}dojo.html._emptyNode(this.containerNode);delete this._singleChild;},_setContent:function(cont,_1f5){this.destroyDescendants();var _1f6=this._contentSetter;if(!(_1f6&&_1f6 instanceof dojo.html._ContentSetter)){_1f6=this._contentSetter=new dojo.html._ContentSetter({node:this.containerNode,_onError:dojo.hitch(this,this._onError),onContentError:dojo.hitch(this,function(e){var _1f7=this.onContentError(e);try{this.containerNode.innerHTML=_1f7;}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e);}})});}var _1f8=dojo.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:this.parseOnLoad,parserScope:this.parserScope,startup:false,dir:this.dir,lang:this.lang},this._contentSetterParams||{});_1f6.set((dojo.isObject(cont)&&cont.domNode)?cont.domNode:cont,_1f8);delete this._contentSetterParams;if(this.doLayout){this._checkIfSingleChild();}if(!_1f5){if(this._started){this._startChildren();this._scheduleLayout();}this._onLoadHandler(cont);}},_onError:function(type,err,_1f9){this.onLoadDeferred.errback(err);var _1fa=this["on"+type+"Error"].call(this,err);if(_1f9){console.error(_1f9,err);}else{if(_1fa){this._setContent(_1fa,true);}}},onLoad:function(data){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage;},onContentError:function(_1fb){},onDownloadError:function(_1fc){return this.errorMessage;},onDownloadEnd:function(){}});}if(!dojo._hasResource["dojo.cache"]){dojo._hasResource["dojo.cache"]=true;dojo.provide("dojo.cache");var cache={};dojo.cache=function(_1fd,url,_1fe){if(typeof _1fd=="string"){var _1ff=dojo.moduleUrl(_1fd,url);}else{_1ff=_1fd;_1fe=url;}var key=_1ff.toString();var val=_1fe;if(_1fe!=undefined&&!dojo.isString(_1fe)){val=("value" in _1fe?_1fe.value:undefined);}var _200=_1fe&&_1fe.sanitize?true:false;if(typeof val=="string"){val=cache[key]=_200?dojo.cache._sanitize(val):val;}else{if(val===null){delete cache[key];}else{if(!(key in cache)){val=dojo._getText(key);cache[key]=_200?dojo.cache._sanitize(val):val;}val=cache[key];}}return val;};dojo.cache._sanitize=function(val){if(val){val=val.replace(/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,"");var _201=val.match(/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im);if(_201){val=_201[1];}}else{val="";}return val;};}if(!dojo._hasResource["dijit._Templated"]){dojo._hasResource["dijit._Templated"]=true;dojo.provide("dijit._Templated");dojo.declare("dijit._Templated",null,{templateString:null,templatePath:null,widgetsInTemplate:false,_skipNodeCache:false,_earlyTemplatedStartup:false,constructor:function(){this._attachPoints=[];this._attachEvents=[];},_stringRepl:function(tmpl){var _202=this.declaredClass,_203=this;return dojo.string.substitute(tmpl,this,function(_204,key){if(key.charAt(0)=="!"){_204=dojo.getObject(key.substr(1),false,_203);}if(typeof _204=="undefined"){throw new Error(_202+" template:"+key);}if(_204==null){return "";}return key.charAt(0)=="!"?_204:_204.toString().replace(/"/g,"&quot;");},this);},buildRendering:function(){var _205=dijit._Templated.getCachedTemplate(this.templatePath,this.templateString,this._skipNodeCache);var node;if(dojo.isString(_205)){node=dojo._toDom(this._stringRepl(_205));if(node.nodeType!=1){throw new Error("Invalid template: "+_205);}}else{node=_205.cloneNode(true);}this.domNode=node;this.inherited(arguments);this._attachTemplateNodes(node);if(this.widgetsInTemplate){var cw=(this._startupWidgets=dojo.parser.parse(node,{noStart:!this._earlyTemplatedStartup,template:true,inherited:{dir:this.dir,lang:this.lang},propsThis:this,scope:"dojo"}));this._supportingWidgets=dijit.findWidgets(node);this._attachTemplateNodes(cw,function(n,p){return n[p];});}this._fillContent(this.srcNodeRef);},_fillContent:function(_206){var dest=this.containerNode;if(_206&&dest){while(_206.hasChildNodes()){dest.appendChild(_206.firstChild);}}},_attachTemplateNodes:function(_207,_208){_208=_208||function(n,p){return n.getAttribute(p);};var _209=dojo.isArray(_207)?_207:(_207.all||_207.getElementsByTagName("*"));var x=dojo.isArray(_207)?0:-1;for(;x<_209.length;x++){var _20a=(x==-1)?_207:_209[x];if(this.widgetsInTemplate&&(_208(_20a,"dojoType")||_208(_20a,"data-dojo-type"))){continue;}var _20b=_208(_20a,"dojoAttachPoint")||_208(_20a,"data-dojo-attach-point");if(_20b){var _20c,_20d=_20b.split(/\s*,\s*/);while((_20c=_20d.shift())){if(dojo.isArray(this[_20c])){this[_20c].push(_20a);}else{this[_20c]=_20a;}this._attachPoints.push(_20c);}}var _20e=_208(_20a,"dojoAttachEvent")||_208(_20a,"data-dojo-attach-event");if(_20e){var _20f,_210=_20e.split(/\s*,\s*/);var trim=dojo.trim;while((_20f=_210.shift())){if(_20f){var _211=null;if(_20f.indexOf(":")!=-1){var _212=_20f.split(":");_20f=trim(_212[0]);_211=trim(_212[1]);}else{_20f=trim(_20f);}if(!_211){_211=_20f;}this._attachEvents.push(this.connect(_20a,_20f,_211));}}}var role=_208(_20a,"waiRole");if(role){dijit.setWaiRole(_20a,role);}var _213=_208(_20a,"waiState");if(_213){dojo.forEach(_213.split(/\s*,\s*/),function(_214){if(_214.indexOf("-")!=-1){var pair=_214.split("-");dijit.setWaiState(_20a,pair[0],pair[1]);}});}}},startup:function(){dojo.forEach(this._startupWidgets,function(w){if(w&&!w._started&&w.startup){w.startup();}});this.inherited(arguments);},destroyRendering:function(){dojo.forEach(this._attachPoints,function(_215){delete this[_215];},this);this._attachPoints=[];dojo.forEach(this._attachEvents,this.disconnect,this);this._attachEvents=[];this.inherited(arguments);}});dijit._Templated._templateCache={};dijit._Templated.getCachedTemplate=function(_216,_217,_218){var _219=dijit._Templated._templateCache;var key=_217||_216;var _21a=_219[key];if(_21a){try{if(!_21a.ownerDocument||_21a.ownerDocument==dojo.doc){return _21a;}}catch(e){}dojo.destroy(_21a);}if(!_217){_217=dojo.cache(_216,{sanitize:true});}_217=dojo.string.trim(_217);if(_218||_217.match(/\$\{([^\}]+)\}/g)){return (_219[key]=_217);}else{var node=dojo._toDom(_217);if(node.nodeType!=1){throw new Error("Invalid template: "+_217);}return (_219[key]=node);}};if(dojo.isIE){dojo.addOnWindowUnload(function(){var _21b=dijit._Templated._templateCache;for(var key in _21b){var _21c=_21b[key];if(typeof _21c=="object"){dojo.destroy(_21c);}delete _21b[key];}});}dojo.extend(dijit._Widget,{dojoAttachEvent:"",dojoAttachPoint:"",waiRole:"",waiState:""});}if(!dojo._hasResource["dojo.regexp"]){dojo._hasResource["dojo.regexp"]=true;dojo.provide("dojo.regexp");dojo.getObject("regexp",true,dojo);dojo.regexp.escapeString=function(str,_21d){return str.replace(/([\.$?*|{}\(\)\[\]\\\/\+^])/g,function(ch){if(_21d&&_21d.indexOf(ch)!=-1){return ch;}return "\\"+ch;});};dojo.regexp.buildGroupRE=function(arr,re,_21e){if(!(arr instanceof Array)){return re(arr);}var b=[];for(var i=0;i<arr.length;i++){b.push(re(arr[i]));}return dojo.regexp.group(b.join("|"),_21e);};dojo.regexp.group=function(_21f,_220){return "("+(_220?"?:":"")+_21f+")";};}if(!dojo._hasResource["dojo.cookie"]){dojo._hasResource["dojo.cookie"]=true;dojo.provide("dojo.cookie");dojo.cookie=function(name,_221,_222){var c=document.cookie;if(arguments.length==1){var _223=c.match(new RegExp("(?:^|; )"+dojo.regexp.escapeString(name)+"=([^;]*)"));return _223?decodeURIComponent(_223[1]):undefined;}else{_222=_222||{};var exp=_222.expires;if(typeof exp=="number"){var d=new Date();d.setTime(d.getTime()+exp*24*60*60*1000);exp=_222.expires=d;}if(exp&&exp.toUTCString){_222.expires=exp.toUTCString();}_221=encodeURIComponent(_221);var _224=name+"="+_221,_225;for(_225 in _222){_224+="; "+_225;var _226=_222[_225];if(_226!==true){_224+="="+_226;}}document.cookie=_224;}};dojo.cookie.isSupported=function(){if(!("cookieEnabled" in navigator)){this("__djCookieTest__","CookiesAllowed");navigator.cookieEnabled=this("__djCookieTest__")=="CookiesAllowed";if(navigator.cookieEnabled){this("__djCookieTest__","",{expires:-1});}}return navigator.cookieEnabled;};}if(!dojo._hasResource["dijit._CssStateMixin"]){dojo._hasResource["dijit._CssStateMixin"]=true;dojo.provide("dijit._CssStateMixin");dojo.declare("dijit._CssStateMixin",[],{cssStateNodes:{},hovering:false,active:false,_applyAttributes:function(){this.inherited(arguments);dojo.forEach(["onmouseenter","onmouseleave","onmousedown"],function(e){this.connect(this.domNode,e,"_cssMouseEvent");},this);dojo.forEach(["disabled","readOnly","checked","selected","focused","state","hovering","active"],function(attr){this.watch(attr,dojo.hitch(this,"_setStateClass"));},this);for(var ap in this.cssStateNodes){this._trackMouseState(this[ap],this.cssStateNodes[ap]);}this._setStateClass();},_cssMouseEvent:function(_227){if(!this.disabled){switch(_227.type){case "mouseenter":case "mouseover":this._set("hovering",true);this._set("active",this._mouseDown);break;case "mouseleave":case "mouseout":this._set("hovering",false);this._set("active",false);break;case "mousedown":this._set("active",true);this._mouseDown=true;var _228=this.connect(dojo.body(),"onmouseup",function(){this._mouseDown=false;this._set("active",false);this.disconnect(_228);});break;}}},_setStateClass:function(){var _229=this.baseClass.split(" ");function _22a(_22b){_229=_229.concat(dojo.map(_229,function(c){return c+_22b;}),"dijit"+_22b);};if(!this.isLeftToRight()){_22a("Rtl");}if(this.checked){_22a("Checked");}if(this.state){_22a(this.state);}if(this.selected){_22a("Selected");}if(this.disabled){_22a("Disabled");}else{if(this.readOnly){_22a("ReadOnly");}else{if(this.active){_22a("Active");}else{if(this.hovering){_22a("Hover");}}}}if(this._focused){_22a("Focused");}var tn=this.stateNode||this.domNode,_22c={};dojo.forEach(tn.className.split(" "),function(c){_22c[c]=true;});if("_stateClasses" in this){dojo.forEach(this._stateClasses,function(c){delete _22c[c];});}dojo.forEach(_229,function(c){_22c[c]=true;});var _22d=[];for(var c in _22c){_22d.push(c);}tn.className=_22d.join(" ");this._stateClasses=_229;},_trackMouseState:function(node,_22e){var _22f=false,_230=false,_231=false;var self=this,cn=dojo.hitch(this,"connect",node);function _232(){var _233=("disabled" in self&&self.disabled)||("readonly" in self&&self.readonly);dojo.toggleClass(node,_22e+"Hover",_22f&&!_230&&!_233);dojo.toggleClass(node,_22e+"Active",_230&&!_233);dojo.toggleClass(node,_22e+"Focused",_231&&!_233);};cn("onmouseenter",function(){_22f=true;_232();});cn("onmouseleave",function(){_22f=false;_230=false;_232();});cn("onmousedown",function(){_230=true;_232();});cn("onmouseup",function(){_230=false;_232();});cn("onfocus",function(){_231=true;_232();});cn("onblur",function(){_231=false;_232();});this.watch("disabled",_232);this.watch("readOnly",_232);}});}if(!dojo._hasResource["dijit.form._FormWidget"]){dojo._hasResource["dijit.form._FormWidget"]=true;dojo.provide("dijit.form._FormWidget");dojo.declare("dijit.form._FormWidget",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{name:"",alt:"",value:"",type:"text",tabIndex:"0",disabled:false,intermediateChanges:false,scrollOnFocus:true,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{value:"focusNode",id:"focusNode",tabIndex:"focusNode",alt:"focusNode",title:"focusNode"}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name=\""+this.name.replace(/'/g,"&quot;")+"\""):"";this.inherited(arguments);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousedown","_onMouseDown");},_setDisabledAttr:function(_234){this._set("disabled",_234);dojo.attr(this.focusNode,"disabled",_234);if(this.valueNode){dojo.attr(this.valueNode,"disabled",_234);}dijit.setWaiState(this.focusNode,"disabled",_234);if(_234){this._set("hovering",false);this._set("active",false);var _235="tabIndex" in this.attributeMap?this.attributeMap.tabIndex:"focusNode";dojo.forEach(dojo.isArray(_235)?_235:[_235],function(_236){var node=this[_236];if(dojo.isWebKit||dijit.hasDefaultTabStop(node)){node.setAttribute("tabIndex","-1");}else{node.removeAttribute("tabIndex");}},this);}else{if(this.tabIndex!=""){this.focusNode.setAttribute("tabIndex",this.tabIndex);}}},setDisabled:function(_237){dojo.deprecated("setDisabled("+_237+") is deprecated. Use set('disabled',"+_237+") instead.","","2.0");this.set("disabled",_237);},_onFocus:function(e){if(this.scrollOnFocus){dojo.window.scrollIntoView(this.domNode);}this.inherited(arguments);},isFocusable:function(){return !this.disabled&&this.focusNode&&(dojo.style(this.domNode,"display")!="none");},focus:function(){if(!this.disabled){dijit.focus(this.focusNode);}},compare:function(val1,val2){if(typeof val1=="number"&&typeof val2=="number"){return (isNaN(val1)&&isNaN(val2))?0:val1-val2;}else{if(val1>val2){return 1;}else{if(val1<val2){return -1;}else{return 0;}}}},onChange:function(_238){},_onChangeActive:false,_handleOnChange:function(_239,_23a){if(this._lastValueReported==undefined&&(_23a===null||!this._onChangeActive)){this._resetValue=this._lastValueReported=_239;}this._pendingOnChange=this._pendingOnChange||(typeof _239!=typeof this._lastValueReported)||(this.compare(_239,this._lastValueReported)!=0);if((this.intermediateChanges||_23a||_23a===undefined)&&this._pendingOnChange){this._lastValueReported=_239;this._pendingOnChange=false;if(this._onChangeActive){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);}this._onChangeHandle=setTimeout(dojo.hitch(this,function(){this._onChangeHandle=null;this.onChange(_239);}),0);}}},create:function(){this.inherited(arguments);this._onChangeActive=true;},destroy:function(){if(this._onChangeHandle){clearTimeout(this._onChangeHandle);this.onChange(this._lastValueReported);}this.inherited(arguments);},setValue:function(_23b){dojo.deprecated("dijit.form._FormWidget:setValue("+_23b+") is deprecated.  Use set('value',"+_23b+") instead.","","2.0");this.set("value",_23b);},getValue:function(){dojo.deprecated(this.declaredClass+"::getValue() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_onMouseDown:function(e){if(!e.ctrlKey&&dojo.mouseButtons.isLeft(e)&&this.isFocusable()){var _23c=this.connect(dojo.body(),"onmouseup",function(){if(this.isFocusable()){this.focus();}this.disconnect(_23c);});}}});dojo.declare("dijit.form._FormValueWidget",dijit.form._FormWidget,{readOnly:false,attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"",readOnly:"focusNode"}),_setReadOnlyAttr:function(_23d){dojo.attr(this.focusNode,"readOnly",_23d);dijit.setWaiState(this.focusNode,"readonly",_23d);this._set("readOnly",_23d);},postCreate:function(){this.inherited(arguments);if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){this.connect(this.focusNode||this.domNode,"onkeydown",this._onKeyDown);}if(this._resetValue===undefined){this._lastValueReported=this._resetValue=this.value;}},_setValueAttr:function(_23e,_23f){this._handleOnChange(_23e,_23f);},_handleOnChange:function(_240,_241){this._set("value",_240);this.inherited(arguments);},undo:function(){this._setValueAttr(this._lastValueReported,false);},reset:function(){this._hasBeenBlurred=false;this._setValueAttr(this._resetValue,true);},_onKeyDown:function(e){if(e.keyCode==dojo.keys.ESCAPE&&!(e.ctrlKey||e.altKey||e.metaKey)){var te;if(dojo.isIE){e.preventDefault();te=document.createEventObject();te.keyCode=dojo.keys.ESCAPE;te.shiftKey=e.shiftKey;e.srcElement.fireEvent("onkeypress",te);}}},_layoutHackIE7:function(){if(dojo.isIE==7){var _242=this.domNode;var _243=_242.parentNode;var _244=_242.firstChild||_242;var _245=_244.style.filter;var _246=this;while(_243&&_243.clientHeight==0){(function ping(){var _247=_246.connect(_243,"onscroll",function(e){_246.disconnect(_247);_244.style.filter=(new Date()).getMilliseconds();setTimeout(function(){_244.style.filter=_245;},0);});})();_243=_243.parentNode;}}}});}if(!dojo._hasResource["dijit._HasDropDown"]){dojo._hasResource["dijit._HasDropDown"]=true;dojo.provide("dijit._HasDropDown");dojo.declare("dijit._HasDropDown",null,{_buttonNode:null,_arrowWrapperNode:null,_popupStateNode:null,_aroundNode:null,dropDown:null,autoWidth:true,forceWidth:false,maxHeight:0,dropDownPosition:["below","above"],_stopClickEvents:true,_onDropDownMouseDown:function(e){if(this.disabled||this.readOnly){return;}dojo.stopEvent(e);this._docHandler=this.connect(dojo.doc,"onmouseup","_onDropDownMouseUp");this.toggleDropDown();},_onDropDownMouseUp:function(e){if(e&&this._docHandler){this.disconnect(this._docHandler);}var _248=this.dropDown,_249=false;if(e&&this._opened){var c=dojo.position(this._buttonNode,true);if(!(e.pageX>=c.x&&e.pageX<=c.x+c.w)||!(e.pageY>=c.y&&e.pageY<=c.y+c.h)){var t=e.target;while(t&&!_249){if(dojo.hasClass(t,"dijitPopup")){_249=true;}else{t=t.parentNode;}}if(_249){t=e.target;if(_248.onItemClick){var _24a;while(t&&!(_24a=dijit.byNode(t))){t=t.parentNode;}if(_24a&&_24a.onClick&&_24a.getParent){_24a.getParent().onItemClick(_24a,e);}}return;}}}if(this._opened&&_248.focus&&_248.autoFocus!==false){window.setTimeout(dojo.hitch(_248,"focus"),1);}},_onDropDownClick:function(e){if(this._stopClickEvents){dojo.stopEvent(e);}},buildRendering:function(){this.inherited(arguments);this._buttonNode=this._buttonNode||this.focusNode||this.domNode;this._popupStateNode=this._popupStateNode||this.focusNode||this._buttonNode;var _24b={"after":this.isLeftToRight()?"Right":"Left","before":this.isLeftToRight()?"Left":"Right","above":"Up","below":"Down","left":"Left","right":"Right"}[this.dropDownPosition[0]]||this.dropDownPosition[0]||"Down";dojo.addClass(this._arrowWrapperNode||this._buttonNode,"dijit"+_24b+"ArrowButton");},postCreate:function(){this.inherited(arguments);this.connect(this._buttonNode,"onmousedown","_onDropDownMouseDown");this.connect(this._buttonNode,"onclick","_onDropDownClick");this.connect(this.focusNode,"onkeypress","_onKey");this.connect(this.focusNode,"onkeyup","_onKeyUp");},destroy:function(){if(this.dropDown){if(!this.dropDown._destroyed){this.dropDown.destroyRecursive();}delete this.dropDown;}this.inherited(arguments);},_onKey:function(e){if(this.disabled||this.readOnly){return;}var d=this.dropDown,_24c=e.target;if(d&&this._opened&&d.handleKey){if(d.handleKey(e)===false){dojo.stopEvent(e);return;}}if(d&&this._opened&&e.charOrCode==dojo.keys.ESCAPE){this.closeDropDown();dojo.stopEvent(e);}else{if(!this._opened&&(e.charOrCode==dojo.keys.DOWN_ARROW||((e.charOrCode==dojo.keys.ENTER||e.charOrCode==" ")&&((_24c.tagName||"").toLowerCase()!=="input"||(_24c.type&&_24c.type.toLowerCase()!=="text"))))){this._toggleOnKeyUp=true;dojo.stopEvent(e);}}},_onKeyUp:function(){if(this._toggleOnKeyUp){delete this._toggleOnKeyUp;this.toggleDropDown();var d=this.dropDown;if(d&&d.focus){setTimeout(dojo.hitch(d,"focus"),1);}}},_onBlur:function(){var _24d=dijit._curFocus&&this.dropDown&&dojo.isDescendant(dijit._curFocus,this.dropDown.domNode);this.closeDropDown(_24d);this.inherited(arguments);},isLoaded:function(){return true;},loadDropDown:function(_24e){_24e();},toggleDropDown:function(){if(this.disabled||this.readOnly){return;}if(!this._opened){if(!this.isLoaded()){this.loadDropDown(dojo.hitch(this,"openDropDown"));return;}else{this.openDropDown();}}else{this.closeDropDown();}},openDropDown:function(){var _24f=this.dropDown,_250=_24f.domNode,_251=this._aroundNode||this.domNode,self=this;if(!this._preparedNode){this._preparedNode=true;if(_250.style.width){this._explicitDDWidth=true;}if(_250.style.height){this._explicitDDHeight=true;}}if(this.maxHeight||this.forceWidth||this.autoWidth){var _252={display:"",visibility:"hidden"};if(!this._explicitDDWidth){_252.width="";}if(!this._explicitDDHeight){_252.height="";}dojo.style(_250,_252);var _253=this.maxHeight;if(_253==-1){var _254=dojo.window.getBox(),_255=dojo.position(_251,false);_253=Math.floor(Math.max(_255.y,_254.h-(_255.y+_255.h)));}if(_24f.startup&&!_24f._started){_24f.startup();}dijit.popup.moveOffScreen(_24f);var mb=dojo._getMarginSize(_250);var _256=(_253&&mb.h>_253);dojo.style(_250,{overflowX:"hidden",overflowY:_256?"auto":"hidden"});if(_256){mb.h=_253;if("w" in mb){mb.w+=16;}}else{delete mb.h;}if(this.forceWidth){mb.w=_251.offsetWidth;}else{if(this.autoWidth){mb.w=Math.max(mb.w,_251.offsetWidth);}else{delete mb.w;}}if(dojo.isFunction(_24f.resize)){_24f.resize(mb);}else{dojo.marginBox(_250,mb);}}var _257=dijit.popup.open({parent:this,popup:_24f,around:_251,orient:dijit.getPopupAroundAlignment((this.dropDownPosition&&this.dropDownPosition.length)?this.dropDownPosition:["below"],this.isLeftToRight()),onExecute:function(){self.closeDropDown(true);},onCancel:function(){self.closeDropDown(true);},onClose:function(){dojo.attr(self._popupStateNode,"popupActive",false);dojo.removeClass(self._popupStateNode,"dijitHasDropDownOpen");self._opened=false;}});dojo.attr(this._popupStateNode,"popupActive","true");dojo.addClass(self._popupStateNode,"dijitHasDropDownOpen");this._opened=true;return _257;},closeDropDown:function(_258){if(this._opened){if(_258){this.focus();}dijit.popup.close(this.dropDown);this._opened=false;}}});}if(!dojo._hasResource["dijit.form.Button"]){dojo._hasResource["dijit.form.Button"]=true;dojo.provide("dijit.form.Button");dojo.declare("dijit.form.Button",dijit.form._FormWidget,{label:"",showLabel:true,iconClass:"",type:"button",baseClass:"dijitButton",templateString:dojo.cache("dijit.form","templates/Button.html","<span class=\"dijit dijitReset dijitInline\"\n\t><span class=\"dijitReset dijitInline dijitButtonNode\"\n\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"titleNode,focusNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\"></span\n\t\t\t><span class=\"dijitReset dijitToggleButtonIconChar\">&#x25CF;</span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t\tdojoAttachPoint=\"containerNode\"\n\t\t\t></span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdojoAttachPoint=\"valueNode\"\n/></span>\n"),attributeMap:dojo.delegate(dijit.form._FormWidget.prototype.attributeMap,{value:"valueNode"}),_onClick:function(e){if(this.disabled){return false;}this._clicked();return this.onClick(e);},_onButtonClick:function(e){if(this._onClick(e)===false){e.preventDefault();}else{if(this.type=="submit"&&!(this.valueNode||this.focusNode).form){for(var node=this.domNode;node.parentNode;node=node.parentNode){var _259=dijit.byNode(node);if(_259&&typeof _259._onSubmit=="function"){_259._onSubmit(e);break;}}}else{if(this.valueNode){this.valueNode.click();e.preventDefault();}}}},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.focusNode,false);},_fillContent:function(_25a){if(_25a&&(!this.params||!("label" in this.params))){this.set("label",_25a.innerHTML);}},_setShowLabelAttr:function(val){if(this.containerNode){dojo.toggleClass(this.containerNode,"dijitDisplayNone",!val);}this._set("showLabel",val);},onClick:function(e){return true;},_clicked:function(e){},setLabel:function(_25b){dojo.deprecated("dijit.form.Button.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_25b);},_setLabelAttr:function(_25c){this._set("label",_25c);this.containerNode.innerHTML=_25c;if(this.showLabel==false&&!this.params.title){this.titleNode.title=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},_setIconClassAttr:function(val){var _25d=this.iconClass||"dijitNoIcon",_25e=val||"dijitNoIcon";dojo.replaceClass(this.iconNode,_25e,_25d);this._set("iconClass",val);}});dojo.declare("dijit.form.DropDownButton",[dijit.form.Button,dijit._Container,dijit._HasDropDown],{baseClass:"dijitDropDownButton",templateString:dojo.cache("dijit.form","templates/DropDownButton.html","<span class=\"dijit dijitReset dijitInline\"\n\t><span class='dijitReset dijitInline dijitButtonNode'\n\t\tdojoAttachEvent=\"ondijitclick:_onButtonClick\" dojoAttachPoint=\"_buttonNode\"\n\t\t><span class=\"dijitReset dijitStretch dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"focusNode,titleNode,_arrowWrapperNode\"\n\t\t\trole=\"button\" aria-haspopup=\"true\" aria-labelledby=\"${id}_label\"\n\t\t\t><span class=\"dijitReset dijitInline dijitIcon\"\n\t\t\t\tdojoAttachPoint=\"iconNode\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"\n\t\t\t\tdojoAttachPoint=\"containerNode,_popupStateNode\"\n\t\t\t\tid=\"${id}_label\"\n\t\t\t></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonInner\"></span\n\t\t\t><span class=\"dijitReset dijitInline dijitArrowButtonChar\">&#9660;</span\n\t\t></span\n\t></span\n\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" class=\"dijitOffScreen\" tabIndex=\"-1\"\n\t\tdojoAttachPoint=\"valueNode\"\n/></span>\n"),_fillContent:function(){if(this.srcNodeRef){var _25f=dojo.query("*",this.srcNodeRef);dijit.form.DropDownButton.superclass._fillContent.call(this,_25f[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}if(!this.dropDown&&this.dropDownContainer){var _260=dojo.query("[widgetId]",this.dropDownContainer)[0];this.dropDown=dijit.byNode(_260);delete this.dropDownContainer;}if(this.dropDown){dijit.popup.hide(this.dropDown);}this.inherited(arguments);},isLoaded:function(){var _261=this.dropDown;return (!!_261&&(!_261.href||_261.isLoaded));},loadDropDown:function(){var _262=this.dropDown;if(!_262){return;}if(!this.isLoaded()){var _263=dojo.connect(_262,"onLoad",this,function(){dojo.disconnect(_263);this.openDropDown();});_262.refresh();}else{this.openDropDown();}},isFocusable:function(){return this.inherited(arguments)&&!this._mouseDown;}});dojo.declare("dijit.form.ComboButton",dijit.form.DropDownButton,{templateString:dojo.cache("dijit.form","templates/ComboButton.html","<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tcellspacing='0' cellpadding='0' role=\"presentation\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonNode\" dojoAttachPoint=\"buttonNode\" dojoAttachEvent=\"ondijitclick:_onButtonClick,onkeypress:_onButtonKeyPress\"\n\t\t><div id=\"${id}_button\" class=\"dijitReset dijitButtonContents\"\n\t\t\tdojoAttachPoint=\"titleNode\"\n\t\t\trole=\"button\" aria-labelledby=\"${id}_label\"\n\t\t\t><div class=\"dijitReset dijitInline dijitIcon\" dojoAttachPoint=\"iconNode\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitInline dijitButtonText\" id=\"${id}_label\" dojoAttachPoint=\"containerNode\" role=\"presentation\"></div\n\t\t></div\n\t\t></td\n\t\t><td id=\"${id}_arrow\" class='dijitReset dijitRight dijitButtonNode dijitArrowButton'\n\t\t\tdojoAttachPoint=\"_popupStateNode,focusNode,_buttonNode\"\n\t\t\tdojoAttachEvent=\"onkeypress:_onArrowKeyPress\"\n\t\t\ttitle=\"${optionsTitle}\"\n\t\t\trole=\"button\" aria-haspopup=\"true\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t\t><td style=\"display:none !important;\"\n\t\t\t><input ${!nameAttrSetting} type=\"${type}\" value=\"${value}\" dojoAttachPoint=\"valueNode\"\n\t\t/></td></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{id:"",tabIndex:["focusNode","titleNode"],title:"titleNode"}),optionsTitle:"",baseClass:"dijitComboButton",cssStateNodes:{"buttonNode":"dijitButtonNode","titleNode":"dijitButtonContents","_popupStateNode":"dijitDownArrowButton"},_focusedNode:null,_onButtonKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"RIGHT_ARROW":"LEFT_ARROW"]){dijit.focus(this._popupStateNode);dojo.stopEvent(evt);}},_onArrowKeyPress:function(evt){if(evt.charOrCode==dojo.keys[this.isLeftToRight()?"LEFT_ARROW":"RIGHT_ARROW"]){dijit.focus(this.titleNode);dojo.stopEvent(evt);}},focus:function(_264){if(!this.disabled){dijit.focus(_264=="start"?this.titleNode:this._popupStateNode);}}});dojo.declare("dijit.form.ToggleButton",dijit.form.Button,{baseClass:"dijitToggleButton",checked:false,attributeMap:dojo.mixin(dojo.clone(dijit.form.Button.prototype.attributeMap),{checked:"focusNode"}),_clicked:function(evt){this.set("checked",!this.checked);},_setCheckedAttr:function(_265,_266){this._set("checked",_265);dojo.attr(this.focusNode||this.domNode,"checked",_265);dijit.setWaiState(this.focusNode||this.domNode,"pressed",_265);this._handleOnChange(_265,_266);},setChecked:function(_267){dojo.deprecated("setChecked("+_267+") is deprecated. Use set('checked',"+_267+") instead.","","2.0");this.set("checked",_267);},reset:function(){this._hasBeenBlurred=false;this.set("checked",this.params.checked||false);}});}if(!dojo._hasResource["dijit.form.ToggleButton"]){dojo._hasResource["dijit.form.ToggleButton"]=true;dojo.provide("dijit.form.ToggleButton");}if(!dojo._hasResource["dijit.layout.StackController"]){dojo._hasResource["dijit.layout.StackController"]=true;dojo.provide("dijit.layout.StackController");dojo.declare("dijit.layout.StackController",[dijit._Widget,dijit._Templated,dijit._Container],{templateString:"<span role='tablist' dojoAttachEvent='onkeypress' class='dijitStackController'></span>",containerId:"",buttonWidget:"dijit.layout._StackButton",constructor:function(){this.pane2button={};this.pane2connects={};this.pane2watches={};},buildRendering:function(){this.inherited(arguments);dijit.setWaiRole(this.domNode,"tablist");},postCreate:function(){this.inherited(arguments);this.subscribe(this.containerId+"-startup","onStartup");this.subscribe(this.containerId+"-addChild","onAddChild");this.subscribe(this.containerId+"-removeChild","onRemoveChild");this.subscribe(this.containerId+"-selectChild","onSelectChild");this.subscribe(this.containerId+"-containerKeyPress","onContainerKeyPress");},onStartup:function(info){dojo.forEach(info.children,this.onAddChild,this);if(info.selected){this.onSelectChild(info.selected);}},destroy:function(){for(var pane in this.pane2button){this.onRemoveChild(dijit.byId(pane));}this.inherited(arguments);},onAddChild:function(page,_268){var cls=dojo.getObject(this.buttonWidget);var _269=new cls({id:this.id+"_"+page.id,label:page.title,dir:page.dir,lang:page.lang,showLabel:page.showTitle,iconClass:page.iconClass,closeButton:page.closable,title:page.tooltip});dijit.setWaiState(_269.focusNode,"selected","false");var _26a=["title","showTitle","iconClass","closable","tooltip"],_26b=["label","showLabel","iconClass","closeButton","title"];this.pane2watches[page.id]=dojo.map(_26a,function(_26c,idx){return page.watch(_26c,function(name,_26d,_26e){_269.set(_26b[idx],_26e);});});this.pane2connects[page.id]=[this.connect(_269,"onClick",dojo.hitch(this,"onButtonClick",page)),this.connect(_269,"onClickCloseButton",dojo.hitch(this,"onCloseButtonClick",page))];this.addChild(_269,_268);this.pane2button[page.id]=_269;page.controlButton=_269;if(!this._currentChild){_269.focusNode.setAttribute("tabIndex","0");dijit.setWaiState(_269.focusNode,"selected","true");this._currentChild=page;}if(!this.isLeftToRight()&&dojo.isIE&&this._rectifyRtlTabList){this._rectifyRtlTabList();}},onRemoveChild:function(page){if(this._currentChild===page){this._currentChild=null;}dojo.forEach(this.pane2connects[page.id],dojo.hitch(this,"disconnect"));delete this.pane2connects[page.id];dojo.forEach(this.pane2watches[page.id],function(w){w.unwatch();});delete this.pane2watches[page.id];var _26f=this.pane2button[page.id];if(_26f){this.removeChild(_26f);delete this.pane2button[page.id];_26f.destroy();}delete page.controlButton;},onSelectChild:function(page){if(!page){return;}if(this._currentChild){var _270=this.pane2button[this._currentChild.id];_270.set("checked",false);dijit.setWaiState(_270.focusNode,"selected","false");_270.focusNode.setAttribute("tabIndex","-1");}var _271=this.pane2button[page.id];_271.set("checked",true);dijit.setWaiState(_271.focusNode,"selected","true");this._currentChild=page;_271.focusNode.setAttribute("tabIndex","0");var _272=dijit.byId(this.containerId);dijit.setWaiState(_272.containerNode,"labelledby",_271.id);},onButtonClick:function(page){var _273=dijit.byId(this.containerId);_273.selectChild(page);},onCloseButtonClick:function(page){var _274=dijit.byId(this.containerId);_274.closeChild(page);if(this._currentChild){var b=this.pane2button[this._currentChild.id];if(b){dijit.focus(b.focusNode||b.domNode);}}},adjacent:function(_275){if(!this.isLeftToRight()&&(!this.tabPosition||/top|bottom/.test(this.tabPosition))){_275=!_275;}var _276=this.getChildren();var _277=dojo.indexOf(_276,this.pane2button[this._currentChild.id]);var _278=_275?1:_276.length-1;return _276[(_277+_278)%_276.length];},onkeypress:function(e){if(this.disabled||e.altKey){return;}var _279=null;if(e.ctrlKey||!e._djpage){var k=dojo.keys;switch(e.charOrCode){case k.LEFT_ARROW:case k.UP_ARROW:if(!e._djpage){_279=false;}break;case k.PAGE_UP:if(e.ctrlKey){_279=false;}break;case k.RIGHT_ARROW:case k.DOWN_ARROW:if(!e._djpage){_279=true;}break;case k.PAGE_DOWN:if(e.ctrlKey){_279=true;}break;case k.HOME:case k.END:var _27a=this.getChildren();if(_27a&&_27a.length){_27a[e.charOrCode==k.HOME?0:_27a.length-1].onClick();}dojo.stopEvent(e);break;case k.DELETE:if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);break;default:if(e.ctrlKey){if(e.charOrCode===k.TAB){this.adjacent(!e.shiftKey).onClick();dojo.stopEvent(e);}else{if(e.charOrCode=="w"){if(this._currentChild.closable){this.onCloseButtonClick(this._currentChild);}dojo.stopEvent(e);}}}}if(_279!==null){this.adjacent(_279).onClick();dojo.stopEvent(e);}}},onContainerKeyPress:function(info){info.e._djpage=info.page;this.onkeypress(info.e);}});dojo.declare("dijit.layout._StackButton",dijit.form.ToggleButton,{tabIndex:"-1",buildRendering:function(evt){this.inherited(arguments);dijit.setWaiRole((this.focusNode||this.domNode),"tab");},onClick:function(evt){dijit.focus(this.focusNode);},onClickCloseButton:function(evt){evt.stopPropagation();}});}if(!dojo._hasResource["dijit.layout.StackContainer"]){dojo._hasResource["dijit.layout.StackContainer"]=true;dojo.provide("dijit.layout.StackContainer");dojo.declare("dijit.layout.StackContainer",dijit.layout._LayoutWidget,{doLayout:true,persist:false,baseClass:"dijitStackContainer",buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitLayoutContainer");dijit.setWaiRole(this.containerNode,"tabpanel");},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onkeypress",this._onKeyPress);},startup:function(){if(this._started){return;}var _27b=this.getChildren();dojo.forEach(_27b,this._setupChild,this);if(this.persist){this.selectedChildWidget=dijit.byId(dojo.cookie(this.id+"_selectedChild"));}else{dojo.some(_27b,function(_27c){if(_27c.selected){this.selectedChildWidget=_27c;}return _27c.selected;},this);}var _27d=this.selectedChildWidget;if(!_27d&&_27b[0]){_27d=this.selectedChildWidget=_27b[0];_27d.selected=true;}dojo.publish(this.id+"-startup",[{children:_27b,selected:_27d}]);this.inherited(arguments);},resize:function(){var _27e=this.selectedChildWidget;if(_27e&&!this._hasBeenShown){this._hasBeenShown=true;this._showChild(_27e);}this.inherited(arguments);},_setupChild:function(_27f){this.inherited(arguments);dojo.replaceClass(_27f.domNode,"dijitHidden","dijitVisible");_27f.domNode.title="";},addChild:function(_280,_281){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-addChild",[_280,_281]);this.layout();if(!this.selectedChildWidget){this.selectChild(_280);}}},removeChild:function(page){this.inherited(arguments);if(this._started){dojo.publish(this.id+"-removeChild",[page]);}if(this._beingDestroyed){return;}if(this.selectedChildWidget===page){this.selectedChildWidget=undefined;if(this._started){var _282=this.getChildren();if(_282.length){this.selectChild(_282[0]);}}}if(this._started){this.layout();}},selectChild:function(page,_283){page=dijit.byId(page);if(this.selectedChildWidget!=page){var d=this._transition(page,this.selectedChildWidget,_283);this._set("selectedChildWidget",page);dojo.publish(this.id+"-selectChild",[page]);if(this.persist){dojo.cookie(this.id+"_selectedChild",this.selectedChildWidget.id);}}return d;},_transition:function(_284,_285,_286){if(_285){this._hideChild(_285);}var d=this._showChild(_284);if(_284.resize){if(this.doLayout){_284.resize(this._containerContentBox||this._contentBox);}else{_284.resize();}}return d;},_adjacent:function(_287){var _288=this.getChildren();var _289=dojo.indexOf(_288,this.selectedChildWidget);_289+=_287?1:_288.length-1;return _288[_289%_288.length];},forward:function(){return this.selectChild(this._adjacent(true),true);},back:function(){return this.selectChild(this._adjacent(false),true);},_onKeyPress:function(e){dojo.publish(this.id+"-containerKeyPress",[{e:e,page:this}]);},layout:function(){if(this.doLayout&&this.selectedChildWidget&&this.selectedChildWidget.resize){this.selectedChildWidget.resize(this._containerContentBox||this._contentBox);}},_showChild:function(page){var _28a=this.getChildren();page.isFirstChild=(page==_28a[0]);page.isLastChild=(page==_28a[_28a.length-1]);page._set("selected",true);dojo.replaceClass(page.domNode,"dijitVisible","dijitHidden");return page._onShow()||true;},_hideChild:function(page){page._set("selected",false);dojo.replaceClass(page.domNode,"dijitHidden","dijitVisible");page.onHide();},closeChild:function(page){var _28b=page.onClose(this,page);if(_28b){this.removeChild(page);page.destroyRecursive();}},destroyDescendants:function(_28c){dojo.forEach(this.getChildren(),function(_28d){this.removeChild(_28d);_28d.destroyRecursive(_28c);},this);}});dojo.extend(dijit._Widget,{selected:false,closable:false,iconClass:"",showTitle:true});}if(!dojo._hasResource["dijit.layout._TabContainerBase"]){dojo._hasResource["dijit.layout._TabContainerBase"]=true;dojo.provide("dijit.layout._TabContainerBase");dojo.declare("dijit.layout._TabContainerBase",[dijit.layout.StackContainer,dijit._Templated],{tabPosition:"top",baseClass:"dijitTabContainer",tabStrip:false,nested:false,templateString:dojo.cache("dijit.layout","templates/TabContainer.html","<div class=\"dijitTabContainer\">\n\t<div class=\"dijitTabListWrapper\" dojoAttachPoint=\"tablistNode\"></div>\n\t<div dojoAttachPoint=\"tablistSpacer\" class=\"dijitTabSpacer ${baseClass}-spacer\"></div>\n\t<div class=\"dijitTabPaneWrapper ${baseClass}-container\" dojoAttachPoint=\"containerNode\"></div>\n</div>\n"),postMixInProperties:function(){this.baseClass+=this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"");this.srcNodeRef&&dojo.style(this.srcNodeRef,"visibility","hidden");this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.tablist=this._makeController(this.tablistNode);if(!this.doLayout){dojo.addClass(this.domNode,"dijitTabContainerNoLayout");}if(this.nested){dojo.addClass(this.domNode,"dijitTabContainerNested");dojo.addClass(this.tablist.containerNode,"dijitTabContainerTabListNested");dojo.addClass(this.tablistSpacer,"dijitTabContainerSpacerNested");dojo.addClass(this.containerNode,"dijitTabPaneWrapperNested");}else{dojo.addClass(this.domNode,"tabStrip-"+(this.tabStrip?"enabled":"disabled"));}},_setupChild:function(tab){dojo.addClass(tab.domNode,"dijitTabPane");this.inherited(arguments);},startup:function(){if(this._started){return;}this.tablist.startup();this.inherited(arguments);},layout:function(){if(!this._contentBox||typeof (this._contentBox.l)=="undefined"){return;}var sc=this.selectedChildWidget;if(this.doLayout){var _28e=this.tabPosition.replace(/-h/,"");this.tablist.layoutAlign=_28e;var _28f=[this.tablist,{domNode:this.tablistSpacer,layoutAlign:_28e},{domNode:this.containerNode,layoutAlign:"client"}];dijit.layout.layoutChildren(this.domNode,this._contentBox,_28f);this._containerContentBox=dijit.layout.marginBox2contentBox(this.containerNode,_28f[2]);if(sc&&sc.resize){sc.resize(this._containerContentBox);}}else{if(this.tablist.resize){var s=this.tablist.domNode.style;s.width="0";var _290=dojo.contentBox(this.domNode).w;s.width="";this.tablist.resize({w:_290});}if(sc&&sc.resize){sc.resize();}}},destroy:function(){if(this.tablist){this.tablist.destroy();}this.inherited(arguments);}});}if(!dojo._hasResource["dijit._KeyNavContainer"]){dojo._hasResource["dijit._KeyNavContainer"]=true;dojo.provide("dijit._KeyNavContainer");dojo.declare("dijit._KeyNavContainer",dijit._Container,{tabIndex:"0",_keyNavCodes:{},connectKeyNavHandlers:function(_291,_292){var _293=(this._keyNavCodes={});var prev=dojo.hitch(this,this.focusPrev);var next=dojo.hitch(this,this.focusNext);dojo.forEach(_291,function(code){_293[code]=prev;});dojo.forEach(_292,function(code){_293[code]=next;});_293[dojo.keys.HOME]=dojo.hitch(this,"focusFirstChild");_293[dojo.keys.END]=dojo.hitch(this,"focusLastChild");this.connect(this.domNode,"onkeypress","_onContainerKeypress");this.connect(this.domNode,"onfocus","_onContainerFocus");},startupKeyNavChildren:function(){dojo.forEach(this.getChildren(),dojo.hitch(this,"_startupChild"));},addChild:function(_294,_295){dijit._KeyNavContainer.superclass.addChild.apply(this,arguments);this._startupChild(_294);},focus:function(){this.focusFirstChild();},focusFirstChild:function(){var _296=this._getFirstFocusableChild();if(_296){this.focusChild(_296);}},focusLastChild:function(){var _297=this._getLastFocusableChild();if(_297){this.focusChild(_297);}},focusNext:function(){var _298=this._getNextFocusableChild(this.focusedChild,1);this.focusChild(_298);},focusPrev:function(){var _299=this._getNextFocusableChild(this.focusedChild,-1);this.focusChild(_299,true);},focusChild:function(_29a,last){if(this.focusedChild&&_29a!==this.focusedChild){this._onChildBlur(this.focusedChild);}_29a.set("tabIndex",this.tabIndex);_29a.focus(last?"end":"start");this._set("focusedChild",_29a);},_startupChild:function(_29b){_29b.set("tabIndex","-1");this.connect(_29b,"_onFocus",function(){_29b.set("tabIndex",this.tabIndex);});this.connect(_29b,"_onBlur",function(){_29b.set("tabIndex","-1");});},_onContainerFocus:function(evt){if(evt.target!==this.domNode){return;}this.focusFirstChild();dojo.attr(this.domNode,"tabIndex","-1");},_onBlur:function(evt){if(this.tabIndex){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}this.inherited(arguments);},_onContainerKeypress:function(evt){if(evt.ctrlKey||evt.altKey){return;}var func=this._keyNavCodes[evt.charOrCode];if(func){func();dojo.stopEvent(evt);}},_onChildBlur:function(_29c){},_getFirstFocusableChild:function(){return this._getNextFocusableChild(null,1);},_getLastFocusableChild:function(){return this._getNextFocusableChild(null,-1);},_getNextFocusableChild:function(_29d,dir){if(_29d){_29d=this._getSiblingOfChild(_29d,dir);}var _29e=this.getChildren();for(var i=0;i<_29e.length;i++){if(!_29d){_29d=_29e[(dir>0)?0:(_29e.length-1)];}if(_29d.isFocusable()){return _29d;}_29d=this._getSiblingOfChild(_29d,dir);}return null;}});}if(!dojo._hasResource["dijit.MenuItem"]){dojo._hasResource["dijit.MenuItem"]=true;dojo.provide("dijit.MenuItem");dojo.declare("dijit.MenuItem",[dijit._Widget,dijit._Templated,dijit._Contained,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/MenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitem\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"arrowWrapper\" style=\"visibility: hidden\">\n\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuExpand\"/>\n\t\t\t<span class=\"dijitMenuExpandA11y\">+</span>\n\t\t</div>\n\t</td>\n</tr>\n"),attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{label:{node:"containerNode",type:"innerHTML"},iconClass:{node:"iconNode",type:"class"}}),baseClass:"dijitMenuItem",label:"",iconClass:"",accelKey:"",disabled:false,_fillContent:function(_29f){if(_29f&&!("label" in this.params)){this.set("label",_29f.innerHTML);}},buildRendering:function(){this.inherited(arguments);var _2a0=this.id+"_text";dojo.attr(this.containerNode,"id",_2a0);if(this.accelKeyNode){dojo.attr(this.accelKeyNode,"id",this.id+"_accel");_2a0+=" "+this.id+"_accel";}dijit.setWaiState(this.domNode,"labelledby",_2a0);dojo.setSelectable(this.domNode,false);},_onHover:function(){this.getParent().onItemHover(this);},_onUnhover:function(){this.getParent().onItemUnhover(this);this._set("hovering",false);},_onClick:function(evt){this.getParent().onItemClick(this,evt);dojo.stopEvent(evt);},onClick:function(evt){},focus:function(){try{if(dojo.isIE==8){this.containerNode.focus();}dijit.focus(this.focusNode);}catch(e){}},_onFocus:function(){this._setSelected(true);this.getParent()._onItemFocus(this);this.inherited(arguments);},_setSelected:function(_2a1){dojo.toggleClass(this.domNode,"dijitMenuItemSelected",_2a1);},setLabel:function(_2a2){dojo.deprecated("dijit.MenuItem.setLabel() is deprecated.  Use set('label', ...) instead.","","2.0");this.set("label",_2a2);},setDisabled:function(_2a3){dojo.deprecated("dijit.Menu.setDisabled() is deprecated.  Use set('disabled', bool) instead.","","2.0");this.set("disabled",_2a3);},_setDisabledAttr:function(_2a4){dijit.setWaiState(this.focusNode,"disabled",_2a4?"true":"false");this._set("disabled",_2a4);},_setAccelKeyAttr:function(_2a5){this.accelKeyNode.style.display=_2a5?"":"none";this.accelKeyNode.innerHTML=_2a5;dojo.attr(this.containerNode,"colSpan",_2a5?"1":"2");this._set("accelKey",_2a5);}});}if(!dojo._hasResource["dijit.PopupMenuItem"]){dojo._hasResource["dijit.PopupMenuItem"]=true;dojo.provide("dijit.PopupMenuItem");dojo.declare("dijit.PopupMenuItem",dijit.MenuItem,{_fillContent:function(){if(this.srcNodeRef){var _2a6=dojo.query("*",this.srcNodeRef);dijit.PopupMenuItem.superclass._fillContent.call(this,_2a6[0]);this.dropDownContainer=this.srcNodeRef;}},startup:function(){if(this._started){return;}this.inherited(arguments);if(!this.popup){var node=dojo.query("[widgetId]",this.dropDownContainer)[0];this.popup=dijit.byNode(node);}dojo.body().appendChild(this.popup.domNode);this.popup.startup();this.popup.domNode.style.display="none";if(this.arrowWrapper){dojo.style(this.arrowWrapper,"visibility","");}dijit.setWaiState(this.focusNode,"haspopup","true");},destroyDescendants:function(){if(this.popup){if(!this.popup._destroyed){this.popup.destroyRecursive();}delete this.popup;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.CheckedMenuItem"]){dojo._hasResource["dijit.CheckedMenuItem"]=true;dojo.provide("dijit.CheckedMenuItem");dojo.declare("dijit.CheckedMenuItem",dijit.MenuItem,{templateString:dojo.cache("dijit","templates/CheckedMenuItem.html","<tr class=\"dijitReset dijitMenuItem\" dojoAttachPoint=\"focusNode\" role=\"menuitemcheckbox\" tabIndex=\"-1\"\n\t\tdojoAttachEvent=\"onmouseenter:_onHover,onmouseleave:_onUnhover,ondijitclick:_onClick\">\n\t<td class=\"dijitReset dijitMenuItemIconCell\" role=\"presentation\">\n\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitMenuItemIcon dijitCheckedMenuItemIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t<span class=\"dijitCheckedMenuItemIconChar\">&#10003;</span>\n\t</td>\n\t<td class=\"dijitReset dijitMenuItemLabel\" colspan=\"2\" dojoAttachPoint=\"containerNode,labelNode\"></td>\n\t<td class=\"dijitReset dijitMenuItemAccelKey\" style=\"display: none\" dojoAttachPoint=\"accelKeyNode\"></td>\n\t<td class=\"dijitReset dijitMenuArrowCell\" role=\"presentation\">&nbsp;</td>\n</tr>\n"),checked:false,_setCheckedAttr:function(_2a7){dojo.toggleClass(this.domNode,"dijitCheckedMenuItemChecked",_2a7);dijit.setWaiState(this.domNode,"checked",_2a7);this._set("checked",_2a7);},onChange:function(_2a8){},_onClick:function(e){if(!this.disabled){this.set("checked",!this.checked);this.onChange(this.checked);}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.MenuSeparator"]){dojo._hasResource["dijit.MenuSeparator"]=true;dojo.provide("dijit.MenuSeparator");dojo.declare("dijit.MenuSeparator",[dijit._Widget,dijit._Templated,dijit._Contained],{templateString:dojo.cache("dijit","templates/MenuSeparator.html","<tr class=\"dijitMenuSeparator\">\n\t<td class=\"dijitMenuSeparatorIconCell\">\n\t\t<div class=\"dijitMenuSeparatorTop\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n\t<td colspan=\"3\" class=\"dijitMenuSeparatorLabelCell\">\n\t\t<div class=\"dijitMenuSeparatorTop dijitMenuSeparatorLabel\"></div>\n\t\t<div class=\"dijitMenuSeparatorBottom\"></div>\n\t</td>\n</tr>\n"),buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Menu"]){dojo._hasResource["dijit.Menu"]=true;dojo.provide("dijit.Menu");dojo.declare("dijit._MenuBase",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{parentMenu:null,popupDelay:500,startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),function(_2a9){_2a9.startup();});this.startupKeyNavChildren();this.inherited(arguments);},onExecute:function(){},onCancel:function(_2aa){},_moveToPopup:function(evt){if(this.focusedChild&&this.focusedChild.popup&&!this.focusedChild.disabled){this.focusedChild._onClick(evt);}else{var _2ab=this._getTopMenu();if(_2ab&&_2ab._isMenuBar){_2ab.focusNext();}}},_onPopupHover:function(evt){if(this.currentPopup&&this.currentPopup._pendingClose_timer){var _2ac=this.currentPopup.parentMenu;if(_2ac.focusedChild){_2ac.focusedChild._setSelected(false);}_2ac.focusedChild=this.currentPopup.from_item;_2ac.focusedChild._setSelected(true);this._stopPendingCloseTimer(this.currentPopup);}},onItemHover:function(item){if(this.isActive){this.focusChild(item);if(this.focusedChild.popup&&!this.focusedChild.disabled&&!this.hover_timer){this.hover_timer=setTimeout(dojo.hitch(this,"_openPopup"),this.popupDelay);}}if(this.focusedChild){this.focusChild(item);}this._hoveredChild=item;},_onChildBlur:function(item){this._stopPopupTimer();item._setSelected(false);var _2ad=item.popup;if(_2ad){this._stopPendingCloseTimer(_2ad);_2ad._pendingClose_timer=setTimeout(function(){_2ad._pendingClose_timer=null;if(_2ad.parentMenu){_2ad.parentMenu.currentPopup=null;}dijit.popup.close(_2ad);},this.popupDelay);}},onItemUnhover:function(item){if(this.isActive){this._stopPopupTimer();}if(this._hoveredChild==item){this._hoveredChild=null;}},_stopPopupTimer:function(){if(this.hover_timer){clearTimeout(this.hover_timer);this.hover_timer=null;}},_stopPendingCloseTimer:function(_2ae){if(_2ae._pendingClose_timer){clearTimeout(_2ae._pendingClose_timer);_2ae._pendingClose_timer=null;}},_stopFocusTimer:function(){if(this._focus_timer){clearTimeout(this._focus_timer);this._focus_timer=null;}},_getTopMenu:function(){for(var top=this;top.parentMenu;top=top.parentMenu){}return top;},onItemClick:function(item,evt){if(typeof this.isShowingNow=="undefined"){this._markActive();}this.focusChild(item);if(item.disabled){return false;}if(item.popup){this._openPopup();}else{this.onExecute();item.onClick(evt);}},_openPopup:function(){this._stopPopupTimer();var _2af=this.focusedChild;if(!_2af){return;}var _2b0=_2af.popup;if(_2b0.isShowingNow){return;}if(this.currentPopup){this._stopPendingCloseTimer(this.currentPopup);dijit.popup.close(this.currentPopup);}_2b0.parentMenu=this;_2b0.from_item=_2af;var self=this;dijit.popup.open({parent:this,popup:_2b0,around:_2af.domNode,orient:this._orient||(this.isLeftToRight()?{"TR":"TL","TL":"TR","BR":"BL","BL":"BR"}:{"TL":"TR","TR":"TL","BL":"BR","BR":"BL"}),onCancel:function(){self.focusChild(_2af);self._cleanUp();_2af._setSelected(true);self.focusedChild=_2af;},onExecute:dojo.hitch(this,"_cleanUp")});this.currentPopup=_2b0;_2b0.connect(_2b0.domNode,"onmouseenter",dojo.hitch(self,"_onPopupHover"));if(_2b0.focus){_2b0._focus_timer=setTimeout(dojo.hitch(_2b0,function(){this._focus_timer=null;this.focus();}),0);}},_markActive:function(){this.isActive=true;dojo.replaceClass(this.domNode,"dijitMenuActive","dijitMenuPassive");},onOpen:function(e){this.isShowingNow=true;this._markActive();},_markInactive:function(){this.isActive=false;dojo.replaceClass(this.domNode,"dijitMenuPassive","dijitMenuActive");},onClose:function(){this._stopFocusTimer();this._markInactive();this.isShowingNow=false;this.parentMenu=null;},_closeChild:function(){this._stopPopupTimer();var _2b1=this.focusedChild&&this.focusedChild.from_item;if(this.currentPopup){if(dijit._curFocus&&dojo.isDescendant(dijit._curFocus,this.currentPopup.domNode)){this.focusedChild.focusNode.focus();}dijit.popup.close(this.currentPopup);this.currentPopup=null;}if(this.focusedChild){this.focusedChild._setSelected(false);this.focusedChild._onUnhover();this.focusedChild=null;}},_onItemFocus:function(item){if(this._hoveredChild&&this._hoveredChild!=item){this._hoveredChild._onUnhover();}},_onBlur:function(){this._cleanUp();this.inherited(arguments);},_cleanUp:function(){this._closeChild();if(typeof this.isShowingNow=="undefined"){this._markInactive();}}});dojo.declare("dijit.Menu",dijit._MenuBase,{constructor:function(){this._bindings=[];},templateString:dojo.cache("dijit","templates/Menu.html","<table class=\"dijit dijitMenu dijitMenuPassive dijitReset dijitMenuTable\" role=\"menu\" tabIndex=\"${tabIndex}\" dojoAttachEvent=\"onkeypress:_onKeyPress\" cellspacing=\"0\">\n\t<tbody class=\"dijitReset\" dojoAttachPoint=\"containerNode\"></tbody>\n</table>\n"),baseClass:"dijitMenu",targetNodeIds:[],contextMenuForWindow:false,leftClickToOpen:false,refocus:true,postCreate:function(){if(this.contextMenuForWindow){this.bindDomNode(dojo.body());}else{dojo.forEach(this.targetNodeIds,this.bindDomNode,this);}var k=dojo.keys,l=this.isLeftToRight();this._openSubMenuKey=l?k.RIGHT_ARROW:k.LEFT_ARROW;this._closeSubMenuKey=l?k.LEFT_ARROW:k.RIGHT_ARROW;this.connectKeyNavHandlers([k.UP_ARROW],[k.DOWN_ARROW]);},_onKeyPress:function(evt){if(evt.ctrlKey||evt.altKey){return;}switch(evt.charOrCode){case this._openSubMenuKey:this._moveToPopup(evt);dojo.stopEvent(evt);break;case this._closeSubMenuKey:if(this.parentMenu){if(this.parentMenu._isMenuBar){this.parentMenu.focusPrev();}else{this.onCancel(false);}}else{dojo.stopEvent(evt);}break;}},_iframeContentWindow:function(_2b2){var win=dojo.window.get(this._iframeContentDocument(_2b2))||this._iframeContentDocument(_2b2)["__parent__"]||(_2b2.name&&dojo.doc.frames[_2b2.name])||null;return win;},_iframeContentDocument:function(_2b3){var doc=_2b3.contentDocument||(_2b3.contentWindow&&_2b3.contentWindow.document)||(_2b3.name&&dojo.doc.frames[_2b3.name]&&dojo.doc.frames[_2b3.name].document)||null;return doc;},bindDomNode:function(node){node=dojo.byId(node);var cn;if(node.tagName.toLowerCase()=="iframe"){var _2b4=node,win=this._iframeContentWindow(_2b4);cn=dojo.withGlobal(win,dojo.body);}else{cn=(node==dojo.body()?dojo.doc.documentElement:node);}var _2b5={node:node,iframe:_2b4};dojo.attr(node,"_dijitMenu"+this.id,this._bindings.push(_2b5));var _2b6=dojo.hitch(this,function(cn){return [dojo.connect(cn,this.leftClickToOpen?"onclick":"oncontextmenu",this,function(evt){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_2b4,{x:evt.pageX,y:evt.pageY});}),dojo.connect(cn,"onkeydown",this,function(evt){if(evt.shiftKey&&evt.keyCode==dojo.keys.F10){dojo.stopEvent(evt);this._scheduleOpen(evt.target,_2b4);}})];});_2b5.connects=cn?_2b6(cn):[];if(_2b4){_2b5.onloadHandler=dojo.hitch(this,function(){var win=this._iframeContentWindow(_2b4);cn=dojo.withGlobal(win,dojo.body);_2b5.connects=_2b6(cn);});if(_2b4.addEventListener){_2b4.addEventListener("load",_2b5.onloadHandler,false);}else{_2b4.attachEvent("onload",_2b5.onloadHandler);}}},unBindDomNode:function(_2b7){var node;try{node=dojo.byId(_2b7);}catch(e){return;}var _2b8="_dijitMenu"+this.id;if(node&&dojo.hasAttr(node,_2b8)){var bid=dojo.attr(node,_2b8)-1,b=this._bindings[bid];dojo.forEach(b.connects,dojo.disconnect);var _2b9=b.iframe;if(_2b9){if(_2b9.removeEventListener){_2b9.removeEventListener("load",b.onloadHandler,false);}else{_2b9.detachEvent("onload",b.onloadHandler);}}dojo.removeAttr(node,_2b8);delete this._bindings[bid];}},_scheduleOpen:function(_2ba,_2bb,_2bc){if(!this._openTimer){this._openTimer=setTimeout(dojo.hitch(this,function(){delete this._openTimer;this._openMyself({target:_2ba,iframe:_2bb,coords:_2bc});}),1);}},_openMyself:function(args){var _2bd=args.target,_2be=args.iframe,_2bf=args.coords;if(_2bf){if(_2be){var od=_2bd.ownerDocument,ifc=dojo.position(_2be,true),win=this._iframeContentWindow(_2be),_2c0=dojo.withGlobal(win,"_docScroll",dojo);var cs=dojo.getComputedStyle(_2be),tp=dojo._toPixelValue,left=(dojo.isIE&&dojo.isQuirks?0:tp(_2be,cs.paddingLeft))+(dojo.isIE&&dojo.isQuirks?tp(_2be,cs.borderLeftWidth):0),top=(dojo.isIE&&dojo.isQuirks?0:tp(_2be,cs.paddingTop))+(dojo.isIE&&dojo.isQuirks?tp(_2be,cs.borderTopWidth):0);_2bf.x+=ifc.x+left-_2c0.x;_2bf.y+=ifc.y+top-_2c0.y;}}else{_2bf=dojo.position(_2bd,true);_2bf.x+=10;_2bf.y+=10;}var self=this;var _2c1=dijit.getFocus(this);function _2c2(){if(self.refocus){dijit.focus(_2c1);}dijit.popup.close(self);};dijit.popup.open({popup:this,x:_2bf.x,y:_2bf.y,onExecute:_2c2,onCancel:_2c2,orient:this.isLeftToRight()?"L":"R"});this.focus();this._onBlur=function(){this.inherited("_onBlur",arguments);dijit.popup.close(this);};},uninitialize:function(){dojo.forEach(this._bindings,function(b){if(b){this.unBindDomNode(b.node);}},this);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.TabController"]){dojo._hasResource["dijit.layout.TabController"]=true;dojo.provide("dijit.layout.TabController");dojo.declare("dijit.layout.TabController",dijit.layout.StackController,{templateString:"<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'></div>",tabPosition:"top",buttonWidget:"dijit.layout._TabButton",_rectifyRtlTabList:function(){if(0>=this.tabPosition.indexOf("-h")){return;}if(!this.pane2button){return;}var _2c3=0;for(var pane in this.pane2button){var ow=this.pane2button[pane].innerDiv.scrollWidth;_2c3=Math.max(_2c3,ow);}for(pane in this.pane2button){this.pane2button[pane].innerDiv.style.width=_2c3+"px";}}});dojo.declare("dijit.layout._TabButton",dijit.layout._StackButton,{baseClass:"dijitTab",cssStateNodes:{closeNode:"dijitTabCloseButton"},templateString:dojo.cache("dijit.layout","templates/_TabButton.html","<div role=\"presentation\" dojoAttachPoint=\"titleNode\" dojoAttachEvent='onclick:onClick'>\n    <div role=\"presentation\" class='dijitTabInnerDiv' dojoAttachPoint='innerDiv'>\n        <div role=\"presentation\" class='dijitTabContent' dojoAttachPoint='tabContent'>\n        \t<div role=\"presentation\" dojoAttachPoint='focusNode'>\n\t\t        <img src=\"${_blankGif}\" alt=\"\" class=\"dijitIcon dijitTabButtonIcon\" dojoAttachPoint='iconNode' />\n\t\t        <span dojoAttachPoint='containerNode' class='tabLabel'></span>\n\t\t        <span class=\"dijitInline dijitTabCloseButton dijitTabCloseIcon\" dojoAttachPoint='closeNode'\n\t\t        \t\tdojoAttachEvent='onclick: onClickCloseButton' role=\"presentation\">\n\t\t            <span dojoAttachPoint='closeText' class='dijitTabCloseText'>[x]</span\n\t\t        ></span>\n\t\t\t</div>\n        </div>\n    </div>\n</div>\n"),scrollOnFocus:false,buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.containerNode,false);},startup:function(){this.inherited(arguments);var n=this.domNode;setTimeout(function(){n.className=n.className;},1);},_setCloseButtonAttr:function(disp){this._set("closeButton",disp);dojo.toggleClass(this.innerDiv,"dijitClosable",disp);this.closeNode.style.display=disp?"":"none";if(disp){var _2c4=dojo.i18n.getLocalization("dijit","common");if(this.closeNode){dojo.attr(this.closeNode,"title",_2c4.itemClose);}var _2c4=dojo.i18n.getLocalization("dijit","common");this._closeMenu=new dijit.Menu({id:this.id+"_Menu",dir:this.dir,lang:this.lang,targetNodeIds:[this.domNode]});this._closeMenu.addChild(new dijit.MenuItem({label:_2c4.itemClose,dir:this.dir,lang:this.lang,onClick:dojo.hitch(this,"onClickCloseButton")}));}else{if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}}},_setLabelAttr:function(_2c5){this.inherited(arguments);if(this.showLabel==false&&!this.params.title){this.iconNode.alt=dojo.trim(this.containerNode.innerText||this.containerNode.textContent||"");}},destroy:function(){if(this._closeMenu){this._closeMenu.destroyRecursive();delete this._closeMenu;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.layout.ScrollingTabController"]){dojo._hasResource["dijit.layout.ScrollingTabController"]=true;dojo.provide("dijit.layout.ScrollingTabController");dojo.declare("dijit.layout.ScrollingTabController",dijit.layout.TabController,{templateString:dojo.cache("dijit.layout","templates/ScrollingTabController.html","<div class=\"dijitTabListContainer-${tabPosition}\" style=\"visibility:hidden\">\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerMenuButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_menuBtn\" containerId=\"${containerId}\" iconClass=\"dijitTabStripMenuIcon\"\n\t\t\tdropDownPosition=\"below-alt, above-alt\"\n\t\t\tdojoAttachPoint=\"_menuBtn\" showLabel=\"false\">&#9660;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_leftBtn\" iconClass=\"dijitTabStripSlideLeftIcon\"\n\t\t\tdojoAttachPoint=\"_leftBtn\" dojoAttachEvent=\"onClick: doSlideLeft\" showLabel=\"false\">&#9664;</div>\n\t<div dojoType=\"dijit.layout._ScrollingTabControllerButton\"\n\t\t\tclass=\"tabStripButton-${tabPosition}\"\n\t\t\tid=\"${id}_rightBtn\" iconClass=\"dijitTabStripSlideRightIcon\"\n\t\t\tdojoAttachPoint=\"_rightBtn\" dojoAttachEvent=\"onClick: doSlideRight\" showLabel=\"false\">&#9654;</div>\n\t<div class='dijitTabListWrapper' dojoAttachPoint='tablistWrapper'>\n\t\t<div role='tablist' dojoAttachEvent='onkeypress:onkeypress'\n\t\t\t\tdojoAttachPoint='containerNode' class='nowrapTabStrip'></div>\n\t</div>\n</div>\n"),useMenu:true,useSlider:true,tabStripClass:"",widgetsInTemplate:true,_minScroll:5,attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{"class":"containerNode"}),buildRendering:function(){this.inherited(arguments);var n=this.domNode;this.scrollNode=this.tablistWrapper;this._initButtons();if(!this.tabStripClass){this.tabStripClass="dijitTabContainer"+this.tabPosition.charAt(0).toUpperCase()+this.tabPosition.substr(1).replace(/-.*/,"")+"None";dojo.addClass(n,"tabStrip-disabled");}dojo.addClass(this.tablistWrapper,this.tabStripClass);},onStartup:function(){this.inherited(arguments);dojo.style(this.domNode,"visibility","visible");this._postStartup=true;},onAddChild:function(page,_2c6){this.inherited(arguments);dojo.forEach(["label","iconClass"],function(attr){this.pane2watches[page.id].push(this.pane2button[page.id].watch(attr,dojo.hitch(this,function(name,_2c7,_2c8){if(this._postStartup&&this._dim){this.resize(this._dim);}})));},this);dojo.style(this.containerNode,"width",(dojo.style(this.containerNode,"width")+200)+"px");},onRemoveChild:function(page,_2c9){var _2ca=this.pane2button[page.id];if(this._selectedTab===_2ca.domNode){this._selectedTab=null;}this.inherited(arguments);},_initButtons:function(){this._btnWidth=0;this._buttons=dojo.query("> .tabStripButton",this.domNode).filter(function(btn){if((this.useMenu&&btn==this._menuBtn.domNode)||(this.useSlider&&(btn==this._rightBtn.domNode||btn==this._leftBtn.domNode))){this._btnWidth+=dojo._getMarginSize(btn).w;return true;}else{dojo.style(btn,"display","none");return false;}},this);},_getTabsWidth:function(){var _2cb=this.getChildren();if(_2cb.length){var _2cc=_2cb[this.isLeftToRight()?0:_2cb.length-1].domNode,_2cd=_2cb[this.isLeftToRight()?_2cb.length-1:0].domNode;return _2cd.offsetLeft+dojo.style(_2cd,"width")-_2cc.offsetLeft;}else{return 0;}},_enableBtn:function(_2ce){var _2cf=this._getTabsWidth();_2ce=_2ce||dojo.style(this.scrollNode,"width");return _2cf>0&&_2ce<_2cf;},resize:function(dim){if(this.domNode.offsetWidth==0){return;}this._dim=dim;this.scrollNode.style.height="auto";this._contentBox=dijit.layout.marginBox2contentBox(this.domNode,{h:0,w:dim.w});this._contentBox.h=this.scrollNode.offsetHeight;dojo.contentBox(this.domNode,this._contentBox);var _2d0=this._enableBtn(this._contentBox.w);this._buttons.style("display",_2d0?"":"none");this._leftBtn.layoutAlign="left";this._rightBtn.layoutAlign="right";this._menuBtn.layoutAlign=this.isLeftToRight()?"right":"left";dijit.layout.layoutChildren(this.domNode,this._contentBox,[this._menuBtn,this._leftBtn,this._rightBtn,{domNode:this.scrollNode,layoutAlign:"client"}]);if(this._selectedTab){if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var w=this.scrollNode,sl=this._convertToScrollLeft(this._getScrollForSelectedTab());w.scrollLeft=sl;}this._setButtonClass(this._getScroll());this._postResize=true;return {h:this._contentBox.h,w:dim.w};},_getScroll:function(){var sl=(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit)?this.scrollNode.scrollLeft:dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width")+(dojo.isIE==8?-1:1)*this.scrollNode.scrollLeft;return sl;},_convertToScrollLeft:function(val){if(this.isLeftToRight()||dojo.isIE<8||(dojo.isIE&&dojo.isQuirks)||dojo.isWebKit){return val;}else{var _2d1=dojo.style(this.containerNode,"width")-dojo.style(this.scrollNode,"width");return (dojo.isIE==8?-1:1)*(val-_2d1);}},onSelectChild:function(page){var tab=this.pane2button[page.id];if(!tab||!page){return;}var node=tab.domNode;if(this._postResize&&node!=this._selectedTab){this._selectedTab=node;var sl=this._getScroll();if(sl>node.offsetLeft||sl+dojo.style(this.scrollNode,"width")<node.offsetLeft+dojo.style(node,"width")){this.createSmoothScroll().play();}}this.inherited(arguments);},_getScrollBounds:function(){var _2d2=this.getChildren(),_2d3=dojo.style(this.scrollNode,"width"),_2d4=dojo.style(this.containerNode,"width"),_2d5=_2d4-_2d3,_2d6=this._getTabsWidth();if(_2d2.length&&_2d6>_2d3){return {min:this.isLeftToRight()?0:_2d2[_2d2.length-1].domNode.offsetLeft,max:this.isLeftToRight()?(_2d2[_2d2.length-1].domNode.offsetLeft+dojo.style(_2d2[_2d2.length-1].domNode,"width"))-_2d3:_2d5};}else{var _2d7=this.isLeftToRight()?0:_2d5;return {min:_2d7,max:_2d7};}},_getScrollForSelectedTab:function(){var w=this.scrollNode,n=this._selectedTab,_2d8=dojo.style(this.scrollNode,"width"),_2d9=this._getScrollBounds();var pos=(n.offsetLeft+dojo.style(n,"width")/2)-_2d8/2;pos=Math.min(Math.max(pos,_2d9.min),_2d9.max);return pos;},createSmoothScroll:function(x){if(arguments.length>0){var _2da=this._getScrollBounds();x=Math.min(Math.max(x,_2da.min),_2da.max);}else{x=this._getScrollForSelectedTab();}if(this._anim&&this._anim.status()=="playing"){this._anim.stop();}var self=this,w=this.scrollNode,anim=new dojo._Animation({beforeBegin:function(){if(this.curve){delete this.curve;}var oldS=w.scrollLeft,newS=self._convertToScrollLeft(x);anim.curve=new dojo._Line(oldS,newS);},onAnimate:function(val){w.scrollLeft=val;}});this._anim=anim;this._setButtonClass(x);return anim;},_getBtnNode:function(e){var n=e.target;while(n&&!dojo.hasClass(n,"tabStripButton")){n=n.parentNode;}return n;},doSlideRight:function(e){this.doSlide(1,this._getBtnNode(e));},doSlideLeft:function(e){this.doSlide(-1,this._getBtnNode(e));},doSlide:function(_2db,node){if(node&&dojo.hasClass(node,"dijitTabDisabled")){return;}var _2dc=dojo.style(this.scrollNode,"width");var d=(_2dc*0.75)*_2db;var to=this._getScroll()+d;this._setButtonClass(to);this.createSmoothScroll(to).play();},_setButtonClass:function(_2dd){var _2de=this._getScrollBounds();this._leftBtn.set("disabled",_2dd<=_2de.min);this._rightBtn.set("disabled",_2dd>=_2de.max);}});dojo.declare("dijit.layout._ScrollingTabControllerButtonMixin",null,{baseClass:"dijitTab tabStripButton",templateString:dojo.cache("dijit.layout","templates/_ScrollingTabControllerButton.html","<div dojoAttachEvent=\"onclick:_onButtonClick\">\n\t<div role=\"presentation\" class=\"dijitTabInnerDiv\" dojoattachpoint=\"innerDiv,focusNode\">\n\t\t<div role=\"presentation\" class=\"dijitTabContent dijitButtonContents\" dojoattachpoint=\"tabContent\">\n\t\t\t<img role=\"presentation\" alt=\"\" src=\"${_blankGif}\" class=\"dijitTabStripIcon\" dojoAttachPoint=\"iconNode\"/>\n\t\t\t<span dojoAttachPoint=\"containerNode,titleNode\" class=\"dijitButtonText\"></span>\n\t\t</div>\n\t</div>\n</div>\n"),tabIndex:"",isFocusable:function(){return false;}});dojo.declare("dijit.layout._ScrollingTabControllerButton",[dijit.form.Button,dijit.layout._ScrollingTabControllerButtonMixin]);dojo.declare("dijit.layout._ScrollingTabControllerMenuButton",[dijit.form.Button,dijit._HasDropDown,dijit.layout._ScrollingTabControllerButtonMixin],{containerId:"",tabIndex:"-1",isLoaded:function(){return false;},loadDropDown:function(_2df){this.dropDown=new dijit.Menu({id:this.containerId+"_menu",dir:this.dir,lang:this.lang});var _2e0=dijit.byId(this.containerId);dojo.forEach(_2e0.getChildren(),function(page){var _2e1=new dijit.MenuItem({id:page.id+"_stcMi",label:page.title,iconClass:page.iconClass,dir:page.dir,lang:page.lang,onClick:function(){_2e0.selectChild(page);}});this.dropDown.addChild(_2e1);},this);_2df();},closeDropDown:function(_2e2){this.inherited(arguments);if(this.dropDown){this.dropDown.destroyRecursive();delete this.dropDown;}}});}if(!dojo._hasResource["dijit.layout.TabContainer"]){dojo._hasResource["dijit.layout.TabContainer"]=true;dojo.provide("dijit.layout.TabContainer");dojo.declare("dijit.layout.TabContainer",dijit.layout._TabContainerBase,{useMenu:true,useSlider:true,controllerWidget:"",_makeController:function(_2e3){var cls=this.baseClass+"-tabs"+(this.doLayout?"":" dijitTabNoLayout"),_2e4=dojo.getObject(this.controllerWidget);return new _2e4({id:this.id+"_tablist",dir:this.dir,lang:this.lang,tabPosition:this.tabPosition,doLayout:this.doLayout,containerId:this.id,"class":cls,nested:this.nested,useMenu:this.useMenu,useSlider:this.useSlider,tabStripClass:this.tabStrip?this.baseClass+(this.tabStrip?"":"No")+"Strip":null},_2e3);},postMixInProperties:function(){this.inherited(arguments);if(!this.controllerWidget){this.controllerWidget=(this.tabPosition=="top"||this.tabPosition=="bottom")&&!this.nested?"dijit.layout.ScrollingTabController":"dijit.layout.TabController";}}});}if(!dojo._hasResource["dijit.layout.BorderContainer"]){dojo._hasResource["dijit.layout.BorderContainer"]=true;dojo.provide("dijit.layout.BorderContainer");dojo.declare("dijit.layout.BorderContainer",dijit.layout._LayoutWidget,{design:"headline",gutters:true,liveSplitters:true,persist:false,baseClass:"dijitBorderContainer",_splitterClass:"dijit.layout._Splitter",postMixInProperties:function(){if(!this.gutters){this.baseClass+="NoGutter";}this.inherited(arguments);},startup:function(){if(this._started){return;}dojo.forEach(this.getChildren(),this._setupChild,this);this.inherited(arguments);},_setupChild:function(_2e5){var _2e6=_2e5.region;if(_2e6){this.inherited(arguments);dojo.addClass(_2e5.domNode,this.baseClass+"Pane");var ltr=this.isLeftToRight();if(_2e6=="leading"){_2e6=ltr?"left":"right";}if(_2e6=="trailing"){_2e6=ltr?"right":"left";}if(_2e6!="center"&&(_2e5.splitter||this.gutters)&&!_2e5._splitterWidget){var _2e7=dojo.getObject(_2e5.splitter?this._splitterClass:"dijit.layout._Gutter");var _2e8=new _2e7({id:_2e5.id+"_splitter",container:this,child:_2e5,region:_2e6,live:this.liveSplitters});_2e8.isSplitter=true;_2e5._splitterWidget=_2e8;dojo.place(_2e8.domNode,_2e5.domNode,"after");_2e8.startup();}_2e5.region=_2e6;}},layout:function(){this._layoutChildren();},addChild:function(_2e9,_2ea){this.inherited(arguments);if(this._started){this.layout();}},removeChild:function(_2eb){var _2ec=_2eb.region;var _2ed=_2eb._splitterWidget;if(_2ed){_2ed.destroy();delete _2eb._splitterWidget;}this.inherited(arguments);if(this._started){this._layoutChildren();}dojo.removeClass(_2eb.domNode,this.baseClass+"Pane");dojo.style(_2eb.domNode,{top:"auto",bottom:"auto",left:"auto",right:"auto",position:"static"});dojo.style(_2eb.domNode,_2ec=="top"||_2ec=="bottom"?"width":"height","auto");},getChildren:function(){return dojo.filter(this.inherited(arguments),function(_2ee){return !_2ee.isSplitter;});},getSplitter:function(_2ef){return dojo.filter(this.getChildren(),function(_2f0){return _2f0.region==_2ef;})[0]._splitterWidget;},resize:function(_2f1,_2f2){if(!this.cs||!this.pe){var node=this.domNode;this.cs=dojo.getComputedStyle(node);this.pe=dojo._getPadExtents(node,this.cs);this.pe.r=dojo._toPixelValue(node,this.cs.paddingRight);this.pe.b=dojo._toPixelValue(node,this.cs.paddingBottom);dojo.style(node,"padding","0px");}this.inherited(arguments);},_layoutChildren:function(_2f3,_2f4){if(!this._borderBox||!this._borderBox.h){return;}var _2f5=dojo.map(this.getChildren(),function(_2f6,idx){return {pane:_2f6,weight:[_2f6.region=="center"?Infinity:0,_2f6.layoutPriority,(this.design=="sidebar"?1:-1)*(/top|bottom/.test(_2f6.region)?1:-1),idx]};},this);_2f5.sort(function(a,b){var aw=a.weight,bw=b.weight;for(var i=0;i<aw.length;i++){if(aw[i]!=bw[i]){return aw[i]-bw[i];}}return 0;});var _2f7=[];dojo.forEach(_2f5,function(_2f8){var pane=_2f8.pane;_2f7.push(pane);if(pane._splitterWidget){_2f7.push(pane._splitterWidget);}});var dim={l:this.pe.l,t:this.pe.t,w:this._borderBox.w-this.pe.w,h:this._borderBox.h-this.pe.h};dijit.layout.layoutChildren(this.domNode,dim,_2f7,_2f3,_2f4);},destroyRecursive:function(){dojo.forEach(this.getChildren(),function(_2f9){var _2fa=_2f9._splitterWidget;if(_2fa){_2fa.destroy();}delete _2f9._splitterWidget;});this.inherited(arguments);}});dojo.extend(dijit._Widget,{region:"",layoutPriority:0,splitter:false,minSize:0,maxSize:Infinity});dojo.declare("dijit.layout._Splitter",[dijit._Widget,dijit._Templated],{live:true,templateString:"<div class=\"dijitSplitter\" dojoAttachEvent=\"onkeypress:_onKeyPress,onmousedown:_startDrag,onmouseenter:_onMouse,onmouseleave:_onMouse\" tabIndex=\"0\" role=\"separator\"><div class=\"dijitSplitterThumb\"></div></div>",postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);this._factor=/top|left/.test(this.region)?1:-1;this._cookieName=this.container.id+"_"+this.region;},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V"));if(this.container.persist){var _2fb=dojo.cookie(this._cookieName);if(_2fb){this.child.domNode.style[this.horizontal?"height":"width"]=_2fb;}}},_computeMaxSize:function(){var dim=this.horizontal?"h":"w",_2fc=dojo.marginBox(this.child.domNode)[dim],_2fd=dojo.filter(this.container.getChildren(),function(_2fe){return _2fe.region=="center";})[0],_2ff=dojo.marginBox(_2fd.domNode)[dim];return Math.min(this.child.maxSize,_2fc+_2ff);},_startDrag:function(e){if(!this.cover){this.cover=dojo.doc.createElement("div");dojo.addClass(this.cover,"dijitSplitterCover");dojo.place(this.cover,this.child.domNode,"after");}dojo.addClass(this.cover,"dijitSplitterCoverActive");if(this.fake){dojo.destroy(this.fake);}if(!(this._resize=this.live)){(this.fake=this.domNode.cloneNode(true)).removeAttribute("id");dojo.addClass(this.domNode,"dijitSplitterShadow");dojo.place(this.fake,this.domNode,"after");}dojo.addClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active");if(this.fake){dojo.removeClass(this.fake,"dijitSplitterHover dijitSplitter"+(this.horizontal?"H":"V")+"Hover");}var _300=this._factor,_301=this.horizontal,axis=_301?"pageY":"pageX",_302=e[axis],_303=this.domNode.style,dim=_301?"h":"w",_304=dojo.marginBox(this.child.domNode)[dim],max=this._computeMaxSize(),min=this.child.minSize||20,_305=this.region,_306=_305=="top"||_305=="bottom"?"top":"left",_307=parseInt(_303[_306],10),_308=this._resize,_309=dojo.hitch(this.container,"_layoutChildren",this.child.id),de=dojo.doc;this._handlers=(this._handlers||[]).concat([dojo.connect(de,"onmousemove",this._drag=function(e,_30a){var _30b=e[axis]-_302,_30c=_300*_30b+_304,_30d=Math.max(Math.min(_30c,max),min);if(_308||_30a){_309(_30d);}_303[_306]=_30b+_307+_300*(_30d-_30c)+"px";}),dojo.connect(de,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent),dojo.connect(de,"onmouseup",this,"_stopDrag")]);dojo.stopEvent(e);},_onMouse:function(e){var o=(e.type=="mouseover"||e.type=="mouseenter");dojo.toggleClass(this.domNode,"dijitSplitterHover",o);dojo.toggleClass(this.domNode,"dijitSplitter"+(this.horizontal?"H":"V")+"Hover",o);},_stopDrag:function(e){try{if(this.cover){dojo.removeClass(this.cover,"dijitSplitterCoverActive");}if(this.fake){dojo.destroy(this.fake);}dojo.removeClass(this.domNode,"dijitSplitterActive dijitSplitter"+(this.horizontal?"H":"V")+"Active dijitSplitterShadow");this._drag(e);this._drag(e,true);}finally{this._cleanupHandlers();delete this._drag;}if(this.container.persist){dojo.cookie(this._cookieName,this.child.domNode.style[this.horizontal?"height":"width"],{expires:365});}},_cleanupHandlers:function(){dojo.forEach(this._handlers,dojo.disconnect);delete this._handlers;},_onKeyPress:function(e){this._resize=true;var _30e=this.horizontal;var tick=1;var dk=dojo.keys;switch(e.charOrCode){case _30e?dk.UP_ARROW:dk.LEFT_ARROW:tick*=-1;case _30e?dk.DOWN_ARROW:dk.RIGHT_ARROW:break;default:return;}var _30f=dojo._getMarginSize(this.child.domNode)[_30e?"h":"w"]+this._factor*tick;this.container._layoutChildren(this.child.id,Math.max(Math.min(_30f,this._computeMaxSize()),this.child.minSize));dojo.stopEvent(e);},destroy:function(){this._cleanupHandlers();delete this.child;delete this.container;delete this.cover;delete this.fake;this.inherited(arguments);}});dojo.declare("dijit.layout._Gutter",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitGutter\" role=\"presentation\"></div>",postMixInProperties:function(){this.inherited(arguments);this.horizontal=/top|bottom/.test(this.region);},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitGutter"+(this.horizontal?"H":"V"));}});}if(!dojo._hasResource["dojo.cldr.supplemental"]){dojo._hasResource["dojo.cldr.supplemental"]=true;dojo.provide("dojo.cldr.supplemental");dojo.getObject("cldr.supplemental",true,dojo);dojo.cldr.supplemental.getFirstDayOfWeek=function(_310){var _311={mv:5,ae:6,af:6,bh:6,dj:6,dz:6,eg:6,er:6,et:6,iq:6,ir:6,jo:6,ke:6,kw:6,ly:6,ma:6,om:6,qa:6,sa:6,sd:6,so:6,sy:6,tn:6,ye:6,ar:0,as:0,az:0,bw:0,ca:0,cn:0,fo:0,ge:0,gl:0,gu:0,hk:0,il:0,"in":0,jm:0,jp:0,kg:0,kr:0,la:0,mh:0,mn:0,mo:0,mp:0,mt:0,nz:0,ph:0,pk:0,sg:0,th:0,tt:0,tw:0,um:0,us:0,uz:0,vi:0,zw:0};var _312=dojo.cldr.supplemental._region(_310);var dow=_311[_312];return (dow===undefined)?1:dow;};dojo.cldr.supplemental._region=function(_313){_313=dojo.i18n.normalizeLocale(_313);var tags=_313.split("-");var _314=tags[1];if(!_314){_314={de:"de",en:"us",es:"es",fi:"fi",fr:"fr",he:"il",hu:"hu",it:"it",ja:"jp",ko:"kr",nl:"nl",pt:"br",sv:"se",zh:"cn"}[tags[0]];}else{if(_314.length==4){_314=tags[2];}}return _314;};dojo.cldr.supplemental.getWeekend=function(_315){var _316={"in":0,af:4,dz:4,ir:4,om:4,sa:4,ye:4,ae:5,bh:5,eg:5,il:5,iq:5,jo:5,kw:5,ly:5,ma:5,qa:5,sd:5,sy:5,tn:5};var _317={af:5,dz:5,ir:5,om:5,sa:5,ye:5,ae:6,bh:5,eg:6,il:6,iq:6,jo:6,kw:6,ly:6,ma:6,qa:6,sd:6,sy:6,tn:6};var _318=dojo.cldr.supplemental._region(_315);var _319=_316[_318];var end=_317[_318];if(_319===undefined){_319=6;}if(end===undefined){end=0;}return {start:_319,end:end};};}if(!dojo._hasResource["dojo.date"]){dojo._hasResource["dojo.date"]=true;dojo.provide("dojo.date");dojo.getObject("date",true,dojo);dojo.date.getDaysInMonth=function(_31a){var _31b=_31a.getMonth();var days=[31,28,31,30,31,30,31,31,30,31,30,31];if(_31b==1&&dojo.date.isLeapYear(_31a)){return 29;}return days[_31b];};dojo.date.isLeapYear=function(_31c){var year=_31c.getFullYear();return !(year%400)||(!(year%4)&&!!(year%100));};dojo.date.getTimezoneName=function(_31d){var str=_31d.toString();var tz="";var _31e;var pos=str.indexOf("(");if(pos>-1){tz=str.substring(++pos,str.indexOf(")"));}else{var pat=/([A-Z\/]+) \d{4}$/;if((_31e=str.match(pat))){tz=_31e[1];}else{str=_31d.toLocaleString();pat=/ ([A-Z\/]+)$/;if((_31e=str.match(pat))){tz=_31e[1];}}}return (tz=="AM"||tz=="PM")?"":tz;};dojo.date.compare=function(_31f,_320,_321){_31f=new Date(+_31f);_320=new Date(+(_320||new Date()));if(_321=="date"){_31f.setHours(0,0,0,0);_320.setHours(0,0,0,0);}else{if(_321=="time"){_31f.setFullYear(0,0,0);_320.setFullYear(0,0,0);}}if(_31f>_320){return 1;}if(_31f<_320){return -1;}return 0;};dojo.date.add=function(date,_322,_323){var sum=new Date(+date);var _324=false;var _325="Date";switch(_322){case "day":break;case "weekday":var days,_326;var mod=_323%5;if(!mod){days=(_323>0)?5:-5;_326=(_323>0)?((_323-5)/5):((_323+5)/5);}else{days=mod;_326=parseInt(_323/5);}var strt=date.getDay();var adj=0;if(strt==6&&_323>0){adj=1;}else{if(strt==0&&_323<0){adj=-1;}}var trgt=strt+days;if(trgt==0||trgt==6){adj=(_323>0)?2:-2;}_323=(7*_326)+days+adj;break;case "year":_325="FullYear";_324=true;break;case "week":_323*=7;break;case "quarter":_323*=3;case "month":_324=true;_325="Month";break;default:_325="UTC"+_322.charAt(0).toUpperCase()+_322.substring(1)+"s";}if(_325){sum["set"+_325](sum["get"+_325]()+_323);}if(_324&&(sum.getDate()<date.getDate())){sum.setDate(0);}return sum;};dojo.date.difference=function(_327,_328,_329){_328=_328||new Date();_329=_329||"day";var _32a=_328.getFullYear()-_327.getFullYear();var _32b=1;switch(_329){case "quarter":var m1=_327.getMonth();var m2=_328.getMonth();var q1=Math.floor(m1/3)+1;var q2=Math.floor(m2/3)+1;q2+=(_32a*4);_32b=q2-q1;break;case "weekday":var days=Math.round(dojo.date.difference(_327,_328,"day"));var _32c=parseInt(dojo.date.difference(_327,_328,"week"));var mod=days%7;if(mod==0){days=_32c*5;}else{var adj=0;var aDay=_327.getDay();var bDay=_328.getDay();_32c=parseInt(days/7);mod=days%7;var _32d=new Date(_327);_32d.setDate(_32d.getDate()+(_32c*7));var _32e=_32d.getDay();if(days>0){switch(true){case aDay==6:adj=-1;break;case aDay==0:adj=0;break;case bDay==6:adj=-1;break;case bDay==0:adj=-2;break;case (_32e+mod)>5:adj=-2;}}else{if(days<0){switch(true){case aDay==6:adj=0;break;case aDay==0:adj=1;break;case bDay==6:adj=2;break;case bDay==0:adj=1;break;case (_32e+mod)<0:adj=2;}}}days+=adj;days-=(_32c*2);}_32b=days;break;case "year":_32b=_32a;break;case "month":_32b=(_328.getMonth()-_327.getMonth())+(_32a*12);break;case "week":_32b=parseInt(dojo.date.difference(_327,_328,"day")/7);break;case "day":_32b/=24;case "hour":_32b/=60;case "minute":_32b/=60;case "second":_32b/=1000;case "millisecond":_32b*=_328.getTime()-_327.getTime();}return Math.round(_32b);};}if(!dojo._hasResource["dojo.date.locale"]){dojo._hasResource["dojo.date.locale"]=true;dojo.provide("dojo.date.locale");dojo.getObject("date.locale",true,dojo);(function(){function _32f(_330,_331,_332,_333){return _333.replace(/([a-z])\1*/ig,function(_334){var s,pad,c=_334.charAt(0),l=_334.length,_335=["abbr","wide","narrow"];switch(c){case "G":s=_331[(l<4)?"eraAbbr":"eraNames"][_330.getFullYear()<0?0:1];break;case "y":s=_330.getFullYear();switch(l){case 1:break;case 2:if(!_332.fullYear){s=String(s);s=s.substr(s.length-2);break;}default:pad=true;}break;case "Q":case "q":s=Math.ceil((_330.getMonth()+1)/3);pad=true;break;case "M":var m=_330.getMonth();if(l<3){s=m+1;pad=true;}else{var _336=["months","format",_335[l-3]].join("-");s=_331[_336][m];}break;case "w":var _337=0;s=dojo.date.locale._getWeekOfYear(_330,_337);pad=true;break;case "d":s=_330.getDate();pad=true;break;case "D":s=dojo.date.locale._getDayOfYear(_330);pad=true;break;case "E":var d=_330.getDay();if(l<3){s=d+1;pad=true;}else{var _338=["days","format",_335[l-3]].join("-");s=_331[_338][d];}break;case "a":var _339=(_330.getHours()<12)?"am":"pm";s=_332[_339]||_331["dayPeriods-format-wide-"+_339];break;case "h":case "H":case "K":case "k":var h=_330.getHours();switch(c){case "h":s=(h%12)||12;break;case "H":s=h;break;case "K":s=(h%12);break;case "k":s=h||24;break;}pad=true;break;case "m":s=_330.getMinutes();pad=true;break;case "s":s=_330.getSeconds();pad=true;break;case "S":s=Math.round(_330.getMilliseconds()*Math.pow(10,l-3));pad=true;break;case "v":case "z":s=dojo.date.locale._getZone(_330,true,_332);if(s){break;}l=4;case "Z":var _33a=dojo.date.locale._getZone(_330,false,_332);var tz=[(_33a<=0?"+":"-"),dojo.string.pad(Math.floor(Math.abs(_33a)/60),2),dojo.string.pad(Math.abs(_33a)%60,2)];if(l==4){tz.splice(0,0,"GMT");tz.splice(3,0,":");}s=tz.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+_333);}if(pad){s=dojo.string.pad(s,l);}return s;});};dojo.date.locale._getZone=function(_33b,_33c,_33d){if(_33c){return dojo.date.getTimezoneName(_33b);}else{return _33b.getTimezoneOffset();}};dojo.date.locale.format=function(_33e,_33f){_33f=_33f||{};var _340=dojo.i18n.normalizeLocale(_33f.locale),_341=_33f.formatLength||"short",_342=dojo.date.locale._getGregorianBundle(_340),str=[],_343=dojo.hitch(this,_32f,_33e,_342,_33f);if(_33f.selector=="year"){return _344(_342["dateFormatItem-yyyy"]||"yyyy",_343);}var _345;if(_33f.selector!="date"){_345=_33f.timePattern||_342["timeFormat-"+_341];if(_345){str.push(_344(_345,_343));}}if(_33f.selector!="time"){_345=_33f.datePattern||_342["dateFormat-"+_341];if(_345){str.push(_344(_345,_343));}}return str.length==1?str[0]:_342["dateTimeFormat-"+_341].replace(/\{(\d+)\}/g,function(_346,key){return str[key];});};dojo.date.locale.regexp=function(_347){return dojo.date.locale._parseInfo(_347).regexp;};dojo.date.locale._parseInfo=function(_348){_348=_348||{};var _349=dojo.i18n.normalizeLocale(_348.locale),_34a=dojo.date.locale._getGregorianBundle(_349),_34b=_348.formatLength||"short",_34c=_348.datePattern||_34a["dateFormat-"+_34b],_34d=_348.timePattern||_34a["timeFormat-"+_34b],_34e;if(_348.selector=="date"){_34e=_34c;}else{if(_348.selector=="time"){_34e=_34d;}else{_34e=_34a["dateTimeFormat-"+_34b].replace(/\{(\d+)\}/g,function(_34f,key){return [_34d,_34c][key];});}}var _350=[],re=_344(_34e,dojo.hitch(this,_351,_350,_34a,_348));return {regexp:re,tokens:_350,bundle:_34a};};dojo.date.locale.parse=function(_352,_353){var _354=/[\u200E\u200F\u202A\u202E]/g,info=dojo.date.locale._parseInfo(_353),_355=info.tokens,_356=info.bundle,re=new RegExp("^"+info.regexp.replace(_354,"")+"$",info.strict?"":"i"),_357=re.exec(_352&&_352.replace(_354,""));if(!_357){return null;}var _358=["abbr","wide","narrow"],_359=[1970,0,1,0,0,0,0],amPm="",_35a=dojo.every(_357,function(v,i){if(!i){return true;}var _35b=_355[i-1];var l=_35b.length;switch(_35b.charAt(0)){case "y":if(l!=2&&_353.strict){_359[0]=v;}else{if(v<100){v=Number(v);var year=""+new Date().getFullYear(),_35c=year.substring(0,2)*100,_35d=Math.min(Number(year.substring(2,4))+20,99),num=(v<_35d)?_35c+v:_35c-100+v;_359[0]=num;}else{if(_353.strict){return false;}_359[0]=v;}}break;case "M":if(l>2){var _35e=_356["months-format-"+_358[l-3]].concat();if(!_353.strict){v=v.replace(".","").toLowerCase();_35e=dojo.map(_35e,function(s){return s.replace(".","").toLowerCase();});}v=dojo.indexOf(_35e,v);if(v==-1){return false;}}else{v--;}_359[1]=v;break;case "E":case "e":var days=_356["days-format-"+_358[l-3]].concat();if(!_353.strict){v=v.toLowerCase();days=dojo.map(days,function(d){return d.toLowerCase();});}v=dojo.indexOf(days,v);if(v==-1){return false;}break;case "D":_359[1]=0;case "d":_359[2]=v;break;case "a":var am=_353.am||_356["dayPeriods-format-wide-am"],pm=_353.pm||_356["dayPeriods-format-wide-pm"];if(!_353.strict){var _35f=/\./g;v=v.replace(_35f,"").toLowerCase();am=am.replace(_35f,"").toLowerCase();pm=pm.replace(_35f,"").toLowerCase();}if(_353.strict&&v!=am&&v!=pm){return false;}amPm=(v==pm)?"p":(v==am)?"a":"";break;case "K":if(v==24){v=0;}case "h":case "H":case "k":if(v>23){return false;}_359[3]=v;break;case "m":_359[4]=v;break;case "s":_359[5]=v;break;case "S":_359[6]=v;}return true;});var _360=+_359[3];if(amPm==="p"&&_360<12){_359[3]=_360+12;}else{if(amPm==="a"&&_360==12){_359[3]=0;}}var _361=new Date(_359[0],_359[1],_359[2],_359[3],_359[4],_359[5],_359[6]);if(_353.strict){_361.setFullYear(_359[0]);}var _362=_355.join(""),_363=_362.indexOf("d")!=-1,_364=_362.indexOf("M")!=-1;if(!_35a||(_364&&_361.getMonth()>_359[1])||(_363&&_361.getDate()>_359[2])){return null;}if((_364&&_361.getMonth()<_359[1])||(_363&&_361.getDate()<_359[2])){_361=dojo.date.add(_361,"hour",1);}return _361;};function _344(_365,_366,_367,_368){var _369=function(x){return x;};_366=_366||_369;_367=_367||_369;_368=_368||_369;var _36a=_365.match(/(''|[^'])+/g),_36b=_365.charAt(0)=="'";dojo.forEach(_36a,function(_36c,i){if(!_36c){_36a[i]="";}else{_36a[i]=(_36b?_367:_366)(_36c.replace(/''/g,"'"));_36b=!_36b;}});return _368(_36a.join(""));};function _351(_36d,_36e,_36f,_370){_370=dojo.regexp.escapeString(_370);if(!_36f.strict){_370=_370.replace(" a"," ?a");}return _370.replace(/([a-z])\1*/ig,function(_371){var s,c=_371.charAt(0),l=_371.length,p2="",p3="";if(_36f.strict){if(l>1){p2="0"+"{"+(l-1)+"}";}if(l>2){p3="0"+"{"+(l-2)+"}";}}else{p2="0?";p3="0{0,2}";}switch(c){case "y":s="\\d{2,4}";break;case "M":s=(l>2)?"\\S+?":"1[0-2]|"+p2+"[1-9]";break;case "D":s="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+p3+"[1-9][0-9]|"+p2+"[1-9]";break;case "d":s="3[01]|[12]\\d|"+p2+"[1-9]";break;case "w":s="[1-4][0-9]|5[0-3]|"+p2+"[1-9]";break;case "E":s="\\S+";break;case "h":s="1[0-2]|"+p2+"[1-9]";break;case "k":s="1[01]|"+p2+"\\d";break;case "H":s="1\\d|2[0-3]|"+p2+"\\d";break;case "K":s="1\\d|2[0-4]|"+p2+"[1-9]";break;case "m":case "s":s="[0-5]\\d";break;case "S":s="\\d{"+l+"}";break;case "a":var am=_36f.am||_36e["dayPeriods-format-wide-am"],pm=_36f.pm||_36e["dayPeriods-format-wide-pm"];s=am+"|"+pm;if(!_36f.strict){if(am!=am.toLowerCase()){s+="|"+am.toLowerCase();}if(pm!=pm.toLowerCase()){s+="|"+pm.toLowerCase();}if(s.indexOf(".")!=-1){s+="|"+s.replace(/\./g,"");}}s=s.replace(/\./g,"\\.");break;default:s=".*";}if(_36d){_36d.push(_371);}return "("+s+")";}).replace(/[\xa0 ]/g,"[\\s\\xa0]");};})();(function(){var _372=[];dojo.date.locale.addCustomFormats=function(_373,_374){_372.push({pkg:_373,name:_374});};dojo.date.locale._getGregorianBundle=function(_375){var _376={};dojo.forEach(_372,function(desc){var _377=dojo.i18n.getLocalization(desc.pkg,desc.name,_375);_376=dojo.mixin(_376,_377);},this);return _376;};})();dojo.date.locale.addCustomFormats("dojo.cldr","gregorian");dojo.date.locale.getNames=function(item,type,_378,_379){var _37a,_37b=dojo.date.locale._getGregorianBundle(_379),_37c=[item,_378,type];if(_378=="standAlone"){var key=_37c.join("-");_37a=_37b[key];if(_37a[0]==1){_37a=undefined;}}_37c[1]="format";return (_37a||_37b[_37c.join("-")]).concat();};dojo.date.locale.isWeekend=function(_37d,_37e){var _37f=dojo.cldr.supplemental.getWeekend(_37e),day=(_37d||new Date()).getDay();if(_37f.end<_37f.start){_37f.end+=7;if(day<_37f.start){day+=7;}}return day>=_37f.start&&day<=_37f.end;};dojo.date.locale._getDayOfYear=function(_380){return dojo.date.difference(new Date(_380.getFullYear(),0,1,_380.getHours()),_380)+1;};dojo.date.locale._getWeekOfYear=function(_381,_382){if(arguments.length==1){_382=0;}var _383=new Date(_381.getFullYear(),0,1).getDay(),adj=(_383-_382+7)%7,week=Math.floor((dojo.date.locale._getDayOfYear(_381)+adj-1)/7);if(_383==_382){week++;}return week;};}if(!dojo._hasResource["dijit.form.DropDownButton"]){dojo._hasResource["dijit.form.DropDownButton"]=true;dojo.provide("dijit.form.DropDownButton");}if(!dojo._hasResource["dijit.Calendar"]){dojo._hasResource["dijit.Calendar"]=true;dojo.provide("dijit.Calendar");dojo.declare("dijit.Calendar",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Calendar.html","<table cellspacing=\"0\" cellpadding=\"0\" class=\"dijitCalendarContainer\" role=\"grid\" dojoAttachEvent=\"onkeypress: _onKeyPress\" aria-labelledby=\"${id}_year\">\n\t<thead>\n\t\t<tr class=\"dijitReset dijitCalendarMonthContainer\" valign=\"top\">\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"decrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarDecrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"decreaseArrowNode\" class=\"dijitA11ySideArrow\">-</span>\n\t\t\t</th>\n\t\t\t<th class='dijitReset' colspan=\"5\">\n\t\t\t\t<div dojoType=\"dijit.form.DropDownButton\" dojoAttachPoint=\"monthDropDownButton\"\n\t\t\t\t\tid=\"${id}_mddb\" tabIndex=\"-1\">\n\t\t\t\t</div>\n\t\t\t</th>\n\t\t\t<th class='dijitReset dijitCalendarArrow' dojoAttachPoint=\"incrementMonth\">\n\t\t\t\t<img src=\"${_blankGif}\" alt=\"\" class=\"dijitCalendarIncrementControl dijitCalendarIncrease\" role=\"presentation\"/>\n\t\t\t\t<span dojoAttachPoint=\"increaseArrowNode\" class=\"dijitA11ySideArrow\">+</span>\n\t\t\t</th>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<th class=\"dijitReset dijitCalendarDayLabelTemplate\" role=\"columnheader\"><span class=\"dijitCalendarDayLabel\"></span></th>\n\t\t</tr>\n\t</thead>\n\t<tbody dojoAttachEvent=\"onclick: _onDayClick, onmouseover: _onDayMouseOver, onmouseout: _onDayMouseOut, onmousedown: _onDayMouseDown, onmouseup: _onDayMouseUp\" class=\"dijitReset dijitCalendarBodyContainer\">\n\t\t<tr class=\"dijitReset dijitCalendarWeekTemplate\" role=\"row\">\n\t\t\t<td class=\"dijitReset dijitCalendarDateTemplate\" role=\"gridcell\"><span class=\"dijitCalendarDateLabel\"></span></td>\n\t\t</tr>\n\t</tbody>\n\t<tfoot class=\"dijitReset dijitCalendarYearContainer\">\n\t\t<tr>\n\t\t\t<td class='dijitReset' valign=\"top\" colspan=\"7\">\n\t\t\t\t<h3 class=\"dijitCalendarYearLabel\">\n\t\t\t\t\t<span dojoAttachPoint=\"previousYearLabelNode\" class=\"dijitInline dijitCalendarPreviousYear\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"currentYearLabelNode\" class=\"dijitInline dijitCalendarSelectedYear\" id=\"${id}_year\"></span>\n\t\t\t\t\t<span dojoAttachPoint=\"nextYearLabelNode\" class=\"dijitInline dijitCalendarNextYear\"></span>\n\t\t\t\t</h3>\n\t\t\t</td>\n\t\t</tr>\n\t</tfoot>\n</table>\n"),widgetsInTemplate:true,value:new Date(""),datePackage:"dojo.date",dayWidth:"narrow",tabIndex:"0",currentFocus:new Date(),baseClass:"dijitCalendar",cssStateNodes:{"decrementMonth":"dijitCalendarArrow","incrementMonth":"dijitCalendarArrow","previousYearLabelNode":"dijitCalendarPreviousYear","nextYearLabelNode":"dijitCalendarNextYear"},_isValidDate:function(_384){return _384&&!isNaN(_384)&&typeof _384=="object"&&_384.toString()!=this.constructor.prototype.value.toString();},setValue:function(_385){dojo.deprecated("dijit.Calendar:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_385);},_getValueAttr:function(){var _386=new this.dateClassObj(this.value);_386.setHours(0,0,0,0);if(_386.getDate()<this.value.getDate()){_386=this.dateFuncObj.add(_386,"hour",1);}return _386;},_setValueAttr:function(_387,_388){if(_387){_387=new this.dateClassObj(_387);}if(this._isValidDate(_387)){if(!this._isValidDate(this.value)||this.dateFuncObj.compare(_387,this.value)){_387.setHours(1,0,0,0);if(!this.isDisabledDate(_387,this.lang)){this._set("value",_387);this.set("currentFocus",_387);if(_388||typeof _388=="undefined"){this.onChange(this.get("value"));this.onValueSelected(this.get("value"));}}}}else{this._set("value",null);this.set("currentFocus",this.currentFocus);}},_setText:function(node,text){while(node.firstChild){node.removeChild(node.firstChild);}node.appendChild(dojo.doc.createTextNode(text));},_populateGrid:function(){var _389=new this.dateClassObj(this.currentFocus);_389.setDate(1);var _38a=_389.getDay(),_38b=this.dateFuncObj.getDaysInMonth(_389),_38c=this.dateFuncObj.getDaysInMonth(this.dateFuncObj.add(_389,"month",-1)),_38d=new this.dateClassObj(),_38e=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);if(_38e>_38a){_38e-=7;}dojo.query(".dijitCalendarDateTemplate",this.domNode).forEach(function(_38f,i){i+=_38e;var date=new this.dateClassObj(_389),_390,_391="dijitCalendar",adj=0;if(i<_38a){_390=_38c-_38a+i+1;adj=-1;_391+="Previous";}else{if(i>=(_38a+_38b)){_390=i-_38a-_38b+1;adj=1;_391+="Next";}else{_390=i-_38a+1;_391+="Current";}}if(adj){date=this.dateFuncObj.add(date,"month",adj);}date.setDate(_390);if(!this.dateFuncObj.compare(date,_38d,"date")){_391="dijitCalendarCurrentDate "+_391;}if(this._isSelectedDate(date,this.lang)){_391="dijitCalendarSelectedDate "+_391;}if(this.isDisabledDate(date,this.lang)){_391="dijitCalendarDisabledDate "+_391;}var _392=this.getClassForDate(date,this.lang);if(_392){_391=_392+" "+_391;}_38f.className=_391+"Month dijitCalendarDateTemplate";_38f.dijitDateValue=date.valueOf();dojo.attr(_38f,"dijitDateValue",date.valueOf());var _393=dojo.query(".dijitCalendarDateLabel",_38f)[0],text=date.getDateLocalized?date.getDateLocalized(this.lang):date.getDate();this._setText(_393,text);},this);var _394=this.dateLocaleModule.getNames("months","wide","standAlone",this.lang,_389);this.monthDropDownButton.dropDown.set("months",_394);this.monthDropDownButton.containerNode.innerHTML=(dojo.isIE==6?"":"<div class='dijitSpacer'>"+this.monthDropDownButton.dropDown.domNode.innerHTML+"</div>")+"<div class='dijitCalendarMonthLabel dijitCalendarCurrentMonthLabel'>"+_394[_389.getMonth()]+"</div>";var y=_389.getFullYear()-1;var d=new this.dateClassObj();dojo.forEach(["previous","current","next"],function(name){d.setFullYear(y++);this._setText(this[name+"YearLabelNode"],this.dateLocaleModule.format(d,{selector:"year",locale:this.lang}));},this);},goToToday:function(){this.set("value",new this.dateClassObj());},constructor:function(args){var _395=(args.datePackage&&(args.datePackage!="dojo.date"))?args.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_395,false);this.datePackage=args.datePackage||this.datePackage;this.dateFuncObj=dojo.getObject(this.datePackage,false);this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);},postMixInProperties:function(){if(isNaN(this.value)){delete this.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);var _396=dojo.hitch(this,function(_397,n){var _398=dojo.query(_397,this.domNode)[0];for(var i=0;i<n;i++){_398.parentNode.appendChild(_398.cloneNode(true));}});_396(".dijitCalendarDayLabelTemplate",6);_396(".dijitCalendarDateTemplate",6);_396(".dijitCalendarWeekTemplate",5);var _399=this.dateLocaleModule.getNames("days",this.dayWidth,"standAlone",this.lang);var _39a=dojo.cldr.supplemental.getFirstDayOfWeek(this.lang);dojo.query(".dijitCalendarDayLabel",this.domNode).forEach(function(_39b,i){this._setText(_39b,_399[(i+_39a)%7]);},this);var _39c=new this.dateClassObj(this.currentFocus);this.monthDropDownButton.dropDown=new dijit.Calendar._MonthDropDown({id:this.id+"_mdd",onChange:dojo.hitch(this,"_onMonthSelect")});this.set("currentFocus",_39c,false);var _39d=this;var _39e=function(_39f,_3a0,adj){_39d._connects.push(dijit.typematic.addMouseListener(_39d[_39f],_39d,function(_3a1){if(_3a1>=0){_39d._adjustDisplay(_3a0,adj);}},0.8,500));};_39e("incrementMonth","month",1);_39e("decrementMonth","month",-1);_39e("nextYearLabelNode","year",1);_39e("previousYearLabelNode","year",-1);},_adjustDisplay:function(part,_3a2){this._setCurrentFocusAttr(this.dateFuncObj.add(this.currentFocus,part,_3a2));},_setCurrentFocusAttr:function(date,_3a3){var _3a4=this.currentFocus,_3a5=_3a4?dojo.query("[dijitDateValue="+_3a4.valueOf()+"]",this.domNode)[0]:null;date=new this.dateClassObj(date);date.setHours(1,0,0,0);this._set("currentFocus",date);this._populateGrid();var _3a6=dojo.query("[dijitDateValue="+date.valueOf()+"]",this.domNode)[0];_3a6.setAttribute("tabIndex",this.tabIndex);if(this._focused||_3a3){_3a6.focus();}if(_3a5&&_3a5!=_3a6){if(dojo.isWebKit){_3a5.setAttribute("tabIndex","-1");}else{_3a5.removeAttribute("tabIndex");}}},focus:function(){this._setCurrentFocusAttr(this.currentFocus,true);},_onMonthSelect:function(_3a7){this.currentFocus=this.dateFuncObj.add(this.currentFocus,"month",_3a7-this.currentFocus.getMonth());this._populateGrid();},_onDayClick:function(evt){dojo.stopEvent(evt);for(var node=evt.target;node&&!node.dijitDateValue;node=node.parentNode){}if(node&&!dojo.hasClass(node,"dijitCalendarDisabledDate")){this.set("value",node.dijitDateValue);}},_onDayMouseOver:function(evt){var node=dojo.hasClass(evt.target,"dijitCalendarDateLabel")?evt.target.parentNode:evt.target;if(node&&(node.dijitDateValue||node==this.previousYearLabelNode||node==this.nextYearLabelNode)){dojo.addClass(node,"dijitCalendarHoveredDate");this._currentNode=node;}},_onDayMouseOut:function(evt){if(!this._currentNode){return;}if(evt.relatedTarget&&evt.relatedTarget.parentNode==this._currentNode){return;}var cls="dijitCalendarHoveredDate";if(dojo.hasClass(this._currentNode,"dijitCalendarActiveDate")){cls+=" dijitCalendarActiveDate";}dojo.removeClass(this._currentNode,cls);this._currentNode=null;},_onDayMouseDown:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){dojo.addClass(node,"dijitCalendarActiveDate");this._currentNode=node;}},_onDayMouseUp:function(evt){var node=evt.target.parentNode;if(node&&node.dijitDateValue){dojo.removeClass(node,"dijitCalendarActiveDate");}},handleKey:function(evt){var dk=dojo.keys,_3a8=-1,_3a9,_3aa=this.currentFocus;switch(evt.keyCode){case dk.RIGHT_ARROW:_3a8=1;case dk.LEFT_ARROW:_3a9="day";if(!this.isLeftToRight()){_3a8*=-1;}break;case dk.DOWN_ARROW:_3a8=1;case dk.UP_ARROW:_3a9="week";break;case dk.PAGE_DOWN:_3a8=1;case dk.PAGE_UP:_3a9=evt.ctrlKey||evt.altKey?"year":"month";break;case dk.END:_3aa=this.dateFuncObj.add(_3aa,"month",1);_3a9="day";case dk.HOME:_3aa=new this.dateClassObj(_3aa);_3aa.setDate(1);break;case dk.ENTER:case dk.SPACE:this.set("value",this.currentFocus);break;default:return true;}if(_3a9){_3aa=this.dateFuncObj.add(_3aa,_3a9,_3a8);}this._setCurrentFocusAttr(_3aa);return false;},_onKeyPress:function(evt){if(!this.handleKey(evt)){dojo.stopEvent(evt);}},onValueSelected:function(date){},onChange:function(date){},_isSelectedDate:function(_3ab,_3ac){return this._isValidDate(this.value)&&!this.dateFuncObj.compare(_3ab,this.value,"date");},isDisabledDate:function(_3ad,_3ae){},getClassForDate:function(_3af,_3b0){}});dojo.declare("dijit.Calendar._MonthDropDown",[dijit._Widget,dijit._Templated],{months:[],templateString:"<div class='dijitCalendarMonthMenu dijitMenu' "+"dojoAttachEvent='onclick:_onClick,onmouseover:_onMenuHover,onmouseout:_onMenuHover'></div>",_setMonthsAttr:function(_3b1){this.domNode.innerHTML=dojo.map(_3b1,function(_3b2,idx){return _3b2?"<div class='dijitCalendarMonthLabel' month='"+idx+"'>"+_3b2+"</div>":"";}).join("");},_onClick:function(evt){this.onChange(dojo.attr(evt.target,"month"));},onChange:function(_3b3){},_onMenuHover:function(evt){dojo.toggleClass(evt.target,"dijitCalendarMonthLabelHover",evt.type=="mouseover");}});}if(!dojo._hasResource["dijit._editor.selection"]){dojo._hasResource["dijit._editor.selection"]=true;dojo.provide("dijit._editor.selection");dojo.getObject("_editor.selection",true,dijit);dojo.mixin(dijit._editor.selection,{getType:function(){if(dojo.isIE<9){return dojo.doc.selection.type.toLowerCase();}else{var _3b4="text";var oSel;try{oSel=dojo.global.getSelection();}catch(e){}if(oSel&&oSel.rangeCount==1){var _3b5=oSel.getRangeAt(0);if((_3b5.startContainer==_3b5.endContainer)&&((_3b5.endOffset-_3b5.startOffset)==1)&&(_3b5.startContainer.nodeType!=3)){_3b4="control";}}return _3b4;}},getSelectedText:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().text;}else{var _3b6=dojo.global.getSelection();if(_3b6){return _3b6.toString();}}return "";},getSelectedHtml:function(){if(dojo.isIE<9){if(dijit._editor.selection.getType()=="control"){return null;}return dojo.doc.selection.createRange().htmlText;}else{var _3b7=dojo.global.getSelection();if(_3b7&&_3b7.rangeCount){var i;var html="";for(i=0;i<_3b7.rangeCount;i++){var frag=_3b7.getRangeAt(i).cloneContents();var div=dojo.doc.createElement("div");div.appendChild(frag);html+=div.innerHTML;}return html;}return null;}},getSelectedElement:function(){if(dijit._editor.selection.getType()=="control"){if(dojo.isIE<9){var _3b8=dojo.doc.selection.createRange();if(_3b8&&_3b8.item){return dojo.doc.selection.createRange().item(0);}}else{var _3b9=dojo.global.getSelection();return _3b9.anchorNode.childNodes[_3b9.anchorOffset];}}return null;},getParentElement:function(){if(dijit._editor.selection.getType()=="control"){var p=this.getSelectedElement();if(p){return p.parentNode;}}else{if(dojo.isIE<9){var r=dojo.doc.selection.createRange();r.collapse(true);return r.parentElement();}else{var _3ba=dojo.global.getSelection();if(_3ba){var node=_3ba.anchorNode;while(node&&(node.nodeType!=1)){node=node.parentNode;}return node;}}}return null;},hasAncestorElement:function(_3bb){return this.getAncestorElement.apply(this,arguments)!=null;},getAncestorElement:function(_3bc){var node=this.getSelectedElement()||this.getParentElement();return this.getParentOfType(node,arguments);},isTag:function(node,tags){if(node&&node.tagName){var _3bd=node.tagName.toLowerCase();for(var i=0;i<tags.length;i++){var _3be=String(tags[i]).toLowerCase();if(_3bd==_3be){return _3be;}}}return "";},getParentOfType:function(node,tags){while(node){if(this.isTag(node,tags).length){return node;}node=node.parentNode;}return null;},collapse:function(_3bf){if(window.getSelection){var _3c0=dojo.global.getSelection();if(_3c0.removeAllRanges){if(_3bf){_3c0.collapseToStart();}else{_3c0.collapseToEnd();}}else{_3c0.collapse(_3bf);}}else{if(dojo.isIE){var _3c1=dojo.doc.selection.createRange();_3c1.collapse(_3bf);_3c1.select();}}},remove:function(){var sel=dojo.doc.selection;if(dojo.isIE<9){if(sel.type.toLowerCase()!="none"){sel.clear();}return sel;}else{sel=dojo.global.getSelection();sel.deleteFromDocument();return sel;}},selectElementChildren:function(_3c2,_3c3){var win=dojo.global;var doc=dojo.doc;var _3c4;_3c2=dojo.byId(_3c2);if(doc.selection&&dojo.isIE<9&&dojo.body().createTextRange){_3c4=_3c2.ownerDocument.body.createTextRange();_3c4.moveToElementText(_3c2);if(!_3c3){try{_3c4.select();}catch(e){}}}else{if(win.getSelection){var _3c5=dojo.global.getSelection();if(dojo.isOpera){if(_3c5.rangeCount){_3c4=_3c5.getRangeAt(0);}else{_3c4=doc.createRange();}_3c4.setStart(_3c2,0);_3c4.setEnd(_3c2,(_3c2.nodeType==3)?_3c2.length:_3c2.childNodes.length);_3c5.addRange(_3c4);}else{_3c5.selectAllChildren(_3c2);}}}},selectElement:function(_3c6,_3c7){var _3c8;var doc=dojo.doc;var win=dojo.global;_3c6=dojo.byId(_3c6);if(dojo.isIE<9&&dojo.body().createTextRange){try{var tg=_3c6.tagName?_3c6.tagName.toLowerCase():"";if(tg==="img"||tg==="table"){_3c8=dojo.body().createControlRange();}else{_3c8=dojo.body().createRange();}_3c8.addElement(_3c6);if(!_3c7){_3c8.select();}}catch(e){this.selectElementChildren(_3c6,_3c7);}}else{if(dojo.global.getSelection){var _3c9=win.getSelection();_3c8=doc.createRange();if(_3c9.removeAllRanges){if(dojo.isOpera){if(_3c9.getRangeAt(0)){_3c8=_3c9.getRangeAt(0);}}_3c8.selectNode(_3c6);_3c9.removeAllRanges();_3c9.addRange(_3c8);}}}},inSelection:function(node){if(node){var _3ca;var doc=dojo.doc;var _3cb;if(dojo.global.getSelection){var sel=dojo.global.getSelection();if(sel&&sel.rangeCount>0){_3cb=sel.getRangeAt(0);}if(_3cb&&_3cb.compareBoundaryPoints&&doc.createRange){try{_3ca=doc.createRange();_3ca.setStart(node,0);if(_3cb.compareBoundaryPoints(_3cb.START_TO_END,_3ca)===1){return true;}}catch(e){}}}else{if(doc.selection){_3cb=doc.selection.createRange();try{_3ca=node.ownerDocument.body.createControlRange();if(_3ca){_3ca.addElement(node);}}catch(e1){try{_3ca=node.ownerDocument.body.createTextRange();_3ca.moveToElementText(node);}catch(e2){}}if(_3cb&&_3ca){if(_3cb.compareEndPoints("EndToStart",_3ca)===1){return true;}}}}}return false;}});}if(!dojo._hasResource["dijit._editor.range"]){dojo._hasResource["dijit._editor.range"]=true;dojo.provide("dijit._editor.range");dijit.range={};dijit.range.getIndex=function(node,_3cc){var ret=[],retR=[];var stop=_3cc;var _3cd=node;var _3ce,n;while(node!=stop){var i=0;_3ce=node.parentNode;while((n=_3ce.childNodes[i++])){if(n===node){--i;break;}}ret.unshift(i);retR.unshift(i-_3ce.childNodes.length);node=_3ce;}if(ret.length>0&&_3cd.nodeType==3){n=_3cd.previousSibling;while(n&&n.nodeType==3){ret[ret.length-1]--;n=n.previousSibling;}n=_3cd.nextSibling;while(n&&n.nodeType==3){retR[retR.length-1]++;n=n.nextSibling;}}return {o:ret,r:retR};};dijit.range.getNode=function(_3cf,_3d0){if(!dojo.isArray(_3cf)||_3cf.length==0){return _3d0;}var node=_3d0;dojo.every(_3cf,function(i){if(i>=0&&i<node.childNodes.length){node=node.childNodes[i];}else{node=null;return false;}return true;});return node;};dijit.range.getCommonAncestor=function(n1,n2,root){root=root||n1.ownerDocument.body;var _3d1=function(n){var as=[];while(n){as.unshift(n);if(n!==root){n=n.parentNode;}else{break;}}return as;};var n1as=_3d1(n1);var n2as=_3d1(n2);var m=Math.min(n1as.length,n2as.length);var com=n1as[0];for(var i=1;i<m;i++){if(n1as[i]===n2as[i]){com=n1as[i];}else{break;}}return com;};dijit.range.getAncestor=function(node,_3d2,root){root=root||node.ownerDocument.body;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(_3d2.test(name)){return node;}node=node.parentNode;}return null;};dijit.range.BlockTagNames=/^(?:P|DIV|H1|H2|H3|H4|H5|H6|ADDRESS|PRE|OL|UL|LI|DT|DE)$/;dijit.range.getBlockAncestor=function(node,_3d3,root){root=root||node.ownerDocument.body;_3d3=_3d3||dijit.range.BlockTagNames;var _3d4=null,_3d5;while(node&&node!==root){var name=node.nodeName.toUpperCase();if(!_3d4&&_3d3.test(name)){_3d4=node;}if(!_3d5&&(/^(?:BODY|TD|TH|CAPTION)$/).test(name)){_3d5=node;}node=node.parentNode;}return {blockNode:_3d4,blockContainer:_3d5||node.ownerDocument.body};};dijit.range.atBeginningOfContainer=function(_3d6,node,_3d7){var _3d8=false;var _3d9=(_3d7==0);if(!_3d9&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(0,_3d7))){_3d9=true;}}if(_3d9){var _3da=node;_3d8=true;while(_3da&&_3da!==_3d6){if(_3da.previousSibling){_3d8=false;break;}_3da=_3da.parentNode;}}return _3d8;};dijit.range.atEndOfContainer=function(_3db,node,_3dc){var _3dd=false;var _3de=(_3dc==(node.length||node.childNodes.length));if(!_3de&&node.nodeType==3){if(/^[\s\xA0]+$/.test(node.nodeValue.substr(_3dc))){_3de=true;}}if(_3de){var _3df=node;_3dd=true;while(_3df&&_3df!==_3db){if(_3df.nextSibling){_3dd=false;break;}_3df=_3df.parentNode;}}return _3dd;};dijit.range.adjacentNoneTextNode=function(_3e0,next){var node=_3e0;var len=(0-_3e0.length)||0;var prop=next?"nextSibling":"previousSibling";while(node){if(node.nodeType!=3){break;}len+=node.length;node=node[prop];}return [node,len];};dijit.range._w3c=Boolean(window["getSelection"]);dijit.range.create=function(win){if(dijit.range._w3c){return (win||dojo.global).document.createRange();}else{return new dijit.range.W3CRange;}};dijit.range.getSelection=function(win,_3e1){if(dijit.range._w3c){return win.getSelection();}else{var s=new dijit.range.ie.selection(win);if(!_3e1){s._getCurrentSelection();}return s;}};if(!dijit.range._w3c){dijit.range.ie={cachedSelection:{},selection:function(win){this._ranges=[];this.addRange=function(r,_3e2){this._ranges.push(r);if(!_3e2){r._select();}this.rangeCount=this._ranges.length;};this.removeAllRanges=function(){this._ranges=[];this.rangeCount=0;};var _3e3=function(){var r=win.document.selection.createRange();var type=win.document.selection.type.toUpperCase();if(type=="CONTROL"){return new dijit.range.W3CRange(dijit.range.ie.decomposeControlRange(r));}else{return new dijit.range.W3CRange(dijit.range.ie.decomposeTextRange(r));}};this.getRangeAt=function(i){return this._ranges[i];};this._getCurrentSelection=function(){this.removeAllRanges();var r=_3e3();if(r){this.addRange(r,true);}};},decomposeControlRange:function(_3e4){var _3e5=_3e4.item(0),_3e6=_3e4.item(_3e4.length-1);var _3e7=_3e5.parentNode,_3e8=_3e6.parentNode;var _3e9=dijit.range.getIndex(_3e5,_3e7).o;var _3ea=dijit.range.getIndex(_3e6,_3e8).o+1;return [_3e7,_3e9,_3e8,_3ea];},getEndPoint:function(_3eb,end){var _3ec=_3eb.duplicate();_3ec.collapse(!end);var _3ed="EndTo"+(end?"End":"Start");var _3ee=_3ec.parentElement();var _3ef,_3f0,_3f1;if(_3ee.childNodes.length>0){dojo.every(_3ee.childNodes,function(node,i){var _3f2;if(node.nodeType!=3){_3ec.moveToElementText(node);if(_3ec.compareEndPoints(_3ed,_3eb)>0){if(_3f1&&_3f1.nodeType==3){_3ef=_3f1;_3f2=true;}else{_3ef=_3ee;_3f0=i;return false;}}else{if(i==_3ee.childNodes.length-1){_3ef=_3ee;_3f0=_3ee.childNodes.length;return false;}}}else{if(i==_3ee.childNodes.length-1){_3ef=node;_3f2=true;}}if(_3f2&&_3ef){var _3f3=dijit.range.adjacentNoneTextNode(_3ef)[0];if(_3f3){_3ef=_3f3.nextSibling;}else{_3ef=_3ee.firstChild;}var _3f4=dijit.range.adjacentNoneTextNode(_3ef);_3f3=_3f4[0];var _3f5=_3f4[1];if(_3f3){_3ec.moveToElementText(_3f3);_3ec.collapse(false);}else{_3ec.moveToElementText(_3ee);}_3ec.setEndPoint(_3ed,_3eb);_3f0=_3ec.text.length-_3f5;return false;}_3f1=node;return true;});}else{_3ef=_3ee;_3f0=0;}if(!end&&_3ef.nodeType==1&&_3f0==_3ef.childNodes.length){var _3f6=_3ef.nextSibling;if(_3f6&&_3f6.nodeType==3){_3ef=_3f6;_3f0=0;}}return [_3ef,_3f0];},setEndPoint:function(_3f7,_3f8,_3f9){var _3fa=_3f7.duplicate(),node,len;if(_3f8.nodeType!=3){if(_3f9>0){node=_3f8.childNodes[_3f9-1];if(node){if(node.nodeType==3){_3f8=node;_3f9=node.length;}else{if(node.nextSibling&&node.nextSibling.nodeType==3){_3f8=node.nextSibling;_3f9=0;}else{_3fa.moveToElementText(node.nextSibling?node:_3f8);var _3fb=node.parentNode;var _3fc=_3fb.insertBefore(node.ownerDocument.createTextNode(" "),node.nextSibling);_3fa.collapse(false);_3fb.removeChild(_3fc);}}}}else{_3fa.moveToElementText(_3f8);_3fa.collapse(true);}}if(_3f8.nodeType==3){var _3fd=dijit.range.adjacentNoneTextNode(_3f8);var _3fe=_3fd[0];len=_3fd[1];if(_3fe){_3fa.moveToElementText(_3fe);_3fa.collapse(false);if(_3fe.contentEditable!="inherit"){len++;}}else{_3fa.moveToElementText(_3f8.parentNode);_3fa.collapse(true);}_3f9+=len;if(_3f9>0){if(_3fa.move("character",_3f9)!=_3f9){console.error("Error when moving!");}}}return _3fa;},decomposeTextRange:function(_3ff){var _400=dijit.range.ie.getEndPoint(_3ff);var _401=_400[0],_402=_400[1];var _403=_400[0],_404=_400[1];if(_3ff.htmlText.length){if(_3ff.htmlText==_3ff.text){_404=_402+_3ff.text.length;}else{_400=dijit.range.ie.getEndPoint(_3ff,true);_403=_400[0],_404=_400[1];}}return [_401,_402,_403,_404];},setRange:function(_405,_406,_407,_408,_409,_40a){var _40b=dijit.range.ie.setEndPoint(_405,_406,_407);_405.setEndPoint("StartToStart",_40b);if(!_40a){var end=dijit.range.ie.setEndPoint(_405,_408,_409);}_405.setEndPoint("EndToEnd",end||_40b);return _405;}};dojo.declare("dijit.range.W3CRange",null,{constructor:function(){if(arguments.length>0){this.setStart(arguments[0][0],arguments[0][1]);this.setEnd(arguments[0][2],arguments[0][3]);}else{this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}},_updateInternal:function(){if(this.startContainer!==this.endContainer){this.commonAncestorContainer=dijit.range.getCommonAncestor(this.startContainer,this.endContainer);}else{this.commonAncestorContainer=this.startContainer;}this.collapsed=(this.startContainer===this.endContainer)&&(this.startOffset==this.endOffset);},setStart:function(node,_40c){_40c=parseInt(_40c);if(this.startContainer===node&&this.startOffset==_40c){return;}delete this._cachedBookmark;this.startContainer=node;this.startOffset=_40c;if(!this.endContainer){this.setEnd(node,_40c);}else{this._updateInternal();}},setEnd:function(node,_40d){_40d=parseInt(_40d);if(this.endContainer===node&&this.endOffset==_40d){return;}delete this._cachedBookmark;this.endContainer=node;this.endOffset=_40d;if(!this.startContainer){this.setStart(node,_40d);}else{this._updateInternal();}},setStartAfter:function(node,_40e){this._setPoint("setStart",node,_40e,1);},setStartBefore:function(node,_40f){this._setPoint("setStart",node,_40f,0);},setEndAfter:function(node,_410){this._setPoint("setEnd",node,_410,1);},setEndBefore:function(node,_411){this._setPoint("setEnd",node,_411,0);},_setPoint:function(what,node,_412,ext){var _413=dijit.range.getIndex(node,node.parentNode).o;this[what](node.parentNode,_413.pop()+ext);},_getIERange:function(){var r=(this._body||this.endContainer.ownerDocument.body).createTextRange();dijit.range.ie.setRange(r,this.startContainer,this.startOffset,this.endContainer,this.endOffset,this.collapsed);return r;},getBookmark:function(body){this._getIERange();return this._cachedBookmark;},_select:function(){var r=this._getIERange();r.select();},deleteContents:function(){var r=this._getIERange();r.pasteHTML("");this.endContainer=this.startContainer;this.endOffset=this.startOffset;this.collapsed=true;},cloneRange:function(){var r=new dijit.range.W3CRange([this.startContainer,this.startOffset,this.endContainer,this.endOffset]);r._body=this._body;return r;},detach:function(){this._body=null;this.commonAncestorContainer=null;this.startContainer=null;this.startOffset=0;this.endContainer=null;this.endOffset=0;this.collapsed=true;}});}}if(!dojo._hasResource["dijit._editor.html"]){dojo._hasResource["dijit._editor.html"]=true;dojo.provide("dijit._editor.html");dojo.getObject("_editor",true,dijit);dijit._editor.escapeXml=function(str,_414){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_414){str=str.replace(/'/gm,"&#39;");}return str;};dijit._editor.getNodeHtml=function(node){var _415;switch(node.nodeType){case 1:var _416=node.nodeName.toLowerCase();if(!_416||_416.charAt(0)=="/"){return "";}_415="<"+_416;var _417=[];var attr;if(dojo.isIE&&node.outerHTML){var s=node.outerHTML;s=s.substr(0,s.indexOf(">")).replace(/(['"])[^"']*\1/g,"");var reg=/(\b\w+)\s?=/g;var m,key;while((m=reg.exec(s))){key=m[1];if(key.substr(0,3)!="_dj"){if(key=="src"||key=="href"){if(node.getAttribute("_djrealurl")){_417.push([key,node.getAttribute("_djrealurl")]);continue;}}var val,_418;switch(key){case "style":val=node.style.cssText.toLowerCase();break;case "class":val=node.className;break;case "width":if(_416==="img"){_418=/width=(\S+)/i.exec(s);if(_418){val=_418[1];}break;}case "height":if(_416==="img"){_418=/height=(\S+)/i.exec(s);if(_418){val=_418[1];}break;}default:val=node.getAttribute(key);}if(val!=null){_417.push([key,val.toString()]);}}}}else{var i=0;while((attr=node.attributes[i++])){var n=attr.name;if(n.substr(0,3)!="_dj"){var v=attr.value;if(n=="src"||n=="href"){if(node.getAttribute("_djrealurl")){v=node.getAttribute("_djrealurl");}}_417.push([n,v]);}}}_417.sort(function(a,b){return a[0]<b[0]?-1:(a[0]==b[0]?0:1);});var j=0;while((attr=_417[j++])){_415+=" "+attr[0]+"=\""+(dojo.isString(attr[1])?dijit._editor.escapeXml(attr[1],true):attr[1])+"\"";}if(_416==="script"){_415+=">"+node.innerHTML+"</"+_416+">";}else{if(node.childNodes.length){_415+=">"+dijit._editor.getChildrenHtml(node)+"</"+_416+">";}else{switch(_416){case "br":case "hr":case "img":case "input":case "base":case "meta":case "area":case "basefont":_415+=" />";break;default:_415+="></"+_416+">";}}}break;case 4:case 3:_415=dijit._editor.escapeXml(node.nodeValue,true);break;case 8:_415="<!--"+dijit._editor.escapeXml(node.nodeValue,true)+"-->";break;default:_415="<!-- Element not recognized - Type: "+node.nodeType+" Name: "+node.nodeName+"-->";}return _415;};dijit._editor.getChildrenHtml=function(dom){var out="";if(!dom){return out;}var _419=dom["childNodes"]||dom;var _41a=!dojo.isIE||_419!==dom;var node,i=0;while((node=_419[i++])){if(!_41a||node.parentNode==dom){out+=dijit._editor.getNodeHtml(node);}}return out;};}if(!dojo._hasResource["dijit._editor.RichText"]){dojo._hasResource["dijit._editor.RichText"]=true;dojo.provide("dijit._editor.RichText");if(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"]){if(dojo._postLoad){(function(){var _41b=dojo.doc.createElement("textarea");_41b.id=dijit._scopeName+"._editor.RichText.value";dojo.style(_41b,{display:"none",position:"absolute",top:"-100px",height:"3px",width:"3px"});dojo.body().appendChild(_41b);})();}else{try{dojo.doc.write("<textarea id=\""+dijit._scopeName+"._editor.RichText.value\" "+"style=\"display:none;position:absolute;top:-100px;left:-100px;height:3px;width:3px;overflow:hidden;\"></textarea>");}catch(e){}}}dojo.declare("dijit._editor.RichText",[dijit._Widget,dijit._CssStateMixin],{constructor:function(_41c){this.contentPreFilters=[];this.contentPostFilters=[];this.contentDomPreFilters=[];this.contentDomPostFilters=[];this.editingAreaStyleSheets=[];this.events=[].concat(this.events);this._keyHandlers={};if(_41c&&dojo.isString(_41c.value)){this.value=_41c.value;}this.onLoadDeferred=new dojo.Deferred();},baseClass:"dijitEditor",inheritWidth:false,focusOnLoad:false,name:"",styleSheets:"",height:"300px",minHeight:"1em",isClosed:true,isLoaded:false,_SEPARATOR:"@@**%%__RICHTEXTBOUNDRY__%%**@@",_NAME_CONTENT_SEP:"@@**%%:%%**@@",onLoadDeferred:null,isTabIndent:false,disableSpellCheck:false,postCreate:function(){if("textarea"==this.domNode.tagName.toLowerCase()){console.warn("RichText should not be used with the TEXTAREA tag.  See dijit._editor.RichText docs.");}this.contentPreFilters=[dojo.hitch(this,"_preFixUrlAttributes")].concat(this.contentPreFilters);if(dojo.isMoz){this.contentPreFilters=[this._normalizeFontStyle].concat(this.contentPreFilters);this.contentPostFilters=[this._removeMozBogus].concat(this.contentPostFilters);}if(dojo.isWebKit){this.contentPreFilters=[this._removeWebkitBogus].concat(this.contentPreFilters);this.contentPostFilters=[this._removeWebkitBogus].concat(this.contentPostFilters);}if(dojo.isIE){this.contentPostFilters=[this._normalizeFontStyle].concat(this.contentPostFilters);}this.inherited(arguments);dojo.publish(dijit._scopeName+"._editor.RichText::init",[this]);this.open();this.setupDefaultShortcuts();},setupDefaultShortcuts:function(){var exec=dojo.hitch(this,function(cmd,arg){return function(){return !this.execCommand(cmd,arg);};});var _41d={b:exec("bold"),i:exec("italic"),u:exec("underline"),a:exec("selectall"),s:function(){this.save(true);},m:function(){this.isTabIndent=!this.isTabIndent;},"1":exec("formatblock","h1"),"2":exec("formatblock","h2"),"3":exec("formatblock","h3"),"4":exec("formatblock","h4"),"\\":exec("insertunorderedlist")};if(!dojo.isIE){_41d.Z=exec("redo");}for(var key in _41d){this.addKeyHandler(key,true,false,_41d[key]);}},events:["onKeyPress","onKeyDown","onKeyUp"],captureEvents:[],_editorCommandsLocalized:false,_localizeEditorCommands:function(){if(dijit._editor._editorCommandsLocalized){this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;return;}dijit._editor._editorCommandsLocalized=true;dijit._editor._local2NativeFormatNames={};dijit._editor._native2LocalFormatNames={};this._local2NativeFormatNames=dijit._editor._local2NativeFormatNames;this._native2LocalFormatNames=dijit._editor._native2LocalFormatNames;var _41e=["div","p","pre","h1","h2","h3","h4","h5","h6","ol","ul","address"];var _41f="",_420,i=0;while((_420=_41e[i++])){if(_420.charAt(1)!=="l"){_41f+="<"+_420+"><span>content</span></"+_420+"><br/>";}else{_41f+="<"+_420+"><li>content</li></"+_420+"><br/>";}}var _421={position:"absolute",top:"0px",zIndex:10,opacity:0.01};var div=dojo.create("div",{style:_421,innerHTML:_41f});dojo.body().appendChild(div);var _422=dojo.hitch(this,function(){var node=div.firstChild;while(node){try{dijit._editor.selection.selectElement(node.firstChild);var _423=node.tagName.toLowerCase();this._local2NativeFormatNames[_423]=document.queryCommandValue("formatblock");this._native2LocalFormatNames[this._local2NativeFormatNames[_423]]=_423;node=node.nextSibling.nextSibling;}catch(e){}}div.parentNode.removeChild(div);div.innerHTML="";});setTimeout(_422,0);},open:function(_424){if(!this.onLoadDeferred||this.onLoadDeferred.fired>=0){this.onLoadDeferred=new dojo.Deferred();}if(!this.isClosed){this.close();}dojo.publish(dijit._scopeName+"._editor.RichText::open",[this]);if(arguments.length==1&&_424.nodeName){this.domNode=_424;}var dn=this.domNode;var html;if(dojo.isString(this.value)){html=this.value;delete this.value;dn.innerHTML="";}else{if(dn.nodeName&&dn.nodeName.toLowerCase()=="textarea"){var ta=(this.textarea=dn);this.name=ta.name;html=ta.value;dn=this.domNode=dojo.doc.createElement("div");dn.setAttribute("widgetId",this.id);ta.removeAttribute("widgetId");dn.cssText=ta.cssText;dn.className+=" "+ta.className;dojo.place(dn,ta,"before");var _425=dojo.hitch(this,function(){dojo.style(ta,{display:"block",position:"absolute",top:"-1000px"});if(dojo.isIE){var s=ta.style;this.__overflow=s.overflow;s.overflow="hidden";}});if(dojo.isIE){setTimeout(_425,10);}else{_425();}if(ta.form){var _426=ta.value;this.reset=function(){var _427=this.getValue();if(_427!=_426){this.replaceValue(_426);}};dojo.connect(ta.form,"onsubmit",this,function(){dojo.attr(ta,"disabled",this.disabled);ta.value=this.getValue();});}}else{html=dijit._editor.getChildrenHtml(dn);dn.innerHTML="";}}var _428=dojo.contentBox(dn);this._oldHeight=_428.h;this._oldWidth=_428.w;this.value=html;if(dn.nodeName&&dn.nodeName=="LI"){dn.innerHTML=" <br>";}this.header=dn.ownerDocument.createElement("div");dn.appendChild(this.header);this.editingArea=dn.ownerDocument.createElement("div");dn.appendChild(this.editingArea);this.footer=dn.ownerDocument.createElement("div");dn.appendChild(this.footer);if(!this.name){this.name=this.id+"_AUTOGEN";}if(this.name!==""&&(!dojo.config["useXDomain"]||dojo.config["allowXdRichTextSave"])){var _429=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_429&&_429.value!==""){var _42a=_429.value.split(this._SEPARATOR),i=0,dat;while((dat=_42a[i++])){var data=dat.split(this._NAME_CONTENT_SEP);if(data[0]==this.name){html=data[1];_42a=_42a.splice(i,1);_429.value=_42a.join(this._SEPARATOR);break;}}}if(!dijit._editor._globalSaveHandler){dijit._editor._globalSaveHandler={};dojo.addOnUnload(function(){var id;for(id in dijit._editor._globalSaveHandler){var f=dijit._editor._globalSaveHandler[id];if(dojo.isFunction(f)){f();}}});}dijit._editor._globalSaveHandler[this.id]=dojo.hitch(this,"_saveContent");}this.isClosed=false;var ifr=(this.editorObject=this.iframe=dojo.doc.createElement("iframe"));ifr.id=this.id+"_iframe";this._iframeSrc=this._getIframeDocTxt();ifr.style.border="none";ifr.style.width="100%";if(this._layoutMode){ifr.style.height="100%";}else{if(dojo.isIE>=7){if(this.height){ifr.style.height=this.height;}if(this.minHeight){ifr.style.minHeight=this.minHeight;}}else{ifr.style.height=this.height?this.height:this.minHeight;}}ifr.frameBorder=0;ifr._loadFunc=dojo.hitch(this,function(win){this.window=win;this.document=this.window.document;if(dojo.isIE){this._localizeEditorCommands();}this.onLoad(html);});var s="javascript:parent."+dijit._scopeName+".byId(\""+this.id+"\")._iframeSrc";ifr.setAttribute("src",s);this.editingArea.appendChild(ifr);if(dojo.isSafari<=4){var src=ifr.getAttribute("src");if(!src||src.indexOf("javascript")==-1){setTimeout(function(){ifr.setAttribute("src",s);},0);}}if(dn.nodeName=="LI"){dn.lastChild.style.marginTop="-1.2em";}dojo.addClass(this.domNode,this.baseClass);},_local2NativeFormatNames:{},_native2LocalFormatNames:{},_getIframeDocTxt:function(){var _42b=dojo.getComputedStyle(this.domNode);var html="";var _42c=true;if(dojo.isIE||dojo.isWebKit||(!this.height&&!dojo.isMoz)){html="<div id='dijitEditorBody'></div>";_42c=false;}else{if(dojo.isMoz){this._cursorToStart=true;html="&nbsp;";}}var font=[_42b.fontWeight,_42b.fontSize,_42b.fontFamily].join(" ");var _42d=_42b.lineHeight;if(_42d.indexOf("px")>=0){_42d=parseFloat(_42d)/parseFloat(_42b.fontSize);}else{if(_42d.indexOf("em")>=0){_42d=parseFloat(_42d);}else{_42d="normal";}}var _42e="";var self=this;this.style.replace(/(^|;)\s*(line-|font-?)[^;]+/ig,function(_42f){_42f=_42f.replace(/^;/ig,"")+";";var s=_42f.split(":")[0];if(s){s=dojo.trim(s);s=s.toLowerCase();var i;var sC="";for(i=0;i<s.length;i++){var c=s.charAt(i);switch(c){case "-":i++;c=s.charAt(i).toUpperCase();default:sC+=c;}}dojo.style(self.domNode,sC,"");}_42e+=_42f+";";});var _430=dojo.query("label[for=\""+this.id+"\"]");return [this.isLeftToRight()?"<html>\n<head>\n":"<html dir='rtl'>\n<head>\n",(dojo.isMoz&&_430.length?"<title>"+_430[0].innerHTML+"</title>\n":""),"<meta http-equiv='Content-Type' content='text/html'>\n","<style>\n","\tbody,html {\n","\t\tbackground:transparent;\n","\t\tpadding: 1px 0 0 0;\n","\t\tmargin: -1px 0 0 0;\n",((dojo.isWebKit)?"\t\twidth: 100%;\n":""),((dojo.isWebKit)?"\t\theight: 100%;\n":""),"\t}\n","\tbody{\n","\t\ttop:0px;\n","\t\tleft:0px;\n","\t\tright:0px;\n","\t\tfont:",font,";\n",((this.height||dojo.isOpera)?"":"\t\tposition: fixed;\n"),"\t\tmin-height:",this.minHeight,";\n","\t\tline-height:",_42d,";\n","\t}\n","\tp{ margin: 1em 0; }\n",(!_42c&&!this.height?"\tbody,html {overflow-y: hidden;}\n":""),"\t#dijitEditorBody{overflow-x: auto; overflow-y:"+(this.height?"auto;":"hidden;")+" outline: 0px;}\n","\tli > ul:-moz-first-node, li > ol:-moz-first-node{ padding-top: 1.2em; }\n",(!dojo.isIE?"\tli{ min-height:1.2em; }\n":""),"</style>\n",this._applyEditingAreaStyleSheets(),"\n","</head>\n<body ",(_42c?"id='dijitEditorBody' ":""),"onload='frameElement._loadFunc(window,document)' style='"+_42e+"'>",html,"</body>\n</html>"].join("");},_applyEditingAreaStyleSheets:function(){var _431=[];if(this.styleSheets){_431=this.styleSheets.split(";");this.styleSheets="";}_431=_431.concat(this.editingAreaStyleSheets);this.editingAreaStyleSheets=[];var text="",i=0,url;while((url=_431[i++])){var _432=(new dojo._Url(dojo.global.location,url)).toString();this.editingAreaStyleSheets.push(_432);text+="<link rel=\"stylesheet\" type=\"text/css\" href=\""+_432+"\"/>";}return text;},addStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}if(dojo.indexOf(this.editingAreaStyleSheets,url)>-1){return;}this.editingAreaStyleSheets.push(url);this.onLoadDeferred.addCallback(dojo.hitch(this,function(){if(this.document.createStyleSheet){this.document.createStyleSheet(url);}else{var head=this.document.getElementsByTagName("head")[0];var _433=this.document.createElement("link");_433.rel="stylesheet";_433.type="text/css";_433.href=url;head.appendChild(_433);}}));},removeStyleSheet:function(uri){var url=uri.toString();if(url.charAt(0)=="."||(url.charAt(0)!="/"&&!uri.host)){url=(new dojo._Url(dojo.global.location,url)).toString();}var _434=dojo.indexOf(this.editingAreaStyleSheets,url);if(_434==-1){return;}delete this.editingAreaStyleSheets[_434];dojo.withGlobal(this.window,"query",dojo,["link:[href=\""+url+"\"]"]).orphan();},disabled:false,_mozSettingProps:{"styleWithCSS":false},_setDisabledAttr:function(_435){_435=!!_435;this._set("disabled",_435);if(!this.isLoaded){return;}if(dojo.isIE||dojo.isWebKit||dojo.isOpera){var _436=dojo.isIE&&(this.isLoaded||!this.focusOnLoad);if(_436){this.editNode.unselectable="on";}this.editNode.contentEditable=!_435;if(_436){var _437=this;setTimeout(function(){_437.editNode.unselectable="off";},0);}}else{try{this.document.designMode=(_435?"off":"on");}catch(e){return;}if(!_435&&this._mozSettingProps){var ps=this._mozSettingProps;for(var n in ps){if(ps.hasOwnProperty(n)){try{this.document.execCommand(n,false,ps[n]);}catch(e2){}}}}}this._disabledOK=true;},onLoad:function(html){if(!this.window.__registeredWindow){this.window.__registeredWindow=true;this._iframeRegHandle=dijit.registerIframe(this.iframe);}if(!dojo.isIE&&!dojo.isWebKit&&(this.height||dojo.isMoz)){this.editNode=this.document.body;}else{this.editNode=this.document.body.firstChild;var _438=this;if(dojo.isIE){this.tabStop=dojo.create("div",{tabIndex:-1},this.editingArea);this.iframe.onfocus=function(){_438.editNode.setActive();};}}this.focusNode=this.editNode;var _439=this.events.concat(this.captureEvents);var ap=this.iframe?this.document:this.editNode;dojo.forEach(_439,function(item){this.connect(ap,item.toLowerCase(),item);},this);this.connect(ap,"onmouseup","onClick");if(dojo.isIE){this.connect(this.document,"onmousedown","_onIEMouseDown");this.editNode.style.zoom=1;}else{this.connect(this.document,"onmousedown",function(){delete this._cursorToStart;});}if(dojo.isWebKit){this._webkitListener=this.connect(this.document,"onmouseup","onDisplayChanged");this.connect(this.document,"onmousedown",function(e){var t=e.target;if(t&&(t===this.document.body||t===this.document)){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}});}if(dojo.isIE){try{this.document.execCommand("RespectVisibilityInDesign",true,null);}catch(e){}}this.isLoaded=true;this.set("disabled",this.disabled);var _43a=dojo.hitch(this,function(){this.setValue(html);if(this.onLoadDeferred){this.onLoadDeferred.callback(true);}this.onDisplayChanged();if(this.focusOnLoad){dojo.addOnLoad(dojo.hitch(this,function(){setTimeout(dojo.hitch(this,"focus"),this.updateInterval);}));}this.value=this.getValue(true);});if(this.setValueDeferred){this.setValueDeferred.addCallback(_43a);}else{_43a();}},onKeyDown:function(e){if(e.keyCode===dojo.keys.TAB&&this.isTabIndent){dojo.stopEvent(e);if(this.queryCommandEnabled((e.shiftKey?"outdent":"indent"))){this.execCommand((e.shiftKey?"outdent":"indent"));}}if(dojo.isIE){if(e.keyCode==dojo.keys.TAB&&!this.isTabIndent){if(e.shiftKey&&!e.ctrlKey&&!e.altKey){this.iframe.focus();}else{if(!e.shiftKey&&!e.ctrlKey&&!e.altKey){this.tabStop.focus();}}}else{if(e.keyCode===dojo.keys.BACKSPACE&&this.document.selection.type==="Control"){dojo.stopEvent(e);this.execCommand("delete");}else{if((65<=e.keyCode&&e.keyCode<=90)||(e.keyCode>=37&&e.keyCode<=40)){e.charCode=e.keyCode;this.onKeyPress(e);}}}}return true;},onKeyUp:function(e){return;},setDisabled:function(_43b){dojo.deprecated("dijit.Editor::setDisabled is deprecated","use dijit.Editor::attr(\"disabled\",boolean) instead",2);this.set("disabled",_43b);},_setValueAttr:function(_43c){this.setValue(_43c);},_setDisableSpellCheckAttr:function(_43d){if(this.document){dojo.attr(this.document.body,"spellcheck",!_43d);}else{this.onLoadDeferred.addCallback(dojo.hitch(this,function(){dojo.attr(this.document.body,"spellcheck",!_43d);}));}this._set("disableSpellCheck",_43d);},onKeyPress:function(e){var c=(e.keyChar&&e.keyChar.toLowerCase())||e.keyCode,_43e=this._keyHandlers[c],args=arguments;if(_43e&&!e.altKey){dojo.some(_43e,function(h){if(!(h.shift^e.shiftKey)&&!(h.ctrl^(e.ctrlKey||e.metaKey))){if(!h.handler.apply(this,args)){e.preventDefault();}return true;}},this);}if(!this._onKeyHitch){this._onKeyHitch=dojo.hitch(this,"onKeyPressed");}setTimeout(this._onKeyHitch,1);return true;},addKeyHandler:function(key,ctrl,_43f,_440){if(!dojo.isArray(this._keyHandlers[key])){this._keyHandlers[key]=[];}this._keyHandlers[key].push({shift:_43f||false,ctrl:ctrl||false,handler:_440});},onKeyPressed:function(){this.onDisplayChanged();},onClick:function(e){this.onDisplayChanged(e);},_onIEMouseDown:function(e){if(!this._focused&&!this.disabled){this.focus();}},_onBlur:function(e){this.inherited(arguments);var _441=this.getValue(true);if(_441!=this.value){this.onChange(_441);}this._set("value",_441);},_onFocus:function(e){if(!this.disabled){if(!this._disabledOK){this.set("disabled",false);}this.inherited(arguments);}},blur:function(){if(!dojo.isIE&&this.window.document.documentElement&&this.window.document.documentElement.focus){this.window.document.documentElement.focus();}else{if(dojo.doc.body.focus){dojo.doc.body.focus();}}},focus:function(){if(!this.isLoaded){this.focusOnLoad=true;return;}if(this._cursorToStart){delete this._cursorToStart;if(this.editNode.childNodes){this.placeCursorAtStart();return;}}if(!dojo.isIE){dijit.focus(this.iframe);}else{if(this.editNode&&this.editNode.focus){this.iframe.fireEvent("onfocus",document.createEventObject());}}},updateInterval:200,_updateTimer:null,onDisplayChanged:function(e){if(this._updateTimer){clearTimeout(this._updateTimer);}if(!this._updateHandler){this._updateHandler=dojo.hitch(this,"onNormalizedDisplayChanged");}this._updateTimer=setTimeout(this._updateHandler,this.updateInterval);},onNormalizedDisplayChanged:function(){delete this._updateTimer;},onChange:function(_442){},_normalizeCommand:function(cmd,_443){var _444=cmd.toLowerCase();if(_444=="formatblock"){if(dojo.isSafari&&_443===undefined){_444="heading";}}else{if(_444=="hilitecolor"&&!dojo.isMoz){_444="backcolor";}}return _444;},_qcaCache:{},queryCommandAvailable:function(_445){var ca=this._qcaCache[_445];if(ca!==undefined){return ca;}return (this._qcaCache[_445]=this._queryCommandAvailable(_445));},_queryCommandAvailable:function(_446){var ie=1;var _447=1<<1;var _448=1<<2;var _449=1<<3;function _44a(_44b){return {ie:Boolean(_44b&ie),mozilla:Boolean(_44b&_447),webkit:Boolean(_44b&_448),opera:Boolean(_44b&_449)};};var _44c=null;switch(_446.toLowerCase()){case "bold":case "italic":case "underline":case "subscript":case "superscript":case "fontname":case "fontsize":case "forecolor":case "hilitecolor":case "justifycenter":case "justifyfull":case "justifyleft":case "justifyright":case "delete":case "selectall":case "toggledir":_44c=_44a(_447|ie|_448|_449);break;case "createlink":case "unlink":case "removeformat":case "inserthorizontalrule":case "insertimage":case "insertorderedlist":case "insertunorderedlist":case "indent":case "outdent":case "formatblock":case "inserthtml":case "undo":case "redo":case "strikethrough":case "tabindent":_44c=_44a(_447|ie|_449|_448);break;case "blockdirltr":case "blockdirrtl":case "dirltr":case "dirrtl":case "inlinedirltr":case "inlinedirrtl":_44c=_44a(ie);break;case "cut":case "copy":case "paste":_44c=_44a(ie|_447|_448);break;case "inserttable":_44c=_44a(_447|ie);break;case "insertcell":case "insertcol":case "insertrow":case "deletecells":case "deletecols":case "deleterows":case "mergecells":case "splitcell":_44c=_44a(ie|_447);break;default:return false;}return (dojo.isIE&&_44c.ie)||(dojo.isMoz&&_44c.mozilla)||(dojo.isWebKit&&_44c.webkit)||(dojo.isOpera&&_44c.opera);},execCommand:function(_44d,_44e){var _44f;this.focus();_44d=this._normalizeCommand(_44d,_44e);if(_44e!==undefined){if(_44d=="heading"){throw new Error("unimplemented");}else{if((_44d=="formatblock")&&dojo.isIE){_44e="<"+_44e+">";}}}var _450="_"+_44d+"Impl";if(this[_450]){_44f=this[_450](_44e);}else{_44e=arguments.length>1?_44e:null;if(_44e||_44d!="createlink"){_44f=this.document.execCommand(_44d,false,_44e);}}this.onDisplayChanged();return _44f;},queryCommandEnabled:function(_451){if(this.disabled||!this._disabledOK){return false;}_451=this._normalizeCommand(_451);if(dojo.isMoz||dojo.isWebKit){if(_451=="unlink"){return this._sCall("hasAncestorElement",["a"]);}else{if(_451=="inserttable"){return true;}}}if(dojo.isWebKit){if(_451=="cut"||_451=="copy"){var sel=this.window.getSelection();if(sel){sel=sel.toString();}return !!sel;}else{if(_451=="paste"){return true;}}}var elem=dojo.isIE?this.document.selection.createRange():this.document;try{return elem.queryCommandEnabled(_451);}catch(e){return false;}},queryCommandState:function(_452){if(this.disabled||!this._disabledOK){return false;}_452=this._normalizeCommand(_452);try{return this.document.queryCommandState(_452);}catch(e){return false;}},queryCommandValue:function(_453){if(this.disabled||!this._disabledOK){return false;}var r;_453=this._normalizeCommand(_453);if(dojo.isIE&&_453=="formatblock"){r=this._native2LocalFormatNames[this.document.queryCommandValue(_453)];}else{if(dojo.isMoz&&_453==="hilitecolor"){var _454;try{_454=this.document.queryCommandValue("styleWithCSS");}catch(e){_454=false;}this.document.execCommand("styleWithCSS",false,true);r=this.document.queryCommandValue(_453);this.document.execCommand("styleWithCSS",false,_454);}else{r=this.document.queryCommandValue(_453);}}return r;},_sCall:function(name,args){return dojo.withGlobal(this.window,name,dijit._editor.selection,args);},placeCursorAtStart:function(){this.focus();var _455=false;if(dojo.isMoz){var _456=this.editNode.firstChild;while(_456){if(_456.nodeType==3){if(_456.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_455=true;this._sCall("selectElement",[_456]);break;}}else{if(_456.nodeType==1){_455=true;var tg=_456.tagName?_456.tagName.toLowerCase():"";if(/br|input|img|base|meta|area|basefont|hr|link/.test(tg)){this._sCall("selectElement",[_456]);}else{this._sCall("selectElementChildren",[_456]);}break;}}_456=_456.nextSibling;}}else{_455=true;this._sCall("selectElementChildren",[this.editNode]);}if(_455){this._sCall("collapse",[true]);}},placeCursorAtEnd:function(){this.focus();var _457=false;if(dojo.isMoz){var last=this.editNode.lastChild;while(last){if(last.nodeType==3){if(last.nodeValue.replace(/^\s+|\s+$/g,"").length>0){_457=true;this._sCall("selectElement",[last]);break;}}else{if(last.nodeType==1){_457=true;if(last.lastChild){this._sCall("selectElement",[last.lastChild]);}else{this._sCall("selectElement",[last]);}break;}}last=last.previousSibling;}}else{_457=true;this._sCall("selectElementChildren",[this.editNode]);}if(_457){this._sCall("collapse",[false]);}},getValue:function(_458){if(this.textarea){if(this.isClosed||!this.isLoaded){return this.textarea.value;}}return this._postFilterContent(null,_458);},_getValueAttr:function(){return this.getValue(true);},setValue:function(html){if(!this.isLoaded){this.onLoadDeferred.addCallback(dojo.hitch(this,function(){this.setValue(html);}));return;}this._cursorToStart=true;if(this.textarea&&(this.isClosed||!this.isLoaded)){this.textarea.value=html;}else{html=this._preFilterContent(html);var node=this.isClosed?this.domNode:this.editNode;if(html&&dojo.isMoz&&html.toLowerCase()=="<p></p>"){html="<p>&nbsp;</p>";}if(!html&&dojo.isWebKit){html="&nbsp;";}node.innerHTML=html;this._preDomFilterContent(node);}this.onDisplayChanged();this._set("value",this.getValue(true));},replaceValue:function(html){if(this.isClosed){this.setValue(html);}else{if(this.window&&this.window.getSelection&&!dojo.isMoz){this.setValue(html);}else{if(this.window&&this.window.getSelection){html=this._preFilterContent(html);this.execCommand("selectall");if(!html){this._cursorToStart=true;html="&nbsp;";}this.execCommand("inserthtml",html);this._preDomFilterContent(this.editNode);}else{if(this.document&&this.document.selection){this.setValue(html);}}}}this._set("value",this.getValue(true));},_preFilterContent:function(html){var ec=html;dojo.forEach(this.contentPreFilters,function(ef){if(ef){ec=ef(ec);}});return ec;},_preDomFilterContent:function(dom){dom=dom||this.editNode;dojo.forEach(this.contentDomPreFilters,function(ef){if(ef&&dojo.isFunction(ef)){ef(dom);}},this);},_postFilterContent:function(dom,_459){var ec;if(!dojo.isString(dom)){dom=dom||this.editNode;if(this.contentDomPostFilters.length){if(_459){dom=dojo.clone(dom);}dojo.forEach(this.contentDomPostFilters,function(ef){dom=ef(dom);});}ec=dijit._editor.getChildrenHtml(dom);}else{ec=dom;}if(!dojo.trim(ec.replace(/^\xA0\xA0*/,"").replace(/\xA0\xA0*$/,"")).length){ec="";}dojo.forEach(this.contentPostFilters,function(ef){ec=ef(ec);});return ec;},_saveContent:function(e){var _45a=dojo.byId(dijit._scopeName+"._editor.RichText.value");if(_45a.value){_45a.value+=this._SEPARATOR;}_45a.value+=this.name+this._NAME_CONTENT_SEP+this.getValue(true);},escapeXml:function(str,_45b){str=str.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");if(!_45b){str=str.replace(/'/gm,"&#39;");}return str;},getNodeHtml:function(node){dojo.deprecated("dijit.Editor::getNodeHtml is deprecated","use dijit._editor.getNodeHtml instead",2);return dijit._editor.getNodeHtml(node);},getNodeChildrenHtml:function(dom){dojo.deprecated("dijit.Editor::getNodeChildrenHtml is deprecated","use dijit._editor.getChildrenHtml instead",2);return dijit._editor.getChildrenHtml(dom);},close:function(save){if(this.isClosed){return;}if(!arguments.length){save=true;}if(save){this._set("value",this.getValue(true));}if(this.interval){clearInterval(this.interval);}if(this._webkitListener){this.disconnect(this._webkitListener);delete this._webkitListener;}if(dojo.isIE){this.iframe.onfocus=null;}this.iframe._loadFunc=null;if(this._iframeRegHandle){dijit.unregisterIframe(this._iframeRegHandle);delete this._iframeRegHandle;}if(this.textarea){var s=this.textarea.style;s.position="";s.left=s.top="";if(dojo.isIE){s.overflow=this.__overflow;this.__overflow=null;}this.textarea.value=this.value;dojo.destroy(this.domNode);this.domNode=this.textarea;}else{this.domNode.innerHTML=this.value;}delete this.iframe;dojo.removeClass(this.domNode,this.baseClass);this.isClosed=true;this.isLoaded=false;delete this.editNode;delete this.focusNode;if(this.window&&this.window._frameElement){this.window._frameElement=null;}this.window=null;this.document=null;this.editingArea=null;this.editorObject=null;},destroy:function(){if(!this.isClosed){this.close(false);}this.inherited(arguments);if(dijit._editor._globalSaveHandler){delete dijit._editor._globalSaveHandler[this.id];}},_removeMozBogus:function(html){return html.replace(/\stype="_moz"/gi,"").replace(/\s_moz_dirty=""/gi,"").replace(/_moz_resizing="(true|false)"/gi,"");},_removeWebkitBogus:function(html){html=html.replace(/\sclass="webkit-block-placeholder"/gi,"");html=html.replace(/\sclass="apple-style-span"/gi,"");html=html.replace(/<meta charset=\"utf-8\" \/>/gi,"");return html;},_normalizeFontStyle:function(html){return html.replace(/<(\/)?strong([ \>])/gi,"<$1b$2").replace(/<(\/)?em([ \>])/gi,"<$1i$2");},_preFixUrlAttributes:function(html){return html.replace(/(?:(<a(?=\s).*?\shref=)("|')(.*?)\2)|(?:(<a\s.*?href=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2").replace(/(?:(<img(?=\s).*?\ssrc=)("|')(.*?)\2)|(?:(<img\s.*?src=)([^"'][^ >]+))/gi,"$1$4$2$3$5$2 _djrealurl=$2$3$5$2");},_inserthorizontalruleImpl:function(_45c){if(dojo.isIE){return this._inserthtmlImpl("<hr>");}return this.document.execCommand("inserthorizontalrule",false,_45c);},_unlinkImpl:function(_45d){if((this.queryCommandEnabled("unlink"))&&(dojo.isMoz||dojo.isWebKit)){var a=this._sCall("getAncestorElement",["a"]);this._sCall("selectElement",[a]);return this.document.execCommand("unlink",false,null);}return this.document.execCommand("unlink",false,_45d);},_hilitecolorImpl:function(_45e){var _45f;if(dojo.isMoz){this.document.execCommand("styleWithCSS",false,true);_45f=this.document.execCommand("hilitecolor",false,_45e);this.document.execCommand("styleWithCSS",false,false);}else{_45f=this.document.execCommand("hilitecolor",false,_45e);}return _45f;},_backcolorImpl:function(_460){if(dojo.isIE){_460=_460?_460:null;}return this.document.execCommand("backcolor",false,_460);},_forecolorImpl:function(_461){if(dojo.isIE){_461=_461?_461:null;}return this.document.execCommand("forecolor",false,_461);},_inserthtmlImpl:function(_462){_462=this._preFilterContent(_462);var rv=true;if(dojo.isIE){var _463=this.document.selection.createRange();if(this.document.selection.type.toUpperCase()=="CONTROL"){var n=_463.item(0);while(_463.length){_463.remove(_463.item(0));}n.outerHTML=_462;}else{_463.pasteHTML(_462);}_463.select();}else{if(dojo.isMoz&&!_462.length){this._sCall("remove");}else{rv=this.document.execCommand("inserthtml",false,_462);}}return rv;},_boldImpl:function(_464){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("bold",false,_464);},_italicImpl:function(_465){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("italic",false,_465);},_underlineImpl:function(_466){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("underline",false,_466);},_strikethroughImpl:function(_467){if(dojo.isIE){this._adaptIESelection();}return this.document.execCommand("strikethrough",false,_467);},getHeaderHeight:function(){return this._getNodeChildrenHeight(this.header);},getFooterHeight:function(){return this._getNodeChildrenHeight(this.footer);},_getNodeChildrenHeight:function(node){var h=0;if(node&&node.childNodes){var i;for(i=0;i<node.childNodes.length;i++){var size=dojo.position(node.childNodes[i]);h+=size.h;}}return h;},_isNodeEmpty:function(node,_468){if(node.nodeType==1){if(node.childNodes.length>0){return this._isNodeEmpty(node.childNodes[0],_468);}return true;}else{if(node.nodeType==3){return (node.nodeValue.substring(_468)=="");}}return false;},_removeStartingRangeFromRange:function(node,_469){if(node.nextSibling){_469.setStart(node.nextSibling,0);}else{var _46a=node.parentNode;while(_46a&&_46a.nextSibling==null){_46a=_46a.parentNode;}if(_46a){_469.setStart(_46a.nextSibling,0);}}return _469;},_adaptIESelection:function(){var _46b=dijit.range.getSelection(this.window);if(_46b&&_46b.rangeCount&&!_46b.isCollapsed){var _46c=_46b.getRangeAt(0);var _46d=_46c.startContainer;var _46e=_46c.startOffset;while(_46d.nodeType==3&&_46e>=_46d.length&&_46d.nextSibling){_46e=_46e-_46d.length;_46d=_46d.nextSibling;}var _46f=null;while(this._isNodeEmpty(_46d,_46e)&&_46d!=_46f){_46f=_46d;_46c=this._removeStartingRangeFromRange(_46d,_46c);_46d=_46c.startContainer;_46e=0;}_46b.removeAllRanges();_46b.addRange(_46c);}}});}if(!dojo._hasResource["dijit.ToolbarSeparator"]){dojo._hasResource["dijit.ToolbarSeparator"]=true;dojo.provide("dijit.ToolbarSeparator");dojo.declare("dijit.ToolbarSeparator",[dijit._Widget,dijit._Templated],{templateString:"<div class=\"dijitToolbarSeparator dijitInline\" role=\"presentation\"></div>",buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.domNode,false);},isFocusable:function(){return false;}});}if(!dojo._hasResource["dijit.Toolbar"]){dojo._hasResource["dijit.Toolbar"]=true;dojo.provide("dijit.Toolbar");dojo.declare("dijit.Toolbar",[dijit._Widget,dijit._Templated,dijit._KeyNavContainer],{templateString:"<div class=\"dijit\" role=\"toolbar\" tabIndex=\"${tabIndex}\" dojoAttachPoint=\"containerNode\">"+"</div>",baseClass:"dijitToolbar",postCreate:function(){this.inherited(arguments);this.connectKeyNavHandlers(this.isLeftToRight()?[dojo.keys.LEFT_ARROW]:[dojo.keys.RIGHT_ARROW],this.isLeftToRight()?[dojo.keys.RIGHT_ARROW]:[dojo.keys.LEFT_ARROW]);},startup:function(){if(this._started){return;}this.startupKeyNavChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit._editor._Plugin"]){dojo._hasResource["dijit._editor._Plugin"]=true;dojo.provide("dijit._editor._Plugin");dojo.declare("dijit._editor._Plugin",null,{constructor:function(args,node){this.params=args||{};dojo.mixin(this,this.params);this._connects=[];this._attrPairNames={};},editor:null,iconClassPrefix:"dijitEditorIcon",button:null,command:"",useDefaultCommand:true,buttonClass:dijit.form.Button,disabled:false,getLabel:function(key){return this.editor.commands[key];},_initButton:function(){if(this.command.length){var _470=this.getLabel(this.command),_471=this.editor,_472=this.iconClassPrefix+" "+this.iconClassPrefix+this.command.charAt(0).toUpperCase()+this.command.substr(1);if(!this.button){var _473=dojo.mixin({label:_470,dir:_471.dir,lang:_471.lang,showLabel:false,iconClass:_472,dropDown:this.dropDown,tabIndex:"-1"},this.params||{});this.button=new this.buttonClass(_473);}}if(this.get("disabled")&&this.button){this.button.set("disabled",this.get("disabled"));}},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);if(this.dropDown){this.dropDown.destroyRecursive();}},connect:function(o,f,tf){this._connects.push(dojo.connect(o,f,this,tf));},updateState:function(){var e=this.editor,c=this.command,_474,_475;if(!e||!e.isLoaded||!c.length){return;}var _476=this.get("disabled");if(this.button){try{_475=!_476&&e.queryCommandEnabled(c);if(this.enabled!==_475){this.enabled=_475;this.button.set("disabled",!_475);}if(typeof this.button.checked=="boolean"){_474=e.queryCommandState(c);if(this.checked!==_474){this.checked=_474;this.button.set("checked",e.queryCommandState(c));}}}catch(e){console.log(e);}}},setEditor:function(_477){this.editor=_477;this._initButton();if(this.button&&this.useDefaultCommand){if(this.editor.queryCommandAvailable(this.command)){this.connect(this.button,"onClick",dojo.hitch(this.editor,"execCommand",this.command,this.commandArg));}else{this.button.domNode.style.display="none";}}this.connect(this.editor,"onNormalizedDisplayChanged","updateState");},setToolbar:function(_478){if(this.button){_478.addChild(this.button);}},set:function(name,_479){if(typeof name==="object"){for(var x in name){this.set(x,name[x]);}return this;}var _47a=this._getAttrNames(name);if(this[_47a.s]){var _47b=this[_47a.s].apply(this,Array.prototype.slice.call(arguments,1));}else{this._set(name,_479);}return _47b||this;},get:function(name){var _47c=this._getAttrNames(name);return this[_47c.g]?this[_47c.g]():this[name];},_setDisabledAttr:function(_47d){this.disabled=_47d;this.updateState();},_getAttrNames:function(name){var apn=this._attrPairNames;if(apn[name]){return apn[name];}var uc=name.charAt(0).toUpperCase()+name.substr(1);return (apn[name]={s:"_set"+uc+"Attr",g:"_get"+uc+"Attr"});},_set:function(name,_47e){var _47f=this[name];this[name]=_47e;}});}if(!dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]){dojo._hasResource["dijit._editor.plugins.EnterKeyHandling"]=true;dojo.provide("dijit._editor.plugins.EnterKeyHandling");dojo.declare("dijit._editor.plugins.EnterKeyHandling",dijit._editor._Plugin,{blockNodeForEnter:"BR",constructor:function(args){if(args){if("blockNodeForEnter" in args){args.blockNodeForEnter=args.blockNodeForEnter.toUpperCase();}dojo.mixin(this,args);}},setEditor:function(_480){if(this.editor===_480){return;}this.editor=_480;if(this.blockNodeForEnter=="BR"){this.editor.customUndo=true;_480.onLoadDeferred.addCallback(dojo.hitch(this,function(d){this.connect(_480.document,"onkeypress",function(e){if(e.charOrCode==dojo.keys.ENTER){var ne=dojo.mixin({},e);ne.shiftKey=true;if(!this.handleEnterKey(ne)){dojo.stopEvent(e);}}});return d;}));}else{if(this.blockNodeForEnter){var h=dojo.hitch(this,this.handleEnterKey);_480.addKeyHandler(13,0,0,h);_480.addKeyHandler(13,0,1,h);this.connect(this.editor,"onKeyPressed","onKeyPressed");}}},onKeyPressed:function(e){if(this._checkListLater){if(dojo.withGlobal(this.editor.window,"isCollapsed",dijit)){var _481=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,["LI"]);if(!_481){dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);var _482=dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]);if(_482){_482.innerHTML=this.bogusHtmlContent;if(dojo.isIE){var r=this.editor.document.selection.createRange();r.move("character",-1);r.select();}}else{console.error("onKeyPressed: Cannot find the new block node");}}else{if(dojo.isMoz){if(_481.parentNode.parentNode.nodeName=="LI"){_481=_481.parentNode.parentNode;}}var fc=_481.firstChild;if(fc&&fc.nodeType==1&&(fc.nodeName=="UL"||fc.nodeName=="OL")){_481.insertBefore(fc.ownerDocument.createTextNode(""),fc);var _483=dijit.range.create(this.editor.window);_483.setStart(_481.firstChild,0);var _484=dijit.range.getSelection(this.editor.window,true);_484.removeAllRanges();_484.addRange(_483);}}}this._checkListLater=false;}if(this._pressedEnterInBlock){if(this._pressedEnterInBlock.previousSibling){this.removeTrailingBr(this._pressedEnterInBlock.previousSibling);}delete this._pressedEnterInBlock;}},bogusHtmlContent:"&nbsp;",blockNodes:/^(?:P|H1|H2|H3|H4|H5|H6|LI)$/,handleEnterKey:function(e){var _485,_486,_487,_488,_489,_48a,doc=this.editor.document,br,rs,txt;if(e.shiftKey){var _48b=dojo.withGlobal(this.editor.window,"getParentElement",dijit._editor.selection);var _48c=dijit.range.getAncestor(_48b,this.blockNodes);if(_48c){if(_48c.tagName=="LI"){return true;}_485=dijit.range.getSelection(this.editor.window);_486=_485.getRangeAt(0);if(!_486.collapsed){_486.deleteContents();_485=dijit.range.getSelection(this.editor.window);_486=_485.getRangeAt(0);}if(dijit.range.atBeginningOfContainer(_48c,_486.startContainer,_486.startOffset)){br=doc.createElement("br");_487=dijit.range.create(this.editor.window);_48c.insertBefore(br,_48c.firstChild);_487.setStartBefore(br.nextSibling);_485.removeAllRanges();_485.addRange(_487);}else{if(dijit.range.atEndOfContainer(_48c,_486.startContainer,_486.startOffset)){_487=dijit.range.create(this.editor.window);br=doc.createElement("br");_48c.appendChild(br);_48c.appendChild(doc.createTextNode(""));_487.setStart(_48c.lastChild,0);_485.removeAllRanges();_485.addRange(_487);}else{rs=_486.startContainer;if(rs&&rs.nodeType==3){txt=rs.nodeValue;dojo.withGlobal(this.editor.window,function(){_488=doc.createTextNode(txt.substring(0,_486.startOffset));_489=doc.createTextNode(txt.substring(_486.startOffset));_48a=doc.createElement("br");if(_489.nodeValue==""&&dojo.isWebKit){_489=doc.createTextNode("");}dojo.place(_488,rs,"after");dojo.place(_48a,_488,"after");dojo.place(_489,_48a,"after");dojo.destroy(rs);_487=dijit.range.create(dojo.gobal);_487.setStart(_489,0);_485.removeAllRanges();_485.addRange(_487);});return false;}return true;}}}else{_485=dijit.range.getSelection(this.editor.window);if(_485.rangeCount){_486=_485.getRangeAt(0);if(_486&&_486.startContainer){if(!_486.collapsed){_486.deleteContents();_485=dijit.range.getSelection(this.editor.window);_486=_485.getRangeAt(0);}rs=_486.startContainer;if(rs&&rs.nodeType==3){dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _48d=false;var _48e=_486.startOffset;if(rs.length<_48e){ret=this._adjustNodeAndOffset(rs,_48e);rs=ret.node;_48e=ret.offset;}txt=rs.nodeValue;_488=doc.createTextNode(txt.substring(0,_48e));_489=doc.createTextNode(txt.substring(_48e));_48a=doc.createElement("br");if(!_489.length){_489=doc.createTextNode("");_48d=true;}if(_488.length){dojo.place(_488,rs,"after");}else{_488=rs;}dojo.place(_48a,_488,"after");dojo.place(_489,_48a,"after");dojo.destroy(rs);_487=dijit.range.create(dojo.gobal);_487.setStart(_489,0);_487.setEnd(_489,_489.length);_485.removeAllRanges();_485.addRange(_487);if(_48d&&!dojo.isWebKit){dijit._editor.selection.remove();}else{dijit._editor.selection.collapse(true);}}));}else{dojo.withGlobal(this.editor.window,dojo.hitch(this,function(){var _48f=doc.createElement("br");rs.appendChild(_48f);var _490=doc.createTextNode("");rs.appendChild(_490);_487=dijit.range.create(dojo.global);_487.setStart(_490,0);_487.setEnd(_490,_490.length);_485.removeAllRanges();_485.addRange(_487);dijit._editor.selection.collapse(true);}));}}}else{dijit._editor.RichText.prototype.execCommand.call(this.editor,"inserthtml","<br>");}}return false;}var _491=true;_485=dijit.range.getSelection(this.editor.window);_486=_485.getRangeAt(0);if(!_486.collapsed){_486.deleteContents();_485=dijit.range.getSelection(this.editor.window);_486=_485.getRangeAt(0);}var _492=dijit.range.getBlockAncestor(_486.endContainer,null,this.editor.editNode);var _493=_492.blockNode;if((this._checkListLater=(_493&&(_493.nodeName=="LI"||_493.parentNode.nodeName=="LI")))){if(dojo.isMoz){this._pressedEnterInBlock=_493;}if(/^(\s|&nbsp;|\xA0|<span\b[^>]*\bclass=['"]Apple-style-span['"][^>]*>(\s|&nbsp;|\xA0)<\/span>)?(<br>)?$/.test(_493.innerHTML)){_493.innerHTML="";if(dojo.isWebKit){_487=dijit.range.create(this.editor.window);_487.setStart(_493,0);_485.removeAllRanges();_485.addRange(_487);}this._checkListLater=false;}return true;}if(!_492.blockNode||_492.blockNode===this.editor.editNode){try{dijit._editor.RichText.prototype.execCommand.call(this.editor,"formatblock",this.blockNodeForEnter);}catch(e2){}_492={blockNode:dojo.withGlobal(this.editor.window,"getAncestorElement",dijit._editor.selection,[this.blockNodeForEnter]),blockContainer:this.editor.editNode};if(_492.blockNode){if(_492.blockNode!=this.editor.editNode&&(!(_492.blockNode.textContent||_492.blockNode.innerHTML).replace(/^\s+|\s+$/g,"").length)){this.removeTrailingBr(_492.blockNode);return false;}}else{_492.blockNode=this.editor.editNode;}_485=dijit.range.getSelection(this.editor.window);_486=_485.getRangeAt(0);}var _494=doc.createElement(this.blockNodeForEnter);_494.innerHTML=this.bogusHtmlContent;this.removeTrailingBr(_492.blockNode);var _495=_486.endOffset;var node=_486.endContainer;if(node.length<_495){var ret=this._adjustNodeAndOffset(node,_495);node=ret.node;_495=ret.offset;}if(dijit.range.atEndOfContainer(_492.blockNode,node,_495)){if(_492.blockNode===_492.blockContainer){_492.blockNode.appendChild(_494);}else{dojo.place(_494,_492.blockNode,"after");}_491=false;_487=dijit.range.create(this.editor.window);_487.setStart(_494,0);_485.removeAllRanges();_485.addRange(_487);if(this.editor.height){dojo.window.scrollIntoView(_494);}}else{if(dijit.range.atBeginningOfContainer(_492.blockNode,_486.startContainer,_486.startOffset)){dojo.place(_494,_492.blockNode,_492.blockNode===_492.blockContainer?"first":"before");if(_494.nextSibling&&this.editor.height){_487=dijit.range.create(this.editor.window);_487.setStart(_494.nextSibling,0);_485.removeAllRanges();_485.addRange(_487);dojo.window.scrollIntoView(_494.nextSibling);}_491=false;}else{if(_492.blockNode===_492.blockContainer){_492.blockNode.appendChild(_494);}else{dojo.place(_494,_492.blockNode,"after");}_491=false;if(_492.blockNode.style){if(_494.style){if(_492.blockNode.style.cssText){_494.style.cssText=_492.blockNode.style.cssText;}}}rs=_486.startContainer;var _496;if(rs&&rs.nodeType==3){var _497,_498;_495=_486.endOffset;if(rs.length<_495){ret=this._adjustNodeAndOffset(rs,_495);rs=ret.node;_495=ret.offset;}txt=rs.nodeValue;_488=doc.createTextNode(txt.substring(0,_495));_489=doc.createTextNode(txt.substring(_495,txt.length));dojo.place(_488,rs,"before");dojo.place(_489,rs,"after");dojo.destroy(rs);var _499=_488.parentNode;while(_499!==_492.blockNode){var tg=_499.tagName;var _49a=doc.createElement(tg);if(_499.style){if(_49a.style){if(_499.style.cssText){_49a.style.cssText=_499.style.cssText;}}}if(_499.tagName==="FONT"){if(_499.color){_49a.color=_499.color;}if(_499.face){_49a.face=_499.face;}if(_499.size){_49a.size=_499.size;}}_497=_489;while(_497){_498=_497.nextSibling;_49a.appendChild(_497);_497=_498;}dojo.place(_49a,_499,"after");_488=_499;_489=_49a;_499=_499.parentNode;}_497=_489;if(_497.nodeType==1||(_497.nodeType==3&&_497.nodeValue)){_494.innerHTML="";}_496=_497;while(_497){_498=_497.nextSibling;_494.appendChild(_497);_497=_498;}}_487=dijit.range.create(this.editor.window);var _49b;var _49c=_496;if(this.blockNodeForEnter!=="BR"){while(_49c){_49b=_49c;_498=_49c.firstChild;_49c=_498;}if(_49b&&_49b.parentNode){_494=_49b.parentNode;_487.setStart(_494,0);_485.removeAllRanges();_485.addRange(_487);if(this.editor.height){dijit.scrollIntoView(_494);}if(dojo.isMoz){this._pressedEnterInBlock=_492.blockNode;}}else{_491=true;}}else{_487.setStart(_494,0);_485.removeAllRanges();_485.addRange(_487);if(this.editor.height){dijit.scrollIntoView(_494);}if(dojo.isMoz){this._pressedEnterInBlock=_492.blockNode;}}}}return _491;},_adjustNodeAndOffset:function(node,_49d){while(node.length<_49d&&node.nextSibling&&node.nextSibling.nodeType==3){_49d=_49d-node.length;node=node.nextSibling;}var ret={"node":node,"offset":_49d};return ret;},removeTrailingBr:function(_49e){var para=/P|DIV|LI/i.test(_49e.tagName)?_49e:dijit._editor.selection.getParentOfType(_49e,["P","DIV","LI"]);if(!para){return;}if(para.lastChild){if((para.childNodes.length>1&&para.lastChild.nodeType==3&&/^[\s\xAD]*$/.test(para.lastChild.nodeValue))||para.lastChild.tagName=="BR"){dojo.destroy(para.lastChild);}}if(!para.childNodes.length){para.innerHTML=this.bogusHtmlContent;}}});}if(!dojo._hasResource["dijit.Editor"]){dojo._hasResource["dijit.Editor"]=true;dojo.provide("dijit.Editor");dojo.declare("dijit.Editor",dijit._editor.RichText,{plugins:null,extraPlugins:null,constructor:function(){if(!dojo.isArray(this.plugins)){this.plugins=["undo","redo","|","cut","copy","paste","|","bold","italic","underline","strikethrough","|","insertOrderedList","insertUnorderedList","indent","outdent","|","justifyLeft","justifyRight","justifyCenter","justifyFull","dijit._editor.plugins.EnterKeyHandling"];}this._plugins=[];this._editInterval=this.editActionInterval*1000;if(dojo.isIE){this.events.push("onBeforeDeactivate");this.events.push("onBeforeActivate");}},postMixInProperties:function(){this.setValueDeferred=new dojo.Deferred();this.inherited(arguments);},postCreate:function(){this._steps=this._steps.slice(0);this._undoedSteps=this._undoedSteps.slice(0);if(dojo.isArray(this.extraPlugins)){this.plugins=this.plugins.concat(this.extraPlugins);}this.inherited(arguments);this.commands=dojo.i18n.getLocalization("dijit._editor","commands",this.lang);if(!this.toolbar){this.toolbar=new dijit.Toolbar({dir:this.dir,lang:this.lang});this.header.appendChild(this.toolbar.domNode);}dojo.forEach(this.plugins,this.addPlugin,this);this.setValueDeferred.callback(true);dojo.addClass(this.iframe.parentNode,"dijitEditorIFrameContainer");dojo.addClass(this.iframe,"dijitEditorIFrame");dojo.attr(this.iframe,"allowTransparency",true);if(dojo.isWebKit){dojo.style(this.domNode,"KhtmlUserSelect","none");}this.toolbar.startup();this.onNormalizedDisplayChanged();},destroy:function(){dojo.forEach(this._plugins,function(p){if(p&&p.destroy){p.destroy();}});this._plugins=[];this.toolbar.destroyRecursive();delete this.toolbar;this.inherited(arguments);},addPlugin:function(_49f,_4a0){var args=dojo.isString(_49f)?{name:_49f}:_49f;if(!args.setEditor){var o={"args":args,"plugin":null,"editor":this};dojo.publish(dijit._scopeName+".Editor.getPlugin",[o]);if(!o.plugin){var pc=dojo.getObject(args.name);if(pc){o.plugin=new pc(args);}}if(!o.plugin){console.warn("Cannot find plugin",_49f);return;}_49f=o.plugin;}if(arguments.length>1){this._plugins[_4a0]=_49f;}else{this._plugins.push(_49f);}_49f.setEditor(this);if(dojo.isFunction(_49f.setToolbar)){_49f.setToolbar(this.toolbar);}},startup:function(){},resize:function(size){if(size){dijit.layout._LayoutWidget.prototype.resize.apply(this,arguments);}},layout:function(){var _4a1=(this._contentBox.h-(this.getHeaderHeight()+this.getFooterHeight()+dojo._getPadBorderExtents(this.iframe.parentNode).h+dojo._getMarginExtents(this.iframe.parentNode).h));this.editingArea.style.height=_4a1+"px";if(this.iframe){this.iframe.style.height="100%";}this._layoutMode=true;},_onIEMouseDown:function(e){var _4a2;var b=this.document.body;var _4a3=b.clientWidth;var _4a4=b.clientHeight;var _4a5=b.clientLeft;var _4a6=b.offsetWidth;var _4a7=b.offsetHeight;var _4a8=b.offsetLeft;bodyDir=b.dir?b.dir.toLowerCase():"";if(bodyDir!="rtl"){if(_4a3<_4a6&&e.x>_4a3&&e.x<_4a6){_4a2=true;}}else{if(e.x<_4a5&&e.x>_4a8){_4a2=true;}}if(!_4a2){if(_4a4<_4a7&&e.y>_4a4&&e.y<_4a7){_4a2=true;}}if(!_4a2){delete this._cursorToStart;delete this._savedSelection;if(e.target.tagName=="BODY"){setTimeout(dojo.hitch(this,"placeCursorAtEnd"),0);}this.inherited(arguments);}},onBeforeActivate:function(e){this._restoreSelection();},onBeforeDeactivate:function(e){if(this.customUndo){this.endEditing(true);}if(e.target.tagName!="BODY"){this._saveSelection();}},customUndo:true,editActionInterval:3,beginEditing:function(cmd){if(!this._inEditing){this._inEditing=true;this._beginEditing(cmd);}if(this.editActionInterval>0){if(this._editTimer){clearTimeout(this._editTimer);}this._editTimer=setTimeout(dojo.hitch(this,this.endEditing),this._editInterval);}},_steps:[],_undoedSteps:[],execCommand:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return this[cmd]();}else{if(this.customUndo){this.endEditing();this._beginEditing();}var r;var _4a9=/copy|cut|paste/.test(cmd);try{r=this.inherited(arguments);if(dojo.isWebKit&&_4a9&&!r){throw {code:1011};}}catch(e){if(e.code==1011&&_4a9){var sub=dojo.string.substitute,_4aa={cut:"X",copy:"C",paste:"V"};alert(sub(this.commands.systemShortcut,[this.commands[cmd],sub(this.commands[dojo.isMac?"appleKey":"ctrlKey"],[_4aa[cmd]])]));}r=false;}if(this.customUndo){this._endEditing();}return r;}},queryCommandEnabled:function(cmd){if(this.customUndo&&(cmd=="undo"||cmd=="redo")){return cmd=="undo"?(this._steps.length>1):(this._undoedSteps.length>0);}else{return this.inherited(arguments);}},_moveToBookmark:function(b){var _4ab=b.mark;var mark=b.mark;var col=b.isCollapsed;var r,_4ac,_4ad,sel;if(mark){if(dojo.isIE<9){if(dojo.isArray(mark)){_4ab=[];dojo.forEach(mark,function(n){_4ab.push(dijit.range.getNode(n,this.editNode));},this);dojo.withGlobal(this.window,"moveToBookmark",dijit,[{mark:_4ab,isCollapsed:col}]);}else{if(mark.startContainer&&mark.endContainer){sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_4ac=dijit.range.getNode(mark.startContainer,this.editNode);_4ad=dijit.range.getNode(mark.endContainer,this.editNode);if(_4ac&&_4ad){r.setStart(_4ac,mark.startOffset);r.setEnd(_4ad,mark.endOffset);sel.addRange(r);}}}}}else{sel=dijit.range.getSelection(this.window);if(sel&&sel.removeAllRanges){sel.removeAllRanges();r=dijit.range.create(this.window);_4ac=dijit.range.getNode(mark.startContainer,this.editNode);_4ad=dijit.range.getNode(mark.endContainer,this.editNode);if(_4ac&&_4ad){r.setStart(_4ac,mark.startOffset);r.setEnd(_4ad,mark.endOffset);sel.addRange(r);}}}}},_changeToStep:function(from,to){this.setValue(to.text);var b=to.bookmark;if(!b){return;}this._moveToBookmark(b);},undo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._steps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(s,this._steps[this._steps.length-1]);this._undoedSteps.push(s);this.onDisplayChanged();delete this._undoRedoActive;ret=true;}delete this._undoRedoActive;}return ret;},redo:function(){var ret=false;if(!this._undoRedoActive){this._undoRedoActive=true;this.endEditing(true);var s=this._undoedSteps.pop();if(s&&this._steps.length>0){this.focus();this._changeToStep(this._steps[this._steps.length-1],s);this._steps.push(s);this.onDisplayChanged();ret=true;}delete this._undoRedoActive;}return ret;},endEditing:function(_4ae){if(this._editTimer){clearTimeout(this._editTimer);}if(this._inEditing){this._endEditing(_4ae);this._inEditing=false;}},_getBookmark:function(){var b=dojo.withGlobal(this.window,dijit.getBookmark);var tmp=[];if(b&&b.mark){var mark=b.mark;if(dojo.isIE<9){var sel=dijit.range.getSelection(this.window);if(!dojo.isArray(mark)){if(sel){var _4af;if(sel.rangeCount){_4af=sel.getRangeAt(0);}if(_4af){b.mark=_4af.cloneRange();}else{b.mark=dojo.withGlobal(this.window,dijit.getBookmark);}}}else{dojo.forEach(b.mark,function(n){tmp.push(dijit.range.getIndex(n,this.editNode).o);},this);b.mark=tmp;}}try{if(b.mark&&b.mark.startContainer){tmp=dijit.range.getIndex(b.mark.startContainer,this.editNode).o;b.mark={startContainer:tmp,startOffset:b.mark.startOffset,endContainer:b.mark.endContainer===b.mark.startContainer?tmp:dijit.range.getIndex(b.mark.endContainer,this.editNode).o,endOffset:b.mark.endOffset};}}catch(e){b.mark=null;}}return b;},_beginEditing:function(cmd){if(this._steps.length===0){this._steps.push({"text":dijit._editor.getChildrenHtml(this.editNode),"bookmark":this._getBookmark()});}},_endEditing:function(_4b0){var v=dijit._editor.getChildrenHtml(this.editNode);this._undoedSteps=[];this._steps.push({text:v,bookmark:this._getBookmark()});},onKeyDown:function(e){if(!dojo.isIE&&!this.iframe&&e.keyCode==dojo.keys.TAB&&!this.tabIndent){this._saveSelection();}if(!this.customUndo){this.inherited(arguments);return;}var k=e.keyCode,ks=dojo.keys;if(e.ctrlKey&&!e.altKey){if(k==90||k==122){dojo.stopEvent(e);this.undo();return;}else{if(k==89||k==121){dojo.stopEvent(e);this.redo();return;}}}this.inherited(arguments);switch(k){case ks.ENTER:case ks.BACKSPACE:case ks.DELETE:this.beginEditing();break;case 88:case 86:if(e.ctrlKey&&!e.altKey&&!e.metaKey){this.endEditing();if(e.keyCode==88){this.beginEditing("cut");setTimeout(dojo.hitch(this,this.endEditing),1);}else{this.beginEditing("paste");setTimeout(dojo.hitch(this,this.endEditing),1);}break;}default:if(!e.ctrlKey&&!e.altKey&&!e.metaKey&&(e.keyCode<dojo.keys.F1||e.keyCode>dojo.keys.F15)){this.beginEditing();break;}case ks.ALT:this.endEditing();break;case ks.UP_ARROW:case ks.DOWN_ARROW:case ks.LEFT_ARROW:case ks.RIGHT_ARROW:case ks.HOME:case ks.END:case ks.PAGE_UP:case ks.PAGE_DOWN:this.endEditing(true);break;case ks.CTRL:case ks.SHIFT:case ks.TAB:break;}},_onBlur:function(){this.inherited(arguments);this.endEditing(true);},_saveSelection:function(){try{this._savedSelection=this._getBookmark();}catch(e){}},_restoreSelection:function(){if(this._savedSelection){delete this._cursorToStart;if(dojo.withGlobal(this.window,"isCollapsed",dijit)){this._moveToBookmark(this._savedSelection);}delete this._savedSelection;}},onClick:function(){this.endEditing(true);this.inherited(arguments);},replaceValue:function(html){if(!this.customUndo){this.inherited(arguments);}else{if(this.isClosed){this.setValue(html);}else{this.beginEditing();if(!html){html="&nbsp;";}this.setValue(html);this.endEditing();}}},_setDisabledAttr:function(_4b1){var _4b2=dojo.hitch(this,function(){if((!this.disabled&&_4b1)||(!this._buttonEnabledPlugins&&_4b1)){dojo.forEach(this._plugins,function(p){p.set("disabled",true);});}else{if(this.disabled&&!_4b1){dojo.forEach(this._plugins,function(p){p.set("disabled",false);});}}});this.setValueDeferred.addCallback(_4b2);this.inherited(arguments);},_setStateClass:function(){try{this.inherited(arguments);if(this.document&&this.document.body){dojo.style(this.document.body,"color",dojo.style(this.iframe,"color"));}}catch(e){}}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var args=o.args,p;var _4b3=dijit._editor._Plugin;var name=args.name;switch(name){case "undo":case "redo":case "cut":case "copy":case "paste":case "insertOrderedList":case "insertUnorderedList":case "indent":case "outdent":case "justifyCenter":case "justifyFull":case "justifyLeft":case "justifyRight":case "delete":case "selectAll":case "removeFormat":case "unlink":case "insertHorizontalRule":p=new _4b3({command:name});break;case "bold":case "italic":case "underline":case "strikethrough":case "subscript":case "superscript":p=new _4b3({buttonClass:dijit.form.ToggleButton,command:name});break;case "|":p=new _4b3({button:new dijit.ToolbarSeparator(),setEditor:function(_4b4){this.editor=_4b4;}});}o.plugin=p;});}if(!dojo._hasResource["dijit._editor.plugins.AlwaysShowToolbar"]){dojo._hasResource["dijit._editor.plugins.AlwaysShowToolbar"]=true;dojo.provide("dijit._editor.plugins.AlwaysShowToolbar");dojo.declare("dijit._editor.plugins.AlwaysShowToolbar",dijit._editor._Plugin,{_handleScroll:true,setEditor:function(e){if(!e.iframe){console.log("Port AlwaysShowToolbar plugin to work with Editor without iframe");return;}this.editor=e;e.onLoadDeferred.addCallback(dojo.hitch(this,this.enable));},enable:function(d){this._updateHeight();this.connect(window,"onscroll","globalOnScrollHandler");this.connect(this.editor,"onNormalizedDisplayChanged","_updateHeight");return d;},_updateHeight:function(){var e=this.editor;if(!e.isLoaded){return;}if(e.height){return;}var _4b5=dojo._getMarginSize(e.editNode).h;if(dojo.isOpera){_4b5=e.editNode.scrollHeight;}if(!_4b5){_4b5=dojo._getMarginSize(e.document.body).h;}if(_4b5==0){console.debug("Can not figure out the height of the editing area!");return;}if(dojo.isIE<=7&&this.editor.minHeight){var min=parseInt(this.editor.minHeight);if(_4b5<min){_4b5=min;}}if(_4b5!=this._lastHeight){this._lastHeight=_4b5;dojo.marginBox(e.iframe,{h:this._lastHeight});}},_lastHeight:0,globalOnScrollHandler:function(){var _4b6=dojo.isIE<7;if(!this._handleScroll){return;}var tdn=this.editor.header;var db=dojo.body;if(!this._scrollSetUp){this._scrollSetUp=true;this._scrollThreshold=dojo.position(tdn,true).y;}var _4b7=dojo._docScroll().y;var s=tdn.style;if(_4b7>this._scrollThreshold&&_4b7<this._scrollThreshold+this._lastHeight){if(!this._fixEnabled){var _4b8=dojo._getMarginSize(tdn);this.editor.iframe.style.marginTop=_4b8.h+"px";if(_4b6){s.left=dojo.position(tdn).x;if(tdn.previousSibling){this._IEOriginalPos=["after",tdn.previousSibling];}else{if(tdn.nextSibling){this._IEOriginalPos=["before",tdn.nextSibling];}else{this._IEOriginalPos=["last",tdn.parentNode];}}dojo.body().appendChild(tdn);dojo.addClass(tdn,"dijitIEFixedToolbar");}else{s.position="fixed";s.top="0px";}dojo.marginBox(tdn,{w:_4b8.w});s.zIndex=2000;this._fixEnabled=true;}var _4b9=(this.height)?parseInt(this.editor.height):this.editor._lastHeight;s.display=(_4b7>this._scrollThreshold+_4b9)?"none":"";}else{if(this._fixEnabled){this.editor.iframe.style.marginTop="";s.position="";s.top="";s.zIndex="";s.display="";if(_4b6){s.left="";dojo.removeClass(tdn,"dijitIEFixedToolbar");if(this._IEOriginalPos){dojo.place(tdn,this._IEOriginalPos[1],this._IEOriginalPos[0]);this._IEOriginalPos=null;}else{dojo.place(tdn,this.editor.iframe,"before");}}s.width="";this._fixEnabled=false;}}},destroy:function(){this._IEOriginalPos=null;this._handleScroll=false;dojo.forEach(this._connects,dojo.disconnect);if(dojo.isIE<7){dojo.removeClass(this.editor.header,"dijitIEFixedToolbar");}}});}if(!dojo._hasResource["dijit.form._FormMixin"]){dojo._hasResource["dijit.form._FormMixin"]=true;dojo.provide("dijit.form._FormMixin");dojo.declare("dijit.form._FormMixin",null,{state:"",reset:function(){dojo.forEach(this.getDescendants(),function(_4ba){if(_4ba.reset){_4ba.reset();}});},validate:function(){var _4bb=false;return dojo.every(dojo.map(this.getDescendants(),function(_4bc){_4bc._hasBeenBlurred=true;var _4bd=_4bc.disabled||!_4bc.validate||_4bc.validate();if(!_4bd&&!_4bb){dojo.window.scrollIntoView(_4bc.containerNode||_4bc.domNode);_4bc.focus();_4bb=true;}return _4bd;}),function(item){return item;});},setValues:function(val){dojo.deprecated(this.declaredClass+"::setValues() is deprecated. Use set('value', val) instead.","","2.0");return this.set("value",val);},_setValueAttr:function(obj){var map={};dojo.forEach(this.getDescendants(),function(_4be){if(!_4be.name){return;}var _4bf=map[_4be.name]||(map[_4be.name]=[]);_4bf.push(_4be);});for(var name in map){if(!map.hasOwnProperty(name)){continue;}var _4c0=map[name],_4c1=dojo.getObject(name,false,obj);if(_4c1===undefined){continue;}if(!dojo.isArray(_4c1)){_4c1=[_4c1];}if(typeof _4c0[0].checked=="boolean"){dojo.forEach(_4c0,function(w,i){w.set("value",dojo.indexOf(_4c1,w.value)!=-1);});}else{if(_4c0[0].multiple){_4c0[0].set("value",_4c1);}else{dojo.forEach(_4c0,function(w,i){w.set("value",_4c1[i]);});}}}},getValues:function(){dojo.deprecated(this.declaredClass+"::getValues() is deprecated. Use get('value') instead.","","2.0");return this.get("value");},_getValueAttr:function(){var obj={};dojo.forEach(this.getDescendants(),function(_4c2){var name=_4c2.name;if(!name||_4c2.disabled){return;}var _4c3=_4c2.get("value");if(typeof _4c2.checked=="boolean"){if(/Radio/.test(_4c2.declaredClass)){if(_4c3!==false){dojo.setObject(name,_4c3,obj);}else{_4c3=dojo.getObject(name,false,obj);if(_4c3===undefined){dojo.setObject(name,null,obj);}}}else{var ary=dojo.getObject(name,false,obj);if(!ary){ary=[];dojo.setObject(name,ary,obj);}if(_4c3!==false){ary.push(_4c3);}}}else{var prev=dojo.getObject(name,false,obj);if(typeof prev!="undefined"){if(dojo.isArray(prev)){prev.push(_4c3);}else{dojo.setObject(name,[prev,_4c3],obj);}}else{dojo.setObject(name,_4c3,obj);}}});return obj;},isValid:function(){return this.state=="";},onValidStateChange:function(_4c4){},_getState:function(){var _4c5=dojo.map(this._descendants,function(w){return w.get("state")||"";});return dojo.indexOf(_4c5,"Error")>=0?"Error":dojo.indexOf(_4c5,"Incomplete")>=0?"Incomplete":"";},disconnectChildren:function(){dojo.forEach(this._childConnections||[],dojo.hitch(this,"disconnect"));dojo.forEach(this._childWatches||[],function(w){w.unwatch();});},connectChildren:function(_4c6){var _4c7=this;this.disconnectChildren();this._descendants=this.getDescendants();var set=_4c6?function(name,val){_4c7[name]=val;}:dojo.hitch(this,"_set");set("value",this.get("value"));set("state",this._getState());var _4c8=(this._childConnections=[]),_4c9=(this._childWatches=[]);dojo.forEach(dojo.filter(this._descendants,function(item){return item.validate;}),function(_4ca){dojo.forEach(["state","disabled"],function(attr){_4c9.push(_4ca.watch(attr,function(attr,_4cb,_4cc){_4c7.set("state",_4c7._getState());}));});});var _4cd=function(){if(_4c7._onChangeDelayTimer){clearTimeout(_4c7._onChangeDelayTimer);}_4c7._onChangeDelayTimer=setTimeout(function(){delete _4c7._onChangeDelayTimer;_4c7._set("value",_4c7.get("value"));},10);};dojo.forEach(dojo.filter(this._descendants,function(item){return item.onChange;}),function(_4ce){_4c8.push(_4c7.connect(_4ce,"onChange",_4cd));_4c9.push(_4ce.watch("disabled",_4cd));});},startup:function(){this.inherited(arguments);this.connectChildren(true);this.watch("state",function(attr,_4cf,_4d0){this.onValidStateChange(_4d0=="");});},destroy:function(){this.disconnectChildren();this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.Form"]){dojo._hasResource["dijit.form.Form"]=true;dojo.provide("dijit.form.Form");dojo.declare("dijit.form.Form",[dijit._Widget,dijit._Templated,dijit.form._FormMixin,dijit.layout._ContentPaneResizeMixin],{name:"",action:"",method:"",encType:"","accept-charset":"",accept:"",target:"",templateString:"<form dojoAttachPoint='containerNode' dojoAttachEvent='onreset:_onReset,onsubmit:_onSubmit' ${!nameAttrSetting}></form>",attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{action:"",method:"",encType:"","accept-charset":"",accept:"",target:""}),postMixInProperties:function(){this.nameAttrSetting=this.name?("name='"+this.name+"'"):"";this.inherited(arguments);},execute:function(_4d1){},onExecute:function(){},_setEncTypeAttr:function(_4d2){this.encType=_4d2;dojo.attr(this.domNode,"encType",_4d2);if(dojo.isIE){this.domNode.encoding=_4d2;}},postCreate:function(){if(dojo.isIE&&this.srcNodeRef&&this.srcNodeRef.attributes){var item=this.srcNodeRef.attributes.getNamedItem("encType");if(item&&!item.specified&&(typeof item.value=="string")){this.set("encType",item.value);}}this.inherited(arguments);},reset:function(e){var faux={returnValue:true,preventDefault:function(){this.returnValue=false;},stopPropagation:function(){},currentTarget:e?e.target:this.domNode,target:e?e.target:this.domNode};if(!(this.onReset(faux)===false)&&faux.returnValue){this.inherited(arguments,[]);}},onReset:function(e){return true;},_onReset:function(e){this.reset(e);dojo.stopEvent(e);return false;},_onSubmit:function(e){var fp=dijit.form.Form.prototype;if(this.execute!=fp.execute||this.onExecute!=fp.onExecute){dojo.deprecated("dijit.form.Form:execute()/onExecute() are deprecated. Use onSubmit() instead.","","2.0");this.onExecute();this.execute(this.getValues());}if(this.onSubmit(e)===false){dojo.stopEvent(e);}},onSubmit:function(e){return this.isValid();},submit:function(){if(!(this.onSubmit()===false)){this.containerNode.submit();}}});}if(!dojo._hasResource["dijit.form.TextBox"]){dojo._hasResource["dijit.form.TextBox"]=true;dojo.provide("dijit.form.TextBox");dojo.declare("dijit.form.TextBox",dijit.form._FormValueWidget,{trim:false,uppercase:false,lowercase:false,propercase:false,maxLength:"",selectOnClick:false,placeHolder:"",templateString:dojo.cache("dijit.form","templates/TextBox.html","<div class=\"dijit dijitReset dijitInline dijitLeft\" id=\"widget_${id}\" role=\"presentation\"\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),_singleNodeTemplate:"<input class=\"dijit dijitReset dijitLeft dijitInputField\" dojoAttachPoint=\"textbox,focusNode\" autocomplete=\"off\" type=\"${type}\" ${!nameAttrSetting} />",_buttonInputDisabled:dojo.isIE?"disabled":"",baseClass:"dijitTextBox",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{maxLength:"focusNode"}),postMixInProperties:function(){var type=this.type.toLowerCase();if(this.templateString&&this.templateString.toLowerCase()=="input"||((type=="hidden"||type=="file")&&this.templateString==dijit.form.TextBox.prototype.templateString)){this.templateString=this._singleNodeTemplate;}this.inherited(arguments);},_setPlaceHolderAttr:function(v){this._set("placeHolder",v);if(!this._phspan){this._attachPoints.push("_phspan");this._phspan=dojo.create("span",{className:"dijitPlaceHolder dijitInputField"},this.textbox,"after");}this._phspan.innerHTML="";this._phspan.appendChild(document.createTextNode(v));this._updatePlaceHolder();},_updatePlaceHolder:function(){if(this._phspan){this._phspan.style.display=(this.placeHolder&&!this._focused&&!this.textbox.value)?"":"none";}},_getValueAttr:function(){return this.parse(this.get("displayedValue"),this.constraints);},_setValueAttr:function(_4d3,_4d4,_4d5){var _4d6;if(_4d3!==undefined){_4d6=this.filter(_4d3);if(typeof _4d5!="string"){if(_4d6!==null&&((typeof _4d6!="number")||!isNaN(_4d6))){_4d5=this.filter(this.format(_4d6,this.constraints));}else{_4d5="";}}}if(_4d5!=null&&_4d5!=undefined&&((typeof _4d5)!="number"||!isNaN(_4d5))&&this.textbox.value!=_4d5){this.textbox.value=_4d5;this._set("displayedValue",this.get("displayedValue"));}this._updatePlaceHolder();this.inherited(arguments,[_4d6,_4d4]);},displayedValue:"",getDisplayedValue:function(){dojo.deprecated(this.declaredClass+"::getDisplayedValue() is deprecated. Use set('displayedValue') instead.","","2.0");return this.get("displayedValue");},_getDisplayedValueAttr:function(){return this.filter(this.textbox.value);},setDisplayedValue:function(_4d7){dojo.deprecated(this.declaredClass+"::setDisplayedValue() is deprecated. Use set('displayedValue', ...) instead.","","2.0");this.set("displayedValue",_4d7);},_setDisplayedValueAttr:function(_4d8){if(_4d8===null||_4d8===undefined){_4d8="";}else{if(typeof _4d8!="string"){_4d8=String(_4d8);}}this.textbox.value=_4d8;this._setValueAttr(this.get("value"),undefined);this._set("displayedValue",this.get("displayedValue"));},format:function(_4d9,_4da){return ((_4d9==null||_4d9==undefined)?"":(_4d9.toString?_4d9.toString():_4d9));},parse:function(_4db,_4dc){return _4db;},_refreshState:function(){},_onInput:function(e){if(e&&e.type&&/key/i.test(e.type)&&e.keyCode){switch(e.keyCode){case dojo.keys.SHIFT:case dojo.keys.ALT:case dojo.keys.CTRL:case dojo.keys.TAB:return;}}if(this.intermediateChanges){var _4dd=this;setTimeout(function(){_4dd._handleOnChange(_4dd.get("value"),false);},0);}this._refreshState();this._set("displayedValue",this.get("displayedValue"));},postCreate:function(){if(dojo.isIE){setTimeout(dojo.hitch(this,function(){var s=dojo.getComputedStyle(this.domNode);if(s){var ff=s.fontFamily;if(ff){var _4de=this.domNode.getElementsByTagName("INPUT");if(_4de){for(var i=0;i<_4de.length;i++){_4de[i].style.fontFamily=ff;}}}}}),0);}this.textbox.setAttribute("value",this.textbox.value);this.inherited(arguments);if(dojo.isMoz||dojo.isOpera){this.connect(this.textbox,"oninput","_onInput");}else{this.connect(this.textbox,"onkeydown","_onInput");this.connect(this.textbox,"onkeyup","_onInput");this.connect(this.textbox,"onpaste","_onInput");this.connect(this.textbox,"oncut","_onInput");}},_blankValue:"",filter:function(val){if(val===null){return this._blankValue;}if(typeof val!="string"){return val;}if(this.trim){val=dojo.trim(val);}if(this.uppercase){val=val.toUpperCase();}if(this.lowercase){val=val.toLowerCase();}if(this.propercase){val=val.replace(/[^\s]+/g,function(word){return word.substring(0,1).toUpperCase()+word.substring(1);});}return val;},_setBlurValue:function(){this._setValueAttr(this.get("value"),true);},_onBlur:function(e){if(this.disabled){return;}this._setBlurValue();this.inherited(arguments);if(this._selectOnClickHandle){this.disconnect(this._selectOnClickHandle);}if(this.selectOnClick&&dojo.isMoz){this.textbox.selectionStart=this.textbox.selectionEnd=undefined;}this._updatePlaceHolder();},_onFocus:function(by){if(this.disabled||this.readOnly){return;}if(this.selectOnClick&&by=="mouse"){this._selectOnClickHandle=this.connect(this.domNode,"onmouseup",function(){this.disconnect(this._selectOnClickHandle);var _4df;if(dojo.isIE){var _4e0=dojo.doc.selection.createRange();var _4e1=_4e0.parentElement();_4df=_4e1==this.textbox&&_4e0.text.length==0;}else{_4df=this.textbox.selectionStart==this.textbox.selectionEnd;}if(_4df){dijit.selectInputText(this.textbox);}});}this._updatePlaceHolder();this.inherited(arguments);this._refreshState();},reset:function(){this.textbox.value="";this.inherited(arguments);}});dijit.selectInputText=function(_4e2,_4e3,stop){var _4e4=dojo.global;var _4e5=dojo.doc;_4e2=dojo.byId(_4e2);if(isNaN(_4e3)){_4e3=0;}if(isNaN(stop)){stop=_4e2.value?_4e2.value.length:0;}dijit.focus(_4e2);if(_4e5["selection"]&&dojo.body()["createTextRange"]){if(_4e2.createTextRange){var r=_4e2.createTextRange();r.collapse(true);r.moveStart("character",-99999);r.moveStart("character",_4e3);r.moveEnd("character",stop-_4e3);r.select();}}else{if(_4e4["getSelection"]){if(_4e2.setSelectionRange){_4e2.setSelectionRange(_4e3,stop);}}}};}if(!dojo._hasResource["dijit.Tooltip"]){dojo._hasResource["dijit.Tooltip"]=true;dojo.provide("dijit.Tooltip");dojo.declare("dijit._MasterTooltip",[dijit._Widget,dijit._Templated],{duration:dijit.defaultDuration,templateString:dojo.cache("dijit","templates/Tooltip.html","<div class=\"dijitTooltip dijitTooltipLeft\" id=\"dojoTooltip\"\n\t><div class=\"dijitTooltipContainer dijitTooltipContents\" dojoAttachPoint=\"containerNode\" role='alert'></div\n\t><div class=\"dijitTooltipConnector\" dojoAttachPoint=\"connectorNode\"></div\n></div>\n"),postCreate:function(){dojo.body().appendChild(this.domNode);this.bgIframe=new dijit.BackgroundIframe(this.domNode);this.fadeIn=dojo.fadeIn({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onShow")});this.fadeOut=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,"_onHide")});},show:function(_4e6,_4e7,_4e8,rtl){if(this.aroundNode&&this.aroundNode===_4e7){return;}this.domNode.width="auto";if(this.fadeOut.status()=="playing"){this._onDeck=arguments;return;}this.containerNode.innerHTML=_4e6;var pos=dijit.placeOnScreenAroundElement(this.domNode,_4e7,dijit.getPopupAroundAlignment((_4e8&&_4e8.length)?_4e8:dijit.Tooltip.defaultPosition,!rtl),dojo.hitch(this,"orient"));dojo.style(this.domNode,"opacity",0);this.fadeIn.play();this.isShowingNow=true;this.aroundNode=_4e7;},orient:function(node,_4e9,_4ea,_4eb,_4ec){this.connectorNode.style.top="";var _4ed=_4eb.w-this.connectorNode.offsetWidth;node.className="dijitTooltip "+{"BL-TL":"dijitTooltipBelow dijitTooltipABLeft","TL-BL":"dijitTooltipAbove dijitTooltipABLeft","BR-TR":"dijitTooltipBelow dijitTooltipABRight","TR-BR":"dijitTooltipAbove dijitTooltipABRight","BR-BL":"dijitTooltipRight","BL-BR":"dijitTooltipLeft"}[_4e9+"-"+_4ea];this.domNode.style.width="auto";var size=dojo.contentBox(this.domNode);var _4ee=Math.min((Math.max(_4ed,1)),size.w);var _4ef=_4ee<size.w;this.domNode.style.width=_4ee+"px";if(_4ef){this.containerNode.style.overflow="auto";var _4f0=this.containerNode.scrollWidth;this.containerNode.style.overflow="visible";if(_4f0>_4ee){_4f0=_4f0+dojo.style(this.domNode,"paddingLeft")+dojo.style(this.domNode,"paddingRight");this.domNode.style.width=_4f0+"px";}}if(_4ea.charAt(0)=="B"&&_4e9.charAt(0)=="B"){var mb=dojo.marginBox(node);var _4f1=this.connectorNode.offsetHeight;if(mb.h>_4eb.h){var _4f2=_4eb.h-(_4ec.h/2)-(_4f1/2);this.connectorNode.style.top=_4f2+"px";this.connectorNode.style.bottom="";}else{this.connectorNode.style.bottom=Math.min(Math.max(_4ec.h/2-_4f1/2,0),mb.h-_4f1)+"px";this.connectorNode.style.top="";}}else{this.connectorNode.style.top="";this.connectorNode.style.bottom="";}return Math.max(0,size.w-_4ed);},_onShow:function(){if(dojo.isIE){this.domNode.style.filter="";}},hide:function(_4f3){if(this._onDeck&&this._onDeck[1]==_4f3){this._onDeck=null;}else{if(this.aroundNode===_4f3){this.fadeIn.stop();this.isShowingNow=false;this.aroundNode=null;this.fadeOut.play();}else{}}},_onHide:function(){this.domNode.style.cssText="";this.containerNode.innerHTML="";if(this._onDeck){this.show.apply(this,this._onDeck);this._onDeck=null;}}});dijit.showTooltip=function(_4f4,_4f5,_4f6,rtl){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.show(_4f4,_4f5,_4f6,rtl);};dijit.hideTooltip=function(_4f7){if(!dijit._masterTT){dijit._masterTT=new dijit._MasterTooltip();}return dijit._masterTT.hide(_4f7);};dojo.declare("dijit.Tooltip",dijit._Widget,{label:"",showDelay:400,connectId:[],position:[],_setConnectIdAttr:function(_4f8){dojo.forEach(this._connections||[],function(_4f9){dojo.forEach(_4f9,dojo.hitch(this,"disconnect"));},this);var ary=dojo.isArrayLike(_4f8)?_4f8:(_4f8?[_4f8]:[]);this._connections=dojo.map(ary,function(id){var node=dojo.byId(id);return node?[this.connect(node,"onmouseenter","_onTargetMouseEnter"),this.connect(node,"onmouseleave","_onTargetMouseLeave"),this.connect(node,"onfocus","_onTargetFocus"),this.connect(node,"onblur","_onTargetBlur")]:[];},this);this._set("connectId",_4f8);this._connectIds=ary;},addTarget:function(node){var id=node.id||node;if(dojo.indexOf(this._connectIds,id)==-1){this.set("connectId",this._connectIds.concat(id));}},removeTarget:function(node){var id=node.id||node,idx=dojo.indexOf(this._connectIds,id);if(idx>=0){this._connectIds.splice(idx,1);this.set("connectId",this._connectIds);}},buildRendering:function(){this.inherited(arguments);dojo.addClass(this.domNode,"dijitTooltipData");},startup:function(){this.inherited(arguments);var ids=this.connectId;dojo.forEach(dojo.isArrayLike(ids)?ids:[ids],this.addTarget,this);},_onTargetMouseEnter:function(e){this._onHover(e);},_onTargetMouseLeave:function(e){this._onUnHover(e);},_onTargetFocus:function(e){this._focus=true;this._onHover(e);},_onTargetBlur:function(e){this._focus=false;this._onUnHover(e);},_onHover:function(e){if(!this._showTimer){var _4fa=e.target;this._showTimer=setTimeout(dojo.hitch(this,function(){this.open(_4fa);}),this.showDelay);}},_onUnHover:function(e){if(this._focus){return;}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}this.close();},open:function(_4fb){if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}dijit.showTooltip(this.label||this.domNode.innerHTML,_4fb,this.position,!this.isLeftToRight());this._connectNode=_4fb;this.onShow(_4fb,this.position);},close:function(){if(this._connectNode){dijit.hideTooltip(this._connectNode);delete this._connectNode;this.onHide();}if(this._showTimer){clearTimeout(this._showTimer);delete this._showTimer;}},onShow:function(_4fc,_4fd){},onHide:function(){},uninitialize:function(){this.close();this.inherited(arguments);}});dijit.Tooltip.defaultPosition=["after","before"];}if(!dojo._hasResource["dijit.form.ValidationTextBox"]){dojo._hasResource["dijit.form.ValidationTextBox"]=true;dojo.provide("dijit.form.ValidationTextBox");dojo.declare("dijit.form.ValidationTextBox",dijit.form.TextBox,{templateString:dojo.cache("dijit.form","templates/ValidationTextBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\" role=\"presentation\"\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class=\"dijitReset dijitInputInner\" dojoAttachPoint='textbox,focusNode' autocomplete=\"off\"\n\t\t\t${!nameAttrSetting} type='${type}'\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitValidationTextBox",required:false,promptMessage:"",invalidMessage:"$_unset_$",missingMessage:"$_unset_$",message:"",constraints:{},regExp:".*",regExpGen:function(_4fe){return this.regExp;},state:"",tooltipPosition:[],_setValueAttr:function(){this.inherited(arguments);this.validate(this._focused);},validator:function(_4ff,_500){return (new RegExp("^(?:"+this.regExpGen(_500)+")"+(this.required?"":"?")+"$")).test(_4ff)&&(!this.required||!this._isEmpty(_4ff))&&(this._isEmpty(_4ff)||this.parse(_4ff,_500)!==undefined);},_isValidSubset:function(){return this.textbox.value.search(this._partialre)==0;},isValid:function(_501){return this.validator(this.textbox.value,this.constraints);},_isEmpty:function(_502){return (this.trim?/^\s*$/:/^$/).test(_502);},getErrorMessage:function(_503){return (this.required&&this._isEmpty(this.textbox.value))?this.missingMessage:this.invalidMessage;},getPromptMessage:function(_504){return this.promptMessage;},_maskValidSubsetError:true,validate:function(_505){var _506="";var _507=this.disabled||this.isValid(_505);if(_507){this._maskValidSubsetError=true;}var _508=this._isEmpty(this.textbox.value);var _509=!_507&&_505&&this._isValidSubset();this._set("state",_507?"":(((((!this._hasBeenBlurred||_505)&&_508)||_509)&&this._maskValidSubsetError)?"Incomplete":"Error"));dijit.setWaiState(this.focusNode,"invalid",_507?"false":"true");if(this.state=="Error"){this._maskValidSubsetError=_505&&_509;_506=this.getErrorMessage(_505);}else{if(this.state=="Incomplete"){_506=this.getPromptMessage(_505);this._maskValidSubsetError=!this._hasBeenBlurred||_505;}else{if(_508){_506=this.getPromptMessage(_505);}}}this.set("message",_506);return _507;},displayMessage:function(_50a){dijit.hideTooltip(this.domNode);if(_50a&&this._focused){dijit.showTooltip(_50a,this.domNode,this.tooltipPosition,!this.isLeftToRight());}},_refreshState:function(){this.validate(this._focused);this.inherited(arguments);},constructor:function(){this.constraints={};},_setConstraintsAttr:function(_50b){if(!_50b.locale&&this.lang){_50b.locale=this.lang;}this._set("constraints",_50b);this._computePartialRE();},_computePartialRE:function(){var p=this.regExpGen(this.constraints);this.regExp=p;var _50c="";if(p!=".*"){this.regExp.replace(/\\.|\[\]|\[.*?[^\\]{1}\]|\{.*?\}|\(\?[=:!]|./g,function(re){switch(re.charAt(0)){case "{":case "+":case "?":case "*":case "^":case "$":case "|":case "(":_50c+=re;break;case ")":_50c+="|$)";break;default:_50c+="(?:"+re+"|$)";break;}});}try{"".search(_50c);}catch(e){_50c=this.regExp;console.warn("RegExp error in "+this.declaredClass+": "+this.regExp);}this._partialre="^(?:"+_50c+")$";},postMixInProperties:function(){this.inherited(arguments);this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);if(this.invalidMessage=="$_unset_$"){this.invalidMessage=this.messages.invalidMessage;}if(!this.invalidMessage){this.invalidMessage=this.promptMessage;}if(this.missingMessage=="$_unset_$"){this.missingMessage=this.messages.missingMessage;}if(!this.missingMessage){this.missingMessage=this.invalidMessage;}this._setConstraintsAttr(this.constraints);},_setDisabledAttr:function(_50d){this.inherited(arguments);this._refreshState();},_setRequiredAttr:function(_50e){this._set("required",_50e);dijit.setWaiState(this.focusNode,"required",_50e);this._refreshState();},_setMessageAttr:function(_50f){this._set("message",_50f);this.displayMessage(_50f);},reset:function(){this._maskValidSubsetError=true;this.inherited(arguments);},_onBlur:function(){this.displayMessage("");this.inherited(arguments);}});dojo.declare("dijit.form.MappedTextBox",dijit.form.ValidationTextBox,{postMixInProperties:function(){this.inherited(arguments);this.nameAttrSetting="";},serialize:function(val,_510){return val.toString?val.toString():"";},toString:function(){var val=this.filter(this.get("value"));return val!=null?(typeof val=="string"?val:this.serialize(val,this.constraints)):"";},validate:function(){this.valueNode.value=this.toString();return this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);this.valueNode=dojo.place("<input type='hidden'"+(this.name?" name='"+this.name.replace(/'/g,"&quot;")+"'":"")+"/>",this.textbox,"after");},reset:function(){this.valueNode.value="";this.inherited(arguments);}});dojo.declare("dijit.form.RangeBoundTextBox",dijit.form.MappedTextBox,{rangeMessage:"",rangeCheck:function(_511,_512){return ("min" in _512?(this.compare(_511,_512.min)>=0):true)&&("max" in _512?(this.compare(_511,_512.max)<=0):true);},isInRange:function(_513){return this.rangeCheck(this.get("value"),this.constraints);},_isDefinitelyOutOfRange:function(){var val=this.get("value");var _514=false;var _515=false;if("min" in this.constraints){var min=this.constraints.min;min=this.compare(val,((typeof min=="number")&&min>=0&&val!=0)?0:min);_514=(typeof min=="number")&&min<0;}if("max" in this.constraints){var max=this.constraints.max;max=this.compare(val,((typeof max!="number")||max>0)?max:0);_515=(typeof max=="number")&&max>0;}return _514||_515;},_isValidSubset:function(){return this.inherited(arguments)&&!this._isDefinitelyOutOfRange();},isValid:function(_516){return this.inherited(arguments)&&((this._isEmpty(this.textbox.value)&&!this.required)||this.isInRange(_516));},getErrorMessage:function(_517){var v=this.get("value");if(v!==null&&v!==""&&v!==undefined&&(typeof v!="number"||!isNaN(v))&&!this.isInRange(_517)){return this.rangeMessage;}return this.inherited(arguments);},postMixInProperties:function(){this.inherited(arguments);if(!this.rangeMessage){this.messages=dojo.i18n.getLocalization("dijit.form","validate",this.lang);this.rangeMessage=this.messages.rangeMessage;}},_setConstraintsAttr:function(_518){this.inherited(arguments);if(this.focusNode){if(this.constraints.min!==undefined){dijit.setWaiState(this.focusNode,"valuemin",this.constraints.min);}else{dijit.removeWaiState(this.focusNode,"valuemin");}if(this.constraints.max!==undefined){dijit.setWaiState(this.focusNode,"valuemax",this.constraints.max);}else{dijit.removeWaiState(this.focusNode,"valuemax");}}},_setValueAttr:function(_519,_51a){dijit.setWaiState(this.focusNode,"valuenow",_519);this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form._DateTimeTextBox"]){dojo._hasResource["dijit.form._DateTimeTextBox"]=true;dojo.provide("dijit.form._DateTimeTextBox");new Date("X");dojo.declare("dijit.form._DateTimeTextBox",[dijit.form.RangeBoundTextBox,dijit._HasDropDown],{templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),hasDownArrow:true,openOnClick:true,regExpGen:dojo.date.locale.regexp,datePackage:"dojo.date",compare:function(val1,val2){var _51b=this._isInvalidDate(val1);var _51c=this._isInvalidDate(val2);return _51b?(_51c?0:-1):(_51c?1:dojo.date.compare(val1,val2,this._selector));},forceWidth:true,format:function(_51d,_51e){if(!_51d){return "";}return this.dateLocaleModule.format(_51d,_51e);},"parse":function(_51f,_520){return this.dateLocaleModule.parse(_51f,_520)||(this._isEmpty(_51f)?null:undefined);},serialize:function(val,_521){if(val.toGregorian){val=val.toGregorian();}return dojo.date.stamp.toISOString(val,_521);},dropDownDefaultValue:new Date(),value:new Date(""),_blankValue:null,popupClass:"",_selector:"",constructor:function(args){var _522=args.datePackage?args.datePackage+".Date":"Date";this.dateClassObj=dojo.getObject(_522,false);this.value=new this.dateClassObj("");this.datePackage=args.datePackage||this.datePackage;this.dateLocaleModule=dojo.getObject(this.datePackage+".locale",false);this.regExpGen=this.dateLocaleModule.regexp;this._invalidDate=dijit.form._DateTimeTextBox.prototype.value.toString();},buildRendering:function(){this.inherited(arguments);if(!this.hasDownArrow){this._buttonNode.style.display="none";}if(this.openOnClick||!this.hasDownArrow){this._buttonNode=this.domNode;this.baseClass+=" dijitComboBoxOpenOnClick";}},_setConstraintsAttr:function(_523){_523.selector=this._selector;_523.fullYear=true;var _524=dojo.date.stamp.fromISOString;if(typeof _523.min=="string"){_523.min=_524(_523.min);}if(typeof _523.max=="string"){_523.max=_524(_523.max);}this.inherited(arguments);},_isInvalidDate:function(_525){return !_525||isNaN(_525)||typeof _525!="object"||_525.toString()==this._invalidDate;},_setValueAttr:function(_526,_527,_528){if(_526!==undefined){if(typeof _526=="string"){_526=dojo.date.stamp.fromISOString(_526);}if(this._isInvalidDate(_526)){_526=null;}if(_526 instanceof Date&&!(this.dateClassObj instanceof Date)){_526=new this.dateClassObj(_526);}}this.inherited(arguments);if(this.dropDown){this.dropDown.set("value",_526,false);}},_set:function(attr,_529){if(attr=="value"&&this.value instanceof Date&&this.compare(_529,this.value)==0){return;}this.inherited(arguments);},_setDropDownDefaultValueAttr:function(val){if(this._isInvalidDate(val)){val=new this.dateClassObj();}this.dropDownDefaultValue=val;},openDropDown:function(_52a){if(this.dropDown){this.dropDown.destroy();}var _52b=dojo.getObject(this.popupClass,false),_52c=this,_52d=this.get("value");this.dropDown=new _52b({onChange:function(_52e){dijit.form._DateTimeTextBox.superclass._setValueAttr.call(_52c,_52e,true);},id:this.id+"_popup",dir:_52c.dir,lang:_52c.lang,value:_52d,currentFocus:!this._isInvalidDate(_52d)?_52d:this.dropDownDefaultValue,constraints:_52c.constraints,filterString:_52c.filterString,datePackage:_52c.datePackage,isDisabledDate:function(date){return !_52c.rangeCheck(date,_52c.constraints);}});this.inherited(arguments);},_getDisplayedValueAttr:function(){return this.textbox.value;},_setDisplayedValueAttr:function(_52f,_530){this._setValueAttr(this.parse(_52f,this.constraints),_530,_52f);}});}if(!dojo._hasResource["dijit.form.DateTextBox"]){dojo._hasResource["dijit.form.DateTextBox"]=true;dojo.provide("dijit.form.DateTextBox");dojo.declare("dijit.form.DateTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitDateTextBox",popupClass:"dijit.Calendar",_selector:"date",value:new Date("")});}if(!dojo._hasResource["dijit._TimePicker"]){dojo._hasResource["dijit._TimePicker"]=true;dojo.provide("dijit._TimePicker");dojo.declare("dijit._TimePicker",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("dijit","templates/TimePicker.html","<div id=\"widget_${id}\" class=\"dijitMenu\"\n    ><div dojoAttachPoint=\"upArrow\" class=\"dijitButtonNode dijitUpArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9650;</div></div\n    ><div dojoAttachPoint=\"timeMenu,focusNode\" dojoAttachEvent=\"onclick:_onOptionSelected,onmouseover,onmouseout\"></div\n    ><div dojoAttachPoint=\"downArrow\" class=\"dijitButtonNode dijitDownArrowButton\" dojoAttachEvent=\"onmouseenter:_buttonMouse,onmouseleave:_buttonMouse\"\n\t\t><div class=\"dijitReset dijitInline dijitArrowButtonInner\" role=\"presentation\">&nbsp;</div\n\t\t><div class=\"dijitArrowButtonChar\">&#9660;</div></div\n></div>\n"),baseClass:"dijitTimePicker",clickableIncrement:"T00:15:00",visibleIncrement:"T01:00:00",visibleRange:"T05:00:00",value:new Date(),_visibleIncrement:2,_clickableIncrement:1,_totalIncrements:10,constraints:{},serialize:dojo.date.stamp.toISOString,setValue:function(_531){dojo.deprecated("dijit._TimePicker:setValue() is deprecated.  Use set('value', ...) instead.","","2.0");this.set("value",_531);},_setValueAttr:function(date){this._set("value",date);this._showText();},_setFilterStringAttr:function(val){this._set("filterString",val);this._showText();},isDisabledDate:function(_532,_533){return false;},_getFilteredNodes:function(_534,_535,_536,_537){var _538=[],_539=_537?_537.date:this._refDate,n,i=_534,max=this._maxIncrement+Math.abs(i),chk=_536?-1:1,dec=_536?1:0,inc=1-dec;do{i=i-dec;n=this._createOption(i);if(n){if((_536&&n.date>_539)||(!_536&&n.date<_539)){break;}_538[_536?"unshift":"push"](n);_539=n.date;}i=i+inc;}while(_538.length<_535&&(i*chk)<max);return _538;},_showText:function(){var _53a=dojo.date.stamp.fromISOString;this.timeMenu.innerHTML="";this._clickableIncrementDate=_53a(this.clickableIncrement);this._visibleIncrementDate=_53a(this.visibleIncrement);this._visibleRangeDate=_53a(this.visibleRange);var _53b=function(date){return date.getHours()*60*60+date.getMinutes()*60+date.getSeconds();},_53c=_53b(this._clickableIncrementDate),_53d=_53b(this._visibleIncrementDate),_53e=_53b(this._visibleRangeDate),time=(this.value||this.currentFocus).getTime();this._refDate=new Date(time-time%(_53d*1000));this._refDate.setFullYear(1970,0,1);this._clickableIncrement=1;this._totalIncrements=_53e/_53c;this._visibleIncrement=_53d/_53c;this._maxIncrement=(60*60*24)/_53c;var _53f=this._getFilteredNodes(0,Math.min(this._totalIncrements>>1,10)-1),_540=this._getFilteredNodes(0,Math.min(this._totalIncrements,10)-_53f.length,true,_53f[0]);dojo.forEach(_540.concat(_53f),function(n){this.timeMenu.appendChild(n);},this);},constructor:function(){this.constraints={};},postMixInProperties:function(){this.inherited(arguments);this._setConstraintsAttr(this.constraints);},_setConstraintsAttr:function(_541){dojo.mixin(this,_541);if(!_541.locale){_541.locale=this.lang;}},postCreate:function(){this.connect(this.timeMenu,dojo.isIE?"onmousewheel":"DOMMouseScroll","_mouseWheeled");this._connects.push(dijit.typematic.addMouseListener(this.upArrow,this,"_onArrowUp",33,250));this._connects.push(dijit.typematic.addMouseListener(this.downArrow,this,"_onArrowDown",33,250));this.inherited(arguments);},_buttonMouse:function(e){dojo.toggleClass(e.currentTarget,e.currentTarget==this.upArrow?"dijitUpArrowHover":"dijitDownArrowHover",e.type=="mouseenter"||e.type=="mouseover");},_createOption:function(_542){var date=new Date(this._refDate);var _543=this._clickableIncrementDate;date.setHours(date.getHours()+_543.getHours()*_542,date.getMinutes()+_543.getMinutes()*_542,date.getSeconds()+_543.getSeconds()*_542);if(this.constraints.selector=="time"){date.setFullYear(1970,0,1);}var _544=dojo.date.locale.format(date,this.constraints);if(this.filterString&&_544.toLowerCase().indexOf(this.filterString)!==0){return null;}var div=dojo.create("div",{"class":this.baseClass+"Item"});div.date=date;div.index=_542;dojo.create("div",{"class":this.baseClass+"ItemInner",innerHTML:_544},div);if(_542%this._visibleIncrement<1&&_542%this._visibleIncrement>-1){dojo.addClass(div,this.baseClass+"Marker");}else{if(!(_542%this._clickableIncrement)){dojo.addClass(div,this.baseClass+"Tick");}}if(this.isDisabledDate(date)){dojo.addClass(div,this.baseClass+"ItemDisabled");}if(this.value&&!dojo.date.compare(this.value,date,this.constraints.selector)){div.selected=true;dojo.addClass(div,this.baseClass+"ItemSelected");if(dojo.hasClass(div,this.baseClass+"Marker")){dojo.addClass(div,this.baseClass+"MarkerSelected");}else{dojo.addClass(div,this.baseClass+"TickSelected");}this._highlightOption(div,true);}return div;},_onOptionSelected:function(tgt){var _545=tgt.target.date||tgt.target.parentNode.date;if(!_545||this.isDisabledDate(_545)){return;}this._highlighted_option=null;this.set("value",_545);this.onChange(_545);},onChange:function(time){},_highlightOption:function(node,_546){if(!node){return;}if(_546){if(this._highlighted_option){this._highlightOption(this._highlighted_option,false);}this._highlighted_option=node;}else{if(this._highlighted_option!==node){return;}else{this._highlighted_option=null;}}dojo.toggleClass(node,this.baseClass+"ItemHover",_546);if(dojo.hasClass(node,this.baseClass+"Marker")){dojo.toggleClass(node,this.baseClass+"MarkerHover",_546);}else{dojo.toggleClass(node,this.baseClass+"TickHover",_546);}},onmouseover:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;if(!dojo.hasClass(tgr,this.baseClass+"Item")){return;}this._highlightOption(tgr,true);},onmouseout:function(e){this._keyboardSelected=null;var tgr=(e.target.parentNode===this.timeMenu)?e.target:e.target.parentNode;this._highlightOption(tgr,false);},_mouseWheeled:function(e){this._keyboardSelected=null;dojo.stopEvent(e);var _547=(dojo.isIE?e.wheelDelta:-e.detail);this[(_547>0?"_onArrowUp":"_onArrowDown")]();},_onArrowUp:function(_548){if(typeof _548=="number"&&_548==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _549=this.timeMenu.childNodes[0].index;var divs=this._getFilteredNodes(_549,1,true,this.timeMenu.childNodes[0]);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);this.timeMenu.insertBefore(divs[0],this.timeMenu.childNodes[0]);}},_onArrowDown:function(_54a){if(typeof _54a=="number"&&_54a==-1){return;}if(!this.timeMenu.childNodes.length){return;}var _54b=this.timeMenu.childNodes[this.timeMenu.childNodes.length-1].index+1;var divs=this._getFilteredNodes(_54b,1,false,this.timeMenu.childNodes[this.timeMenu.childNodes.length-1]);if(divs.length){this.timeMenu.removeChild(this.timeMenu.childNodes[0]);this.timeMenu.appendChild(divs[0]);}},handleKey:function(e){var dk=dojo.keys;if(e.charOrCode==dk.DOWN_ARROW||e.charOrCode==dk.UP_ARROW){dojo.stopEvent(e);if(this._highlighted_option&&!this._highlighted_option.parentNode){this._highlighted_option=null;}var _54c=this.timeMenu,tgt=this._highlighted_option||dojo.query("."+this.baseClass+"ItemSelected",_54c)[0];if(!tgt){tgt=_54c.childNodes[0];}else{if(_54c.childNodes.length){if(e.charOrCode==dk.DOWN_ARROW&&!tgt.nextSibling){this._onArrowDown();}else{if(e.charOrCode==dk.UP_ARROW&&!tgt.previousSibling){this._onArrowUp();}}if(e.charOrCode==dk.DOWN_ARROW){tgt=tgt.nextSibling;}else{tgt=tgt.previousSibling;}}}this._highlightOption(tgt,true);this._keyboardSelected=tgt;return false;}else{if(e.charOrCode==dk.ENTER||e.charOrCode===dk.TAB){if(!this._keyboardSelected&&e.charOrCode===dk.TAB){return true;}if(this._highlighted_option){this._onOptionSelected({target:this._highlighted_option});}return e.charOrCode===dk.TAB;}}}});}if(!dojo._hasResource["dijit.form.TimeTextBox"]){dojo._hasResource["dijit.form.TimeTextBox"]=true;dojo.provide("dijit.form.TimeTextBox");dojo.declare("dijit.form.TimeTextBox",dijit.form._DateTimeTextBox,{baseClass:"dijitTextBox dijitComboBox dijitTimeTextBox",popupClass:"dijit._TimePicker",_selector:"time",value:new Date(""),_onKey:function(evt){this.inherited(arguments);switch(evt.keyCode){case dojo.keys.ENTER:case dojo.keys.TAB:case dojo.keys.ESCAPE:case dojo.keys.DOWN_ARROW:case dojo.keys.UP_ARROW:break;default:setTimeout(dojo.hitch(this,function(){var val=this.get("displayedValue");this.filterString=(val&&!this.parse(val,this.constraints))?val.toLowerCase():"";if(this._opened){this.closeDropDown();}this.openDropDown();}),0);}}});}if(!dojo._hasResource["dojo.dnd.common"]){dojo._hasResource["dojo.dnd.common"]=true;dojo.provide("dojo.dnd.common");dojo.getObject("dnd",true,dojo);dojo.dnd.getCopyKeyState=dojo.isCopyKey;dojo.dnd._uniqueId=0;dojo.dnd.getUniqueId=function(){var id;do{id=dojo._scopeName+"Unique"+(++dojo.dnd._uniqueId);}while(dojo.byId(id));return id;};dojo.dnd._empty={};dojo.dnd.isFormElement=function(e){var t=e.target;if(t.nodeType==3){t=t.parentNode;}return " button textarea input select option ".indexOf(" "+t.tagName.toLowerCase()+" ")>=0;};}if(!dojo._hasResource["dojo.dnd.autoscroll"]){dojo._hasResource["dojo.dnd.autoscroll"]=true;dojo.provide("dojo.dnd.autoscroll");dojo.getObject("dnd",true,dojo);dojo.dnd.getViewport=dojo.window.getBox;dojo.dnd.V_TRIGGER_AUTOSCROLL=32;dojo.dnd.H_TRIGGER_AUTOSCROLL=32;dojo.dnd.V_AUTOSCROLL_VALUE=16;dojo.dnd.H_AUTOSCROLL_VALUE=16;dojo.dnd.autoScroll=function(e){var v=dojo.window.getBox(),dx=0,dy=0;if(e.clientX<dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=-dojo.dnd.H_AUTOSCROLL_VALUE;}else{if(e.clientX>v.w-dojo.dnd.H_TRIGGER_AUTOSCROLL){dx=dojo.dnd.H_AUTOSCROLL_VALUE;}}if(e.clientY<dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=-dojo.dnd.V_AUTOSCROLL_VALUE;}else{if(e.clientY>v.h-dojo.dnd.V_TRIGGER_AUTOSCROLL){dy=dojo.dnd.V_AUTOSCROLL_VALUE;}}window.scrollBy(dx,dy);};dojo.dnd._validNodes={"div":1,"p":1,"td":1};dojo.dnd._validOverflow={"auto":1,"scroll":1};dojo.dnd.autoScrollNodes=function(e){for(var n=e.target;n;){if(n.nodeType==1&&(n.tagName.toLowerCase() in dojo.dnd._validNodes)){var s=dojo.getComputedStyle(n);if(s.overflow.toLowerCase() in dojo.dnd._validOverflow){var b=dojo._getContentBox(n,s),t=dojo.position(n,true);var w=Math.min(dojo.dnd.H_TRIGGER_AUTOSCROLL,b.w/2),h=Math.min(dojo.dnd.V_TRIGGER_AUTOSCROLL,b.h/2),rx=e.pageX-t.x,ry=e.pageY-t.y,dx=0,dy=0;if(dojo.isWebKit||dojo.isOpera){rx+=dojo.body().scrollLeft;ry+=dojo.body().scrollTop;}if(rx>0&&rx<b.w){if(rx<w){dx=-w;}else{if(rx>b.w-w){dx=w;}}}if(ry>0&&ry<b.h){if(ry<h){dy=-h;}else{if(ry>b.h-h){dy=h;}}}var _54d=n.scrollLeft,_54e=n.scrollTop;n.scrollLeft=n.scrollLeft+dx;n.scrollTop=n.scrollTop+dy;if(_54d!=n.scrollLeft||_54e!=n.scrollTop){return;}}}try{n=n.parentNode;}catch(x){n=null;}}dojo.dnd.autoScroll(e);};}if(!dojo._hasResource["dojo.dnd.Mover"]){dojo._hasResource["dojo.dnd.Mover"]=true;dojo.provide("dojo.dnd.Mover");dojo.declare("dojo.dnd.Mover",null,{constructor:function(node,e,host){this.node=dojo.byId(node);var pos=e.touches?e.touches[0]:e;this.marginBox={l:pos.pageX,t:pos.pageY};this.mouseButton=e.button;var h=(this.host=host),d=node.ownerDocument;this.events=[dojo.connect(d,"onmousemove",this,"onFirstMove"),dojo.connect(d,"ontouchmove",this,"onFirstMove"),dojo.connect(d,"onmousemove",this,"onMouseMove"),dojo.connect(d,"ontouchmove",this,"onMouseMove"),dojo.connect(d,"onmouseup",this,"onMouseUp"),dojo.connect(d,"ontouchend",this,"onMouseUp"),dojo.connect(d,"ondragstart",dojo.stopEvent),dojo.connect(d.body,"onselectstart",dojo.stopEvent)];if(h&&h.onMoveStart){h.onMoveStart(this);}},onMouseMove:function(e){dojo.dnd.autoScroll(e);var m=this.marginBox,pos=e.touches?e.touches[0]:e;this.host.onMove(this,{l:m.l+pos.pageX,t:m.t+pos.pageY},e);dojo.stopEvent(e);},onMouseUp:function(e){if(dojo.isWebKit&&dojo.isMac&&this.mouseButton==2?e.button==0:this.mouseButton==e.button){this.destroy();}dojo.stopEvent(e);},onFirstMove:function(e){var s=this.node.style,l,t,h=this.host;switch(s.position){case "relative":case "absolute":l=Math.round(parseFloat(s.left))||0;t=Math.round(parseFloat(s.top))||0;break;default:s.position="absolute";var m=dojo.marginBox(this.node);var b=dojo.doc.body;var bs=dojo.getComputedStyle(b);var bm=dojo._getMarginBox(b,bs);var bc=dojo._getContentBox(b,bs);l=m.l-(bc.l-bm.l);t=m.t-(bc.t-bm.t);break;}this.marginBox.l=l-this.marginBox.l;this.marginBox.t=t-this.marginBox.t;if(h&&h.onFirstMove){h.onFirstMove(this,e);}dojo.disconnect(this.events.shift());dojo.disconnect(this.events.shift());},destroy:function(){dojo.forEach(this.events,dojo.disconnect);var h=this.host;if(h&&h.onMoveStop){h.onMoveStop(this);}this.events=this.node=this.host=null;}});}if(!dojo._hasResource["dojo.dnd.Moveable"]){dojo._hasResource["dojo.dnd.Moveable"]=true;dojo.provide("dojo.dnd.Moveable");dojo.declare("dojo.dnd.Moveable",null,{handle:"",delay:0,skip:false,constructor:function(node,_54f){this.node=dojo.byId(node);if(!_54f){_54f={};}this.handle=_54f.handle?dojo.byId(_54f.handle):null;if(!this.handle){this.handle=this.node;}this.delay=_54f.delay>0?_54f.delay:0;this.skip=_54f.skip;this.mover=_54f.mover?_54f.mover:dojo.dnd.Mover;this.events=[dojo.connect(this.handle,"onmousedown",this,"onMouseDown"),dojo.connect(this.handle,"ontouchstart",this,"onMouseDown"),dojo.connect(this.handle,"ondragstart",this,"onSelectStart"),dojo.connect(this.handle,"onselectstart",this,"onSelectStart")];},markupFactory:function(_550,node){return new dojo.dnd.Moveable(node,_550);},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.events=this.node=this.handle=null;},onMouseDown:function(e){if(this.skip&&dojo.dnd.isFormElement(e)){return;}if(this.delay){this.events.push(dojo.connect(this.handle,"onmousemove",this,"onMouseMove"),dojo.connect(this.handle,"ontouchmove",this,"onMouseMove"),dojo.connect(this.handle,"onmouseup",this,"onMouseUp"),dojo.connect(this.handle,"ontouchend",this,"onMouseUp"));var pos=e.touches?e.touches[0]:e;this._lastX=pos.pageX;this._lastY=pos.pageY;}else{this.onDragDetected(e);}dojo.stopEvent(e);},onMouseMove:function(e){var pos=e.touches?e.touches[0]:e;if(Math.abs(pos.pageX-this._lastX)>this.delay||Math.abs(pos.pageY-this._lastY)>this.delay){this.onMouseUp(e);this.onDragDetected(e);}dojo.stopEvent(e);},onMouseUp:function(e){for(var i=0;i<2;++i){dojo.disconnect(this.events.pop());}dojo.stopEvent(e);},onSelectStart:function(e){if(!this.skip||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onDragDetected:function(e){new this.mover(this.node,e,this);},onMoveStart:function(_551){dojo.publish("/dnd/move/start",[_551]);dojo.addClass(dojo.body(),"dojoMove");dojo.addClass(this.node,"dojoMoveItem");},onMoveStop:function(_552){dojo.publish("/dnd/move/stop",[_552]);dojo.removeClass(dojo.body(),"dojoMove");dojo.removeClass(this.node,"dojoMoveItem");},onFirstMove:function(_553,e){},onMove:function(_554,_555,e){this.onMoving(_554,_555);var s=_554.node.style;s.left=_555.l+"px";s.top=_555.t+"px";this.onMoved(_554,_555);},onMoving:function(_556,_557){},onMoved:function(_558,_559){}});}if(!dojo._hasResource["dojo.dnd.move"]){dojo._hasResource["dojo.dnd.move"]=true;dojo.provide("dojo.dnd.move");dojo.declare("dojo.dnd.move.constrainedMoveable",dojo.dnd.Moveable,{constraints:function(){},within:false,markupFactory:function(_55a,node){return new dojo.dnd.move.constrainedMoveable(node,_55a);},constructor:function(node,_55b){if(!_55b){_55b={};}this.constraints=_55b.constraints;this.within=_55b.within;},onFirstMove:function(_55c){var c=this.constraintBox=this.constraints.call(this,_55c);c.r=c.l+c.w;c.b=c.t+c.h;if(this.within){var mb=dojo._getMarginSize(_55c.node);c.r-=mb.w;c.b-=mb.h;}},onMove:function(_55d,_55e){var c=this.constraintBox,s=_55d.node.style;this.onMoving(_55d,_55e);_55e.l=_55e.l<c.l?c.l:c.r<_55e.l?c.r:_55e.l;_55e.t=_55e.t<c.t?c.t:c.b<_55e.t?c.b:_55e.t;s.left=_55e.l+"px";s.top=_55e.t+"px";this.onMoved(_55d,_55e);}});dojo.declare("dojo.dnd.move.boxConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{box:{},markupFactory:function(_55f,node){return new dojo.dnd.move.boxConstrainedMoveable(node,_55f);},constructor:function(node,_560){var box=_560&&_560.box;this.constraints=function(){return box;};}});dojo.declare("dojo.dnd.move.parentConstrainedMoveable",dojo.dnd.move.constrainedMoveable,{area:"content",markupFactory:function(_561,node){return new dojo.dnd.move.parentConstrainedMoveable(node,_561);},constructor:function(node,_562){var area=_562&&_562.area;this.constraints=function(){var n=this.node.parentNode,s=dojo.getComputedStyle(n),mb=dojo._getMarginBox(n,s);if(area=="margin"){return mb;}var t=dojo._getMarginExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="border"){return mb;}t=dojo._getBorderExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;if(area=="padding"){return mb;}t=dojo._getPadExtents(n,s);mb.l+=t.l,mb.t+=t.t,mb.w-=t.w,mb.h-=t.h;return mb;};}});dojo.dnd.constrainedMover=dojo.dnd.move.constrainedMover;dojo.dnd.boxConstrainedMover=dojo.dnd.move.boxConstrainedMover;dojo.dnd.parentConstrainedMover=dojo.dnd.move.parentConstrainedMover;}if(!dojo._hasResource["dojo.dnd.TimedMoveable"]){dojo._hasResource["dojo.dnd.TimedMoveable"]=true;dojo.provide("dojo.dnd.TimedMoveable");(function(){var _563=dojo.dnd.Moveable.prototype.onMove;dojo.declare("dojo.dnd.TimedMoveable",dojo.dnd.Moveable,{timeout:40,constructor:function(node,_564){if(!_564){_564={};}if(_564.timeout&&typeof _564.timeout=="number"&&_564.timeout>=0){this.timeout=_564.timeout;}},markupFactory:function(_565,node){return new dojo.dnd.TimedMoveable(node,_565);},onMoveStop:function(_566){if(_566._timer){clearTimeout(_566._timer);_563.call(this,_566,_566._leftTop);}dojo.dnd.Moveable.prototype.onMoveStop.apply(this,arguments);},onMove:function(_567,_568){_567._leftTop=_568;if(!_567._timer){var _569=this;_567._timer=setTimeout(function(){_567._timer=null;_563.call(_569,_567,_567._leftTop);},this.timeout);}}});})();}if(!dojo._hasResource["dojo.fx.Toggler"]){dojo._hasResource["dojo.fx.Toggler"]=true;dojo.provide("dojo.fx.Toggler");dojo.declare("dojo.fx.Toggler",null,{node:null,showFunc:dojo.fadeIn,hideFunc:dojo.fadeOut,showDuration:200,hideDuration:200,constructor:function(args){var _56a=this;dojo.mixin(_56a,args);_56a.node=args.node;_56a._showArgs=dojo.mixin({},args);_56a._showArgs.node=_56a.node;_56a._showArgs.duration=_56a.showDuration;_56a.showAnim=_56a.showFunc(_56a._showArgs);_56a._hideArgs=dojo.mixin({},args);_56a._hideArgs.node=_56a.node;_56a._hideArgs.duration=_56a.hideDuration;_56a.hideAnim=_56a.hideFunc(_56a._hideArgs);dojo.connect(_56a.showAnim,"beforeBegin",dojo.hitch(_56a.hideAnim,"stop",true));dojo.connect(_56a.hideAnim,"beforeBegin",dojo.hitch(_56a.showAnim,"stop",true));},show:function(_56b){return this.showAnim.play(_56b||0);},hide:function(_56c){return this.hideAnim.play(_56c||0);}});}if(!dojo._hasResource["dojo.fx"]){dojo._hasResource["dojo.fx"]=true;dojo.provide("dojo.fx");(function(){var d=dojo,_56d={_fire:function(evt,args){if(this[evt]){this[evt].apply(this,args||[]);}return this;}};var _56e=function(_56f){this._index=-1;this._animations=_56f||[];this._current=this._onAnimateCtx=this._onEndCtx=null;this.duration=0;d.forEach(this._animations,function(a){this.duration+=a.duration;if(a.delay){this.duration+=a.delay;}},this);};d.extend(_56e,{_onAnimate:function(){this._fire("onAnimate",arguments);},_onEnd:function(){d.disconnect(this._onAnimateCtx);d.disconnect(this._onEndCtx);this._onAnimateCtx=this._onEndCtx=null;if(this._index+1==this._animations.length){this._fire("onEnd");}else{this._current=this._animations[++this._index];this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play(0,true);}},play:function(_570,_571){if(!this._current){this._current=this._animations[this._index=0];}if(!_571&&this._current.status()=="playing"){return this;}var _572=d.connect(this._current,"beforeBegin",this,function(){this._fire("beforeBegin");}),_573=d.connect(this._current,"onBegin",this,function(arg){this._fire("onBegin",arguments);}),_574=d.connect(this._current,"onPlay",this,function(arg){this._fire("onPlay",arguments);d.disconnect(_572);d.disconnect(_573);d.disconnect(_574);});if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}this._onAnimateCtx=d.connect(this._current,"onAnimate",this,"_onAnimate");if(this._onEndCtx){d.disconnect(this._onEndCtx);}this._onEndCtx=d.connect(this._current,"onEnd",this,"_onEnd");this._current.play.apply(this._current,arguments);return this;},pause:function(){if(this._current){var e=d.connect(this._current,"onPause",this,function(arg){this._fire("onPause",arguments);d.disconnect(e);});this._current.pause();}return this;},gotoPercent:function(_575,_576){this.pause();var _577=this.duration*_575;this._current=null;d.some(this._animations,function(a){if(a.duration<=_577){this._current=a;return true;}_577-=a.duration;return false;});if(this._current){this._current.gotoPercent(_577/this._current.duration,_576);}return this;},stop:function(_578){if(this._current){if(_578){for(;this._index+1<this._animations.length;++this._index){this._animations[this._index].stop(true);}this._current=this._animations[this._index];}var e=d.connect(this._current,"onStop",this,function(arg){this._fire("onStop",arguments);d.disconnect(e);});this._current.stop();}return this;},status:function(){return this._current?this._current.status():"stopped";},destroy:function(){if(this._onAnimateCtx){d.disconnect(this._onAnimateCtx);}if(this._onEndCtx){d.disconnect(this._onEndCtx);}}});d.extend(_56e,_56d);dojo.fx.chain=function(_579){return new _56e(_579);};var _57a=function(_57b){this._animations=_57b||[];this._connects=[];this._finished=0;this.duration=0;d.forEach(_57b,function(a){var _57c=a.duration;if(a.delay){_57c+=a.delay;}if(this.duration<_57c){this.duration=_57c;}this._connects.push(d.connect(a,"onEnd",this,"_onEnd"));},this);this._pseudoAnimation=new d.Animation({curve:[0,1],duration:this.duration});var self=this;d.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(evt){self._connects.push(d.connect(self._pseudoAnimation,evt,function(){self._fire(evt,arguments);}));});};d.extend(_57a,{_doAction:function(_57d,args){d.forEach(this._animations,function(a){a[_57d].apply(a,args);});return this;},_onEnd:function(){if(++this._finished>this._animations.length){this._fire("onEnd");}},_call:function(_57e,args){var t=this._pseudoAnimation;t[_57e].apply(t,args);},play:function(_57f,_580){this._finished=0;this._doAction("play",arguments);this._call("play",arguments);return this;},pause:function(){this._doAction("pause",arguments);this._call("pause",arguments);return this;},gotoPercent:function(_581,_582){var ms=this.duration*_581;d.forEach(this._animations,function(a){a.gotoPercent(a.duration<ms?1:(ms/a.duration),_582);});this._call("gotoPercent",arguments);return this;},stop:function(_583){this._doAction("stop",arguments);this._call("stop",arguments);return this;},status:function(){return this._pseudoAnimation.status();},destroy:function(){d.forEach(this._connects,dojo.disconnect);}});d.extend(_57a,_56d);dojo.fx.combine=function(_584){return new _57a(_584);};dojo.fx.wipeIn=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{start:function(){o=s.overflow;s.overflow="hidden";if(s.visibility=="hidden"||s.display=="none"){s.height="1px";s.display="";s.visibility="";return 1;}else{var _585=d.style(node,"height");return Math.max(_585,1);}},end:function(){return node.scrollHeight;}}}},args));d.connect(anim,"onEnd",function(){s.height="auto";s.overflow=o;});return anim;};dojo.fx.wipeOut=function(args){var node=args.node=d.byId(args.node),s=node.style,o;var anim=d.animateProperty(d.mixin({properties:{height:{end:1}}},args));d.connect(anim,"beforeBegin",function(){o=s.overflow;s.overflow="hidden";s.display="";});d.connect(anim,"onEnd",function(){s.overflow=o;s.height="auto";s.display="none";});return anim;};dojo.fx.slideTo=function(args){var node=args.node=d.byId(args.node),top=null,left=null;var init=(function(n){return function(){var cs=d.getComputedStyle(n);var pos=cs.position;top=(pos=="absolute"?n.offsetTop:parseInt(cs.top)||0);left=(pos=="absolute"?n.offsetLeft:parseInt(cs.left)||0);if(pos!="absolute"&&pos!="relative"){var ret=d.position(n,true);top=ret.y;left=ret.x;n.style.position="absolute";n.style.top=top+"px";n.style.left=left+"px";}};})(node);init();var anim=d.animateProperty(d.mixin({properties:{top:args.top||0,left:args.left||0}},args));d.connect(anim,"beforeBegin",anim,init);return anim;};})();}if(!dojo._hasResource["dijit._DialogMixin"]){dojo._hasResource["dijit._DialogMixin"]=true;dojo.provide("dijit._DialogMixin");dojo.declare("dijit._DialogMixin",null,{attributeMap:dijit._Widget.prototype.attributeMap,execute:function(_586){},onCancel:function(){},onExecute:function(){},_onSubmit:function(){this.onExecute();this.execute(this.get("value"));},_getFocusItems:function(){var _587=dijit._getTabNavigable(this.containerNode);this._firstFocusItem=_587.lowest||_587.first||this.closeButtonNode||this.domNode;this._lastFocusItem=_587.last||_587.highest||this._firstFocusItem;}});}if(!dojo._hasResource["dijit.DialogUnderlay"]){dojo._hasResource["dijit.DialogUnderlay"]=true;dojo.provide("dijit.DialogUnderlay");dojo.declare("dijit.DialogUnderlay",[dijit._Widget,dijit._Templated],{templateString:"<div class='dijitDialogUnderlayWrapper'><div class='dijitDialogUnderlay' dojoAttachPoint='node'></div></div>",dialogId:"","class":"",attributeMap:{id:"domNode"},_setDialogIdAttr:function(id){dojo.attr(this.node,"id",id+"_underlay");this._set("dialogId",id);},_setClassAttr:function(_588){this.node.className="dijitDialogUnderlay "+_588;this._set("class",_588);},postCreate:function(){dojo.body().appendChild(this.domNode);},layout:function(){var is=this.node.style,os=this.domNode.style;os.display="none";var _589=dojo.window.getBox();os.top=_589.t+"px";os.left=_589.l+"px";is.width=_589.w+"px";is.height=_589.h+"px";os.display="block";},show:function(){this.domNode.style.display="block";this.layout();this.bgIframe=new dijit.BackgroundIframe(this.domNode);},hide:function(){this.bgIframe.destroy();delete this.bgIframe;this.domNode.style.display="none";}});}if(!dojo._hasResource["dijit.TooltipDialog"]){dojo._hasResource["dijit.TooltipDialog"]=true;dojo.provide("dijit.TooltipDialog");dojo.declare("dijit.TooltipDialog",[dijit.layout.ContentPane,dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin],{title:"",doLayout:false,autofocus:true,baseClass:"dijitTooltipDialog",_firstFocusItem:null,_lastFocusItem:null,templateString:dojo.cache("dijit","templates/TooltipDialog.html","<div role=\"presentation\" tabIndex=\"-1\">\n\t<div class=\"dijitTooltipContainer\" role=\"presentation\">\n\t\t<div class =\"dijitTooltipContents dijitTooltipFocusNode\" dojoAttachPoint=\"containerNode\" role=\"dialog\"></div>\n\t</div>\n\t<div class=\"dijitTooltipConnector\" role=\"presentation\"></div>\n</div>\n"),_setTitleAttr:function(_58a){this.containerNode.title=_58a;this._set("title",_58a);},postCreate:function(){this.inherited(arguments);this.connect(this.containerNode,"onkeypress","_onKey");},orient:function(node,_58b,_58c){var newC="dijitTooltipAB"+(_58c.charAt(1)=="L"?"Left":"Right")+" dijitTooltip"+(_58c.charAt(0)=="T"?"Below":"Above");dojo.replaceClass(this.domNode,newC,this._currentOrientClass||"");this._currentOrientClass=newC;},focus:function(){this._getFocusItems(this.containerNode);dijit.focus(this._firstFocusItem);},onOpen:function(pos){this.orient(this.domNode,pos.aroundCorner,pos.corner);this._onShow();},onClose:function(){this.onHide();},_onKey:function(evt){var node=evt.target;var dk=dojo.keys;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.containerNode);}var _58d=(this._firstFocusItem==this._lastFocusItem);if(evt.charOrCode==dk.ESCAPE){setTimeout(dojo.hitch(this,"onCancel"),0);dojo.stopEvent(evt);}else{if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_58d){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_58d){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{if(evt.charOrCode===dk.TAB){evt.stopPropagation();}}}}}});}if(!dojo._hasResource["dijit.Dialog"]){dojo._hasResource["dijit.Dialog"]=true;dojo.provide("dijit.Dialog");dojo.declare("dijit._DialogBase",[dijit._Templated,dijit.form._FormMixin,dijit._DialogMixin,dijit._CssStateMixin],{templateString:dojo.cache("dijit","templates/Dialog.html","<div class=\"dijitDialog\" role=\"dialog\" aria-labelledby=\"${id}_title\">\n\t<div dojoAttachPoint=\"titleBar\" class=\"dijitDialogTitleBar\">\n\t<span dojoAttachPoint=\"titleNode\" class=\"dijitDialogTitle\" id=\"${id}_title\"></span>\n\t<span dojoAttachPoint=\"closeButtonNode\" class=\"dijitDialogCloseIcon\" dojoAttachEvent=\"ondijitclick: onCancel\" title=\"${buttonCancel}\" role=\"button\" tabIndex=\"-1\">\n\t\t<span dojoAttachPoint=\"closeText\" class=\"closeText\" title=\"${buttonCancel}\">x</span>\n\t</span>\n\t</div>\n\t\t<div dojoAttachPoint=\"containerNode\" class=\"dijitDialogPaneContent\"></div>\n</div>\n"),baseClass:"dijitDialog",cssStateNodes:{closeButtonNode:"dijitDialogCloseIcon"},attributeMap:dojo.delegate(dijit._Widget.prototype.attributeMap,{title:[{node:"titleNode",type:"innerHTML"},{node:"titleBar",type:"attribute"}],"aria-describedby":""}),open:false,duration:dijit.defaultDuration,refocus:true,autofocus:true,_firstFocusItem:null,_lastFocusItem:null,doLayout:false,draggable:true,"aria-describedby":"",postMixInProperties:function(){var _58e=dojo.i18n.getLocalization("dijit","common");dojo.mixin(this,_58e);this.inherited(arguments);},postCreate:function(){dojo.style(this.domNode,{display:"none",position:"absolute"});dojo.body().appendChild(this.domNode);this.inherited(arguments);this.connect(this,"onExecute","hide");this.connect(this,"onCancel","hide");this._modalconnects=[];},onLoad:function(){this._position();if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}this.inherited(arguments);},_endDrag:function(e){if(e&&e.node&&e.node===this.domNode){this._relativePosition=dojo.position(e.node);}},_setup:function(){var node=this.domNode;if(this.titleBar&&this.draggable){this._moveable=(dojo.isIE==6)?new dojo.dnd.TimedMoveable(node,{handle:this.titleBar}):new dojo.dnd.Moveable(node,{handle:this.titleBar,timeout:0});this._dndListener=dojo.subscribe("/dnd/move/stop",this,"_endDrag");}else{dojo.addClass(node,"dijitDialogFixed");}this.underlayAttrs={dialogId:this.id,"class":dojo.map(this["class"].split(/\s/),function(s){return s+"_underlay";}).join(" ")};},_size:function(){this._checkIfSingleChild();if(this._singleChild){if(this._singleChildOriginalStyle){this._singleChild.domNode.style.cssText=this._singleChildOriginalStyle;}delete this._singleChildOriginalStyle;}else{dojo.style(this.containerNode,{width:"auto",height:"auto"});}var mb=dojo._getMarginSize(this.domNode);var _58f=dojo.window.getBox();if(mb.w>=_58f.w||mb.h>=_58f.h){var w=Math.min(mb.w,Math.floor(_58f.w*0.75)),h=Math.min(mb.h,Math.floor(_58f.h*0.75));if(this._singleChild&&this._singleChild.resize){this._singleChildOriginalStyle=this._singleChild.domNode.style.cssText;this._singleChild.resize({w:w,h:h});}else{dojo.style(this.containerNode,{width:w+"px",height:h+"px",overflow:"auto",position:"relative"});}}else{if(this._singleChild&&this._singleChild.resize){this._singleChild.resize();}}},_position:function(){if(!dojo.hasClass(dojo.body(),"dojoMove")){var node=this.domNode,_590=dojo.window.getBox(),p=this._relativePosition,bb=p?null:dojo._getBorderBox(node),l=Math.floor(_590.l+(p?p.x:(_590.w-bb.w)/2)),t=Math.floor(_590.t+(p?p.y:(_590.h-bb.h)/2));dojo.style(node,{left:l+"px",top:t+"px"});}},_onKey:function(evt){if(evt.charOrCode){var dk=dojo.keys;var node=evt.target;if(evt.charOrCode===dk.TAB){this._getFocusItems(this.domNode);}var _591=(this._firstFocusItem==this._lastFocusItem);if(node==this._firstFocusItem&&evt.shiftKey&&evt.charOrCode===dk.TAB){if(!_591){dijit.focus(this._lastFocusItem);}dojo.stopEvent(evt);}else{if(node==this._lastFocusItem&&evt.charOrCode===dk.TAB&&!evt.shiftKey){if(!_591){dijit.focus(this._firstFocusItem);}dojo.stopEvent(evt);}else{while(node){if(node==this.domNode||dojo.hasClass(node,"dijitPopup")){if(evt.charOrCode==dk.ESCAPE){this.onCancel();}else{return;}}node=node.parentNode;}if(evt.charOrCode!==dk.TAB){dojo.stopEvent(evt);}else{if(!dojo.isOpera){try{this._firstFocusItem.focus();}catch(e){}}}}}}},show:function(){if(this.open){return;}if(!this._started){this.startup();}if(!this._alreadyInitialized){this._setup();this._alreadyInitialized=true;}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}this._modalconnects.push(dojo.connect(window,"onscroll",this,"layout"));this._modalconnects.push(dojo.connect(window,"onresize",this,function(){var _592=dojo.window.getBox();if(!this._oldViewport||_592.h!=this._oldViewport.h||_592.w!=this._oldViewport.w){this.layout();this._oldViewport=_592;}}));this._modalconnects.push(dojo.connect(this.domNode,"onkeypress",this,"_onKey"));dojo.style(this.domNode,{opacity:0,display:""});this._set("open",true);this._onShow();this._size();this._position();var _593;this._fadeInDeferred=new dojo.Deferred(dojo.hitch(this,function(){_593.stop();delete this._fadeInDeferred;}));_593=dojo.fadeIn({node:this.domNode,duration:this.duration,beforeBegin:dojo.hitch(this,function(){dijit._DialogLevelManager.show(this,this.underlayAttrs);}),onEnd:dojo.hitch(this,function(){if(this.autofocus&&dijit._DialogLevelManager.isTop(this)){this._getFocusItems(this.domNode);dijit.focus(this._firstFocusItem);}this._fadeInDeferred.callback(true);delete this._fadeInDeferred;})}).play();return this._fadeInDeferred;},hide:function(){if(!this._alreadyInitialized){return;}if(this._fadeInDeferred){this._fadeInDeferred.cancel();}var _594;this._fadeOutDeferred=new dojo.Deferred(dojo.hitch(this,function(){_594.stop();delete this._fadeOutDeferred;}));_594=dojo.fadeOut({node:this.domNode,duration:this.duration,onEnd:dojo.hitch(this,function(){this.domNode.style.display="none";dijit._DialogLevelManager.hide(this);this.onHide();this._fadeOutDeferred.callback(true);delete this._fadeOutDeferred;})}).play();if(this._scrollConnected){this._scrollConnected=false;}dojo.forEach(this._modalconnects,dojo.disconnect);this._modalconnects=[];if(this._relativePosition){delete this._relativePosition;}this._set("open",false);return this._fadeOutDeferred;},layout:function(){if(this.domNode.style.display!="none"){if(dijit._underlay){dijit._underlay.layout();}this._position();}},destroy:function(){if(this._fadeInDeferred){this._fadeInDeferred.cancel();}if(this._fadeOutDeferred){this._fadeOutDeferred.cancel();}if(this._moveable){this._moveable.destroy();}if(this._dndListener){dojo.unsubscribe(this._dndListener);}dojo.forEach(this._modalconnects,dojo.disconnect);dijit._DialogLevelManager.hide(this);this.inherited(arguments);}});dojo.declare("dijit.Dialog",[dijit.layout.ContentPane,dijit._DialogBase],{});dijit._DialogLevelManager={show:function(_595,_596){var ds=dijit._dialogStack;ds[ds.length-1].focus=dijit.getFocus(_595);var _597=dijit._underlay;if(!_597||_597._destroyed){_597=dijit._underlay=new dijit.DialogUnderlay(_596);}else{_597.set(_595.underlayAttrs);}var _598=ds[ds.length-1].dialog?ds[ds.length-1].zIndex+2:950;if(ds.length==1){_597.show();}dojo.style(dijit._underlay.domNode,"zIndex",_598-1);dojo.style(_595.domNode,"zIndex",_598);ds.push({dialog:_595,underlayAttrs:_596,zIndex:_598});},hide:function(_599){var ds=dijit._dialogStack;if(ds[ds.length-1].dialog==_599){ds.pop();var pd=ds[ds.length-1];if(ds.length==1){if(!dijit._underlay._destroyed){dijit._underlay.hide();}}else{dojo.style(dijit._underlay.domNode,"zIndex",pd.zIndex-1);dijit._underlay.set(pd.underlayAttrs);}if(_599.refocus){var _59a=pd.focus;if(!_59a||(pd.dialog&&!dojo.isDescendant(_59a.node,pd.dialog.domNode))){pd.dialog._getFocusItems(pd.dialog.domNode);_59a=pd.dialog._firstFocusItem;}try{dijit.focus(_59a);}catch(e){}}}else{var idx=dojo.indexOf(dojo.map(ds,function(elem){return elem.dialog;}),_599);if(idx!=-1){ds.splice(idx,1);}}},isTop:function(_59b){var ds=dijit._dialogStack;return ds[ds.length-1].dialog==_59b;}};dijit._dialogStack=[{dialog:null,focus:null,underlayAttrs:null}];}if(!dojo._hasResource["dojox.json.ref"]){dojo._hasResource["dojox.json.ref"]=true;dojo.provide("dojox.json.ref");dojox.json.ref={resolveJson:function(root,args){args=args||{};var _59c=args.idAttribute||"id";var _59d=this.refAttribute;var _59e=args.idAsRef;var _59f=args.idPrefix||"";var _5a0=args.assignAbsoluteIds;var _5a1=args.index||{};var _5a2=args.timeStamps;var ref,_5a3=[];var _5a4=/^(.*\/)?(\w+:\/\/)|[^\/\.]+\/\.\.\/|^.*\/(\/)/;var _5a5=this._addProp;var F=function(){};function walk(it,stop,_5a6,_5a7,_5a8,_5a9){var i,_5aa,val,id=_59c in it?it[_59c]:_5a6;if(_59c in it||((id!==undefined)&&_5a7)){id=(_59f+id).replace(_5a4,"$2$3");}var _5ab=_5a9||it;if(id!==undefined){if(_5a0){it.__id=id;}if(args.schemas&&(!(it instanceof Array))&&(val=id.match(/^(.+\/)[^\.\[]*$/))){_5a8=args.schemas[val[1]];}if(_5a1[id]&&((it instanceof Array)==(_5a1[id] instanceof Array))){_5ab=_5a1[id];delete _5ab.$ref;delete _5ab._loadObject;_5aa=true;}else{var _5ac=_5a8&&_5a8.prototype;if(_5ac){F.prototype=_5ac;_5ab=new F();}}_5a1[id]=_5ab;if(_5a2){_5a2[id]=args.time;}}while(_5a8){var _5ad=_5a8.properties;if(_5ad){for(i in it){var _5ae=_5ad[i];if(_5ae&&_5ae.format=="date-time"&&typeof it[i]=="string"){it[i]=dojo.date.stamp.fromISOString(it[i]);}}}_5a8=_5a8["extends"];}var _5af=it.length;for(i in it){if(i==_5af){break;}if(it.hasOwnProperty(i)){val=it[i];if((typeof val=="object")&&val&&!(val instanceof Date)&&i!="__parent"){ref=val[_59d]||(_59e&&val[_59c]);if(!ref||!val.__parent){if(it!=_5a3){val.__parent=_5ab;}}if(ref){delete it[i];var path=ref.toString().replace(/(#)([^\.\[])/,"$1.$2").match(/(^([^\[]*\/)?[^#\.\[]*)#?([\.\[].*)?/);if(_5a1[(_59f+ref).replace(_5a4,"$2$3")]){ref=_5a1[(_59f+ref).replace(_5a4,"$2$3")];}else{if((ref=(path[1]=="$"||path[1]=="this"||path[1]=="")?root:_5a1[(_59f+path[1]).replace(_5a4,"$2$3")])){if(path[3]){path[3].replace(/(\[([^\]]+)\])|(\.?([^\.\[]+))/g,function(t,a,b,c,d){ref=ref&&ref[b?b.replace(/[\"\'\\]/,""):d];});}}}if(ref){val=ref;}else{if(!stop){var _5b0;if(!_5b0){_5a3.push(_5ab);}_5b0=true;val=walk(val,false,val[_59d],true,_5ae);val._loadObject=args.loader;}}}else{if(!stop){val=walk(val,_5a3==it,id===undefined?undefined:_5a5(id,i),false,_5ae,_5ab!=it&&typeof _5ab[i]=="object"&&_5ab[i]);}}}it[i]=val;if(_5ab!=it&&!_5ab.__isDirty){var old=_5ab[i];_5ab[i]=val;if(_5aa&&val!==old&&!_5ab._loadObject&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&i!="$ref"&&!(val instanceof Date&&old instanceof Date&&val.getTime()==old.getTime())&&!(typeof val=="function"&&typeof old=="function"&&val.toString()==old.toString())&&_5a1.onUpdate){_5a1.onUpdate(_5ab,i,old,val);}}}}if(_5aa&&(_59c in it||_5ab instanceof Array)){for(i in _5ab){if(!_5ab.__isDirty&&_5ab.hasOwnProperty(i)&&!it.hasOwnProperty(i)&&!(i.charAt(0)=="_"&&i.charAt(1)=="_")&&!(_5ab instanceof Array&&isNaN(i))){if(_5a1.onUpdate&&i!="_loadObject"&&i!="_idAttr"){_5a1.onUpdate(_5ab,i,_5ab[i],undefined);}delete _5ab[i];while(_5ab instanceof Array&&_5ab.length&&_5ab[_5ab.length-1]===undefined){_5ab.length--;}}}}else{if(_5a1.onLoad){_5a1.onLoad(_5ab);}}return _5ab;};if(root&&typeof root=="object"){root=walk(root,false,args.defaultId,true);walk(_5a3,false);}return root;},fromJson:function(str,args){function ref(_5b1){var _5b2={};_5b2[this.refAttribute]=_5b1;return _5b2;};try{var root=eval("("+str+")");}catch(e){throw new SyntaxError("Invalid JSON string: "+e.message+" parsing: "+str);}if(root){return this.resolveJson(root,args);}return root;},toJson:function(it,_5b3,_5b4,_5b5){var _5b6=this._useRefs;var _5b7=this._addProp;var _5b8=this.refAttribute;_5b4=_5b4||"";var _5b9={};var _5ba={};function _5bb(it,path,_5bc){if(typeof it=="object"&&it){var _5bd;if(it instanceof Date){return "\""+dojo.date.stamp.toISOString(it,{zulu:true})+"\"";}var id=it.__id;if(id){if(path!="#"&&((_5b6&&!id.match(/#/))||_5b9[id])){var ref=id;if(id.charAt(0)!="#"){if(it.__clientId==id){ref="cid:"+id;}else{if(id.substring(0,_5b4.length)==_5b4){ref=id.substring(_5b4.length);}else{ref=id;}}}var _5be={};_5be[_5b8]=ref;return _5bb(_5be,"#");}path=id;}else{it.__id=path;_5ba[path]=it;}_5b9[path]=it;_5bc=_5bc||"";var _5bf=_5b3?_5bc+dojo.toJsonIndentStr:"";var _5c0=_5b3?"\n":"";var sep=_5b3?" ":"";if(it instanceof Array){var res=dojo.map(it,function(obj,i){var val=_5bb(obj,_5b7(path,i),_5bf);if(typeof val!="string"){val="undefined";}return _5c0+_5bf+val;});return "["+res.join(","+sep)+_5c0+_5bc+"]";}var _5c1=[];for(var i in it){if(it.hasOwnProperty(i)){var _5c2;if(typeof i=="number"){_5c2="\""+i+"\"";}else{if(typeof i=="string"&&(i.charAt(0)!="_"||i.charAt(1)!="_")){_5c2=dojo._escapeString(i);}else{continue;}}var val=_5bb(it[i],_5b7(path,i),_5bf);if(typeof val!="string"){continue;}_5c1.push(_5c0+_5bf+_5c2+":"+sep+val);}}return "{"+_5c1.join(","+sep)+_5c0+_5bc+"}";}else{if(typeof it=="function"&&dojox.json.ref.serializeFunctions){return it.toString();}}return dojo.toJson(it);};var json=_5bb(it,"#","");if(!_5b5){for(var i in _5ba){delete _5ba[i].__id;}}return json;},_addProp:function(id,prop){return id+(id.match(/#/)?id.length==1?"":".":"#")+prop;},refAttribute:"$ref",_useRefs:false,serializeFunctions:false};}if(!dojo._hasResource["dojox.timing._base"]){dojo._hasResource["dojox.timing._base"]=true;dojo.provide("dojox.timing._base");dojo.experimental("dojox.timing");dojox.timing.Timer=function(_5c3){this.timer=null;this.isRunning=false;this.interval=_5c3;this.onStart=null;this.onStop=null;};dojo.extend(dojox.timing.Timer,{onTick:function(){},setInterval:function(_5c4){if(this.isRunning){window.clearInterval(this.timer);}this.interval=_5c4;if(this.isRunning){this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);}},start:function(){if(typeof this.onStart=="function"){this.onStart();}this.isRunning=true;this.timer=window.setInterval(dojo.hitch(this,"onTick"),this.interval);},stop:function(){if(typeof this.onStop=="function"){this.onStop();}this.isRunning=false;window.clearInterval(this.timer);}});}if(!dojo._hasResource["dojox.html._base"]){dojo._hasResource["dojox.html._base"]=true;dojo.provide("dojox.html._base");(function(){if(dojo.isIE){var _5c5=/(AlphaImageLoader\([^)]*?src=(['"]))(?![a-z]+:|\/)([^\r\n;}]+?)(\2[^)]*\)\s*[;}]?)/g;}var _5c6=/(?:(?:@import\s*(['"])(?![a-z]+:|\/)([^\r\n;{]+?)\1)|url\(\s*(['"]?)(?![a-z]+:|\/)([^\r\n;]+?)\3\s*\))([a-z, \s]*[;}]?)/g;var _5c7=dojox.html._adjustCssPaths=function(_5c8,_5c9){if(!_5c9||!_5c8){return;}if(_5c5){_5c9=_5c9.replace(_5c5,function(_5ca,pre,_5cb,url,post){return pre+(new dojo._Url(_5c8,"./"+url).toString())+post;});}return _5c9.replace(_5c6,function(_5cc,_5cd,_5ce,_5cf,_5d0,_5d1){if(_5ce){return "@import \""+(new dojo._Url(_5c8,"./"+_5ce).toString())+"\""+_5d1;}else{return "url("+(new dojo._Url(_5c8,"./"+_5d0).toString())+")"+_5d1;}});};var _5d2=/(<[a-z][a-z0-9]*\s[^>]*)(?:(href|src)=(['"]?)([^>]*?)\3|style=(['"]?)([^>]*?)\5)([^>]*>)/gi;var _5d3=dojox.html._adjustHtmlPaths=function(_5d4,cont){var url=_5d4||"./";return cont.replace(_5d2,function(tag,_5d5,name,_5d6,_5d7,_5d8,_5d9,end){return _5d5+(name?(name+"="+_5d6+(new dojo._Url(url,_5d7).toString())+_5d6):("style="+_5d8+_5c7(url,_5d9)+_5d8))+end;});};var _5da=dojox.html._snarfStyles=function(_5db,cont,_5dc){_5dc.attributes=[];return cont.replace(/(?:<style([^>]*)>([\s\S]*?)<\/style>|<link\s+(?=[^>]*rel=['"]?stylesheet)([^>]*?href=(['"])([^>]*?)\4[^>\/]*)\/?>)/gi,function(_5dd,_5de,_5df,_5e0,_5e1,href){var i,attr=(_5de||_5e0||"").replace(/^\s*([\s\S]*?)\s*$/i,"$1");if(_5df){i=_5dc.push(_5db?_5c7(_5db,_5df):_5df);}else{i=_5dc.push("@import \""+href+"\";");attr=attr.replace(/\s*(?:rel|href)=(['"])?[^\s]*\1\s*/gi,"");}if(attr){attr=attr.split(/\s+/);var _5e2={},tmp;for(var j=0,e=attr.length;j<e;j++){tmp=attr[j].split("=");_5e2[tmp[0]]=tmp[1].replace(/^\s*['"]?([\s\S]*?)['"]?\s*$/,"$1");}_5dc.attributes[i-1]=_5e2;}return "";});};var _5e3=dojox.html._snarfScripts=function(cont,_5e4){_5e4.code="";cont=cont.replace(/<[!][-][-](.|\s)*?[-][-]>/g,function(_5e5){return _5e5.replace(/<(\/?)script\b/ig,"&lt;$1Script");});function _5e6(src){if(_5e4.downloadRemote){src=src.replace(/&([a-z0-9#]+);/g,function(m,name){switch(name){case "amp":return "&";case "gt":return ">";case "lt":return "<";default:return name.charAt(0)=="#"?String.fromCharCode(name.substring(1)):"&"+name+";";}});dojo.xhrGet({url:src,sync:true,load:function(code){_5e4.code+=code+";";},error:_5e4.errBack});}};return cont.replace(/<script\s*(?![^>]*type=['"]?(?:dojo\/|text\/html\b))(?:[^>]*?(?:src=(['"]?)([^>]*?)\1[^>]*)?)*>([\s\S]*?)<\/script>/gi,function(_5e7,_5e8,src,code){if(src){_5e6(src);}else{_5e4.code+=code;}return "";});};var _5e9=dojox.html.evalInGlobal=function(code,_5ea){_5ea=_5ea||dojo.doc.body;var n=_5ea.ownerDocument.createElement("script");n.type="text/javascript";_5ea.appendChild(n);n.text=code;};dojo.declare("dojox.html._ContentSetter",[dojo.html._ContentSetter],{adjustPaths:false,referencePath:".",renderStyles:false,executeScripts:false,scriptHasHooks:false,scriptHookReplacement:null,_renderStyles:function(_5eb){this._styleNodes=[];var st,att,_5ec,doc=this.node.ownerDocument;var head=doc.getElementsByTagName("head")[0];for(var i=0,e=_5eb.length;i<e;i++){_5ec=_5eb[i];att=_5eb.attributes[i];st=doc.createElement("style");st.setAttribute("type","text/css");for(var x in att){st.setAttribute(x,att[x]);}this._styleNodes.push(st);head.appendChild(st);if(st.styleSheet){st.styleSheet.cssText=_5ec;}else{st.appendChild(doc.createTextNode(_5ec));}}},empty:function(){this.inherited("empty",arguments);this._styles=[];},onBegin:function(){this.inherited("onBegin",arguments);var cont=this.content,node=this.node;var _5ed=this._styles;if(dojo.isString(cont)){if(this.adjustPaths&&this.referencePath){cont=_5d3(this.referencePath,cont);}if(this.renderStyles||this.cleanContent){cont=_5da(this.referencePath,cont,_5ed);}if(this.executeScripts){var _5ee=this;var _5ef={downloadRemote:true,errBack:function(e){_5ee._onError.call(_5ee,"Exec","Error downloading remote script in \""+_5ee.id+"\"",e);}};cont=_5e3(cont,_5ef);this._code=_5ef.code;}}this.content=cont;},onEnd:function(){var code=this._code,_5f0=this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}if(this.renderStyles&&_5f0&&_5f0.length){this._renderStyles(_5f0);}if(this.executeScripts&&code){if(this.cleanContent){code=code.replace(/(<!--|(?:\/\/)?-->|<!\[CDATA\[|\]\]>)/g,"");}if(this.scriptHasHooks){code=code.replace(/_container_(?!\s*=[^=])/g,this.scriptHookReplacement);}try{_5e9(code,this.node);}catch(e){this._onError("Exec","Error eval script in "+this.id+", "+e.message,e);}}this.inherited("onEnd",arguments);},tearDown:function(){this.inherited(arguments);delete this._styles;if(this._styleNodes&&this._styleNodes.length){while(this._styleNodes.length){dojo.destroy(this._styleNodes.pop());}}delete this._styleNodes;dojo.mixin(this,dojo.getObject(this.declaredClass).prototype);}});dojox.html.set=function(node,cont,_5f1){if(!_5f1){return dojo.html._setNodeContent(node,cont,true);}else{var op=new dojox.html._ContentSetter(dojo.mixin(_5f1,{content:cont,node:node}));return op.set();}};})();}if(!dojo._hasResource["dijit._editor.plugins.ViewSource"]){dojo._hasResource["dijit._editor.plugins.ViewSource"]=true;dojo.provide("dijit._editor.plugins.ViewSource");dojo.declare("dijit._editor.plugins.ViewSource",dijit._editor._Plugin,{stripScripts:true,stripComments:true,stripIFrames:true,readOnly:false,_fsPlugin:null,toggle:function(){if(dojo.isWebKit){this._vsFocused=true;}this.button.set("checked",!this.button.get("checked"));},_initButton:function(){var _5f2=dojo.i18n.getLocalization("dijit._editor","commands"),_5f3=this.editor;this.button=new dijit.form.ToggleButton({label:_5f2["viewSource"],dir:_5f3.dir,lang:_5f3.lang,showLabel:false,iconClass:this.iconClassPrefix+" "+this.iconClassPrefix+"ViewSource",tabIndex:"-1",onChange:dojo.hitch(this,"_showSource")});if(dojo.isIE==7){this._ieFixNode=dojo.create("div",{style:{opacity:"0",zIndex:"-1000",position:"absolute",top:"-1000px"}},dojo.body());}this.button.set("readOnly",false);},setEditor:function(_5f4){this.editor=_5f4;this._initButton();this.editor.addKeyHandler(dojo.keys.F12,true,true,dojo.hitch(this,function(e){this.button.focus();this.toggle();dojo.stopEvent(e);setTimeout(dojo.hitch(this,function(){this.editor.focus();}),100);}));},_showSource:function(_5f5){var ed=this.editor;var _5f6=ed._plugins;var html;this._sourceShown=_5f5;var self=this;try{if(!this.sourceArea){this._createSourceView();}if(_5f5){ed._sourceQueryCommandEnabled=ed.queryCommandEnabled;ed.queryCommandEnabled=function(cmd){var lcmd=cmd.toLowerCase();if(lcmd==="viewsource"){return true;}else{return false;}};this.editor.onDisplayChanged();html=ed.get("value");html=this._filter(html);ed.set("value",html);this._pluginList=[];dojo.forEach(_5f6,function(p){if(!(p instanceof dijit._editor.plugins.ViewSource)){p.set("disabled",true);}});if(this._fsPlugin){this._fsPlugin._getAltViewNode=function(){return self.sourceArea;};}this.sourceArea.value=html;var is=dojo._getMarginSize(ed.iframe.parentNode);dojo.marginBox(this.sourceArea,{w:is.w,h:is.h});dojo.style(ed.iframe,"display","none");dojo.style(this.sourceArea,{display:"block"});var _5f7=function(){var vp=dojo.window.getBox();if("_prevW" in this&&"_prevH" in this){if(vp.w===this._prevW&&vp.h===this._prevH){return;}else{this._prevW=vp.w;this._prevH=vp.h;}}else{this._prevW=vp.w;this._prevH=vp.h;}if(this._resizer){clearTimeout(this._resizer);delete this._resizer;}this._resizer=setTimeout(dojo.hitch(this,function(){delete this._resizer;this._resize();}),10);};this._resizeHandle=dojo.connect(window,"onresize",this,_5f7);setTimeout(dojo.hitch(this,this._resize),100);this.editor.onNormalizedDisplayChanged();this.editor.__oldGetValue=this.editor.getValue;this.editor.getValue=dojo.hitch(this,function(){var txt=this.sourceArea.value;txt=this._filter(txt);return txt;});}else{if(!ed._sourceQueryCommandEnabled){return;}dojo.disconnect(this._resizeHandle);delete this._resizeHandle;if(this.editor.__oldGetValue){this.editor.getValue=this.editor.__oldGetValue;delete this.editor.__oldGetValue;}ed.queryCommandEnabled=ed._sourceQueryCommandEnabled;if(!this._readOnly){html=this.sourceArea.value;html=this._filter(html);ed.beginEditing();ed.set("value",html);ed.endEditing();}dojo.forEach(_5f6,function(p){p.set("disabled",false);});dojo.style(this.sourceArea,"display","none");dojo.style(ed.iframe,"display","block");delete ed._sourceQueryCommandEnabled;this.editor.onDisplayChanged();}setTimeout(dojo.hitch(this,function(){var _5f8=ed.domNode.parentNode;if(_5f8){var _5f9=dijit.getEnclosingWidget(_5f8);if(_5f9&&_5f9.resize){_5f9.resize();}}ed.resize();}),300);}catch(e){console.log(e);}},updateState:function(){this.button.set("disabled",this.get("disabled"));},_resize:function(){var ed=this.editor;var tbH=ed.getHeaderHeight();var fH=ed.getFooterHeight();var eb=dojo.position(ed.domNode);var _5fa=dojo._getPadBorderExtents(ed.iframe.parentNode);var _5fb=dojo._getMarginExtents(ed.iframe.parentNode);var _5fc=dojo._getPadBorderExtents(ed.domNode);var _5fd=dojo._getMarginExtents(ed.domNode);var edb={w:eb.w-(_5fc.w+_5fd.w),h:eb.h-(tbH+_5fc.h+_5fd.h+fH)};if(this._fsPlugin&&this._fsPlugin.isFullscreen){var vp=dojo.window.getBox();edb.w=(vp.w-_5fc.w);edb.h=(vp.h-(tbH+_5fc.h+fH));}if(dojo.isIE){edb.h-=2;}if(this._ieFixNode){var _5fe=-this._ieFixNode.offsetTop/1000;edb.w=Math.floor((edb.w+0.9)/_5fe);edb.h=Math.floor((edb.h+0.9)/_5fe);}dojo.marginBox(this.sourceArea,{w:edb.w-(_5fa.w+_5fb.w),h:edb.h-(_5fa.h+_5fb.h)});dojo.marginBox(ed.iframe.parentNode,{h:edb.h});},_createSourceView:function(){var ed=this.editor;var _5ff=ed._plugins;this.sourceArea=dojo.create("textarea");if(this.readOnly){dojo.attr(this.sourceArea,"readOnly",true);this._readOnly=true;}dojo.style(this.sourceArea,{padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});dojo.place(this.sourceArea,ed.iframe,"before");if(dojo.isIE&&ed.iframe.parentNode.lastChild!==ed.iframe){dojo.style(ed.iframe.parentNode.lastChild,{width:"0px",height:"0px",padding:"0px",margin:"0px",borderWidth:"0px",borderStyle:"none"});}ed._viewsource_oldFocus=ed.focus;var self=this;ed.focus=function(){if(self._sourceShown){self.setSourceAreaCaret();}else{try{if(this._vsFocused){delete this._vsFocused;dijit.focus(ed.editNode);}else{ed._viewsource_oldFocus();}}catch(e){console.log(e);}}};var i,p;for(i=0;i<_5ff.length;i++){p=_5ff[i];if(p&&(p.declaredClass==="dijit._editor.plugins.FullScreen"||p.declaredClass===(dijit._scopeName+"._editor.plugins.FullScreen"))){this._fsPlugin=p;break;}}if(this._fsPlugin){this._fsPlugin._viewsource_getAltViewNode=this._fsPlugin._getAltViewNode;this._fsPlugin._getAltViewNode=function(){return self._sourceShown?self.sourceArea:this._viewsource_getAltViewNode();};}this.connect(this.sourceArea,"onkeydown",dojo.hitch(this,function(e){if(this._sourceShown&&e.keyCode==dojo.keys.F12&&e.ctrlKey&&e.shiftKey){this.button.focus();this.button.set("checked",false);setTimeout(dojo.hitch(this,function(){ed.focus();}),100);dojo.stopEvent(e);}}));},_stripScripts:function(html){if(html){html=html.replace(/<\s*script[^>]*>((.|\s)*?)<\\?\/\s*script\s*>/ig,"");html=html.replace(/<\s*script\b([^<>]|\s)*>?/ig,"");html=html.replace(/<[^>]*=(\s|)*[("|')]javascript:[^$1][(\s|.)]*[$1][^>]*>/ig,"");}return html;},_stripComments:function(html){if(html){html=html.replace(/<!--(.|\s){1,}?-->/g,"");}return html;},_stripIFrames:function(html){if(html){html=html.replace(/<\s*iframe[^>]*>((.|\s)*?)<\\?\/\s*iframe\s*>/ig,"");}return html;},_filter:function(html){if(html){if(this.stripScripts){html=this._stripScripts(html);}if(this.stripComments){html=this._stripComments(html);}if(this.stripIFrames){html=this._stripIFrames(html);}}return html;},setSourceAreaCaret:function(){var win=dojo.global;var elem=this.sourceArea;dijit.focus(elem);if(this._sourceShown&&!this.readOnly){if(dojo.isIE){if(this.sourceArea.createTextRange){var _600=elem.createTextRange();_600.collapse(true);_600.moveStart("character",-99999);_600.moveStart("character",0);_600.moveEnd("character",0);_600.select();}}else{if(win.getSelection){if(elem.setSelectionRange){elem.setSelectionRange(0,0);}}}}},destroy:function(){if(this._ieFixNode){dojo.body().removeChild(this._ieFixNode);}if(this._resizer){clearTimeout(this._resizer);delete this._resizer;}if(this._resizeHandle){dojo.disconnect(this._resizeHandle);delete this._resizeHandle;}this.inherited(arguments);}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var name=o.args.name.toLowerCase();if(name==="viewsource"){o.plugin=new dijit._editor.plugins.ViewSource({readOnly:("readOnly" in o.args)?o.args.readOnly:false,stripComments:("stripComments" in o.args)?o.args.stripComments:true,stripScripts:("stripScripts" in o.args)?o.args.stripScripts:true,stripIFrames:("stripIFrames" in o.args)?o.args.stripIFrames:true});}});}if(!dojo._hasResource["dojox.html.entities"]){dojo._hasResource["dojox.html.entities"]=true;dojo.provide("dojox.html.entities");(function(){var _601=function(str,map){var _602,_603;if(map._encCache&&map._encCache.regexp&&map._encCache.mapper&&map.length==map._encCache.length){_602=map._encCache.mapper;_603=map._encCache.regexp;}else{_602={};_603=["["];var i;for(i=0;i<map.length;i++){_602[map[i][0]]="&"+map[i][1]+";";_603.push(map[i][0]);}_603.push("]");_603=new RegExp(_603.join(""),"g");map._encCache={mapper:_602,regexp:_603,length:map.length};}str=str.replace(_603,function(c){return _602[c];});return str;};var _604=function(str,map){var _605,_606;if(map._decCache&&map._decCache.regexp&&map._decCache.mapper&&map.length==map._decCache.length){_605=map._decCache.mapper;_606=map._decCache.regexp;}else{_605={};_606=["("];var i;for(i=0;i<map.length;i++){var e="&"+map[i][1]+";";if(i){_606.push("|");}_605[e]=map[i][0];_606.push(e);}_606.push(")");_606=new RegExp(_606.join(""),"g");map._decCache={mapper:_605,regexp:_606,length:map.length};}str=str.replace(_606,function(c){return _605[c];});return str;};dojox.html.entities.html=[["&","amp"],["\"","quot"],["<","lt"],[">","gt"],["","nbsp"]];dojox.html.entities.latin=[["","iexcl"],["","cent"],["","pound"],["","euro"],["","curren"],["","yen"],["","brvbar"],["","sect"],["","uml"],["","copy"],["","ordf"],["","laquo"],["","not"],["","shy"],["","reg"],["","macr"],["","deg"],["","plusmn"],["","sup2"],["","sup3"],["","acute"],["","micro"],["","para"],["","middot"],["","cedil"],["","sup1"],["","ordm"],["","raquo"],["","frac14"],["","frac12"],["","frac34"],["","iquest"],["","Agrave"],["","Aacute"],["","Acirc"],["","Atilde"],["","Auml"],["","Aring"],["","AElig"],["","Ccedil"],["","Egrave"],["","Eacute"],["","Ecirc"],["","Euml"],["","Igrave"],["","Iacute"],["","Icirc"],["","Iuml"],["","ETH"],["","Ntilde"],["","Ograve"],["","Oacute"],["","Ocirc"],["","Otilde"],["","Ouml"],["","times"],["","Oslash"],["","Ugrave"],["","Uacute"],["","Ucirc"],["","Uuml"],["","Yacute"],["","THORN"],["","szlig"],["","agrave"],["","aacute"],["","acirc"],["","atilde"],["","auml"],["","aring"],["","aelig"],["","ccedil"],["","egrave"],["","eacute"],["","ecirc"],["","euml"],["","igrave"],["","iacute"],["","icirc"],["","iuml"],["","eth"],["","ntilde"],["","ograve"],["","oacute"],["","ocirc"],["","otilde"],["","ouml"],["","divide"],["","oslash"],["","ugrave"],["","uacute"],["","ucirc"],["","uuml"],["","yacute"],["","thorn"],["","yuml"],["","fnof"],["","Alpha"],["","Beta"],["","Gamma"],["","Delta"],["","Epsilon"],["","Zeta"],["","Eta"],["","Theta"],["","Iota"],["","Kappa"],["","Lambda"],["","Mu"],["","Nu"],["","Xi"],["","Omicron"],["","Pi"],["","Rho"],["","Sigma"],["","Tau"],["","Upsilon"],["","Phi"],["","Chi"],["","Psi"],["","Omega"],["","alpha"],["","beta"],["","gamma"],["","delta"],["","epsilon"],["","zeta"],["","eta"],["","theta"],["","iota"],["","kappa"],["","lambda"],["","mu"],["","nu"],["","xi"],["","omicron"],["","pi"],["","rho"],["","sigmaf"],["","sigma"],["","tau"],["","upsilon"],["","phi"],["","chi"],["","psi"],["","omega"],["","thetasym"],["","upsih"],["","piv"],["","bull"],["","hellip"],["","prime"],["","Prime"],["","oline"],["","frasl"],["","weierp"],["","image"],["","real"],["","trade"],["","alefsym"],["","larr"],["","uarr"],["","rarr"],["","darr"],["","harr"],["","crarr"],["","lArr"],["","uArr"],["","rArr"],["","dArr"],["","hArr"],["","forall"],["","part"],["","exist"],["","empty"],["","nabla"],["","isin"],["","notin"],["","ni"],["","prod"],["","sum"],["","minus"],["","lowast"],["","radic"],["","prop"],["","infin"],["","ang"],["","and"],["","or"],["","cap"],["","cup"],["","int"],["","there4"],["","sim"],["","cong"],["","asymp"],["","ne"],["","equiv"],["","le"],["","ge"],["","sub"],["","sup"],["","nsub"],["","sube"],["","supe"],["","oplus"],["","otimes"],["","perp"],["","sdot"],["","lceil"],["","rceil"],["","lfloor"],["","rfloor"],["","lang"],["","rang"],["","loz"],["","spades"],["","clubs"],["","hearts"],["","diams"],["","Elig"],["","oelig"],["","Scaron"],["","scaron"],["","Yuml"],["","circ"],["","tilde"],["","ensp"],["","emsp"],["","thinsp"],["","zwnj"],["","zwj"],["","lrm"],["","rlm"],["","ndash"],["","mdash"],["","lsquo"],["","rsquo"],["","sbquo"],["","ldquo"],["","rdquo"],["","bdquo"],["","dagger"],["","Dagger"],["","permil"],["","lsaquo"],["","rsaquo"]];dojox.html.entities.encode=function(str,m){if(str){if(!m){str=_601(str,dojox.html.entities.html);str=_601(str,dojox.html.entities.latin);}else{str=_601(str,m);}}return str;};dojox.html.entities.decode=function(str,m){if(str){if(!m){str=_604(str,dojox.html.entities.html);str=_604(str,dojox.html.entities.latin);}else{str=_604(str,m);}}return str;};})();}if(!dojo._hasResource["dojox.html.format"]){dojo._hasResource["dojox.html.format"]=true;dojo.provide("dojox.html.format");dojox.html.format.prettyPrint=function(html,_607,_608,map,_609){var _60a=[];var _60b=0;var _60c=[];var iTxt="\t";var _60d="";var _60e=[];var i;var _60f=/[=]([^"']+?)(\s|>)/g;var _610=/style=("[^"]*"|'[^']*'|\S*)/gi;var _611=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi;if(_607&&_607>0&&_607<10){iTxt="";for(i=0;i<_607;i++){iTxt+=" ";}}var _612=dojo.doc.createElement("div");_612.innerHTML=html;var _613=dojox.html.entities.encode;var _614=dojox.html.entities.decode;var _615=function(tag){switch(tag){case "a":case "b":case "strong":case "s":case "strike":case "i":case "u":case "em":case "sup":case "sub":case "span":case "font":case "big":case "cite":case "q":case "small":return true;default:return false;}};var div=_612.ownerDocument.createElement("div");var _616=function(node){var _617=node.cloneNode(false);div.appendChild(_617);var html=div.innerHTML;div.innerHTML="";return html;};var _618=function(){var i,txt="";for(i=0;i<_60b;i++){txt+=iTxt;}return txt.length;};var _619=function(){var i;for(i=0;i<_60b;i++){_60a.push(iTxt);}};var _61a=function(){_60a.push("\n");};var _61b=function(n){_60d+=_613(n.nodeValue,map);};var _61c=function(txt){var i;var _61d;var _61e=txt.split("\n");for(i=0;i<_61e.length;i++){_61e[i]=dojo.trim(_61e[i]);}txt=_61e.join(" ");txt=dojo.trim(txt);if(txt!==""){var _61f=[];if(_608&&_608>0){var _620=_618();var _621=_608;if(_608>_620){_621-=_620;}while(txt){if(txt.length>_608){for(i=_621;(i>0&&txt.charAt(i)!==" ");i--){}if(!i){for(i=_621;(i<txt.length&&txt.charAt(i)!==" ");i++){}}var line=txt.substring(0,i);line=dojo.trim(line);txt=dojo.trim(txt.substring((i==txt.length)?txt.length:i+1,txt.length));if(line){_61d="";for(i=0;i<_60b;i++){_61d+=iTxt;}line=_61d+line+"\n";}_61f.push(line);}else{_61d="";for(i=0;i<_60b;i++){_61d+=iTxt;}txt=_61d+txt+"\n";_61f.push(txt);txt=null;}}return _61f.join("");}else{_61d="";for(i=0;i<_60b;i++){_61d+=iTxt;}txt=_61d+txt+"\n";return txt;}}else{return "";}};var _622=function(txt){if(txt){txt=txt.replace(/&quot;/gi,"\"");txt=txt.replace(/&gt;/gi,">");txt=txt.replace(/&lt;/gi,"<");txt=txt.replace(/&amp;/gi,"&");}return txt;};var _623=function(txt){if(txt){txt=_622(txt);var i,t,c,_624;var _625=0;var _626=txt.split("\n");var _627=[];for(i=0;i<_626.length;i++){var line=_626[i];var _628=(line.indexOf("\n")>-1);line=dojo.trim(line);if(line){var _629=_625;for(c=0;c<line.length;c++){var ch=line.charAt(c);if(ch==="{"){_625++;}else{if(ch==="}"){_625--;_629=_625;}}}_624="";for(t=0;t<_60b+_629;t++){_624+=iTxt;}_627.push(_624+line+"\n");}else{if(_628&&i===0){_627.push("\n");}}}txt=_627.join("");}return txt;};var _62a=function(node){var name=node.nodeName.toLowerCase();var _62b=dojo.trim(_616(node));var tag=_62b.substring(0,_62b.indexOf(">")+1);tag=tag.replace(_60f,"=\"$1\"$2");tag=tag.replace(_610,function(_62c){var sL=_62c.substring(0,6);var _62d=_62c.substring(6,_62c.length);var _62e=_62d.charAt(0);_62d=dojo.trim(_62d.substring(1,_62d.length-1));_62d=_62d.split(";");var _62f=[];dojo.forEach(_62d,function(s){s=dojo.trim(s);if(s){s=s.substring(0,s.indexOf(":")).toLowerCase()+s.substring(s.indexOf(":"),s.length);_62f.push(s);}});_62f=_62f.sort();_62d=_62f.join("; ");var ts=dojo.trim(_62d);if(!ts||ts===";"){return "";}else{_62d+=";";return sL+_62e+_62d+_62e;}});var _630=[];tag=tag.replace(_611,function(attr){_630.push(dojo.trim(attr));return "";});_630=_630.sort();tag="<"+name;if(_630.length){tag+=" "+_630.join(" ");}if(_62b.indexOf("</")!=-1){_60c.push(name);tag+=">";}else{if(_609){tag+=" />";}else{tag+=">";}_60c.push(false);}var _631=_615(name);_60e.push(_631);if(_60d&&!_631){_60a.push(_61c(_60d));_60d="";}if(!_631){_619();_60a.push(tag);_61a();_60b++;}else{_60d+=tag;}};var _632=function(){var _633=_60e.pop();if(_60d&&!_633){_60a.push(_61c(_60d));_60d="";}var ct=_60c.pop();if(ct){ct="</"+ct+">";if(!_633){_60b--;_619();_60a.push(ct);_61a();}else{_60d+=ct;}}else{_60b--;}};var _634=function(n){var _635=_614(n.nodeValue,map);_619();_60a.push("<!--");_61a();_60b++;_60a.push(_61c(_635));_60b--;_619();_60a.push("-->");_61a();};var _636=function(node){var _637=node.childNodes;if(_637){var i;for(i=0;i<_637.length;i++){var n=_637[i];if(n.nodeType===1){var tg=dojo.trim(n.tagName.toLowerCase());if(dojo.isIE&&n.parentNode!=node){continue;}if(tg&&tg.charAt(0)==="/"){continue;}else{_62a(n);if(tg==="script"){_60a.push(_623(n.innerHTML));}else{if(tg==="pre"){var _638=n.innerHTML;if(dojo.isMoz){_638=_638.replace("<br>","\n");_638=_638.replace("<pre>","");_638=_638.replace("</pre>","");}if(_638.charAt(_638.length-1)!=="\n"){_638+="\n";}_60a.push(_638);}else{_636(n);}}_632();}}else{if(n.nodeType===3||n.nodeType===4){_61b(n);}else{if(n.nodeType===8){_634(n);}}}}}};_636(_612);if(_60d){_60a.push(_61c(_60d));_60d="";}return _60a.join("");};}if(!dojo._hasResource["dojox.editor.plugins.PrettyPrint"]){dojo._hasResource["dojox.editor.plugins.PrettyPrint"]=true;dojo.provide("dojox.editor.plugins.PrettyPrint");dojo.declare("dojox.editor.plugins.PrettyPrint",dijit._editor._Plugin,{indentBy:-1,lineLength:-1,useDefaultCommand:false,entityMap:null,_initButton:function(){delete this.command;},setToolbar:function(_639){},setEditor:function(_63a){this.inherited(arguments);var self=this;this.editor.onLoadDeferred.addCallback(function(){self.editor._prettyprint_getValue=self.editor.getValue;self.editor.getValue=function(){var val=self.editor._prettyprint_getValue(arguments);return dojox.html.format.prettyPrint(val,self.indentBy,self.lineLength,self.entityMap,self.xhtml);};self.editor._prettyprint_endEditing=self.editor._endEditing;self.editor._prettyprint_onBlur=self.editor._onBlur;self.editor._endEditing=function(_63b){var v=self.editor._prettyprint_getValue(true);self.editor._undoedSteps=[];self.editor._steps.push({text:v,bookmark:self.editor._getBookmark()});};self.editor._onBlur=function(e){this.inherited("_onBlur",arguments);var _63c=self.editor._prettyprint_getValue(true);if(_63c!=self.editor.savedContent){self.editor.onChange(_63c);self.editor.savedContent=_63c;}};});}});dojo.subscribe(dijit._scopeName+".Editor.getPlugin",null,function(o){if(o.plugin){return;}var name=o.args.name.toLowerCase();if(name==="prettyprint"){o.plugin=new dojox.editor.plugins.PrettyPrint({indentBy:("indentBy" in o.args)?o.args.indentBy:-1,lineLength:("lineLength" in o.args)?o.args.lineLength:-1,entityMap:("entityMap" in o.args)?o.args.entityMap:dojox.html.entities.html.concat([["","cent"],["","pound"],["","euro"],["","yen"],["","copy"],["","sect"],["","hellip"],["","reg"]]),xhtml:("xhtml" in o.args)?o.args.xhtml:false});}});}if(!dojo._hasResource["dojo.number"]){dojo._hasResource["dojo.number"]=true;dojo.provide("dojo.number");dojo.getObject("number",true,dojo);dojo.number.format=function(_63d,_63e){_63e=dojo.mixin({},_63e||{});var _63f=dojo.i18n.normalizeLocale(_63e.locale),_640=dojo.i18n.getLocalization("dojo.cldr","number",_63f);_63e.customs=_640;var _641=_63e.pattern||_640[(_63e.type||"decimal")+"Format"];if(isNaN(_63d)||Math.abs(_63d)==Infinity){return null;}return dojo.number._applyPattern(_63d,_641,_63e);};dojo.number._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/;dojo.number._applyPattern=function(_642,_643,_644){_644=_644||{};var _645=_644.customs.group,_646=_644.customs.decimal,_647=_643.split(";"),_648=_647[0];_643=_647[(_642<0)?1:0]||("-"+_648);if(_643.indexOf("%")!=-1){_642*=100;}else{if(_643.indexOf("")!=-1){_642*=1000;}else{if(_643.indexOf("")!=-1){_645=_644.customs.currencyGroup||_645;_646=_644.customs.currencyDecimal||_646;_643=_643.replace(/\u00a4{1,3}/,function(_649){var prop=["symbol","currency","displayName"][_649.length-1];return _644[prop]||_644.currency||"";});}else{if(_643.indexOf("E")!=-1){throw new Error("exponential notation not supported");}}}}var _64a=dojo.number._numberPatternRE;var _64b=_648.match(_64a);if(!_64b){throw new Error("unable to find a number expression in pattern: "+_643);}if(_644.fractional===false){_644.places=0;}return _643.replace(_64a,dojo.number._formatAbsolute(_642,_64b[0],{decimal:_646,group:_645,places:_644.places,round:_644.round}));};dojo.number.round=function(_64c,_64d,_64e){var _64f=10/(_64e||10);return (_64f*+_64c).toFixed(_64d)/_64f;};if((0.9).toFixed()==0){(function(){var _650=dojo.number.round;dojo.number.round=function(v,p,m){var d=Math.pow(10,-p||0),a=Math.abs(v);if(!v||a>=d||a*Math.pow(10,p+1)<5){d=0;}return _650(v,p,m)+(v>0?d:-d);};})();}dojo.number._formatAbsolute=function(_651,_652,_653){_653=_653||{};if(_653.places===true){_653.places=0;}if(_653.places===Infinity){_653.places=6;}var _654=_652.split("."),_655=typeof _653.places=="string"&&_653.places.indexOf(","),_656=_653.places;if(_655){_656=_653.places.substring(_655+1);}else{if(!(_656>=0)){_656=(_654[1]||[]).length;}}if(!(_653.round<0)){_651=dojo.number.round(_651,_656,_653.round);}var _657=String(Math.abs(_651)).split("."),_658=_657[1]||"";if(_654[1]||_653.places){if(_655){_653.places=_653.places.substring(0,_655);}var pad=_653.places!==undefined?_653.places:(_654[1]&&_654[1].lastIndexOf("0")+1);if(pad>_658.length){_657[1]=dojo.string.pad(_658,pad,"0",true);}if(_656<_658.length){_657[1]=_658.substr(0,_656);}}else{if(_657[1]){_657.pop();}}var _659=_654[0].replace(",","");pad=_659.indexOf("0");if(pad!=-1){pad=_659.length-pad;if(pad>_657[0].length){_657[0]=dojo.string.pad(_657[0],pad);}if(_659.indexOf("#")==-1){_657[0]=_657[0].substr(_657[0].length-pad);}}var _65a=_654[0].lastIndexOf(","),_65b,_65c;if(_65a!=-1){_65b=_654[0].length-_65a-1;var _65d=_654[0].substr(0,_65a);_65a=_65d.lastIndexOf(",");if(_65a!=-1){_65c=_65d.length-_65a-1;}}var _65e=[];for(var _65f=_657[0];_65f;){var off=_65f.length-_65b;_65e.push((off>0)?_65f.substr(off):_65f);_65f=(off>0)?_65f.slice(0,off):"";if(_65c){_65b=_65c;delete _65c;}}_657[0]=_65e.reverse().join(_653.group||",");return _657.join(_653.decimal||".");};dojo.number.regexp=function(_660){return dojo.number._parseInfo(_660).regexp;};dojo.number._parseInfo=function(_661){_661=_661||{};var _662=dojo.i18n.normalizeLocale(_661.locale),_663=dojo.i18n.getLocalization("dojo.cldr","number",_662),_664=_661.pattern||_663[(_661.type||"decimal")+"Format"],_665=_663.group,_666=_663.decimal,_667=1;if(_664.indexOf("%")!=-1){_667/=100;}else{if(_664.indexOf("")!=-1){_667/=1000;}else{var _668=_664.indexOf("")!=-1;if(_668){_665=_663.currencyGroup||_665;_666=_663.currencyDecimal||_666;}}}var _669=_664.split(";");if(_669.length==1){_669.push("-"+_669[0]);}var re=dojo.regexp.buildGroupRE(_669,function(_66a){_66a="(?:"+dojo.regexp.escapeString(_66a,".")+")";return _66a.replace(dojo.number._numberPatternRE,function(_66b){var _66c={signed:false,separator:_661.strict?_665:[_665,""],fractional:_661.fractional,decimal:_666,exponent:false},_66d=_66b.split("."),_66e=_661.places;if(_66d.length==1&&_667!=1){_66d[1]="###";}if(_66d.length==1||_66e===0){_66c.fractional=false;}else{if(_66e===undefined){_66e=_661.pattern?_66d[1].lastIndexOf("0")+1:Infinity;}if(_66e&&_661.fractional==undefined){_66c.fractional=true;}if(!_661.places&&(_66e<_66d[1].length)){_66e+=","+_66d[1].length;}_66c.places=_66e;}var _66f=_66d[0].split(",");if(_66f.length>1){_66c.groupSize=_66f.pop().length;if(_66f.length>1){_66c.groupSize2=_66f.pop().length;}}return "("+dojo.number._realNumberRegexp(_66c)+")";});},true);if(_668){re=re.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(_670,_671,_672,_673){var prop=["symbol","currency","displayName"][_672.length-1],_674=dojo.regexp.escapeString(_661[prop]||_661.currency||"");_671=_671?"[\\s\\xa0]":"";_673=_673?"[\\s\\xa0]":"";if(!_661.strict){if(_671){_671+="*";}if(_673){_673+="*";}return "(?:"+_671+_674+_673+")?";}return _671+_674+_673;});}return {regexp:re.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:_665,decimal:_666,factor:_667};};dojo.number.parse=function(_675,_676){var info=dojo.number._parseInfo(_676),_677=(new RegExp("^"+info.regexp+"$")).exec(_675);if(!_677){return NaN;}var _678=_677[1];if(!_677[1]){if(!_677[2]){return NaN;}_678=_677[2];info.factor*=-1;}_678=_678.replace(new RegExp("["+info.group+"\\s\\xa0"+"]","g"),"").replace(info.decimal,".");return _678*info.factor;};dojo.number._realNumberRegexp=function(_679){_679=_679||{};if(!("places" in _679)){_679.places=Infinity;}if(typeof _679.decimal!="string"){_679.decimal=".";}if(!("fractional" in _679)||/^0/.test(_679.places)){_679.fractional=[true,false];}if(!("exponent" in _679)){_679.exponent=[true,false];}if(!("eSigned" in _679)){_679.eSigned=[true,false];}var _67a=dojo.number._integerRegexp(_679),_67b=dojo.regexp.buildGroupRE(_679.fractional,function(q){var re="";if(q&&(_679.places!==0)){re="\\"+_679.decimal;if(_679.places==Infinity){re="(?:"+re+"\\d+)?";}else{re+="\\d{"+_679.places+"}";}}return re;},true);var _67c=dojo.regexp.buildGroupRE(_679.exponent,function(q){if(q){return "([eE]"+dojo.number._integerRegexp({signed:_679.eSigned})+")";}return "";});var _67d=_67a+_67b;if(_67b){_67d="(?:(?:"+_67d+")|(?:"+_67b+"))";}return _67d+_67c;};dojo.number._integerRegexp=function(_67e){_67e=_67e||{};if(!("signed" in _67e)){_67e.signed=[true,false];}if(!("separator" in _67e)){_67e.separator="";}else{if(!("groupSize" in _67e)){_67e.groupSize=3;}}var _67f=dojo.regexp.buildGroupRE(_67e.signed,function(q){return q?"[-+]":"";},true);var _680=dojo.regexp.buildGroupRE(_67e.separator,function(sep){if(!sep){return "(?:\\d+)";}sep=dojo.regexp.escapeString(sep);if(sep==" "){sep="\\s";}else{if(sep==""){sep="\\s\\xa0";}}var grp=_67e.groupSize,grp2=_67e.groupSize2;if(grp2){var _681="(?:0|[1-9]\\d{0,"+(grp2-1)+"}(?:["+sep+"]\\d{"+grp2+"})*["+sep+"]\\d{"+grp+"})";return ((grp-grp2)>0)?"(?:"+_681+"|(?:0|[1-9]\\d{0,"+(grp-1)+"}))":_681;}return "(?:0|[1-9]\\d{0,"+(grp-1)+"}(?:["+sep+"]\\d{"+grp+"})*)";},true);return _67f+_680;};}if(!dojo._hasResource["dijit.ProgressBar"]){dojo._hasResource["dijit.ProgressBar"]=true;dojo.provide("dijit.ProgressBar");dojo.declare("dijit.ProgressBar",[dijit._Widget,dijit._Templated],{progress:"0",value:"",maximum:100,places:0,indeterminate:false,label:"",name:"",templateString:dojo.cache("dijit","templates/ProgressBar.html","<div class=\"dijitProgressBar dijitProgressBarEmpty\" role=\"progressbar\"\n\t><div  dojoAttachPoint=\"internalProgress\" class=\"dijitProgressBarFull\"\n\t\t><div class=\"dijitProgressBarTile\" role=\"presentation\"></div\n\t\t><span style=\"visibility:hidden\">&nbsp;</span\n\t></div\n\t><div dojoAttachPoint=\"labelNode\" class=\"dijitProgressBarLabel\" id=\"${id}_label\"></div\n\t><img dojoAttachPoint=\"indeterminateHighContrastImage\" class=\"dijitProgressBarIndeterminateHighContrastImage\" alt=\"\"\n/></div>\n"),_indeterminateHighContrastImagePath:dojo.moduleUrl("dijit","themes/a11y/indeterminate_progress.gif"),postMixInProperties:function(){this.inherited(arguments);if(!("value" in this.params)){this.value=this.indeterminate?Infinity:this.progress;}},buildRendering:function(){this.inherited(arguments);this.indeterminateHighContrastImage.setAttribute("src",this._indeterminateHighContrastImagePath.toString());this.update();},update:function(_682){dojo.mixin(this,_682||{});var tip=this.internalProgress,ap=this.domNode;var _683=1;if(this.indeterminate){dijit.removeWaiState(ap,"valuenow");dijit.removeWaiState(ap,"valuemin");dijit.removeWaiState(ap,"valuemax");}else{if(String(this.progress).indexOf("%")!=-1){_683=Math.min(parseFloat(this.progress)/100,1);this.progress=_683*this.maximum;}else{this.progress=Math.min(this.progress,this.maximum);_683=this.progress/this.maximum;}dijit.setWaiState(ap,"describedby",this.labelNode.id);dijit.setWaiState(ap,"valuenow",this.progress);dijit.setWaiState(ap,"valuemin",0);dijit.setWaiState(ap,"valuemax",this.maximum);}this.labelNode.innerHTML=this.report(_683);dojo.toggleClass(this.domNode,"dijitProgressBarIndeterminate",this.indeterminate);tip.style.width=(_683*100)+"%";this.onChange();},_setValueAttr:function(v){this._set("value",v);if(v==Infinity){this.update({indeterminate:true});}else{this.update({indeterminate:false,progress:v});}},_setLabelAttr:function(_684){this._set("label",_684);this.update();},_setIndeterminateAttr:function(_685){this.indeterminate=_685;this.update();},report:function(_686){return this.label?this.label:(this.indeterminate?"&nbsp;":dojo.number.format(_686,{type:"percent",places:this.places,locale:this.lang}));},onChange:function(){}});}if(!dojo._hasResource["dojo.data.util.sorter"]){dojo._hasResource["dojo.data.util.sorter"]=true;dojo.provide("dojo.data.util.sorter");dojo.getObject("data.util.sorter",true,dojo);dojo.data.util.sorter.basicComparator=function(a,b){var r=-1;if(a===null){a=undefined;}if(b===null){b=undefined;}if(a==b){r=0;}else{if(a>b||a==null){r=1;}}return r;};dojo.data.util.sorter.createSortFunction=function(_687,_688){var _689=[];function _68a(attr,dir,comp,s){return function(_68b,_68c){var a=s.getValue(_68b,attr);var b=s.getValue(_68c,attr);return dir*comp(a,b);};};var _68d;var map=_688.comparatorMap;var bc=dojo.data.util.sorter.basicComparator;for(var i=0;i<_687.length;i++){_68d=_687[i];var attr=_68d.attribute;if(attr){var dir=(_68d.descending)?-1:1;var comp=bc;if(map){if(typeof attr!=="string"&&("toString" in attr)){attr=attr.toString();}comp=map[attr]||bc;}_689.push(_68a(attr,dir,comp,_688));}}return function(rowA,rowB){var i=0;while(i<_689.length){var ret=_689[i++](rowA,rowB);if(ret!==0){return ret;}}return 0;};};}if(!dojo._hasResource["dojo.data.util.simpleFetch"]){dojo._hasResource["dojo.data.util.simpleFetch"]=true;dojo.provide("dojo.data.util.simpleFetch");dojo.getObject("data.util.simpleFetch",true,dojo);dojo.data.util.simpleFetch.fetch=function(_68e){_68e=_68e||{};if(!_68e.store){_68e.store=this;}var self=this;var _68f=function(_690,_691){if(_691.onError){var _692=_691.scope||dojo.global;_691.onError.call(_692,_690,_691);}};var _693=function(_694,_695){var _696=_695.abort||null;var _697=false;var _698=_695.start?_695.start:0;var _699=(_695.count&&(_695.count!==Infinity))?(_698+_695.count):_694.length;_695.abort=function(){_697=true;if(_696){_696.call(_695);}};var _69a=_695.scope||dojo.global;if(!_695.store){_695.store=self;}if(_695.onBegin){_695.onBegin.call(_69a,_694.length,_695);}if(_695.sort){_694.sort(dojo.data.util.sorter.createSortFunction(_695.sort,self));}if(_695.onItem){for(var i=_698;(i<_694.length)&&(i<_699);++i){var item=_694[i];if(!_697){_695.onItem.call(_69a,item,_695);}}}if(_695.onComplete&&!_697){var _69b=null;if(!_695.onItem){_69b=_694.slice(_698,_699);}_695.onComplete.call(_69a,_69b,_695);}};this._fetchItems(_68e,_693,_68f);return _68e;};}if(!dojo._hasResource["dojo.data.util.filter"]){dojo._hasResource["dojo.data.util.filter"]=true;dojo.provide("dojo.data.util.filter");dojo.getObject("data.util.filter",true,dojo);dojo.data.util.filter.patternToRegExp=function(_69c,_69d){var rxp="^";var c=null;for(var i=0;i<_69c.length;i++){c=_69c.charAt(i);switch(c){case "\\":rxp+=c;i++;rxp+=_69c.charAt(i);break;case "*":rxp+=".*";break;case "?":rxp+=".";break;case "$":case "^":case "/":case "+":case ".":case "|":case "(":case ")":case "{":case "}":case "[":case "]":rxp+="\\";default:rxp+=c;}}rxp+="$";if(_69d){return new RegExp(rxp,"mi");}else{return new RegExp(rxp,"m");}};}if(!dojo._hasResource["dijit.form.ComboBox"]){dojo._hasResource["dijit.form.ComboBox"]=true;dojo.provide("dijit.form.ComboBox");dojo.declare("dijit.form.ComboBoxMixin",dijit._HasDropDown,{item:null,pageSize:Infinity,store:null,fetchProperties:{},query:{},autoComplete:true,highlightMatch:"first",searchDelay:100,searchAttr:"name",labelAttr:"",labelType:"text",queryExpr:"${0}*",ignoreCase:true,hasDownArrow:true,templateString:dojo.cache("dijit.form","templates/DropDownBox.html","<div class=\"dijit dijitReset dijitInlineTable dijitLeft\"\n\tid=\"widget_${id}\"\n\trole=\"combobox\"\n\t><div class='dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton dijitArrowButtonContainer'\n\t\tdojoAttachPoint=\"_buttonNode, _popupStateNode\" role=\"presentation\"\n\t\t><input class=\"dijitReset dijitInputField dijitArrowButtonInner\" value=\"&#9660; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t\t\t${_buttonInputDisabled}\n\t/></div\n\t><div class='dijitReset dijitValidationContainer'\n\t\t><input class=\"dijitReset dijitInputField dijitValidationIcon dijitValidationInner\" value=\"&#935; \" type=\"text\" tabIndex=\"-1\" readonly=\"readonly\" role=\"presentation\"\n\t/></div\n\t><div class=\"dijitReset dijitInputField dijitInputContainer\"\n\t\t><input class='dijitReset dijitInputInner' ${!nameAttrSetting} type=\"text\" autocomplete=\"off\"\n\t\t\tdojoAttachPoint=\"textbox,focusNode\" role=\"textbox\" aria-haspopup=\"true\"\n\t/></div\n></div>\n"),baseClass:"dijitTextBox dijitComboBox",dropDownClass:"dijit.form._ComboBoxMenu",cssStateNodes:{"_buttonNode":"dijitDownArrowButton"},maxHeight:-1,_stopClickEvents:false,_getCaretPos:function(_69e){var pos=0;if(typeof (_69e.selectionStart)=="number"){pos=_69e.selectionStart;}else{if(dojo.isIE){var tr=dojo.doc.selection.createRange().duplicate();var ntr=_69e.createTextRange();tr.move("character",0);ntr.move("character",0);try{ntr.setEndPoint("EndToEnd",tr);pos=String(ntr.text).replace(/\r/g,"").length;}catch(e){}}}return pos;},_setCaretPos:function(_69f,_6a0){_6a0=parseInt(_6a0);dijit.selectInputText(_69f,_6a0,_6a0);},_setDisabledAttr:function(_6a1){this.inherited(arguments);dijit.setWaiState(this.domNode,"disabled",_6a1);},_abortQuery:function(){if(this.searchTimer){clearTimeout(this.searchTimer);this.searchTimer=null;}if(this._fetchHandle){if(this._fetchHandle.abort){this._fetchHandle.abort();}this._fetchHandle=null;}},_onInput:function(evt){if(!this.searchTimer&&(evt.type=="paste"||evt.type=="input")&&this._lastInput!=this.textbox.value){this.searchTimer=setTimeout(dojo.hitch(this,function(){this._onKey({charOrCode:229});}),100);}this.inherited(arguments);},_onKey:function(evt){var key=evt.charOrCode;if(evt.altKey||((evt.ctrlKey||evt.metaKey)&&(key!="x"&&key!="v"))||key==dojo.keys.SHIFT){return;}var _6a2=false;var pw=this.dropDown;var dk=dojo.keys;var _6a3=null;this._prev_key_backspace=false;this._abortQuery();this.inherited(arguments);if(this._opened){_6a3=pw.getHighlightedOption();}switch(key){case dk.PAGE_DOWN:case dk.DOWN_ARROW:case dk.PAGE_UP:case dk.UP_ARROW:if(this._opened){this._announceOption(_6a3);}dojo.stopEvent(evt);break;case dk.ENTER:if(_6a3){if(_6a3==pw.nextButton){this._nextSearch(1);dojo.stopEvent(evt);break;}else{if(_6a3==pw.previousButton){this._nextSearch(-1);dojo.stopEvent(evt);break;}}}else{this._setBlurValue();this._setCaretPos(this.focusNode,this.focusNode.value.length);}if(this._opened||this._fetchHandle){evt.preventDefault();}case dk.TAB:var _6a4=this.get("displayedValue");if(pw&&(_6a4==pw._messages["previousMessage"]||_6a4==pw._messages["nextMessage"])){break;}if(_6a3){this._selectOption();}if(this._opened){this._lastQuery=null;this.closeDropDown();}break;case " ":if(_6a3){dojo.stopEvent(evt);this._selectOption();this.closeDropDown();}else{_6a2=true;}break;case dk.DELETE:case dk.BACKSPACE:this._prev_key_backspace=true;_6a2=true;break;default:_6a2=typeof key=="string"||key==229;}if(_6a2){this.item=undefined;this.searchTimer=setTimeout(dojo.hitch(this,"_startSearchFromInput"),1);}},_autoCompleteText:function(text){var fn=this.focusNode;dijit.selectInputText(fn,fn.value.length);var _6a5=this.ignoreCase?"toLowerCase":"substr";if(text[_6a5](0).indexOf(this.focusNode.value[_6a5](0))==0){var cpos=this._getCaretPos(fn);if((cpos+1)>fn.value.length){fn.value=text;dijit.selectInputText(fn,cpos);}}else{fn.value=text;dijit.selectInputText(fn);}},_openResultList:function(_6a6,_6a7){this._fetchHandle=null;if(this.disabled||this.readOnly||(_6a7.query[this.searchAttr]!=this._lastQuery)){return;}var _6a8=this.dropDown._highlighted_option&&dojo.hasClass(this.dropDown._highlighted_option,"dijitMenuItemSelected");this.dropDown.clearResultList();if(!_6a6.length&&!this._maxOptions){this.closeDropDown();return;}_6a7._maxOptions=this._maxOptions;var _6a9=this.dropDown.createOptions(_6a6,_6a7,dojo.hitch(this,"_getMenuLabelFromItem"));this._showResultList();if(_6a7.direction){if(1==_6a7.direction){this.dropDown.highlightFirstOption();}else{if(-1==_6a7.direction){this.dropDown.highlightLastOption();}}if(_6a8){this._announceOption(this.dropDown.getHighlightedOption());}}else{if(this.autoComplete&&!this._prev_key_backspace&&!/^[*]+$/.test(_6a7.query[this.searchAttr])){this._announceOption(_6a9[1]);}}},_showResultList:function(){this.closeDropDown(true);this.displayMessage("");this.openDropDown();dijit.setWaiState(this.domNode,"expanded","true");},loadDropDown:function(_6aa){this._startSearchAll();},isLoaded:function(){return false;},closeDropDown:function(){this._abortQuery();if(this._opened){this.inherited(arguments);dijit.setWaiState(this.domNode,"expanded","false");dijit.removeWaiState(this.focusNode,"activedescendant");}},_setBlurValue:function(){var _6ab=this.get("displayedValue");var pw=this.dropDown;if(pw&&(_6ab==pw._messages["previousMessage"]||_6ab==pw._messages["nextMessage"])){this._setValueAttr(this._lastValueReported,true);}else{if(typeof this.item=="undefined"){this.item=null;this.set("displayedValue",_6ab);}else{if(this.value!=this._lastValueReported){dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);}this._refreshState();}}},_onBlur:function(){this.closeDropDown();this.inherited(arguments);},_setItemAttr:function(item,_6ac,_6ad){if(!_6ad){_6ad=this.store.getValue(item,this.searchAttr);}var _6ae=this._getValueField()!=this.searchAttr?this.store.getIdentity(item):_6ad;this._set("item",item);dijit.form.ComboBox.superclass._setValueAttr.call(this,_6ae,_6ac,_6ad);},_announceOption:function(node){if(!node){return;}var _6af;if(node==this.dropDown.nextButton||node==this.dropDown.previousButton){_6af=node.innerHTML;this.item=undefined;this.value="";}else{_6af=this.store.getValue(node.item,this.searchAttr).toString();this.set("item",node.item,false,_6af);}this.focusNode.value=this.focusNode.value.substring(0,this._lastInput.length);dijit.setWaiState(this.focusNode,"activedescendant",dojo.attr(node,"id"));this._autoCompleteText(_6af);},_selectOption:function(evt){if(evt){this._announceOption(evt.target);}this.closeDropDown();this._setCaretPos(this.focusNode,this.focusNode.value.length);dijit.form._FormValueWidget.prototype._setValueAttr.call(this,this.value,true);},_startSearchAll:function(){this._startSearch("");},_startSearchFromInput:function(){this._startSearch(this.focusNode.value.replace(/([\\\*\?])/g,"\\$1"));},_getQueryString:function(text){return dojo.string.substitute(this.queryExpr,[text]);},_startSearch:function(key){if(!this.dropDown){var _6b0=this.id+"_popup",_6b1=dojo.getObject(this.dropDownClass,false);this.dropDown=new _6b1({onChange:dojo.hitch(this,this._selectOption),id:_6b0,dir:this.dir});dijit.removeWaiState(this.focusNode,"activedescendant");dijit.setWaiState(this.textbox,"owns",_6b0);}var _6b2=dojo.clone(this.query);this._lastInput=key;this._lastQuery=_6b2[this.searchAttr]=this._getQueryString(key);this.searchTimer=setTimeout(dojo.hitch(this,function(_6b3,_6b4){this.searchTimer=null;var _6b5={queryOptions:{ignoreCase:this.ignoreCase,deep:true},query:_6b3,onBegin:dojo.hitch(this,"_setMaxOptions"),onComplete:dojo.hitch(this,"_openResultList"),onError:function(_6b6){_6b4._fetchHandle=null;console.error("dijit.form.ComboBox: "+_6b6);_6b4.closeDropDown();},start:0,count:this.pageSize};dojo.mixin(_6b5,_6b4.fetchProperties);this._fetchHandle=_6b4.store.fetch(_6b5);var _6b7=function(_6b8,_6b9){_6b8.start+=_6b8.count*_6b9;_6b8.direction=_6b9;this._fetchHandle=this.store.fetch(_6b8);this.focus();};this._nextSearch=this.dropDown.onPage=dojo.hitch(this,_6b7,this._fetchHandle);},_6b2,this),this.searchDelay);},_setMaxOptions:function(size,_6ba){this._maxOptions=size;},_getValueField:function(){return this.searchAttr;},constructor:function(){this.query={};this.fetchProperties={};},postMixInProperties:function(){if(!this.store){var _6bb=this.srcNodeRef;this.store=new dijit.form._ComboBoxDataStore(_6bb);if(!("value" in this.params)){var item=(this.item=this.store.fetchSelectedItem());if(item){var _6bc=this._getValueField();this.value=this.store.getValue(item,_6bc);}}}this.inherited(arguments);},postCreate:function(){var _6bd=dojo.query("label[for=\""+this.id+"\"]");if(_6bd.length){_6bd[0].id=(this.id+"_label");dijit.setWaiState(this.domNode,"labelledby",_6bd[0].id);}this.inherited(arguments);},_setHasDownArrowAttr:function(val){this.hasDownArrow=val;this._buttonNode.style.display=val?"":"none";},_getMenuLabelFromItem:function(item){var _6be=this.labelFunc(item,this.store),_6bf=this.labelType;if(this.highlightMatch!="none"&&this.labelType=="text"&&this._lastInput){_6be=this.doHighlight(_6be,this._escapeHtml(this._lastInput));_6bf="html";}return {html:_6bf=="html",label:_6be};},doHighlight:function(_6c0,find){var _6c1=(this.ignoreCase?"i":"")+(this.highlightMatch=="all"?"g":""),i=this.queryExpr.indexOf("${0}");find=dojo.regexp.escapeString(find);return this._escapeHtml(_6c0).replace(new RegExp((i==0?"^":"")+"("+find+")"+(i==(this.queryExpr.length-4)?"$":""),_6c1),"<span class=\"dijitComboBoxHighlightMatch\">$1</span>");},_escapeHtml:function(str){str=String(str).replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;");return str;},reset:function(){this.item=null;this.inherited(arguments);},labelFunc:function(item,_6c2){return _6c2.getValue(item,this.labelAttr||this.searchAttr).toString();}});dojo.declare("dijit.form._ComboBoxMenu",[dijit._Widget,dijit._Templated,dijit._CssStateMixin],{templateString:"<ul class='dijitReset dijitMenu' dojoAttachEvent='onmousedown:_onMouseDown,onmouseup:_onMouseUp,onmouseover:_onMouseOver,onmouseout:_onMouseOut' style='overflow: \"auto\"; overflow-x: \"hidden\";'>"+"<li class='dijitMenuItem dijitMenuPreviousButton' dojoAttachPoint='previousButton' role='option'></li>"+"<li class='dijitMenuItem dijitMenuNextButton' dojoAttachPoint='nextButton' role='option'></li>"+"</ul>",_messages:null,baseClass:"dijitComboBoxMenu",postMixInProperties:function(){this.inherited(arguments);this._messages=dojo.i18n.getLocalization("dijit.form","ComboBox",this.lang);},buildRendering:function(){this.inherited(arguments);this.previousButton.innerHTML=this._messages["previousMessage"];this.nextButton.innerHTML=this._messages["nextMessage"];},_setValueAttr:function(_6c3){this.value=_6c3;this.onChange(_6c3);},onChange:function(_6c4){},onPage:function(_6c5){},onClose:function(){this._blurOptionNode();},_createOption:function(item,_6c6){var _6c7=dojo.create("li",{"class":"dijitReset dijitMenuItem"+(this.isLeftToRight()?"":" dijitMenuItemRtl"),role:"option"});var _6c8=_6c6(item);if(_6c8.html){_6c7.innerHTML=_6c8.label;}else{_6c7.appendChild(dojo.doc.createTextNode(_6c8.label));}if(_6c7.innerHTML==""){_6c7.innerHTML="&nbsp;";}_6c7.item=item;return _6c7;},createOptions:function(_6c9,_6ca,_6cb){this.previousButton.style.display=(_6ca.start==0)?"none":"";dojo.attr(this.previousButton,"id",this.id+"_prev");dojo.forEach(_6c9,function(item,i){var _6cc=this._createOption(item,_6cb);dojo.attr(_6cc,"id",this.id+i);this.domNode.insertBefore(_6cc,this.nextButton);},this);var _6cd=false;if(_6ca._maxOptions&&_6ca._maxOptions!=-1){if((_6ca.start+_6ca.count)<_6ca._maxOptions){_6cd=true;}else{if((_6ca.start+_6ca.count)>_6ca._maxOptions&&_6ca.count==_6c9.length){_6cd=true;}}}else{if(_6ca.count==_6c9.length){_6cd=true;}}this.nextButton.style.display=_6cd?"":"none";dojo.attr(this.nextButton,"id",this.id+"_next");return this.domNode.childNodes;},clearResultList:function(){while(this.domNode.childNodes.length>2){this.domNode.removeChild(this.domNode.childNodes[this.domNode.childNodes.length-2]);}this._blurOptionNode();},_onMouseDown:function(evt){dojo.stopEvent(evt);},_onMouseUp:function(evt){if(evt.target===this.domNode||!this._highlighted_option){return;}else{if(evt.target==this.previousButton){this._blurOptionNode();this.onPage(-1);}else{if(evt.target==this.nextButton){this._blurOptionNode();this.onPage(1);}else{var tgt=evt.target;while(!tgt.item){tgt=tgt.parentNode;}this._setValueAttr({target:tgt},true);}}}},_onMouseOver:function(evt){if(evt.target===this.domNode){return;}var tgt=evt.target;if(!(tgt==this.previousButton||tgt==this.nextButton)){while(!tgt.item){tgt=tgt.parentNode;}}this._focusOptionNode(tgt);},_onMouseOut:function(evt){if(evt.target===this.domNode){return;}this._blurOptionNode();},_focusOptionNode:function(node){if(this._highlighted_option!=node){this._blurOptionNode();this._highlighted_option=node;dojo.addClass(this._highlighted_option,"dijitMenuItemSelected");}},_blurOptionNode:function(){if(this._highlighted_option){dojo.removeClass(this._highlighted_option,"dijitMenuItemSelected");this._highlighted_option=null;}},_highlightNextOption:function(){if(!this.getHighlightedOption()){var fc=this.domNode.firstChild;this._focusOptionNode(fc.style.display=="none"?fc.nextSibling:fc);}else{var ns=this._highlighted_option.nextSibling;if(ns&&ns.style.display!="none"){this._focusOptionNode(ns);}else{this.highlightFirstOption();}}dojo.window.scrollIntoView(this._highlighted_option);},highlightFirstOption:function(){var _6ce=this.domNode.firstChild;var _6cf=_6ce.nextSibling;this._focusOptionNode(_6cf.style.display=="none"?_6ce:_6cf);dojo.window.scrollIntoView(this._highlighted_option);},highlightLastOption:function(){this._focusOptionNode(this.domNode.lastChild.previousSibling);dojo.window.scrollIntoView(this._highlighted_option);},_highlightPrevOption:function(){if(!this.getHighlightedOption()){var lc=this.domNode.lastChild;this._focusOptionNode(lc.style.display=="none"?lc.previousSibling:lc);}else{var ps=this._highlighted_option.previousSibling;if(ps&&ps.style.display!="none"){this._focusOptionNode(ps);}else{this.highlightLastOption();}}dojo.window.scrollIntoView(this._highlighted_option);},_page:function(up){var _6d0=0;var _6d1=this.domNode.scrollTop;var _6d2=dojo.style(this.domNode,"height");if(!this.getHighlightedOption()){this._highlightNextOption();}while(_6d0<_6d2){if(up){if(!this.getHighlightedOption().previousSibling||this._highlighted_option.previousSibling.style.display=="none"){break;}this._highlightPrevOption();}else{if(!this.getHighlightedOption().nextSibling||this._highlighted_option.nextSibling.style.display=="none"){break;}this._highlightNextOption();}var _6d3=this.domNode.scrollTop;_6d0+=(_6d3-_6d1)*(up?-1:1);_6d1=_6d3;}},pageUp:function(){this._page(true);},pageDown:function(){this._page(false);},getHighlightedOption:function(){var ho=this._highlighted_option;return (ho&&ho.parentNode)?ho:null;},handleKey:function(evt){switch(evt.charOrCode){case dojo.keys.DOWN_ARROW:this._highlightNextOption();return false;case dojo.keys.PAGE_DOWN:this.pageDown();return false;case dojo.keys.UP_ARROW:this._highlightPrevOption();return false;case dojo.keys.PAGE_UP:this.pageUp();return false;default:return true;}}});dojo.declare("dijit.form.ComboBox",[dijit.form.ValidationTextBox,dijit.form.ComboBoxMixin],{_setValueAttr:function(_6d4,_6d5,_6d6){this._set("item",null);if(!_6d4){_6d4="";}dijit.form.ValidationTextBox.prototype._setValueAttr.call(this,_6d4,_6d5,_6d6);}});dojo.declare("dijit.form._ComboBoxDataStore",null,{constructor:function(root){this.root=root;if(root.tagName!="SELECT"&&root.firstChild){root=dojo.query("select",root);if(root.length>0){root=root[0];}else{this.root.innerHTML="<SELECT>"+this.root.innerHTML+"</SELECT>";root=this.root.firstChild;}this.root=root;}dojo.query("> option",root).forEach(function(node){node.innerHTML=dojo.trim(node.innerHTML);});},getValue:function(item,_6d7,_6d8){return (_6d7=="value")?item.value:(item.innerText||item.textContent||"");},isItemLoaded:function(_6d9){return true;},getFeatures:function(){return {"dojo.data.api.Read":true,"dojo.data.api.Identity":true};},_fetchItems:function(args,_6da,_6db){if(!args.query){args.query={};}if(!args.query.name){args.query.name="";}if(!args.queryOptions){args.queryOptions={};}var _6dc=dojo.data.util.filter.patternToRegExp(args.query.name,args.queryOptions.ignoreCase),_6dd=dojo.query("> option",this.root).filter(function(_6de){return (_6de.innerText||_6de.textContent||"").match(_6dc);});if(args.sort){_6dd.sort(dojo.data.util.sorter.createSortFunction(args.sort,this));}_6da(_6dd,args);},close:function(_6df){return;},getLabel:function(item){return item.innerHTML;},getIdentity:function(item){return dojo.attr(item,"value");},fetchItemByIdentity:function(args){var item=dojo.query("> option[value='"+args.identity+"']",this.root)[0];args.onItem(item);},fetchSelectedItem:function(){var root=this.root,si=root.selectedIndex;return typeof si=="number"?dojo.query("> option:nth-child("+(si!=-1?si+1:1)+")",root)[0]:null;}});dojo.extend(dijit.form._ComboBoxDataStore,dojo.data.util.simpleFetch);}if(!dojo._hasResource["dijit.form.SimpleTextarea"]){dojo._hasResource["dijit.form.SimpleTextarea"]=true;dojo.provide("dijit.form.SimpleTextarea");dojo.declare("dijit.form.SimpleTextarea",dijit.form.TextBox,{baseClass:"dijitTextBox dijitTextArea",attributeMap:dojo.delegate(dijit.form._FormValueWidget.prototype.attributeMap,{rows:"textbox",cols:"textbox"}),rows:"3",cols:"20",templateString:"<textarea ${!nameAttrSetting} dojoAttachPoint='focusNode,containerNode,textbox' autocomplete='off'></textarea>",postMixInProperties:function(){if(!this.value&&this.srcNodeRef){this.value=this.srcNodeRef.value;}this.inherited(arguments);},buildRendering:function(){this.inherited(arguments);if(dojo.isIE&&this.cols){dojo.addClass(this.textbox,"dijitTextAreaCols");}},filter:function(_6e0){if(_6e0){_6e0=_6e0.replace(/\r/g,"");}return this.inherited(arguments);},_previousValue:"",_onInput:function(e){if(this.maxLength){var _6e1=parseInt(this.maxLength);var _6e2=this.textbox.value.replace(/\r/g,"");var _6e3=_6e2.length-_6e1;if(_6e3>0){if(e){dojo.stopEvent(e);}var _6e4=this.textbox;if(_6e4.selectionStart){var pos=_6e4.selectionStart;var cr=0;if(dojo.isOpera){cr=(this.textbox.value.substring(0,pos).match(/\r/g)||[]).length;}this.textbox.value=_6e2.substring(0,pos-_6e3-cr)+_6e2.substring(pos-cr);_6e4.setSelectionRange(pos-_6e3,pos-_6e3);}else{if(dojo.doc.selection){_6e4.focus();var _6e5=dojo.doc.selection.createRange();_6e5.moveStart("character",-_6e3);_6e5.text="";_6e5.select();}}}this._previousValue=this.textbox.value;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.form.Textarea"]){dojo._hasResource["dijit.form.Textarea"]=true;dojo.provide("dijit.form.Textarea");dojo.declare("dijit.form.Textarea",dijit.form.SimpleTextarea,{baseClass:"dijitTextBox dijitTextArea dijitExpandingTextArea",cols:"",_previousNewlines:0,_strictMode:(dojo.doc.compatMode!="BackCompat"),_getHeight:function(_6e6){var newH=_6e6.scrollHeight;if(dojo.isIE){newH+=_6e6.offsetHeight-_6e6.clientHeight-((dojo.isIE<8&&this._strictMode)?dojo._getPadBorderExtents(_6e6).h:0);}else{if(dojo.isMoz){newH+=_6e6.offsetHeight-_6e6.clientHeight;}else{if(dojo.isWebKit){newH+=dojo._getBorderExtents(_6e6).h;}else{newH+=dojo._getPadBorderExtents(_6e6).h;}}}return newH;},_estimateHeight:function(_6e7){_6e7.style.maxHeight="";_6e7.style.height="auto";_6e7.rows=(_6e7.value.match(/\n/g)||[]).length+1;},_needsHelpShrinking:dojo.isMoz||dojo.isWebKit,_onInput:function(){this.inherited(arguments);if(this._busyResizing){return;}this._busyResizing=true;var _6e8=this.textbox;if(_6e8.scrollHeight&&_6e8.offsetHeight&&_6e8.clientHeight){var newH=this._getHeight(_6e8)+"px";if(_6e8.style.height!=newH){_6e8.style.maxHeight=_6e8.style.height=newH;}if(this._needsHelpShrinking){if(this._setTimeoutHandle){clearTimeout(this._setTimeoutHandle);}this._setTimeoutHandle=setTimeout(dojo.hitch(this,"_shrink"),0);}}else{this._estimateHeight(_6e8);}this._busyResizing=false;},_busyResizing:false,_shrink:function(){this._setTimeoutHandle=null;if(this._needsHelpShrinking&&!this._busyResizing){this._busyResizing=true;var _6e9=this.textbox;var _6ea=false;if(_6e9.value==""){_6e9.value=" ";_6ea=true;}var _6eb=_6e9.scrollHeight;if(!_6eb){this._estimateHeight(_6e9);}else{var _6ec=_6e9.style.paddingBottom;var _6ed=dojo._getPadExtents(_6e9);_6ed=_6ed.h-_6ed.t;_6e9.style.paddingBottom=_6ed+1+"px";var newH=this._getHeight(_6e9)-1+"px";if(_6e9.style.maxHeight!=newH){_6e9.style.paddingBottom=_6ed+_6eb+"px";_6e9.scrollTop=0;_6e9.style.maxHeight=this._getHeight(_6e9)-_6eb+"px";}_6e9.style.paddingBottom=_6ec;}if(_6ea){_6e9.value="";}this._busyResizing=false;}},resize:function(){this._onInput();},_setValueAttr:function(){this.inherited(arguments);this.resize();},buildRendering:function(){this.inherited(arguments);dojo.style(this.textbox,{overflowY:"hidden",overflowX:"auto",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"});},postCreate:function(){this.inherited(arguments);this.connect(this.textbox,"onscroll","_onInput");this.connect(this.textbox,"onresize","_onInput");this.connect(this.textbox,"onfocus","_onInput");this._setTimeoutHandle=setTimeout(dojo.hitch(this,"resize"),0);},uninitialize:function(){if(this._setTimeoutHandle){clearTimeout(this._setTimeoutHandle);}this.inherited(arguments);}});}if(!dojo._hasResource["soliant.widget.ErrorReporter"]){dojo._hasResource["soliant.widget.ErrorReporter"]=true;dojo.provide("soliant.widget.ErrorReporter");dojo.declare("soliant.widget.ErrorReporter",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,keyName:"",formId:"",studentId:"",user:"",pageNumber:"",url:"/error-reporting/report",templateString:dojo.cache("soliant.widget","ErrorReporter/ErrorReporter.html","<div dojoType=\"soliant.widget.ErrorReporter\">\n    \n\t<button dojoType=\"dijit.form.Button\" dojoattachevent=\"onClick: showErrorReportDialog\" type=\"button\">Report Error</button>\n    \n    <div dojoType=\"dijit.Dialog\" title=\"Error Report\" dojoAttachPoint=\"dialogOne\">\n\t    <div dojoType=\"dijit.form.Form\" dojoAttachPoint=\"formOne\">\n\t\t    <div>User: ${user}</div>\n\t\t    <div>Form: ${keyName}</div>\n\t\t    <div >Form ID: ${formId}</div>\n\t\t    <div>Please provide a complete description of the problems you are having.</div> \n\t\t\t\n\t\t\t<textarea id=\"errorDescription\" name=\"errorDescription\" dojoType=\"dijit.form.Textarea\" style=\"min-height:100px;\"></textarea>\n\t\t\t<button dojoType=\"dijit.form.Button\" dojoattachevent=\"onClick: closeDialog\">Cancel</button>\n\t\t\t<button dojoType=\"dijit.form.Button\" dojoattachevent=\"onClick: saveErrorReport\">Submit</button>\n\t\t\t\n\t\t\t<input type=\"hidden\" id=\"formNumber\" name=\"formNumber\" value=\"${keyName}\" dojoType=\"dijit.form.TextBox\">\n\t\t\t<input type=\"hidden\" id=\"formId\" name=\"formId\" value=\"${formId}\" dojoType=\"dijit.form.TextBox\">\n\t\t\t<input type=\"hidden\" id=\"pageNumber\" name=\"pageNumber\" value=\"${pageNumber}\" dojoType=\"dijit.form.TextBox\">\n\t\t\t<input type=\"hidden\" id=\"studentId\" name=\"studentId\" value=\"${studentId}\" dojoType=\"dijit.form.TextBox\">\n\t    </div>\n\t</div>\n</div>\n"),showErrorReportDialog:function(evt){this.dialogOne.show();},closeDialog:function(evt){this.dialogOne.hide();},saveErrorReport:function(evt){this.dialogOne.hide();submitObj=new Object();data=this.formOne.getValues();data["link"]=document.URL;submitObj.data=dojo.toJson(data);var _6ee={content:submitObj,handleAs:"json",url:this.url,sync:true,load:function(data,_6ef){var _6f0=data.items;var _6f1=_6f0[0]["id_editor_data"];alert("Your error request has been submitted.");},error:function(data,_6f2){console.debug("error");alert("There was an error while trying to submit your issue. Please contact an administrator.");}};var _6f3=dojo.xhrPost(_6ee);}});}if(!dojo._hasResource["dijit.form._FormSelectWidget"]){dojo._hasResource["dijit.form._FormSelectWidget"]=true;dojo.provide("dijit.form._FormSelectWidget");dojo.declare("dijit.form._FormSelectWidget",dijit.form._FormValueWidget,{multiple:false,options:null,store:null,query:null,queryOptions:null,onFetch:null,sortByLabel:true,loadChildrenOnOpen:false,getOptions:function(_6f4){var _6f5=_6f4,opts=this.options||[],l=opts.length;if(_6f5===undefined){return opts;}if(dojo.isArray(_6f5)){return dojo.map(_6f5,"return this.getOptions(item);",this);}if(dojo.isObject(_6f4)){if(!dojo.some(this.options,function(o,idx){if(o===_6f5||(o.value&&o.value===_6f5.value)){_6f5=idx;return true;}return false;})){_6f5=-1;}}if(typeof _6f5=="string"){for(var i=0;i<l;i++){if(opts[i].value===_6f5){_6f5=i;break;}}}if(typeof _6f5=="number"&&_6f5>=0&&_6f5<l){return this.options[_6f5];}return null;},addOption:function(_6f6){if(!dojo.isArray(_6f6)){_6f6=[_6f6];}dojo.forEach(_6f6,function(i){if(i&&dojo.isObject(i)){this.options.push(i);}},this);this._loadChildren();},removeOption:function(_6f7){if(!dojo.isArray(_6f7)){_6f7=[_6f7];}var _6f8=this.getOptions(_6f7);dojo.forEach(_6f8,function(i){if(i){this.options=dojo.filter(this.options,function(node,idx){return (node.value!==i.value||node.label!==i.label);});this._removeOptionItem(i);}},this);this._loadChildren();},updateOption:function(_6f9){if(!dojo.isArray(_6f9)){_6f9=[_6f9];}dojo.forEach(_6f9,function(i){var _6fa=this.getOptions(i),k;if(_6fa){for(k in i){_6fa[k]=i[k];}}},this);this._loadChildren();},setStore:function(_6fb,_6fc,_6fd){var _6fe=this.store;_6fd=_6fd||{};if(_6fe!==_6fb){dojo.forEach(this._notifyConnections||[],dojo.disconnect);delete this._notifyConnections;if(_6fb&&_6fb.getFeatures()["dojo.data.api.Notification"]){this._notifyConnections=[dojo.connect(_6fb,"onNew",this,"_onNewItem"),dojo.connect(_6fb,"onDelete",this,"_onDeleteItem"),dojo.connect(_6fb,"onSet",this,"_onSetItem")];}this._set("store",_6fb);}this._onChangeActive=false;if(this.options&&this.options.length){this.removeOption(this.options);}if(_6fb){this._loadingStore=true;_6fb.fetch(dojo.delegate(_6fd,{onComplete:function(_6ff,opts){if(this.sortByLabel&&!_6fd.sort&&_6ff.length){_6ff.sort(dojo.data.util.sorter.createSortFunction([{attribute:_6fb.getLabelAttributes(_6ff[0])[0]}],_6fb));}if(_6fd.onFetch){_6ff=_6fd.onFetch.call(this,_6ff,opts);}dojo.forEach(_6ff,function(i){this._addOptionForItem(i);},this);this._loadingStore=false;this.set("value","_pendingValue" in this?this._pendingValue:_6fc);delete this._pendingValue;if(!this.loadChildrenOnOpen){this._loadChildren();}else{this._pseudoLoadChildren(_6ff);}this._fetchedWith=opts;this._lastValueReported=this.multiple?[]:null;this._onChangeActive=true;this.onSetStore();this._handleOnChange(this.value);},scope:this}));}else{delete this._fetchedWith;}return _6fe;},_setValueAttr:function(_700,_701){if(this._loadingStore){this._pendingValue=_700;return;}var opts=this.getOptions()||[];if(!dojo.isArray(_700)){_700=[_700];}dojo.forEach(_700,function(i,idx){if(!dojo.isObject(i)){i=i+"";}if(typeof i==="string"){_700[idx]=dojo.filter(opts,function(node){return node.value===i;})[0]||{value:"",label:""};}},this);_700=dojo.filter(_700,function(i){return i&&i.value;});if(!this.multiple&&(!_700[0]||!_700[0].value)&&opts.length){_700[0]=opts[0];}dojo.forEach(opts,function(i){i.selected=dojo.some(_700,function(v){return v.value===i.value;});});var val=dojo.map(_700,function(i){return i.value;}),disp=dojo.map(_700,function(i){return i.label;});this._set("value",this.multiple?val:val[0]);this._setDisplay(this.multiple?disp:disp[0]);this._updateSelection();this._handleOnChange(this.value,_701);},_getDisplayedValueAttr:function(){var val=this.get("value");if(!dojo.isArray(val)){val=[val];}var ret=dojo.map(this.getOptions(val),function(v){if(v&&"label" in v){return v.label;}else{if(v){return v.value;}}return null;},this);return this.multiple?ret:ret[0];},_loadChildren:function(){if(this._loadingStore){return;}dojo.forEach(this._getChildren(),function(_702){_702.destroyRecursive();});dojo.forEach(this.options,this._addOptionItem,this);this._updateSelection();},_updateSelection:function(){this._set("value",this._getValueFromOpts());var val=this.value;if(!dojo.isArray(val)){val=[val];}if(val&&val[0]){dojo.forEach(this._getChildren(),function(_703){var _704=dojo.some(val,function(v){return _703.option&&(v===_703.option.value);});dojo.toggleClass(_703.domNode,this.baseClass+"SelectedOption",_704);dijit.setWaiState(_703.domNode,"selected",_704);},this);}},_getValueFromOpts:function(){var opts=this.getOptions()||[];if(!this.multiple&&opts.length){var opt=dojo.filter(opts,function(i){return i.selected;})[0];if(opt&&opt.value){return opt.value;}else{opts[0].selected=true;return opts[0].value;}}else{if(this.multiple){return dojo.map(dojo.filter(opts,function(i){return i.selected;}),function(i){return i.value;})||[];}}return "";},_onNewItem:function(item,_705){if(!_705||!_705.parent){this._addOptionForItem(item);}},_onDeleteItem:function(item){var _706=this.store;this.removeOption(_706.getIdentity(item));},_onSetItem:function(item){this.updateOption(this._getOptionObjForItem(item));},_getOptionObjForItem:function(item){var _707=this.store,_708=_707.getLabel(item),_709=(_708?_707.getIdentity(item):null);return {value:_709,label:_708,item:item};},_addOptionForItem:function(item){var _70a=this.store;if(!_70a.isItemLoaded(item)){_70a.loadItem({item:item,onComplete:function(i){this._addOptionForItem(item);},scope:this});return;}var _70b=this._getOptionObjForItem(item);this.addOption(_70b);},constructor:function(_70c){this._oValue=(_70c||{}).value||null;},buildRendering:function(){this.inherited(arguments);dojo.setSelectable(this.focusNode,false);},_fillContent:function(){var opts=this.options;if(!opts){opts=this.options=this.srcNodeRef?dojo.query(">",this.srcNodeRef).map(function(node){if(node.getAttribute("type")==="separator"){return {value:"",label:"",selected:false,disabled:false};}return {value:(node.getAttribute("data-"+dojo._scopeName+"-value")||node.getAttribute("value")),label:String(node.innerHTML),selected:node.getAttribute("selected")||false,disabled:node.getAttribute("disabled")||false};},this):[];}if(!this.value){this._set("value",this._getValueFromOpts());}else{if(this.multiple&&typeof this.value=="string"){this_set("value",this.value.split(","));}}},postCreate:function(){this.inherited(arguments);this.connect(this,"onChange","_updateSelection");this.connect(this,"startup","_loadChildren");this._setValueAttr(this.value,null);},startup:function(){this.inherited(arguments);var _70d=this.store,_70e={};dojo.forEach(["query","queryOptions","onFetch"],function(i){if(this[i]){_70e[i]=this[i];}delete this[i];},this);if(_70d&&_70d.getFeatures()["dojo.data.api.Identity"]){this.store=null;this.setStore(_70d,this._oValue,_70e);}},destroy:function(){dojo.forEach(this._notifyConnections||[],dojo.disconnect);this.inherited(arguments);},_addOptionItem:function(_70f){},_removeOptionItem:function(_710){},_setDisplay:function(_711){},_getChildren:function(){return [];},_getSelectedOptionsAttr:function(){return this.getOptions(this.get("value"));},_pseudoLoadChildren:function(_712){},onSetStore:function(){}});}if(!dojo._hasResource["dijit.form.Select"]){dojo._hasResource["dijit.form.Select"]=true;dojo.provide("dijit.form.Select");dojo.declare("dijit.form._SelectMenu",dijit.Menu,{buildRendering:function(){this.inherited(arguments);var o=(this.menuTableNode=this.domNode);var n=(this.domNode=dojo.create("div",{style:{overflowX:"hidden",overflowY:"scroll"}}));if(o.parentNode){o.parentNode.replaceChild(n,o);}dojo.removeClass(o,"dijitMenuTable");n.className=o.className+" dijitSelectMenu";o.className="dijitReset dijitMenuTable";dijit.setWaiRole(o,"listbox");dijit.setWaiRole(n,"presentation");n.appendChild(o);},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",dojo.stopEvent);},resize:function(mb){if(mb){dojo.marginBox(this.domNode,mb);if("w" in mb){this.menuTableNode.style.width="100%";}}}});dojo.declare("dijit.form.Select",[dijit.form._FormSelectWidget,dijit._HasDropDown],{baseClass:"dijitSelect",templateString:dojo.cache("dijit.form","templates/Select.html","<table class=\"dijit dijitReset dijitInline dijitLeft\"\n\tdojoAttachPoint=\"_buttonNode,tableNode,focusNode\" cellspacing='0' cellpadding='0'\n\trole=\"combobox\" aria-haspopup=\"true\"\n\t><tbody role=\"presentation\"><tr role=\"presentation\"\n\t\t><td class=\"dijitReset dijitStretch dijitButtonContents dijitButtonNode\" role=\"presentation\"\n\t\t\t><span class=\"dijitReset dijitInline dijitButtonText\"  dojoAttachPoint=\"containerNode,_popupStateNode\"></span\n\t\t\t><input type=\"hidden\" ${!nameAttrSetting} dojoAttachPoint=\"valueNode\" value=\"${value}\" aria-hidden=\"true\"\n\t\t/></td><td class=\"dijitReset dijitRight dijitButtonNode dijitArrowButton dijitDownArrowButton\"\n\t\t\t\tdojoAttachPoint=\"titleNode\" role=\"presentation\"\n\t\t\t><div class=\"dijitReset dijitArrowButtonInner\" role=\"presentation\"></div\n\t\t\t><div class=\"dijitReset dijitArrowButtonChar\" role=\"presentation\">&#9660;</div\n\t\t></td\n\t></tr></tbody\n></table>\n"),attributeMap:dojo.mixin(dojo.clone(dijit.form._FormSelectWidget.prototype.attributeMap),{style:"tableNode"}),required:false,state:"",message:"",tooltipPosition:[],emptyLabel:"&nbsp;",_isLoaded:false,_childrenLoaded:false,_fillContent:function(){this.inherited(arguments);if(this.options.length&&!this.value&&this.srcNodeRef){var si=this.srcNodeRef.selectedIndex||0;this.value=this.options[si>=0?si:0].value;}this.dropDown=new dijit.form._SelectMenu({id:this.id+"_menu"});dojo.addClass(this.dropDown.domNode,this.baseClass+"Menu");},_getMenuItemForOption:function(_713){if(!_713.value&&!_713.label){return new dijit.MenuSeparator();}else{var _714=dojo.hitch(this,"_setValueAttr",_713);var item=new dijit.MenuItem({option:_713,label:_713.label||this.emptyLabel,onClick:_714,disabled:_713.disabled||false});dijit.setWaiRole(item.focusNode,"listitem");return item;}},_addOptionItem:function(_715){if(this.dropDown){this.dropDown.addChild(this._getMenuItemForOption(_715));}},_getChildren:function(){if(!this.dropDown){return [];}return this.dropDown.getChildren();},_loadChildren:function(_716){if(_716===true){if(this.dropDown){delete this.dropDown.focusedChild;}if(this.options.length){this.inherited(arguments);}else{dojo.forEach(this._getChildren(),function(_717){_717.destroyRecursive();});var item=new dijit.MenuItem({label:"&nbsp;"});this.dropDown.addChild(item);}}else{this._updateSelection();}this._isLoaded=false;this._childrenLoaded=true;if(!this._loadingStore){this._setValueAttr(this.value);}},_setValueAttr:function(_718){this.inherited(arguments);dojo.attr(this.valueNode,"value",this.get("value"));},_setDisplay:function(_719){var lbl=_719||this.emptyLabel;this.containerNode.innerHTML="<span class=\"dijitReset dijitInline "+this.baseClass+"Label\">"+lbl+"</span>";dijit.setWaiState(this.focusNode,"valuetext",lbl);},validate:function(_71a){var _71b=this.isValid(_71a);this._set("state",_71b?"":"Error");dijit.setWaiState(this.focusNode,"invalid",_71b?"false":"true");var _71c=_71b?"":this._missingMsg;if(this.message!==_71c){this._set("message",_71c);dijit.hideTooltip(this.domNode);if(_71c){dijit.showTooltip(_71c,this.domNode,this.tooltipPosition,!this.isLeftToRight());}}return _71b;},isValid:function(_71d){return (!this.required||this.value===0||!(/^\s*$/.test(this.value||"")));},reset:function(){this.inherited(arguments);dijit.hideTooltip(this.domNode);this._set("state","");this._set("message","");},postMixInProperties:function(){this.inherited(arguments);this._missingMsg=dojo.i18n.getLocalization("dijit.form","validate",this.lang).missingMessage;},postCreate:function(){this.inherited(arguments);this.connect(this.domNode,"onmousemove",dojo.stopEvent);},_setStyleAttr:function(_71e){this.inherited(arguments);dojo.toggleClass(this.domNode,this.baseClass+"FixedWidth",!!this.tableNode.style.width);},isLoaded:function(){return this._isLoaded;},loadDropDown:function(_71f){this._loadChildren(true);this._isLoaded=true;_71f();},closeDropDown:function(){this.inherited(arguments);if(this.dropDown&&this.dropDown.menuTableNode){this.dropDown.menuTableNode.style.width="";}},uninitialize:function(_720){if(this.dropDown&&!this.dropDown._destroyed){this.dropDown.destroyRecursive(_720);delete this.dropDown;}this.inherited(arguments);}});}if(!dojo._hasResource["dijit.dijit"]){dojo._hasResource["dijit.dijit"]=true;dojo.provide("dijit.dijit");}if(!dojo._hasResource["dojox.html.metrics"]){dojo._hasResource["dojox.html.metrics"]=true;dojo.provide("dojox.html.metrics");(function(){var dhm=dojox.html.metrics;dhm.getFontMeasurements=function(){var _721={"1em":0,"1ex":0,"100%":0,"12pt":0,"16px":0,"xx-small":0,"x-small":0,"small":0,"medium":0,"large":0,"x-large":0,"xx-large":0};if(dojo.isIE){dojo.doc.documentElement.style.fontSize="100%";}var div=dojo.doc.createElement("div");var ds=div.style;ds.position="absolute";ds.left="-100px";ds.top="0";ds.width="30px";ds.height="1000em";ds.borderWidth="0";ds.margin="0";ds.padding="0";ds.outline="0";ds.lineHeight="1";ds.overflow="hidden";dojo.body().appendChild(div);for(var p in _721){ds.fontSize=p;_721[p]=Math.round(div.offsetHeight*12/16)*16/12/1000;}dojo.body().removeChild(div);div=null;return _721;};var _722=null;dhm.getCachedFontMeasurements=function(_723){if(_723||!_722){_722=dhm.getFontMeasurements();}return _722;};var _724=null,_725={};dhm.getTextBox=function(text,_726,_727){var m,s;if(!_724){m=_724=dojo.doc.createElement("div");var c=dojo.doc.createElement("div");c.appendChild(m);s=c.style;s.overflow="scroll";s.position="absolute";s.left="0px";s.top="-10000px";s.width="1px";s.height="1px";s.visibility="hidden";s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";dojo.body().appendChild(c);}else{m=_724;}m.className="";s=m.style;s.borderWidth="0";s.margin="0";s.padding="0";s.outline="0";if(arguments.length>1&&_726){for(var i in _726){if(i in _725){continue;}s[i]=_726[i];}}if(arguments.length>2&&_727){m.className=_727;}m.innerHTML=text;var box=dojo.position(m);box.w=m.parentNode.scrollWidth;return box;};var _728={w:16,h:16};dhm.getScrollbar=function(){return {w:_728.w,h:_728.h};};dhm._fontResizeNode=null;dhm.initOnFontResize=function(_729){var f=dhm._fontResizeNode=dojo.doc.createElement("iframe");var fs=f.style;fs.position="absolute";fs.width="5em";fs.height="10em";fs.top="-10000px";if(dojo.isIE){f.onreadystatechange=function(){if(f.contentWindow.document.readyState=="complete"){f.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;}};}else{f.onload=function(){f.contentWindow.onresize=f.contentWindow.parent[dojox._scopeName].html.metrics._fontresize;};}f.setAttribute("src","javascript:'<html><head><script>if(\"loadFirebugConsole\" in window){window.loadFirebugConsole();}</script></head><body></body></html>'");dojo.body().appendChild(f);dhm.initOnFontResize=function(){};};dhm.onFontResize=function(){};dhm._fontresize=function(){dhm.onFontResize();};dojo.addOnUnload(function(){var f=dhm._fontResizeNode;if(f){if(dojo.isIE&&f.onresize){f.onresize=null;}else{if(f.contentWindow&&f.contentWindow.onresize){f.contentWindow.onresize=null;}}dhm._fontResizeNode=null;}});dojo.addOnLoad(function(){try{var n=dojo.doc.createElement("div");n.style.cssText="top:0;left:0;width:100px;height:100px;overflow:scroll;position:absolute;visibility:hidden;";dojo.body().appendChild(n);_728.w=n.offsetWidth-n.clientWidth;_728.h=n.offsetHeight-n.clientHeight;dojo.body().removeChild(n);delete n;}catch(e){}if("fontSizeWatch" in dojo.config&&!!dojo.config.fontSizeWatch){dhm.initOnFontResize();}});})();}if(!dojo._hasResource["dojox.grid.util"]){dojo._hasResource["dojox.grid.util"]=true;dojo.provide("dojox.grid.util");(function(){var dgu=dojox.grid.util;dgu.na="...";dgu.rowIndexTag="gridRowIndex";dgu.gridViewTag="gridView";dgu.fire=function(ob,ev,args){var fn=ob&&ev&&ob[ev];return fn&&(args?fn.apply(ob,args):ob[ev]());};dgu.setStyleHeightPx=function(_72a,_72b){if(_72b>=0){var s=_72a.style;var v=_72b+"px";if(_72a&&s["height"]!=v){s["height"]=v;}}};dgu.mouseEvents=["mouseover","mouseout","mousedown","mouseup","click","dblclick","contextmenu"];dgu.keyEvents=["keyup","keydown","keypress"];dgu.funnelEvents=function(_72c,_72d,_72e,_72f){var evts=(_72f?_72f:dgu.mouseEvents.concat(dgu.keyEvents));for(var i=0,l=evts.length;i<l;i++){_72d.connect(_72c,"on"+evts[i],_72e);}};dgu.removeNode=function(_730){_730=dojo.byId(_730);_730&&_730.parentNode&&_730.parentNode.removeChild(_730);return _730;};dgu.arrayCompare=function(inA,inB){for(var i=0,l=inA.length;i<l;i++){if(inA[i]!=inB[i]){return false;}}return (inA.length==inB.length);};dgu.arrayInsert=function(_731,_732,_733){if(_731.length<=_732){_731[_732]=_733;}else{_731.splice(_732,0,_733);}};dgu.arrayRemove=function(_734,_735){_734.splice(_735,1);};dgu.arraySwap=function(_736,inI,inJ){var _737=_736[inI];_736[inI]=_736[inJ];_736[inJ]=_737;};})();}if(!dojo._hasResource["dojox.grid._Scroller"]){dojo._hasResource["dojox.grid._Scroller"]=true;dojo.provide("dojox.grid._Scroller");(function(){var _738=function(_739){var i=0,n,p=_739.parentNode;while((n=p.childNodes[i++])){if(n==_739){return i-1;}}return -1;};var _73a=function(_73b){if(!_73b){return;}var _73c=function(inW){return inW.domNode&&dojo.isDescendant(inW.domNode,_73b,true);};var ws=dijit.registry.filter(_73c);for(var i=0,w;(w=ws[i]);i++){w.destroy();}delete ws;};var _73d=function(_73e){var node=dojo.byId(_73e);return (node&&node.tagName?node.tagName.toLowerCase():"");};var _73f=function(_740,_741){var _742=[];var i=0,n;while((n=_740.childNodes[i])){i++;if(_73d(n)==_741){_742.push(n);}}return _742;};var _743=function(_744){return _73f(_744,"div");};dojo.declare("dojox.grid._Scroller",null,{constructor:function(_745){this.setContentNodes(_745);this.pageHeights=[];this.pageNodes=[];this.stack=[];},rowCount:0,defaultRowHeight:32,keepRows:100,contentNode:null,scrollboxNode:null,defaultPageHeight:0,keepPages:10,pageCount:0,windowHeight:0,firstVisibleRow:0,lastVisibleRow:0,averageRowHeight:0,page:0,pageTop:0,init:function(_746,_747,_748){switch(arguments.length){case 3:this.rowsPerPage=_748;case 2:this.keepRows=_747;case 1:this.rowCount=_746;default:break;}this.defaultPageHeight=this.defaultRowHeight*this.rowsPerPage;this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);this.setKeepInfo(this.keepRows);this.invalidate();if(this.scrollboxNode){this.scrollboxNode.scrollTop=0;this.scroll(0);this.scrollboxNode.onscroll=dojo.hitch(this,"onscroll");}},_getPageCount:function(_749,_74a){return _749?(Math.ceil(_749/_74a)||1):0;},destroy:function(){this.invalidateNodes();delete this.contentNodes;delete this.contentNode;delete this.scrollboxNode;},setKeepInfo:function(_74b){this.keepRows=_74b;this.keepPages=!this.keepRows?this.keepPages:Math.max(Math.ceil(this.keepRows/this.rowsPerPage),2);},setContentNodes:function(_74c){this.contentNodes=_74c;this.colCount=(this.contentNodes?this.contentNodes.length:0);this.pageNodes=[];for(var i=0;i<this.colCount;i++){this.pageNodes[i]=[];}},getDefaultNodes:function(){return this.pageNodes[0]||[];},invalidate:function(){this._invalidating=true;this.invalidateNodes();this.pageHeights=[];this.height=(this.pageCount?(this.pageCount-1)*this.defaultPageHeight+this.calcLastPageHeight():0);this.resize();this._invalidating=false;},updateRowCount:function(_74d){this.invalidateNodes();this.rowCount=_74d;var _74e=this.pageCount;if(_74e===0){this.height=1;}this.pageCount=this._getPageCount(this.rowCount,this.rowsPerPage);if(this.pageCount<_74e){for(var i=_74e-1;i>=this.pageCount;i--){this.height-=this.getPageHeight(i);delete this.pageHeights[i];}}else{if(this.pageCount>_74e){this.height+=this.defaultPageHeight*(this.pageCount-_74e-1)+this.calcLastPageHeight();}}this.resize();},pageExists:function(_74f){return Boolean(this.getDefaultPageNode(_74f));},measurePage:function(_750){if(this.grid.rowHeight){var _751=this.grid.rowHeight+1;return ((_750+1)*this.rowsPerPage>this.rowCount?this.rowCount-_750*this.rowsPerPage:this.rowsPerPage)*_751;}var n=this.getDefaultPageNode(_750);return (n&&n.innerHTML)?n.offsetHeight:undefined;},positionPage:function(_752,_753){for(var i=0;i<this.colCount;i++){this.pageNodes[i][_752].style.top=_753+"px";}},repositionPages:function(_754){var _755=this.getDefaultNodes();var last=0;for(var i=0;i<this.stack.length;i++){last=Math.max(this.stack[i],last);}var n=_755[_754];var y=(n?this.getPageNodePosition(n)+this.getPageHeight(_754):0);for(var p=_754+1;p<=last;p++){n=_755[p];if(n){if(this.getPageNodePosition(n)==y){return;}this.positionPage(p,y);}y+=this.getPageHeight(p);}},installPage:function(_756){for(var i=0;i<this.colCount;i++){this.contentNodes[i].appendChild(this.pageNodes[i][_756]);}},preparePage:function(_757,_758){var p=(_758?this.popPage():null);for(var i=0;i<this.colCount;i++){var _759=this.pageNodes[i];var _75a=(p===null?this.createPageNode():this.invalidatePageNode(p,_759));_75a.pageIndex=_757;_759[_757]=_75a;}},renderPage:function(_75b){var _75c=[];var i,j;for(i=0;i<this.colCount;i++){_75c[i]=this.pageNodes[i][_75b];}for(i=0,j=_75b*this.rowsPerPage;(i<this.rowsPerPage)&&(j<this.rowCount);i++,j++){this.renderRow(j,_75c);}},removePage:function(_75d){for(var i=0,j=_75d*this.rowsPerPage;i<this.rowsPerPage;i++,j++){this.removeRow(j);}},destroyPage:function(_75e){for(var i=0;i<this.colCount;i++){var n=this.invalidatePageNode(_75e,this.pageNodes[i]);if(n){dojo.destroy(n);}}},pacify:function(_75f){},pacifying:false,pacifyTicks:200,setPacifying:function(_760){if(this.pacifying!=_760){this.pacifying=_760;this.pacify(this.pacifying);}},startPacify:function(){this.startPacifyTicks=new Date().getTime();},doPacify:function(){var _761=(new Date().getTime()-this.startPacifyTicks)>this.pacifyTicks;this.setPacifying(true);this.startPacify();return _761;},endPacify:function(){this.setPacifying(false);},resize:function(){if(this.scrollboxNode){this.windowHeight=this.scrollboxNode.clientHeight;}for(var i=0;i<this.colCount;i++){dojox.grid.util.setStyleHeightPx(this.contentNodes[i],Math.max(1,this.height));}var _762=(!this._invalidating);if(!_762){var ah=this.grid.get("autoHeight");if(typeof ah=="number"&&ah<=Math.min(this.rowsPerPage,this.rowCount)){_762=true;}}if(_762){this.needPage(this.page,this.pageTop);}var _763=(this.page<this.pageCount-1)?this.rowsPerPage:((this.rowCount%this.rowsPerPage)||this.rowsPerPage);var _764=this.getPageHeight(this.page);this.averageRowHeight=(_764>0&&_763>0)?(_764/_763):0;},calcLastPageHeight:function(){if(!this.pageCount){return 0;}var _765=this.pageCount-1;var _766=((this.rowCount%this.rowsPerPage)||(this.rowsPerPage))*this.defaultRowHeight;this.pageHeights[_765]=_766;return _766;},updateContentHeight:function(inDh){this.height+=inDh;this.resize();},updatePageHeight:function(_767,_768,_769){if(this.pageExists(_767)){var oh=this.getPageHeight(_767);var h=(this.measurePage(_767));if(h===undefined){h=oh;}this.pageHeights[_767]=h;if(oh!=h){this.updateContentHeight(h-oh);var ah=this.grid.get("autoHeight");if((typeof ah=="number"&&ah>this.rowCount)||(ah===true&&!_768)){if(!_769){this.grid.sizeChange();}else{var ns=this.grid.viewsNode.style;ns.height=parseInt(ns.height)+h-oh+"px";this.repositionPages(_767);}}else{this.repositionPages(_767);}}return h;}return 0;},rowHeightChanged:function(_76a,_76b){this.updatePageHeight(Math.floor(_76a/this.rowsPerPage),false,_76b);},invalidateNodes:function(){while(this.stack.length){this.destroyPage(this.popPage());}},createPageNode:function(){var p=document.createElement("div");dojo.attr(p,"role","presentation");p.style.position="absolute";p.style[dojo._isBodyLtr()?"left":"right"]="0";return p;},getPageHeight:function(_76c){var ph=this.pageHeights[_76c];return (ph!==undefined?ph:this.defaultPageHeight);},pushPage:function(_76d){return this.stack.push(_76d);},popPage:function(){return this.stack.shift();},findPage:function(_76e){var i=0,h=0;for(var ph=0;i<this.pageCount;i++,h+=ph){ph=this.getPageHeight(i);if(h+ph>=_76e){break;}}this.page=i;this.pageTop=h;},buildPage:function(_76f,_770,_771){this.preparePage(_76f,_770);this.positionPage(_76f,_771);this.installPage(_76f);this.renderPage(_76f);this.pushPage(_76f);},needPage:function(_772,_773){var h=this.getPageHeight(_772),oh=h;if(!this.pageExists(_772)){this.buildPage(_772,(!this.grid._autoHeight&&this.keepPages&&(this.stack.length>=this.keepPages)),_773);h=this.updatePageHeight(_772,true);}else{this.positionPage(_772,_773);}return h;},onscroll:function(){this.scroll(this.scrollboxNode.scrollTop);},scroll:function(_774){this.grid.scrollTop=_774;if(this.colCount){this.startPacify();this.findPage(_774);var h=this.height;var b=this.getScrollBottom(_774);for(var p=this.page,y=this.pageTop;(p<this.pageCount)&&((b<0)||(y<b));p++){y+=this.needPage(p,y);}this.firstVisibleRow=this.getFirstVisibleRow(this.page,this.pageTop,_774);this.lastVisibleRow=this.getLastVisibleRow(p-1,y,b);if(h!=this.height){this.repositionPages(p-1);}this.endPacify();}},getScrollBottom:function(_775){return (this.windowHeight>=0?_775+this.windowHeight:-1);},processNodeEvent:function(e,_776){var t=e.target;while(t&&(t!=_776)&&t.parentNode&&(t.parentNode.parentNode!=_776)){t=t.parentNode;}if(!t||!t.parentNode||(t.parentNode.parentNode!=_776)){return false;}var page=t.parentNode;e.topRowIndex=page.pageIndex*this.rowsPerPage;e.rowIndex=e.topRowIndex+_738(t);e.rowTarget=t;return true;},processEvent:function(e){return this.processNodeEvent(e,this.contentNode);},renderRow:function(_777,_778){},removeRow:function(_779){},getDefaultPageNode:function(_77a){return this.getDefaultNodes()[_77a];},positionPageNode:function(_77b,_77c){},getPageNodePosition:function(_77d){return _77d.offsetTop;},invalidatePageNode:function(_77e,_77f){var p=_77f[_77e];if(p){delete _77f[_77e];this.removePage(_77e,p);_73a(p);p.innerHTML="";}return p;},getPageRow:function(_780){return _780*this.rowsPerPage;},getLastPageRow:function(_781){return Math.min(this.rowCount,this.getPageRow(_781+1))-1;},getFirstVisibleRow:function(_782,_783,_784){if(!this.pageExists(_782)){return 0;}var row=this.getPageRow(_782);var _785=this.getDefaultNodes();var rows=_743(_785[_782]);for(var i=0,l=rows.length;i<l&&_783<_784;i++,row++){_783+=rows[i].offsetHeight;}return (row?row-1:row);},getLastVisibleRow:function(_786,_787,_788){if(!this.pageExists(_786)){return 0;}var _789=this.getDefaultNodes();var row=this.getLastPageRow(_786);var rows=_743(_789[_786]);for(var i=rows.length-1;i>=0&&_787>_788;i--,row--){_787-=rows[i].offsetHeight;}return row+1;},findTopRow:function(_78a){var _78b=this.getDefaultNodes();var rows=_743(_78b[this.page]);for(var i=0,l=rows.length,t=this.pageTop,h;i<l;i++){h=rows[i].offsetHeight;t+=h;if(t>=_78a){this.offset=h-(t-_78a);return i+this.page*this.rowsPerPage;}}return -1;},findScrollTop:function(_78c){var _78d=Math.floor(_78c/this.rowsPerPage);var t=0;var i,l;for(i=0;i<_78d;i++){t+=this.getPageHeight(i);}this.pageTop=t;this.page=_78d;this.needPage(_78d,this.pageTop);var _78e=this.getDefaultNodes();var rows=_743(_78e[_78d]);var r=_78c-this.rowsPerPage*_78d;for(i=0,l=rows.length;i<l&&i<r;i++){t+=rows[i].offsetHeight;}return t;},dummy:0});})();}if(!dojo._hasResource["dojox.grid.cells._base"]){dojo._hasResource["dojox.grid.cells._base"]=true;dojo.provide("dojox.grid.cells._base");dojo.declare("dojox.grid._DeferredTextWidget",dijit._Widget,{deferred:null,_destroyOnRemove:true,postCreate:function(){if(this.deferred){this.deferred.addBoth(dojo.hitch(this,function(text){if(this.domNode){this.domNode.innerHTML=text;}}));}}});(function(){var _78f=function(_790){try{dojox.grid.util.fire(_790,"focus");dojox.grid.util.fire(_790,"select");}catch(e){}};var _791=function(){setTimeout(dojo.hitch.apply(dojo,arguments),0);};var dgc=dojox.grid.cells;dojo.declare("dojox.grid.cells._Base",null,{styles:"",classes:"",editable:false,alwaysEditing:false,formatter:null,defaultValue:"...",value:null,hidden:false,noresize:false,draggable:true,_valueProp:"value",_formatPending:false,constructor:function(_792){this._props=_792||{};dojo.mixin(this,_792);if(this.draggable===undefined){this.draggable=true;}},_defaultFormat:function(_793,_794){var s=this.grid.formatterScope||this;var f=this.formatter;if(f&&s&&typeof f=="string"){f=this.formatter=s[f];}var v=(_793!=this.defaultValue&&f)?f.apply(s,_794):_793;if(typeof v=="undefined"){return this.defaultValue;}if(v&&v.addBoth){v=new dojox.grid._DeferredTextWidget({deferred:v},dojo.create("span",{innerHTML:this.defaultValue}));}if(v&&v.declaredClass&&v.startup){return "<div class='dojoxGridStubNode' linkWidget='"+v.id+"' cellIdx='"+this.index+"'>"+this.defaultValue+"</div>";}return v;},format:function(_795,_796){var f,i=this.grid.edit.info,d=this.get?this.get(_795,_796):(this.value||this.defaultValue);d=(d&&d.replace&&this.grid.escapeHTMLInData)?d.replace(/&/g,"&amp;").replace(/</g,"&lt;"):d;if(this.editable&&(this.alwaysEditing||(i.rowIndex==_795&&i.cell==this))){return this.formatEditing(d,_795);}else{return this._defaultFormat(d,[d,_795,this]);}},formatEditing:function(_797,_798){},getNode:function(_799){return this.view.getCellNode(_799,this.index);},getHeaderNode:function(){return this.view.getHeaderCellNode(this.index);},getEditNode:function(_79a){return (this.getNode(_79a)||0).firstChild||0;},canResize:function(){var uw=this.unitWidth;return uw&&(uw!=="auto");},isFlex:function(){var uw=this.unitWidth;return uw&&dojo.isString(uw)&&(uw=="auto"||uw.slice(-1)=="%");},applyEdit:function(_79b,_79c){this.grid.edit.applyCellEdit(_79b,this,_79c);},cancelEdit:function(_79d){this.grid.doCancelEdit(_79d);},_onEditBlur:function(_79e){if(this.grid.edit.isEditCell(_79e,this.index)){this.grid.edit.apply();}},registerOnBlur:function(_79f,_7a0){if(this.commitOnBlur){dojo.connect(_79f,"onblur",function(e){setTimeout(dojo.hitch(this,"_onEditBlur",_7a0),250);});}},needFormatNode:function(_7a1,_7a2){this._formatPending=true;_791(this,"_formatNode",_7a1,_7a2);},cancelFormatNode:function(){this._formatPending=false;},_formatNode:function(_7a3,_7a4){if(this._formatPending){this._formatPending=false;dojo.setSelectable(this.grid.domNode,true);this.formatNode(this.getEditNode(_7a4),_7a3,_7a4);}},formatNode:function(_7a5,_7a6,_7a7){if(dojo.isIE){_791(this,"focus",_7a7,_7a5);}else{this.focus(_7a7,_7a5);}},dispatchEvent:function(m,e){if(m in this){return this[m](e);}},getValue:function(_7a8){return this.getEditNode(_7a8)[this._valueProp];},setValue:function(_7a9,_7aa){var n=this.getEditNode(_7a9);if(n){n[this._valueProp]=_7aa;}},focus:function(_7ab,_7ac){_78f(_7ac||this.getEditNode(_7ab));},save:function(_7ad){this.value=this.value||this.getValue(_7ad);},restore:function(_7ae){this.setValue(_7ae,this.value);},_finish:function(_7af){dojo.setSelectable(this.grid.domNode,false);this.cancelFormatNode();},apply:function(_7b0){this.applyEdit(this.getValue(_7b0),_7b0);this._finish(_7b0);},cancel:function(_7b1){this.cancelEdit(_7b1);this._finish(_7b1);}});dgc._Base.markupFactory=function(node,_7b2){var d=dojo;var _7b3=d.trim(d.attr(node,"formatter")||"");if(_7b3){_7b2.formatter=dojo.getObject(_7b3)||_7b3;}var get=d.trim(d.attr(node,"get")||"");if(get){_7b2.get=dojo.getObject(get);}var _7b4=function(attr,cell,_7b5){var _7b6=d.trim(d.attr(node,attr)||"");if(_7b6){cell[_7b5||attr]=!(_7b6.toLowerCase()=="false");}};_7b4("sortDesc",_7b2);_7b4("editable",_7b2);_7b4("alwaysEditing",_7b2);_7b4("noresize",_7b2);_7b4("draggable",_7b2);var _7b7=d.trim(d.attr(node,"loadingText")||d.attr(node,"defaultValue")||"");if(_7b7){_7b2.defaultValue=_7b7;}var _7b8=function(attr,cell,_7b9){var _7ba=d.trim(d.attr(node,attr)||"")||undefined;if(_7ba){cell[_7b9||attr]=_7ba;}};_7b8("styles",_7b2);_7b8("headerStyles",_7b2);_7b8("cellStyles",_7b2);_7b8("classes",_7b2);_7b8("headerClasses",_7b2);_7b8("cellClasses",_7b2);};dojo.declare("dojox.grid.cells.Cell",dgc._Base,{constructor:function(){this.keyFilter=this.keyFilter;},keyFilter:null,formatEditing:function(_7bb,_7bc){this.needFormatNode(_7bb,_7bc);return "<input class=\"dojoxGridInput\" type=\"text\" value=\""+_7bb+"\">";},formatNode:function(_7bd,_7be,_7bf){this.inherited(arguments);this.registerOnBlur(_7bd,_7bf);},doKey:function(e){if(this.keyFilter){var key=String.fromCharCode(e.charCode);if(key.search(this.keyFilter)==-1){dojo.stopEvent(e);}}},_finish:function(_7c0){this.inherited(arguments);var n=this.getEditNode(_7c0);try{dojox.grid.util.fire(n,"blur");}catch(e){}}});dgc.Cell.markupFactory=function(node,_7c1){dgc._Base.markupFactory(node,_7c1);var d=dojo;var _7c2=d.trim(d.attr(node,"keyFilter")||"");if(_7c2){_7c1.keyFilter=new RegExp(_7c2);}};dojo.declare("dojox.grid.cells.RowIndex",dgc.Cell,{name:"Row",postscript:function(){this.editable=false;},get:function(_7c3){return _7c3+1;}});dgc.RowIndex.markupFactory=function(node,_7c4){dgc.Cell.markupFactory(node,_7c4);};dojo.declare("dojox.grid.cells.Select",dgc.Cell,{options:null,values:null,returnIndex:-1,constructor:function(_7c5){this.values=this.values||this.options;},formatEditing:function(_7c6,_7c7){this.needFormatNode(_7c6,_7c7);var h=["<select class=\"dojoxGridSelect\">"];for(var i=0,o,v;((o=this.options[i])!==undefined)&&((v=this.values[i])!==undefined);i++){h.push("<option",(_7c6==v?" selected":"")," value=\""+v+"\"",">",o,"</option>");}h.push("</select>");return h.join("");},getValue:function(_7c8){var n=this.getEditNode(_7c8);if(n){var i=n.selectedIndex,o=n.options[i];return this.returnIndex>-1?i:o.value||o.innerHTML;}}});dgc.Select.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);var d=dojo;var _7c9=d.trim(d.attr(node,"options")||"");if(_7c9){var o=_7c9.split(",");if(o[0]!=_7c9){cell.options=o;}}var _7ca=d.trim(d.attr(node,"values")||"");if(_7ca){var v=_7ca.split(",");if(v[0]!=_7ca){cell.values=v;}}};dojo.declare("dojox.grid.cells.AlwaysEdit",dgc.Cell,{alwaysEditing:true,_formatNode:function(_7cb,_7cc){this.formatNode(this.getEditNode(_7cc),_7cb,_7cc);},applyStaticValue:function(_7cd){var e=this.grid.edit;e.applyCellEdit(this.getValue(_7cd),this,_7cd);e.start(this,_7cd,true);}});dgc.AlwaysEdit.markupFactory=function(node,cell){dgc.Cell.markupFactory(node,cell);};dojo.declare("dojox.grid.cells.Bool",dgc.AlwaysEdit,{_valueProp:"checked",formatEditing:function(_7ce,_7cf){return "<input class=\"dojoxGridInput\" type=\"checkbox\""+(_7ce?" checked=\"checked\"":"")+" style=\"width: auto\" />";},doclick:function(e){if(e.target.tagName=="INPUT"){this.applyStaticValue(e.rowIndex);}}});dgc.Bool.markupFactory=function(node,cell){dgc.AlwaysEdit.markupFactory(node,cell);};})();}if(!dojo._hasResource["dojox.grid.cells"]){dojo._hasResource["dojox.grid.cells"]=true;dojo.provide("dojox.grid.cells");}if(!dojo._hasResource["dojox.grid._Builder"]){dojo._hasResource["dojox.grid._Builder"]=true;dojo.provide("dojox.grid._Builder");(function(){var dg=dojox.grid;var _7d0=function(td){return td.cellIndex>=0?td.cellIndex:dojo.indexOf(td.parentNode.cells,td);};var _7d1=function(tr){return tr.rowIndex>=0?tr.rowIndex:dojo.indexOf(tr.parentNode.childNodes,tr);};var _7d2=function(_7d3,_7d4){return _7d3&&((_7d3.rows||0)[_7d4]||_7d3.childNodes[_7d4]);};var _7d5=function(node){for(var n=node;n&&n.tagName!="TABLE";n=n.parentNode){}return n;};var _7d6=function(_7d7,_7d8){for(var n=_7d7;n&&_7d8(n);n=n.parentNode){}return n;};var _7d9=function(_7da){var name=_7da.toUpperCase();return function(node){return node.tagName!=name;};};var _7db=dojox.grid.util.rowIndexTag;var _7dc=dojox.grid.util.gridViewTag;dg._Builder=dojo.extend(function(view){if(view){this.view=view;this.grid=view.grid;}},{view:null,_table:"<table class=\"dojoxGridRowTable\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"",getTableArray:function(){var html=[this._table];if(this.view.viewWidth){html.push([" style=\"width:",this.view.viewWidth,";\""].join(""));}html.push(">");return html;},generateCellMarkup:function(_7dd,_7de,_7df,_7e0){var _7e1=[],html;if(_7e0){var _7e2=_7dd.index!=_7dd.grid.getSortIndex()?"":_7dd.grid.sortInfo>0?"aria-sort=\"ascending\"":"aria-sort=\"descending\"";if(!_7dd.id){_7dd.id=this.grid.id+"Hdr"+_7dd.index;}html=["<th tabIndex=\"-1\" aria-readonly=\"true\" role=\"columnheader\"",_7e2,"id=\"",_7dd.id,"\""];}else{var _7e3=this.grid.editable&&!_7dd.editable?"aria-readonly=\"true\"":"";html=["<td tabIndex=\"-1\" role=\"gridcell\"",_7e3];}if(_7dd.colSpan){html.push(" colspan=\"",_7dd.colSpan,"\"");}if(_7dd.rowSpan){html.push(" rowspan=\"",_7dd.rowSpan,"\"");}html.push(" class=\"dojoxGridCell ");if(_7dd.classes){html.push(_7dd.classes," ");}if(_7df){html.push(_7df," ");}_7e1.push(html.join(""));_7e1.push("");html=["\" idx=\"",_7dd.index,"\" style=\""];if(_7de&&_7de[_7de.length-1]!=";"){_7de+=";";}html.push(_7dd.styles,_7de||"",_7dd.hidden?"display:none;":"");if(_7dd.unitWidth){html.push("width:",_7dd.unitWidth,";");}_7e1.push(html.join(""));_7e1.push("");html=["\""];if(_7dd.attrs){html.push(" ",_7dd.attrs);}html.push(">");_7e1.push(html.join(""));_7e1.push("");_7e1.push(_7e0?"</th>":"</td>");return _7e1;},isCellNode:function(_7e4){return Boolean(_7e4&&_7e4!=dojo.doc&&dojo.attr(_7e4,"idx"));},getCellNodeIndex:function(_7e5){return _7e5?Number(dojo.attr(_7e5,"idx")):-1;},getCellNode:function(_7e6,_7e7){for(var i=0,row;((row=_7d2(_7e6.firstChild,i))&&row.cells);i++){for(var j=0,cell;(cell=row.cells[j]);j++){if(this.getCellNodeIndex(cell)==_7e7){return cell;}}}return null;},findCellTarget:function(_7e8,_7e9){var n=_7e8;while(n&&(!this.isCellNode(n)||(n.offsetParent&&_7dc in n.offsetParent.parentNode&&n.offsetParent.parentNode[_7dc]!=this.view.id))&&(n!=_7e9)){n=n.parentNode;}return n!=_7e9?n:null;},baseDecorateEvent:function(e){e.dispatch="do"+e.type;e.grid=this.grid;e.sourceView=this.view;e.cellNode=this.findCellTarget(e.target,e.rowNode);e.cellIndex=this.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);},findTarget:function(_7ea,_7eb){var n=_7ea;while(n&&(n!=this.domNode)&&(!(_7eb in n)||(_7dc in n&&n[_7dc]!=this.view.id))){n=n.parentNode;}return (n!=this.domNode)?n:null;},findRowTarget:function(_7ec){return this.findTarget(_7ec,_7db);},isIntraNodeEvent:function(e){try{return (e.cellNode&&e.relatedTarget&&dojo.isDescendant(e.relatedTarget,e.cellNode));}catch(x){return false;}},isIntraRowEvent:function(e){try{var row=e.relatedTarget&&this.findRowTarget(e.relatedTarget);return !row&&(e.rowIndex==-1)||row&&(e.rowIndex==row.gridRowIndex);}catch(x){return false;}},dispatchEvent:function(e){if(e.dispatch in this){return this[e.dispatch](e);}return false;},domouseover:function(e){if(e.cellNode&&(e.cellNode!=this.lastOverCellNode)){this.lastOverCellNode=e.cellNode;this.grid.onMouseOver(e);}this.grid.onMouseOverRow(e);},domouseout:function(e){if(e.cellNode&&(e.cellNode==this.lastOverCellNode)&&!this.isIntraNodeEvent(e,this.lastOverCellNode)){this.lastOverCellNode=null;this.grid.onMouseOut(e);if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}},domousedown:function(e){if(e.cellNode){this.grid.onMouseDown(e);}this.grid.onMouseDownRow(e);}});dg._ContentBuilder=dojo.extend(function(view){dg._Builder.call(this,view);},dg._Builder.prototype,{update:function(){this.prepareHtml();},prepareHtml:function(){var _7ed=this.grid.get,_7ee=this.view.structure.cells;for(var j=0,row;(row=_7ee[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.get=cell.get||(cell.value==undefined)&&_7ed;cell.markup=this.generateCellMarkup(cell,cell.cellStyles,cell.cellClasses,false);if(!this.grid.editable&&cell.editable){this.grid.editable=true;}}}},generateHtml:function(_7ef,_7f0){var html=this.getTableArray(),v=this.view,_7f1=v.structure.cells,item=this.grid.getItem(_7f0);dojox.grid.util.fire(this.view,"onBeforeRow",[_7f0,_7f1]);for(var j=0,row;(row=_7f1[j]);j++){if(row.hidden||row.header){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,m,cc,cs;(cell=row[i]);i++){m=cell.markup;cc=cell.customClasses=[];cs=cell.customStyles=[];m[5]=cell.format(_7f0,item);m[1]=cc.join(" ");m[3]=cs.join(";");html.push.apply(html,m);}html.push("</tr>");}html.push("</table>");return html.join("");},decorateEvent:function(e){e.rowNode=this.findRowTarget(e.target);if(!e.rowNode){return false;}e.rowIndex=e.rowNode[_7db];this.baseDecorateEvent(e);e.cell=this.grid.getCell(e.cellIndex);return true;}});dg._HeaderBuilder=dojo.extend(function(view){this.moveable=null;dg._Builder.call(this,view);},dg._Builder.prototype,{_skipBogusClicks:false,overResizeWidth:4,minColWidth:1,update:function(){if(this.tableMap){this.tableMap.mapRows(this.view.structure.cells);}else{this.tableMap=new dg._TableMap(this.view.structure.cells);}},generateHtml:function(_7f2,_7f3){var html=this.getTableArray(),_7f4=this.view.structure.cells;dojox.grid.util.fire(this.view,"onBeforeRow",[-1,_7f4]);for(var j=0,row;(row=_7f4[j]);j++){if(row.hidden){continue;}html.push(!row.invisible?"<tr>":"<tr class=\"dojoxGridInvisible\">");for(var i=0,cell,_7f5;(cell=row[i]);i++){cell.customClasses=[];cell.customStyles=[];if(this.view.simpleStructure){if(cell.draggable){if(cell.headerClasses){if(cell.headerClasses.indexOf("dojoDndItem")==-1){cell.headerClasses+=" dojoDndItem";}}else{cell.headerClasses="dojoDndItem";}}if(cell.attrs){if(cell.attrs.indexOf("dndType='gridColumn_")==-1){cell.attrs+=" dndType='gridColumn_"+this.grid.id+"'";}}else{cell.attrs="dndType='gridColumn_"+this.grid.id+"'";}}_7f5=this.generateCellMarkup(cell,cell.headerStyles,cell.headerClasses,true);_7f5[5]=(_7f3!=undefined?_7f3:_7f2(cell));_7f5[3]=cell.customStyles.join(";");_7f5[1]=cell.customClasses.join(" ");html.push(_7f5.join(""));}html.push("</tr>");}html.push("</table>");return html.join("");},getCellX:function(e){var n,x=e.layerX;if(dojo.isMoz||dojo.isIE>=9){n=_7d6(e.target,_7d9("th"));x-=(n&&n.offsetLeft)||0;var t=e.sourceView.getScrollbarWidth();if(!dojo._isBodyLtr()){table=_7d6(n,_7d9("table"));x-=(table&&table.offsetLeft)||0;}}n=_7d6(e.target,function(){if(!n||n==e.cellNode){return false;}x+=(n.offsetLeft<0?0:n.offsetLeft);return true;});return x;},decorateEvent:function(e){this.baseDecorateEvent(e);e.rowIndex=-1;e.cellX=this.getCellX(e);return true;},prepareResize:function(e,mod){do{var i=_7d0(e.cellNode);e.cellNode=(i?e.cellNode.parentNode.cells[i+mod]:null);e.cellIndex=(e.cellNode?this.getCellNodeIndex(e.cellNode):-1);}while(e.cellNode&&e.cellNode.style.display=="none");return Boolean(e.cellNode);},canResize:function(e){if(!e.cellNode||e.cellNode.colSpan>1){return false;}var cell=this.grid.getCell(e.cellIndex);return !cell.noresize&&cell.canResize();},overLeftResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false;}if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return (e.cellIndex>0)&&(e.cellX>0&&e.cellX<this.overResizeWidth)&&this.prepareResize(e,-1);}var t=e.cellNode&&(e.cellX>0&&e.cellX<this.overResizeWidth);return t;},overRightResizeArea:function(e){if(dojo.hasClass(dojo.body(),"dojoDndMove")){return false;}if(dojo.isIE){var tN=e.target;if(dojo.hasClass(tN,"dojoxGridArrowButtonNode")||dojo.hasClass(tN,"dojoxGridArrowButtonChar")){return false;}}if(dojo._isBodyLtr()){return e.cellNode&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth);}return (e.cellIndex>0)&&(e.cellX>=e.cellNode.offsetWidth-this.overResizeWidth)&&this.prepareResize(e,-1);},domousemove:function(e){if(!this.moveable){var c=(this.overRightResizeArea(e)?"dojoxGridColResize":(this.overLeftResizeArea(e)?"dojoxGridColResize":""));if(c&&!this.canResize(e)){c="dojoxGridColNoResize";}dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColNoResize",(c=="dojoxGridColNoResize"));dojo.toggleClass(e.sourceView.headerNode,"dojoxGridColResize",(c=="dojoxGridColResize"));if(dojo.isIE){var t=e.sourceView.headerNode.scrollLeft;e.sourceView.headerNode.scrollLeft=t;}if(c){dojo.stopEvent(e);}}},domousedown:function(e){if(!this.moveable){if((this.overRightResizeArea(e)||this.overLeftResizeArea(e))&&this.canResize(e)){this.beginColumnResize(e);}else{this.grid.onMouseDown(e);this.grid.onMouseOverRow(e);}}},doclick:function(e){if(this._skipBogusClicks){dojo.stopEvent(e);return true;}return false;},colResizeSetup:function(e,_7f6){var _7f7=dojo.contentBox(e.sourceView.headerNode);if(_7f6){this.lineDiv=document.createElement("div");var vw=(dojo.position||dojo._abs)(e.sourceView.headerNode,true);var _7f8=dojo.contentBox(e.sourceView.domNode);var l=e.pageX;if(!dojo._isBodyLtr()&&dojo.isIE<8){l-=dojox.html.metrics.getScrollbar().w;}dojo.style(this.lineDiv,{top:vw.y+"px",left:l+"px",height:(_7f8.h+_7f7.h)+"px"});dojo.addClass(this.lineDiv,"dojoxGridResizeColLine");this.lineDiv._origLeft=l;dojo.body().appendChild(this.lineDiv);}var _7f9=[],_7fa=this.tableMap.findOverlappingNodes(e.cellNode);for(var i=0,cell;(cell=_7fa[i]);i++){_7f9.push({node:cell,index:this.getCellNodeIndex(cell),width:cell.offsetWidth});}var view=e.sourceView;var adj=dojo._isBodyLtr()?1:-1;var _7fb=e.grid.views.views;var _7fc=[];for(var j=view.idx+adj,_7fd;(_7fd=_7fb[j]);j=j+adj){_7fc.push({node:_7fd.headerNode,left:window.parseInt(_7fd.headerNode.style.left)});}var _7fe=view.headerContentNode.firstChild;var drag={scrollLeft:e.sourceView.headerNode.scrollLeft,view:view,node:e.cellNode,index:e.cellIndex,w:dojo.contentBox(e.cellNode).w,vw:_7f7.w,table:_7fe,tw:dojo.contentBox(_7fe).w,spanners:_7f9,followers:_7fc};return drag;},beginColumnResize:function(e){this.moverDiv=document.createElement("div");dojo.style(this.moverDiv,{position:"absolute",left:0});dojo.body().appendChild(this.moverDiv);dojo.addClass(this.grid.domNode,"dojoxGridColumnResizing");var m=(this.moveable=new dojo.dnd.Moveable(this.moverDiv));var drag=this.colResizeSetup(e,true);m.onMove=dojo.hitch(this,"doResizeColumn",drag);dojo.connect(m,"onMoveStop",dojo.hitch(this,function(){this.endResizeColumn(drag);if(drag.node.releaseCapture){drag.node.releaseCapture();}this.moveable.destroy();delete this.moveable;this.moveable=null;dojo.removeClass(this.grid.domNode,"dojoxGridColumnResizing");}));if(e.cellNode.setCapture){e.cellNode.setCapture();}m.onMouseDown(e);},doResizeColumn:function(_7ff,_800,_801){var _802=_801.l;var data={deltaX:_802,w:_7ff.w+(dojo._isBodyLtr()?_802:-_802),vw:_7ff.vw+_802,tw:_7ff.tw+_802};this.dragRecord={inDrag:_7ff,mover:_800,leftTop:_801};if(data.w>=this.minColWidth){if(!_800){this.doResizeNow(_7ff,data);}else{dojo.style(this.lineDiv,"left",(this.lineDiv._origLeft+data.deltaX)+"px");}}},endResizeColumn:function(_803){if(this.dragRecord){var _804=this.dragRecord.leftTop;var _805=dojo._isBodyLtr()?_804.l:-_804.l;_805+=Math.max(_803.w+_805,this.minColWidth)-(_803.w+_805);if(dojo.isWebKit&&_803.spanners.length){_805+=dojo._getPadBorderExtents(_803.spanners[0].node).w;}var data={deltaX:_805,w:_803.w+_805,vw:_803.vw+_805,tw:_803.tw+_805};this.doResizeNow(_803,data);delete this.dragRecord;}dojo.destroy(this.lineDiv);dojo.destroy(this.moverDiv);dojo.destroy(this.moverDiv);delete this.moverDiv;this._skipBogusClicks=true;_803.view.update();this._skipBogusClicks=false;this.grid.onResizeColumn(_803.index);},doResizeNow:function(_806,data){_806.view.convertColPctToFixed();if(_806.view.flexCells&&!_806.view.testFlexCells()){var t=_7d5(_806.node);if(t){(t.style.width="");}}var i,s,sw,f,fl;for(i=0;(s=_806.spanners[i]);i++){sw=s.width+data.deltaX;if(sw>0){s.node.style.width=sw+"px";_806.view.setColWidth(s.index,sw);}}if(dojo._isBodyLtr()||!dojo.isIE){for(i=0;(f=_806.followers[i]);i++){fl=f.left+data.deltaX;f.node.style.left=fl+"px";}}_806.node.style.width=data.w+"px";_806.view.setColWidth(_806.index,data.w);_806.view.headerNode.style.width=data.vw+"px";_806.view.setColumnsWidth(data.tw);if(!dojo._isBodyLtr()){_806.view.headerNode.scrollLeft=_806.scrollLeft+data.deltaX;}}});dg._TableMap=dojo.extend(function(rows){this.mapRows(rows);},{map:null,mapRows:function(_807){var _808=_807.length;if(!_808){return;}this.map=[];var row;for(var k=0;(row=_807[k]);k++){this.map[k]=[];}for(var j=0;(row=_807[j]);j++){for(var i=0,x=0,cell,_809,_80a;(cell=row[i]);i++){while(this.map[j][x]){x++;}this.map[j][x]={c:i,r:j};_80a=cell.rowSpan||1;_809=cell.colSpan||1;for(var y=0;y<_80a;y++){for(var s=0;s<_809;s++){this.map[j+y][x+s]=this.map[j][x];}}x+=_809;}}},dumpMap:function(){for(var j=0,row,h="";(row=this.map[j]);j++,h=""){for(var i=0,cell;(cell=row[i]);i++){h+=cell.r+","+cell.c+"   ";}}},getMapCoords:function(_80b,_80c){for(var j=0,row;(row=this.map[j]);j++){for(var i=0,cell;(cell=row[i]);i++){if(cell.c==_80c&&cell.r==_80b){return {j:j,i:i};}}}return {j:-1,i:-1};},getNode:function(_80d,_80e,_80f){var row=_80d&&_80d.rows[_80e];return row&&row.cells[_80f];},_findOverlappingNodes:function(_810,_811,_812){var _813=[];var m=this.getMapCoords(_811,_812);for(var j=0,row;(row=this.map[j]);j++){if(j==m.j){continue;}var rw=row[m.i];var n=(rw?this.getNode(_810,rw.r,rw.c):null);if(n){_813.push(n);}}return _813;},findOverlappingNodes:function(_814){return this._findOverlappingNodes(_7d5(_814),_7d1(_814.parentNode),_7d0(_814));}});})();}if(!dojo._hasResource["dojo.dnd.Container"]){dojo._hasResource["dojo.dnd.Container"]=true;dojo.provide("dojo.dnd.Container");dojo.declare("dojo.dnd.Container",null,{skipForm:false,constructor:function(node,_815){this.node=dojo.byId(node);if(!_815){_815={};}this.creator=_815.creator||null;this.skipForm=_815.skipForm;this.parent=_815.dropParent&&dojo.byId(_815.dropParent);this.map={};this.current=null;this.containerState="";dojo.addClass(this.node,"dojoDndContainer");if(!(_815&&_815._skipStartup)){this.startup();}this.events=[dojo.connect(this.node,"onmouseover",this,"onMouseOver"),dojo.connect(this.node,"onmouseout",this,"onMouseOut"),dojo.connect(this.node,"ondragstart",this,"onSelectStart"),dojo.connect(this.node,"onselectstart",this,"onSelectStart")];},creator:function(){},getItem:function(key){return this.map[key];},setItem:function(key,data){this.map[key]=data;},delItem:function(key){delete this.map[key];},forInItems:function(f,o){o=o||dojo.global;var m=this.map,e=dojo.dnd._empty;for(var i in m){if(i in e){continue;}f.call(o,m[i],i,this);}return o;},clearItems:function(){this.map={};},getAllNodes:function(){return dojo.query("> .dojoDndItem",this.parent);},sync:function(){var map={};this.getAllNodes().forEach(function(node){if(node.id){var item=this.getItem(node.id);if(item){map[node.id]=item;return;}}else{node.id=dojo.dnd.getUniqueId();}var type=node.getAttribute("dndType"),data=node.getAttribute("dndData");map[node.id]={data:data||node.innerHTML,type:type?type.split(/\s*,\s*/):["text"]};},this);this.map=map;return this;},insertNodes:function(data,_816,_817){if(!this.parent.firstChild){_817=null;}else{if(_816){if(!_817){_817=this.parent.firstChild;}}else{if(_817){_817=_817.nextSibling;}}}if(_817){for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.insertBefore(t.node,_817);}}else{for(var i=0;i<data.length;++i){var t=this._normalizedCreator(data[i]);this.setItem(t.node.id,{data:t.data,type:t.type});this.parent.appendChild(t.node);}}return this;},destroy:function(){dojo.forEach(this.events,dojo.disconnect);this.clearItems();this.node=this.parent=this.current=null;},markupFactory:function(_818,node){_818._skipStartup=true;return new dojo.dnd.Container(node,_818);},startup:function(){if(!this.parent){this.parent=this.node;if(this.parent.tagName.toLowerCase()=="table"){var c=this.parent.getElementsByTagName("tbody");if(c&&c.length){this.parent=c[0];}}}this.defaultCreator=dojo.dnd._defaultCreator(this.parent);this.sync();},onMouseOver:function(e){var n=e.relatedTarget;while(n){if(n==this.node){break;}try{n=n.parentNode;}catch(x){n=null;}}if(!n){this._changeState("Container","Over");this.onOverEvent();}n=this._getChildByEvent(e);if(this.current==n){return;}if(this.current){this._removeItemClass(this.current,"Over");}if(n){this._addItemClass(n,"Over");}this.current=n;},onMouseOut:function(e){for(var n=e.relatedTarget;n;){if(n==this.node){return;}try{n=n.parentNode;}catch(x){n=null;}}if(this.current){this._removeItemClass(this.current,"Over");this.current=null;}this._changeState("Container","");this.onOutEvent();},onSelectStart:function(e){if(!this.skipForm||!dojo.dnd.isFormElement(e)){dojo.stopEvent(e);}},onOverEvent:function(){},onOutEvent:function(){},_changeState:function(type,_819){var _81a="dojoDnd"+type;var _81b=type.toLowerCase()+"State";dojo.replaceClass(this.node,_81a+_819,_81a+this[_81b]);this[_81b]=_819;},_addItemClass:function(node,type){dojo.addClass(node,"dojoDndItem"+type);},_removeItemClass:function(node,type){dojo.removeClass(node,"dojoDndItem"+type);},_getChildByEvent:function(e){var node=e.target;if(node){for(var _81c=node.parentNode;_81c;node=_81c,_81c=node.parentNode){if(_81c==this.parent&&dojo.hasClass(node,"dojoDndItem")){return node;}}}return null;},_normalizedCreator:function(item,hint){var t=(this.creator||this.defaultCreator).call(this,item,hint);if(!dojo.isArray(t.type)){t.type=["text"];}if(!t.node.id){t.node.id=dojo.dnd.getUniqueId();}dojo.addClass(t.node,"dojoDndItem");return t;}});dojo.dnd._createNode=function(tag){if(!tag){return dojo.dnd._createSpan;}return function(text){return dojo.create(tag,{innerHTML:text});};};dojo.dnd._createTrTd=function(text){var tr=dojo.create("tr");dojo.create("td",{innerHTML:text},tr);return tr;};dojo.dnd._createSpan=function(text){return dojo.create("span",{innerHTML:text});};dojo.dnd._defaultCreatorNodes={ul:"li",ol:"li",div:"div",p:"div"};dojo.dnd._defaultCreator=function(node){var tag=node.tagName.toLowerCase();var c=tag=="tbody"||tag=="thead"?dojo.dnd._createTrTd:dojo.dnd._createNode(dojo.dnd._defaultCreatorNodes[tag]);return function(item,hint){var _81d=item&&dojo.isObject(item),data,type,n;if(_81d&&item.tagName&&item.nodeType&&item.getAttribute){data=item.getAttribute("dndData")||item.innerHTML;type=item.getAttribute("dndType");type=type?type.split(/\s*,\s*/):["text"];n=item;}else{data=(_81d&&item.data)?item.data:item;type=(_81d&&item.type)?item.type:["text"];n=(hint=="avatar"?dojo.dnd._createSpan:c)(String(data));}if(!n.id){n.id=dojo.dnd.getUniqueId();}return {node:n,data:data,type:type};};};}if(!dojo._hasResource["dojo.dnd.Selector"]){dojo._hasResource["dojo.dnd.Selector"]=true;dojo.provide("dojo.dnd.Selector");dojo.declare("dojo.dnd.Selector",dojo.dnd.Container,{constructor:function(node,_81e){if(!_81e){_81e={};}this.singular=_81e.singular;this.autoSync=_81e.autoSync;this.selection={};this.anchor=null;this.simpleSelection=false;this.events.push(dojo.connect(this.node,"onmousedown",this,"onMouseDown"),dojo.connect(this.node,"onmouseup",this,"onMouseUp"));},singular:false,getSelectedNodes:function(){var t=new dojo.NodeList();var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}t.push(dojo.byId(i));}return t;},selectNone:function(){return this._removeSelection()._removeAnchor();},selectAll:function(){this.forInItems(function(data,id){this._addItemClass(dojo.byId(id),"Selected");this.selection[id]=1;},this);return this._removeAnchor();},deleteSelectedNodes:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var n=dojo.byId(i);this.delItem(i);dojo.destroy(n);}this.anchor=null;this.selection={};return this;},forInSelectedItems:function(f,o){o=o||dojo.global;var s=this.selection,e=dojo.dnd._empty;for(var i in s){if(i in e){continue;}f.call(o,this.getItem(i),i,this);}},sync:function(){dojo.dnd.Selector.superclass.sync.call(this);if(this.anchor){if(!this.getItem(this.anchor.id)){this.anchor=null;}}var t=[],e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}if(!this.getItem(i)){t.push(i);}}dojo.forEach(t,function(i){delete this.selection[i];},this);return this;},insertNodes:function(_81f,data,_820,_821){var _822=this._normalizedCreator;this._normalizedCreator=function(item,hint){var t=_822.call(this,item,hint);if(_81f){if(!this.anchor){this.anchor=t.node;this._removeItemClass(t.node,"Selected");this._addItemClass(this.anchor,"Anchor");}else{if(this.anchor!=t.node){this._removeItemClass(t.node,"Anchor");this._addItemClass(t.node,"Selected");}}this.selection[t.node.id]=1;}else{this._removeItemClass(t.node,"Selected");this._removeItemClass(t.node,"Anchor");}return t;};dojo.dnd.Selector.superclass.insertNodes.call(this,data,_820,_821);this._normalizedCreator=_822;return this;},destroy:function(){dojo.dnd.Selector.superclass.destroy.call(this);this.selection=this.anchor=null;},markupFactory:function(_823,node){_823._skipStartup=true;return new dojo.dnd.Selector(node,_823);},onMouseDown:function(e){if(this.autoSync){this.sync();}if(!this.current){return;}if(!this.singular&&!dojo.isCopyKey(e)&&!e.shiftKey&&(this.current.id in this.selection)){this.simpleSelection=true;if(e.button===dojo.mouseButtons.LEFT){dojo.stopEvent(e);}return;}if(!this.singular&&e.shiftKey){if(!dojo.isCopyKey(e)){this._removeSelection();}var c=this.getAllNodes();if(c.length){if(!this.anchor){this.anchor=c[0];this._addItemClass(this.anchor,"Anchor");}this.selection[this.anchor.id]=1;if(this.anchor!=this.current){var i=0;for(;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}}for(++i;i<c.length;++i){var node=c[i];if(node==this.anchor||node==this.current){break;}this._addItemClass(node,"Selected");this.selection[node.id]=1;}this._addItemClass(this.current,"Selected");this.selection[this.current.id]=1;}}}else{if(this.singular){if(this.anchor==this.current){if(dojo.isCopyKey(e)){this.selectNone();}}else{this.selectNone();this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}}else{if(dojo.isCopyKey(e)){if(this.anchor==this.current){delete this.selection[this.anchor.id];this._removeAnchor();}else{if(this.current.id in this.selection){this._removeItemClass(this.current,"Selected");delete this.selection[this.current.id];}else{if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this._addItemClass(this.anchor,"Selected");}this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}else{if(!(this.current.id in this.selection)){this.selectNone();this.anchor=this.current;this._addItemClass(this.current,"Anchor");this.selection[this.current.id]=1;}}}}dojo.stopEvent(e);},onMouseUp:function(e){if(!this.simpleSelection){return;}this.simpleSelection=false;this.selectNone();if(this.current){this.anchor=this.current;this._addItemClass(this.anchor,"Anchor");this.selection[this.current.id]=1;}},onMouseMove:function(e){this.simpleSelection=false;},onOverEvent:function(){this.onmousemoveEvent=dojo.connect(this.node,"onmousemove",this,"onMouseMove");},onOutEvent:function(){dojo.disconnect(this.onmousemoveEvent);delete this.onmousemoveEvent;},_removeSelection:function(){var e=dojo.dnd._empty;for(var i in this.selection){if(i in e){continue;}var node=dojo.byId(i);if(node){this._removeItemClass(node,"Selected");}}this.selection={};return this;},_removeAnchor:function(){if(this.anchor){this._removeItemClass(this.anchor,"Anchor");this.anchor=null;}return this;}});}if(!dojo._hasResource["dojo.dnd.Avatar"]){dojo._hasResource["dojo.dnd.Avatar"]=true;dojo.provide("dojo.dnd.Avatar");dojo.declare("dojo.dnd.Avatar",null,{constructor:function(_824){this.manager=_824;this.construct();},construct:function(){this.isA11y=dojo.hasClass(dojo.body(),"dijit_a11y");var a=dojo.create("table",{"class":"dojoDndAvatar",style:{position:"absolute",zIndex:"1999",margin:"0px"}}),_825=this.manager.source,node,b=dojo.create("tbody",null,a),tr=dojo.create("tr",null,b),td=dojo.create("td",null,tr),icon=this.isA11y?dojo.create("span",{id:"a11yIcon",innerHTML:this.manager.copy?"+":"<"},td):null,span=dojo.create("span",{innerHTML:_825.generateText?this._generateText():""},td),k=Math.min(5,this.manager.nodes.length),i=0;dojo.attr(tr,{"class":"dojoDndAvatarHeader",style:{opacity:0.9}});for(;i<k;++i){if(_825.creator){node=_825._normalizedCreator(_825.getItem(this.manager.nodes[i].id).data,"avatar").node;}else{node=this.manager.nodes[i].cloneNode(true);if(node.tagName.toLowerCase()=="tr"){var _826=dojo.create("table"),_827=dojo.create("tbody",null,_826);_827.appendChild(node);node=_826;}}node.id="";tr=dojo.create("tr",null,b);td=dojo.create("td",null,tr);td.appendChild(node);dojo.attr(tr,{"class":"dojoDndAvatarItem",style:{opacity:(9-i)/10}});}this.node=a;},destroy:function(){dojo.destroy(this.node);this.node=false;},update:function(){dojo[(this.manager.canDropFlag?"add":"remove")+"Class"](this.node,"dojoDndAvatarCanDrop");if(this.isA11y){var icon=dojo.byId("a11yIcon");var text="+";if(this.manager.canDropFlag&&!this.manager.copy){text="< ";}else{if(!this.manager.canDropFlag&&!this.manager.copy){text="o";}else{if(!this.manager.canDropFlag){text="x";}}}icon.innerHTML=text;}dojo.query(("tr.dojoDndAvatarHeader td span"+(this.isA11y?" span":"")),this.node).forEach(function(node){node.innerHTML=this._generateText();},this);},_generateText:function(){return this.manager.nodes.length.toString();}});}if(!dojo._hasResource["dojo.dnd.Manager"]){dojo._hasResource["dojo.dnd.Manager"]=true;dojo.provide("dojo.dnd.Manager");dojo.declare("dojo.dnd.Manager",null,{constructor:function(){this.avatar=null;this.source=null;this.nodes=[];this.copy=true;this.target=null;this.canDropFlag=false;this.events=[];},OFFSET_X:16,OFFSET_Y:16,overSource:function(_828){if(this.avatar){this.target=(_828&&_828.targetState!="Disabled")?_828:null;this.canDropFlag=Boolean(this.target);this.avatar.update();}dojo.publish("/dnd/source/over",[_828]);},outSource:function(_829){if(this.avatar){if(this.target==_829){this.target=null;this.canDropFlag=false;this.avatar.update();dojo.publish("/dnd/source/over",[null]);}}else{dojo.publish("/dnd/source/over",[null]);}},startDrag:function(_82a,_82b,copy){this.source=_82a;this.nodes=_82b;this.copy=Boolean(copy);this.avatar=this.makeAvatar();dojo.body().appendChild(this.avatar.node);dojo.publish("/dnd/start",[_82a,_82b,this.copy]);this.events=[dojo.connect(dojo.doc,"onmousemove",this,"onMouseMove"),dojo.connect(dojo.doc,"onmouseup",this,"onMouseUp"),dojo.connect(dojo.doc,"onkeydown",this,"onKeyDown"),dojo.connect(dojo.doc,"onkeyup",this,"onKeyUp"),dojo.connect(dojo.doc,"ondragstart",dojo.stopEvent),dojo.connect(dojo.body(),"onselectstart",dojo.stopEvent)];var c="dojoDnd"+(copy?"Copy":"Move");dojo.addClass(dojo.body(),c);},canDrop:function(flag){var _82c=Boolean(this.target&&flag);if(this.canDropFlag!=_82c){this.canDropFlag=_82c;this.avatar.update();}},stopDrag:function(){dojo.removeClass(dojo.body(),["dojoDndCopy","dojoDndMove"]);dojo.forEach(this.events,dojo.disconnect);this.events=[];this.avatar.destroy();this.avatar=null;this.source=this.target=null;this.nodes=[];},makeAvatar:function(){return new dojo.dnd.Avatar(this);},updateAvatar:function(){this.avatar.update();},onMouseMove:function(e){var a=this.avatar;if(a){dojo.dnd.autoScrollNodes(e);var s=a.node.style;s.left=(e.pageX+this.OFFSET_X)+"px";s.top=(e.pageY+this.OFFSET_Y)+"px";var copy=Boolean(this.source.copyState(dojo.isCopyKey(e)));if(this.copy!=copy){this._setCopyStatus(copy);}}},onMouseUp:function(e){if(this.avatar){if(this.target&&this.canDropFlag){var copy=Boolean(this.source.copyState(dojo.isCopyKey(e))),_82d=[this.source,this.nodes,copy,this.target,e];dojo.publish("/dnd/drop/before",_82d);dojo.publish("/dnd/drop",_82d);}else{dojo.publish("/dnd/cancel");}this.stopDrag();}},onKeyDown:function(e){if(this.avatar){switch(e.keyCode){case dojo.keys.CTRL:var copy=Boolean(this.source.copyState(true));if(this.copy!=copy){this._setCopyStatus(copy);}break;case dojo.keys.ESCAPE:dojo.publish("/dnd/cancel");this.stopDrag();break;}}},onKeyUp:function(e){if(this.avatar&&e.keyCode==dojo.keys.CTRL){var copy=Boolean(this.source.copyState(false));if(this.copy!=copy){this._setCopyStatus(copy);}}},_setCopyStatus:function(copy){this.copy=copy;this.source._markDndStatus(this.copy);this.updateAvatar();dojo.replaceClass(dojo.body(),"dojoDnd"+(this.copy?"Copy":"Move"),"dojoDnd"+(this.copy?"Move":"Copy"));}});dojo.dnd._manager=null;dojo.dnd.manager=function(){if(!dojo.dnd._manager){dojo.dnd._manager=new dojo.dnd.Manager();}return dojo.dnd._manager;};}if(!dojo._hasResource["dojo.dnd.Source"]){dojo._hasResource["dojo.dnd.Source"]=true;dojo.provide("dojo.dnd.Source");dojo.declare("dojo.dnd.Source",dojo.dnd.Selector,{isSource:true,horizontal:false,copyOnly:false,selfCopy:false,selfAccept:true,skipForm:false,withHandles:false,autoSync:false,delay:0,accept:["text"],generateText:true,constructor:function(node,_82e){dojo.mixin(this,dojo.mixin({},_82e));var type=this.accept;if(type.length){this.accept={};for(var i=0;i<type.length;++i){this.accept[type[i]]=1;}}this.isDragging=false;this.mouseDown=false;this.targetAnchor=null;this.targetBox=null;this.before=true;this._lastX=0;this._lastY=0;this.sourceState="";if(this.isSource){dojo.addClass(this.node,"dojoDndSource");}this.targetState="";if(this.accept){dojo.addClass(this.node,"dojoDndTarget");}if(this.horizontal){dojo.addClass(this.node,"dojoDndHorizontal");}this.topics=[dojo.subscribe("/dnd/source/over",this,"onDndSourceOver"),dojo.subscribe("/dnd/start",this,"onDndStart"),dojo.subscribe("/dnd/drop",this,"onDndDrop"),dojo.subscribe("/dnd/cancel",this,"onDndCancel")];},checkAcceptance:function(_82f,_830){if(this==_82f){return !this.copyOnly||this.selfAccept;}for(var i=0;i<_830.length;++i){var type=_82f.getItem(_830[i].id).type;var flag=false;for(var j=0;j<type.length;++j){if(type[j] in this.accept){flag=true;break;}}if(!flag){return false;}}return true;},copyState:function(_831,self){if(_831){return true;}if(arguments.length<2){self=this==dojo.dnd.manager().target;}if(self){if(this.copyOnly){return this.selfCopy;}}else{return this.copyOnly;}return false;},destroy:function(){dojo.dnd.Source.superclass.destroy.call(this);dojo.forEach(this.topics,dojo.unsubscribe);this.targetAnchor=null;},markupFactory:function(_832,node){_832._skipStartup=true;return new dojo.dnd.Source(node,_832);},onMouseMove:function(e){if(this.isDragging&&this.targetState=="Disabled"){return;}dojo.dnd.Source.superclass.onMouseMove.call(this,e);var m=dojo.dnd.manager();if(!this.isDragging){if(this.mouseDown&&this.isSource&&(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)){var _833=this.getSelectedNodes();if(_833.length){m.startDrag(this,_833,this.copyState(dojo.isCopyKey(e),true));}}}if(this.isDragging){var _834=false;if(this.current){if(!this.targetBox||this.targetAnchor!=this.current){this.targetBox=dojo.position(this.current,true);}if(this.horizontal){_834=(e.pageX-this.targetBox.x)<(this.targetBox.w/2);}else{_834=(e.pageY-this.targetBox.y)<(this.targetBox.h/2);}}if(this.current!=this.targetAnchor||_834!=this.before){this._markTargetAnchor(_834);m.canDrop(!this.current||m.source!=this||!(this.current.id in this.selection));}}},onMouseDown:function(e){if(!this.mouseDown&&this._legalMouseDown(e)&&(!this.skipForm||!dojo.dnd.isFormElement(e))){this.mouseDown=true;this._lastX=e.pageX;this._lastY=e.pageY;dojo.dnd.Source.superclass.onMouseDown.call(this,e);}},onMouseUp:function(e){if(this.mouseDown){this.mouseDown=false;dojo.dnd.Source.superclass.onMouseUp.call(this,e);}},onDndSourceOver:function(_835){if(this!=_835){this.mouseDown=false;if(this.targetAnchor){this._unmarkTargetAnchor();}}else{if(this.isDragging){var m=dojo.dnd.manager();m.canDrop(this.targetState!="Disabled"&&(!this.current||m.source!=this||!(this.current.id in this.selection)));}}},onDndStart:function(_836,_837,copy){if(this.autoSync){this.sync();}if(this.isSource){this._changeState("Source",this==_836?(copy?"Copied":"Moved"):"");}var _838=this.accept&&this.checkAcceptance(_836,_837);this._changeState("Target",_838?"":"Disabled");if(this==_836){dojo.dnd.manager().overSource(this);}this.isDragging=true;},onDndDrop:function(_839,_83a,copy,_83b){if(this==_83b){this.onDrop(_839,_83a,copy);}this.onDndCancel();},onDndCancel:function(){if(this.targetAnchor){this._unmarkTargetAnchor();this.targetAnchor=null;}this.before=true;this.isDragging=false;this.mouseDown=false;this._changeState("Source","");this._changeState("Target","");},onDrop:function(_83c,_83d,copy){if(this!=_83c){this.onDropExternal(_83c,_83d,copy);}else{this.onDropInternal(_83d,copy);}},onDropExternal:function(_83e,_83f,copy){var _840=this._normalizedCreator;if(this.creator){this._normalizedCreator=function(node,hint){return _840.call(this,_83e.getItem(node.id).data,hint);};}else{if(copy){this._normalizedCreator=function(node,hint){var t=_83e.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}else{this._normalizedCreator=function(node,hint){var t=_83e.getItem(node.id);_83e.delItem(node.id);return {node:node,data:t.data,type:t.type};};}}this.selectNone();if(!copy&&!this.creator){_83e.selectNone();}this.insertNodes(true,_83f,this.before,this.current);if(!copy&&this.creator){_83e.deleteSelectedNodes();}this._normalizedCreator=_840;},onDropInternal:function(_841,copy){var _842=this._normalizedCreator;if(this.current&&this.current.id in this.selection){return;}if(copy){if(this.creator){this._normalizedCreator=function(node,hint){return _842.call(this,this.getItem(node.id).data,hint);};}else{this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);var n=node.cloneNode(true);n.id=dojo.dnd.getUniqueId();return {node:n,data:t.data,type:t.type};};}}else{if(!this.current){return;}this._normalizedCreator=function(node,hint){var t=this.getItem(node.id);return {node:node,data:t.data,type:t.type};};}this._removeSelection();this.insertNodes(true,_841,this.before,this.current);this._normalizedCreator=_842;},onDraggingOver:function(){},onDraggingOut:function(){},onOverEvent:function(){dojo.dnd.Source.superclass.onOverEvent.call(this);dojo.dnd.manager().overSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOver();}},onOutEvent:function(){dojo.dnd.Source.superclass.onOutEvent.call(this);dojo.dnd.manager().outSource(this);if(this.isDragging&&this.targetState!="Disabled"){this.onDraggingOut();}},_markTargetAnchor:function(_843){if(this.current==this.targetAnchor&&this.before==_843){return;}if(this.targetAnchor){this._removeItemClass(this.targetAnchor,this.before?"Before":"After");}this.targetAnchor=this.current;this.targetBox=null;this.before=_843;if(this.targetAnchor){this._addItemClass(this.targetAnchor,this.before?"Before":"After");}},_unmarkTargetAnchor:function(){if(!this.targetAnchor){return;}this._removeItemClass(this.targetAnchor,this.before?"Before":"After");this.targetAnchor=null;this.targetBox=null;this.before=true;},_markDndStatus:function(copy){this._changeState("Source",copy?"Copied":"Moved");},_legalMouseDown:function(e){if(!dojo.mouseButtons.isLeft(e)){return false;}if(!this.withHandles){return true;}for(var node=e.target;node&&node!==this.node;node=node.parentNode){if(dojo.hasClass(node,"dojoDndHandle")){return true;}if(dojo.hasClass(node,"dojoDndItem")||dojo.hasClass(node,"dojoDndIgnore")){break;}}return false;}});dojo.declare("dojo.dnd.Target",dojo.dnd.Source,{constructor:function(node,_844){this.isSource=false;dojo.removeClass(this.node,"dojoDndSource");},markupFactory:function(_845,node){_845._skipStartup=true;return new dojo.dnd.Target(node,_845);}});dojo.declare("dojo.dnd.AutoSource",dojo.dnd.Source,{constructor:function(node,_846){this.autoSync=true;},markupFactory:function(_847,node){_847._skipStartup=true;return new dojo.dnd.AutoSource(node,_847);}});}if(!dojo._hasResource["dojox.grid._View"]){dojo._hasResource["dojox.grid._View"]=true;dojo.provide("dojox.grid._View");(function(){var _848=function(_849,_84a){return _849.style.cssText==undefined?_849.getAttribute("style"):_849.style.cssText;};dojo.declare("dojox.grid._View",[dijit._Widget,dijit._Templated],{defaultWidth:"18em",viewWidth:"",templateString:"<div class=\"dojoxGridView\" role=\"presentation\">\n\t<div class=\"dojoxGridHeader\" dojoAttachPoint=\"headerNode\" role=\"presentation\">\n\t\t<div dojoAttachPoint=\"headerNodeContainer\" style=\"width:9000em\" role=\"presentation\">\n\t\t\t<div dojoAttachPoint=\"headerContentNode\" role=\"row\"></div>\n\t\t</div>\n\t</div>\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" dojoAttachPoint=\"hiddenFocusNode\" role=\"presentation\" />\n\t<input type=\"checkbox\" class=\"dojoxGridHiddenFocus\" role=\"presentation\" />\n\t<div class=\"dojoxGridScrollbox\" dojoAttachPoint=\"scrollboxNode\" role=\"presentation\">\n\t\t<div class=\"dojoxGridContent\" dojoAttachPoint=\"contentNode\" hidefocus=\"hidefocus\" role=\"presentation\"></div>\n\t</div>\n</div>\n",themeable:false,classTag:"dojoxGrid",marginBottom:0,rowPad:2,_togglingColumn:-1,_headerBuilderClass:dojox.grid._HeaderBuilder,_contentBuilderClass:dojox.grid._ContentBuilder,postMixInProperties:function(){this.rowNodes={};},postCreate:function(){this.connect(this.scrollboxNode,"onscroll","doscroll");dojox.grid.util.funnelEvents(this.contentNode,this,"doContentEvent",["mouseover","mouseout","click","dblclick","contextmenu","mousedown"]);dojox.grid.util.funnelEvents(this.headerNode,this,"doHeaderEvent",["dblclick","mouseover","mouseout","mousemove","mousedown","click","contextmenu"]);this.content=new this._contentBuilderClass(this);this.header=new this._headerBuilderClass(this);if(!dojo._isBodyLtr()){this.headerNodeContainer.style.width="";}},destroy:function(){dojo.destroy(this.headerNode);delete this.headerNode;for(var i in this.rowNodes){dojo.destroy(this.rowNodes[i]);}this.rowNodes={};if(this.source){this.source.destroy();}this.inherited(arguments);},focus:function(){if(dojo.isIE||dojo.isWebKit||dojo.isOpera){this.hiddenFocusNode.focus();}else{this.scrollboxNode.focus();}},setStructure:function(_84b){var vs=(this.structure=_84b);if(vs.width&&!isNaN(vs.width)){this.viewWidth=vs.width+"em";}else{this.viewWidth=vs.width||(vs.noscroll?"auto":this.viewWidth);}this._onBeforeRow=vs.onBeforeRow||function(){};this._onAfterRow=vs.onAfterRow||function(){};this.noscroll=vs.noscroll;if(this.noscroll){this.scrollboxNode.style.overflow="hidden";}this.simpleStructure=Boolean(vs.cells.length==1);this.testFlexCells();this.updateStructure();},_cleanupRowWidgets:function(_84c){if(_84c){dojo.forEach(dojo.query("[widgetId]",_84c).map(dijit.byNode),function(w){if(w._destroyOnRemove){w.destroy();delete w;}else{if(w.domNode&&w.domNode.parentNode){w.domNode.parentNode.removeChild(w.domNode);}}});}},onBeforeRow:function(_84d,_84e){this._onBeforeRow(_84d,_84e);if(_84d>=0){this._cleanupRowWidgets(this.getRowNode(_84d));}},onAfterRow:function(_84f,_850,_851){this._onAfterRow(_84f,_850,_851);var g=this.grid;dojo.forEach(dojo.query(".dojoxGridStubNode",_851),function(n){if(n&&n.parentNode){var lw=n.getAttribute("linkWidget");var _852=window.parseInt(dojo.attr(n,"cellIdx"),10);var _853=g.getCell(_852);var w=dijit.byId(lw);if(w){n.parentNode.replaceChild(w.domNode,n);if(!w._started){w.startup();}}else{n.innerHTML="";}}},this);},testFlexCells:function(){this.flexCells=false;for(var j=0,row;(row=this.structure.cells[j]);j++){for(var i=0,cell;(cell=row[i]);i++){cell.view=this;this.flexCells=this.flexCells||cell.isFlex();}}return this.flexCells;},updateStructure:function(){this.header.update();this.content.update();},getScrollbarWidth:function(){var _854=this.hasVScrollbar();var _855=dojo.style(this.scrollboxNode,"overflow");if(this.noscroll||!_855||_855=="hidden"){_854=false;}else{if(_855=="scroll"){_854=true;}}return (_854?dojox.html.metrics.getScrollbar().w:0);},getColumnsWidth:function(){var h=this.headerContentNode;return h&&h.firstChild?h.firstChild.offsetWidth:0;},setColumnsWidth:function(_856){this.headerContentNode.firstChild.style.width=_856+"px";if(this.viewWidth){this.viewWidth=_856+"px";}},getWidth:function(){return this.viewWidth||(this.getColumnsWidth()+this.getScrollbarWidth())+"px";},getContentWidth:function(){return Math.max(0,dojo._getContentBox(this.domNode).w-this.getScrollbarWidth())+"px";},render:function(){this.scrollboxNode.style.height="";this.renderHeader();if(this._togglingColumn>=0){this.setColumnsWidth(this.getColumnsWidth()-this._togglingColumn);this._togglingColumn=-1;}var _857=this.grid.layout.cells;var _858=dojo.hitch(this,function(node,_859){!dojo._isBodyLtr()&&(_859=!_859);var inc=_859?-1:1;var idx=this.header.getCellNodeIndex(node)+inc;var cell=_857[idx];while(cell&&cell.getHeaderNode()&&cell.getHeaderNode().style.display=="none"){idx+=inc;cell=_857[idx];}if(cell){return cell.getHeaderNode();}return null;});if(this.grid.columnReordering&&this.simpleStructure){if(this.source){this.source.destroy();}var _85a="dojoxGrid_bottomMarker";var _85b="dojoxGrid_topMarker";if(this.bottomMarker){dojo.destroy(this.bottomMarker);}this.bottomMarker=dojo.byId(_85a);if(this.topMarker){dojo.destroy(this.topMarker);}this.topMarker=dojo.byId(_85b);if(!this.bottomMarker){this.bottomMarker=dojo.create("div",{"id":_85a,"class":"dojoxGridColPlaceBottom"},dojo.body());this._hide(this.bottomMarker);this.topMarker=dojo.create("div",{"id":_85b,"class":"dojoxGridColPlaceTop"},dojo.body());this._hide(this.topMarker);}this.arrowDim=dojo.contentBox(this.bottomMarker);var _85c=dojo.contentBox(this.headerContentNode.firstChild.rows[0]).h;this.source=new dojo.dnd.Source(this.headerContentNode.firstChild.rows[0],{horizontal:true,accept:["gridColumn_"+this.grid.id],viewIndex:this.index,generateText:false,onMouseDown:dojo.hitch(this,function(e){this.header.decorateEvent(e);if((this.header.overRightResizeArea(e)||this.header.overLeftResizeArea(e))&&this.header.canResize(e)&&!this.header.moveable){this.header.beginColumnResize(e);}else{if(this.grid.headerMenu){this.grid.headerMenu.onCancel(true);}if(e.button===(dojo.isIE?1:0)){dojo.dnd.Source.prototype.onMouseDown.call(this.source,e);}}}),onMouseOver:dojo.hitch(this,function(e){var src=this.source;if(src._getChildByEvent(e)){dojo.dnd.Source.prototype.onMouseOver.apply(src,arguments);}}),_markTargetAnchor:dojo.hitch(this,function(_85d){var src=this.source;if(src.current==src.targetAnchor&&src.before==_85d){return;}if(src.targetAnchor&&_858(src.targetAnchor,src.before)){src._removeItemClass(_858(src.targetAnchor,src.before),src.before?"After":"Before");}dojo.dnd.Source.prototype._markTargetAnchor.call(src,_85d);var _85e=_85d?src.targetAnchor:_858(src.targetAnchor,src.before);var _85f=0;if(!_85e){_85e=src.targetAnchor;_85f=dojo.contentBox(_85e).w+this.arrowDim.w/2+2;}var pos=(dojo.position||dojo._abs)(_85e,true);var left=Math.floor(pos.x-this.arrowDim.w/2+_85f);dojo.style(this.bottomMarker,"visibility","visible");dojo.style(this.topMarker,"visibility","visible");dojo.style(this.bottomMarker,{"left":left+"px","top":(_85c+pos.y)+"px"});dojo.style(this.topMarker,{"left":left+"px","top":(pos.y-this.arrowDim.h)+"px"});if(src.targetAnchor&&_858(src.targetAnchor,src.before)){src._addItemClass(_858(src.targetAnchor,src.before),src.before?"After":"Before");}}),_unmarkTargetAnchor:dojo.hitch(this,function(){var src=this.source;if(!src.targetAnchor){return;}if(src.targetAnchor&&_858(src.targetAnchor,src.before)){src._removeItemClass(_858(src.targetAnchor,src.before),src.before?"After":"Before");}this._hide(this.bottomMarker);this._hide(this.topMarker);dojo.dnd.Source.prototype._unmarkTargetAnchor.call(src);}),destroy:dojo.hitch(this,function(){dojo.disconnect(this._source_conn);dojo.unsubscribe(this._source_sub);dojo.dnd.Source.prototype.destroy.call(this.source);if(this.bottomMarker){dojo.destroy(this.bottomMarker);delete this.bottomMarker;}if(this.topMarker){dojo.destroy(this.topMarker);delete this.topMarker;}}),onDndCancel:dojo.hitch(this,function(){dojo.dnd.Source.prototype.onDndCancel.call(this.source);this._hide(this.bottomMarker);this._hide(this.topMarker);})});this._source_conn=dojo.connect(this.source,"onDndDrop",this,"_onDndDrop");this._source_sub=dojo.subscribe("/dnd/drop/before",this,"_onDndDropBefore");this.source.startup();}},_hide:function(node){dojo.style(node,{left:"-10000px",top:"-10000px","visibility":"hidden"});},_onDndDropBefore:function(_860,_861,copy){if(dojo.dnd.manager().target!==this.source){return;}this.source._targetNode=this.source.targetAnchor;this.source._beforeTarget=this.source.before;var _862=this.grid.views.views;var _863=_862[_860.viewIndex];var _864=_862[this.index];if(_864!=_863){_863.convertColPctToFixed();_864.convertColPctToFixed();}},_onDndDrop:function(_865,_866,copy){if(dojo.dnd.manager().target!==this.source){if(dojo.dnd.manager().source===this.source){this._removingColumn=true;}return;}this._hide(this.bottomMarker);this._hide(this.topMarker);var _867=function(n){return n?dojo.attr(n,"idx"):null;};var w=dojo.marginBox(_866[0]).w;if(_865.viewIndex!==this.index){var _868=this.grid.views.views;var _869=_868[_865.viewIndex];var _86a=_868[this.index];if(_869.viewWidth&&_869.viewWidth!="auto"){_869.setColumnsWidth(_869.getColumnsWidth()-w);}if(_86a.viewWidth&&_86a.viewWidth!="auto"){_86a.setColumnsWidth(_86a.getColumnsWidth());}}var stn=this.source._targetNode;var stb=this.source._beforeTarget;!dojo._isBodyLtr()&&(stb=!stb);var _86b=this.grid.layout;var idx=this.index;delete this.source._targetNode;delete this.source._beforeTarget;_86b.moveColumn(_865.viewIndex,idx,_867(_866[0]),_867(stn),stb);},renderHeader:function(){this.headerContentNode.innerHTML=this.header.generateHtml(this._getHeaderContent);if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[-1,this.structure.cells,this.headerContentNode]);},_getHeaderContent:function(_86c){var n=_86c.name||_86c.grid.getCellName(_86c);var ret=["<div class=\"dojoxGridSortNode"];if(_86c.index!=_86c.grid.getSortIndex()){ret.push("\">");}else{ret=ret.concat([" ",_86c.grid.sortInfo>0?"dojoxGridSortUp":"dojoxGridSortDown","\"><div class=\"dojoxGridArrowButtonChar\">",_86c.grid.sortInfo>0?"&#9650;":"&#9660;","</div><div class=\"dojoxGridArrowButtonNode\" role=\"presentation\"></div>","<div class=\"dojoxGridColCaption\">"]);}ret=ret.concat([n,"</div></div>"]);return ret.join("");},resize:function(){this.adaptHeight();this.adaptWidth();},hasHScrollbar:function(_86d){var _86e=this._hasHScroll||false;if(this._hasHScroll==undefined||_86d){if(this.noscroll){this._hasHScroll=false;}else{var _86f=dojo.style(this.scrollboxNode,"overflow");if(_86f=="hidden"){this._hasHScroll=false;}else{if(_86f=="scroll"){this._hasHScroll=true;}else{this._hasHScroll=(this.scrollboxNode.offsetWidth-this.getScrollbarWidth()<this.contentNode.offsetWidth);}}}}if(_86e!==this._hasHScroll){this.grid.update();}return this._hasHScroll;},hasVScrollbar:function(_870){var _871=this._hasVScroll||false;if(this._hasVScroll==undefined||_870){if(this.noscroll){this._hasVScroll=false;}else{var _872=dojo.style(this.scrollboxNode,"overflow");if(_872=="hidden"){this._hasVScroll=false;}else{if(_872=="scroll"){this._hasVScroll=true;}else{this._hasVScroll=(this.scrollboxNode.scrollHeight>this.scrollboxNode.clientHeight);}}}}if(_871!==this._hasVScroll){this.grid.update();}return this._hasVScroll;},convertColPctToFixed:function(){var _873=false;this.grid.initialWidth="";var _874=dojo.query("th",this.headerContentNode);var _875=dojo.map(_874,function(c,vIdx){var w=c.style.width;dojo.attr(c,"vIdx",vIdx);if(w&&w.slice(-1)=="%"){_873=true;}else{if(w&&w.slice(-2)=="px"){return window.parseInt(w,10);}}return dojo.contentBox(c).w;});if(_873){dojo.forEach(this.grid.layout.cells,function(cell,idx){if(cell.view==this){var _876=cell.view.getHeaderCellNode(cell.index);if(_876&&dojo.hasAttr(_876,"vIdx")){var vIdx=window.parseInt(dojo.attr(_876,"vIdx"));this.setColWidth(idx,_875[vIdx]);dojo.removeAttr(_876,"vIdx");}}},this);return true;}return false;},adaptHeight:function(_877){if(!this.grid._autoHeight){var h=(this.domNode.style.height&&parseInt(this.domNode.style.height.replace(/px/,""),10))||this.domNode.clientHeight;var self=this;var _878=function(){var v;for(var i in self.grid.views.views){v=self.grid.views.views[i];if(v!==self&&v.hasHScrollbar()){return true;}}return false;};if(_877||(this.noscroll&&_878())){h-=dojox.html.metrics.getScrollbar().h;}dojox.grid.util.setStyleHeightPx(this.scrollboxNode,h);}this.hasVScrollbar(true);},adaptWidth:function(){if(this.flexCells){this.contentWidth=this.getContentWidth();this.headerContentNode.firstChild.style.width=this.contentWidth;}var w=this.scrollboxNode.offsetWidth-this.getScrollbarWidth();if(!this._removingColumn){w=Math.max(w,this.getColumnsWidth())+"px";}else{w=Math.min(w,this.getColumnsWidth())+"px";this._removingColumn=false;}var cn=this.contentNode;cn.style.width=w;this.hasHScrollbar(true);},setSize:function(w,h){var ds=this.domNode.style;var hs=this.headerNode.style;if(w){ds.width=w;hs.width=w;}ds.height=(h>=0?h+"px":"");},renderRow:function(_879){var _87a=this.createRowNode(_879);this.buildRow(_879,_87a);this.grid.edit.restore(this,_879);return _87a;},createRowNode:function(_87b){var node=document.createElement("div");node.className=this.classTag+"Row";if(this instanceof dojox.grid._RowSelector){dojo.attr(node,"role","presentation");}else{dojo.attr(node,"role","row");if(this.grid.selectionMode!="none"){dojo.attr(node,"aria-selected","false");}}node[dojox.grid.util.gridViewTag]=this.id;node[dojox.grid.util.rowIndexTag]=_87b;this.rowNodes[_87b]=node;return node;},buildRow:function(_87c,_87d){this.buildRowContent(_87c,_87d);this.styleRow(_87c,_87d);},buildRowContent:function(_87e,_87f){_87f.innerHTML=this.content.generateHtml(_87e,_87e);if(this.flexCells&&this.contentWidth){_87f.firstChild.style.width=this.contentWidth;}dojox.grid.util.fire(this,"onAfterRow",[_87e,this.structure.cells,_87f]);},rowRemoved:function(_880){if(_880>=0){this._cleanupRowWidgets(this.getRowNode(_880));}this.grid.edit.save(this,_880);delete this.rowNodes[_880];},getRowNode:function(_881){return this.rowNodes[_881];},getCellNode:function(_882,_883){var row=this.getRowNode(_882);if(row){return this.content.getCellNode(row,_883);}},getHeaderCellNode:function(_884){if(this.headerContentNode){return this.header.getCellNode(this.headerContentNode,_884);}},styleRow:function(_885,_886){_886._style=_848(_886);this.styleRowNode(_885,_886);},styleRowNode:function(_887,_888){if(_888){this.doStyleRowNode(_887,_888);}},doStyleRowNode:function(_889,_88a){this.grid.styleRowNode(_889,_88a);},updateRow:function(_88b){var _88c=this.getRowNode(_88b);if(_88c){_88c.style.height="";this.buildRow(_88b,_88c);}return _88c;},updateRowStyles:function(_88d){this.styleRowNode(_88d,this.getRowNode(_88d));},lastTop:0,firstScroll:0,doscroll:function(_88e){var _88f=dojo._isBodyLtr();if(this.firstScroll<2){if((!_88f&&this.firstScroll==1)||(_88f&&this.firstScroll===0)){var s=dojo.marginBox(this.headerNodeContainer);if(dojo.isIE){this.headerNodeContainer.style.width=s.w+this.getScrollbarWidth()+"px";}else{if(dojo.isMoz){this.headerNodeContainer.style.width=s.w-this.getScrollbarWidth()+"px";this.scrollboxNode.scrollLeft=_88f?this.scrollboxNode.clientWidth-this.scrollboxNode.scrollWidth:this.scrollboxNode.scrollWidth-this.scrollboxNode.clientWidth;}}}this.firstScroll++;}this.headerNode.scrollLeft=this.scrollboxNode.scrollLeft;var top=this.scrollboxNode.scrollTop;if(top!==this.lastTop){this.grid.scrollTo(top);}},setScrollTop:function(_890){this.lastTop=_890;this.scrollboxNode.scrollTop=_890;return this.scrollboxNode.scrollTop;},doContentEvent:function(e){if(this.content.decorateEvent(e)){this.grid.onContentEvent(e);}},doHeaderEvent:function(e){if(this.header.decorateEvent(e)){this.grid.onHeaderEvent(e);}},dispatchContentEvent:function(e){return this.content.dispatchEvent(e);},dispatchHeaderEvent:function(e){return this.header.dispatchEvent(e);},setColWidth:function(_891,_892){this.grid.setCellWidth(_891,_892+"px");},update:function(){if(!this.domNode){return;}this.content.update();this.grid.update();var left=this.scrollboxNode.scrollLeft;this.scrollboxNode.scrollLeft=left;this.headerNode.scrollLeft=left;}});dojo.declare("dojox.grid._GridAvatar",dojo.dnd.Avatar,{construct:function(){var dd=dojo.doc;var a=dd.createElement("table");a.cellPadding=a.cellSpacing="0";a.className="dojoxGridDndAvatar";a.style.position="absolute";a.style.zIndex=1999;a.style.margin="0px";var b=dd.createElement("tbody");var tr=dd.createElement("tr");var td=dd.createElement("td");var img=dd.createElement("td");tr.className="dojoxGridDndAvatarItem";img.className="dojoxGridDndAvatarItemImage";img.style.width="16px";var _893=this.manager.source,node;if(_893.creator){node=_893._normalizedCreator(_893.getItem(this.manager.nodes[0].id).data,"avatar").node;}else{node=this.manager.nodes[0].cloneNode(true);var _894,_895;if(node.tagName.toLowerCase()=="tr"){_894=dd.createElement("table");_895=dd.createElement("tbody");_895.appendChild(node);_894.appendChild(_895);node=_894;}else{if(node.tagName.toLowerCase()=="th"){_894=dd.createElement("table");_895=dd.createElement("tbody");var r=dd.createElement("tr");_894.cellPadding=_894.cellSpacing="0";r.appendChild(node);_895.appendChild(r);_894.appendChild(_895);node=_894;}}}node.id="";td.appendChild(node);tr.appendChild(img);tr.appendChild(td);dojo.style(tr,"opacity",0.9);b.appendChild(tr);a.appendChild(b);this.node=a;var m=dojo.dnd.manager();this.oldOffsetY=m.OFFSET_Y;m.OFFSET_Y=1;},destroy:function(){dojo.dnd.manager().OFFSET_Y=this.oldOffsetY;this.inherited(arguments);}});var _896=dojo.dnd.manager().makeAvatar;dojo.dnd.manager().makeAvatar=function(){var src=this.source;if(src.viewIndex!==undefined&&!dojo.hasClass(dojo.body(),"dijit_a11y")){return new dojox.grid._GridAvatar(this);}return _896.call(dojo.dnd.manager());};})();}if(!dojo._hasResource["dojox.grid._RowSelector"]){dojo._hasResource["dojox.grid._RowSelector"]=true;dojo.provide("dojox.grid._RowSelector");dojo.declare("dojox.grid._RowSelector",dojox.grid._View,{defaultWidth:"2em",noscroll:true,padBorderWidth:2,buildRendering:function(){this.inherited("buildRendering",arguments);this.scrollboxNode.style.overflow="hidden";this.headerNode.style.visibility="hidden";},getWidth:function(){return this.viewWidth||this.defaultWidth;},buildRowContent:function(_897,_898){var w=this.contentWidth||0;_898.innerHTML="<table class=\"dojoxGridRowbarTable\" style=\"width:"+w+"px;height:1px;\" border=\"0\" cellspacing=\"0\" cellpadding=\"0\" role=\"presentation\"><tr><td class=\"dojoxGridRowbarInner\">&nbsp;</td></tr></table>";},renderHeader:function(){},updateRow:function(){},resize:function(){this.adaptHeight();},adaptWidth:function(){if(!("contentWidth" in this)&&this.contentNode){this.contentWidth=this.contentNode.offsetWidth-this.padBorderWidth;}},doStyleRowNode:function(_899,_89a){var n=["dojoxGridRowbar dojoxGridNonNormalizedCell"];if(this.grid.rows.isOver(_899)){n.push("dojoxGridRowbarOver");}if(this.grid.selection.isSelected(_899)){n.push("dojoxGridRowbarSelected");}_89a.className=n.join(" ");},domouseover:function(e){this.grid.onMouseOverRow(e);},domouseout:function(e){if(!this.isIntraRowEvent(e)){this.grid.onMouseOutRow(e);}}});}if(!dojo._hasResource["dojox.grid._Layout"]){dojo._hasResource["dojox.grid._Layout"]=true;dojo.provide("dojox.grid._Layout");dojo.declare("dojox.grid._Layout",null,{constructor:function(_89b){this.grid=_89b;},cells:[],structure:null,defaultWidth:"6em",moveColumn:function(_89c,_89d,_89e,_89f,_8a0){var _8a1=this.structure[_89c].cells[0];var _8a2=this.structure[_89d].cells[0];var cell=null;var _8a3=0;var _8a4=0;for(var i=0,c;c=_8a1[i];i++){if(c.index==_89e){_8a3=i;break;}}cell=_8a1.splice(_8a3,1)[0];cell.view=this.grid.views.views[_89d];for(i=0,c=null;c=_8a2[i];i++){if(c.index==_89f){_8a4=i;break;}}if(!_8a0){_8a4+=1;}_8a2.splice(_8a4,0,cell);var _8a5=this.grid.getCell(this.grid.getSortIndex());if(_8a5){_8a5._currentlySorted=this.grid.getSortAsc();}this.cells=[];_89e=0;var v;for(i=0;v=this.structure[i];i++){for(var j=0,cs;cs=v.cells[j];j++){for(var k=0;c=cs[k];k++){c.index=_89e;this.cells.push(c);if("_currentlySorted" in c){var si=_89e+1;si*=c._currentlySorted?1:-1;this.grid.sortInfo=si;delete c._currentlySorted;}_89e++;}}}dojo.forEach(this.cells,function(c){var _8a6=c.markup[2].split(" ");var _8a7=parseInt(_8a6[1].substring(5));if(_8a7!=c.index){_8a6[1]="idx=\""+c.index+"\"";c.markup[2]=_8a6.join(" ");}});this.grid.setupHeaderMenu();},setColumnVisibility:function(_8a8,_8a9){var cell=this.cells[_8a8];if(cell.hidden==_8a9){cell.hidden=!_8a9;var v=cell.view,w=v.viewWidth;if(w&&w!="auto"){v._togglingColumn=dojo.marginBox(cell.getHeaderNode()).w||0;}v.update();return true;}else{return false;}},addCellDef:function(_8aa,_8ab,_8ac){var self=this;var _8ad=function(_8ae){var w=0;if(_8ae.colSpan>1){w=0;}else{w=_8ae.width||self._defaultCellProps.width||self.defaultWidth;if(!isNaN(w)){w=w+"em";}}return w;};var _8af={grid:this.grid,subrow:_8aa,layoutIndex:_8ab,index:this.cells.length};if(_8ac&&_8ac instanceof dojox.grid.cells._Base){var _8b0=dojo.clone(_8ac);_8af.unitWidth=_8ad(_8b0._props);_8b0=dojo.mixin(_8b0,this._defaultCellProps,_8ac._props,_8af);return _8b0;}var _8b1=_8ac.type||_8ac.cellType||this._defaultCellProps.type||this._defaultCellProps.cellType||dojox.grid.cells.Cell;_8af.unitWidth=_8ad(_8ac);return new _8b1(dojo.mixin({},this._defaultCellProps,_8ac,_8af));},addRowDef:function(_8b2,_8b3){var _8b4=[];var _8b5=0,_8b6=0,_8b7=true;for(var i=0,def,cell;(def=_8b3[i]);i++){cell=this.addCellDef(_8b2,i,def);_8b4.push(cell);this.cells.push(cell);if(_8b7&&cell.relWidth){_8b5+=cell.relWidth;}else{if(cell.width){var w=cell.width;if(typeof w=="string"&&w.slice(-1)=="%"){_8b6+=window.parseInt(w,10);}else{if(w=="auto"){_8b7=false;}}}}}if(_8b5&&_8b7){dojo.forEach(_8b4,function(cell){if(cell.relWidth){cell.width=cell.unitWidth=((cell.relWidth/_8b5)*(100-_8b6))+"%";}});}return _8b4;},addRowsDef:function(_8b8){var _8b9=[];if(dojo.isArray(_8b8)){if(dojo.isArray(_8b8[0])){for(var i=0,row;_8b8&&(row=_8b8[i]);i++){_8b9.push(this.addRowDef(i,row));}}else{_8b9.push(this.addRowDef(0,_8b8));}}return _8b9;},addViewDef:function(_8ba){this._defaultCellProps=_8ba.defaultCell||{};if(_8ba.width&&_8ba.width=="auto"){delete _8ba.width;}return dojo.mixin({},_8ba,{cells:this.addRowsDef(_8ba.rows||_8ba.cells)});},setStructure:function(_8bb){this.fieldIndex=0;this.cells=[];var s=this.structure=[];if(this.grid.rowSelector){var sel={type:dojox._scopeName+".grid._RowSelector"};if(dojo.isString(this.grid.rowSelector)){var _8bc=this.grid.rowSelector;if(_8bc=="false"){sel=null;}else{if(_8bc!="true"){sel["width"]=_8bc;}}}else{if(!this.grid.rowSelector){sel=null;}}if(sel){s.push(this.addViewDef(sel));}}var _8bd=function(def){return ("name" in def||"field" in def||"get" in def);};var _8be=function(def){if(dojo.isArray(def)){if(dojo.isArray(def[0])||_8bd(def[0])){return true;}}return false;};var _8bf=function(def){return (def!==null&&dojo.isObject(def)&&("cells" in def||"rows" in def||("type" in def&&!_8bd(def))));};if(dojo.isArray(_8bb)){var _8c0=false;for(var i=0,st;(st=_8bb[i]);i++){if(_8bf(st)){_8c0=true;break;}}if(!_8c0){s.push(this.addViewDef({cells:_8bb}));}else{for(i=0;(st=_8bb[i]);i++){if(_8be(st)){s.push(this.addViewDef({cells:st}));}else{if(_8bf(st)){s.push(this.addViewDef(st));}}}}}else{if(_8bf(_8bb)){s.push(this.addViewDef(_8bb));}}this.cellCount=this.cells.length;this.grid.setupHeaderMenu();}});}if(!dojo._hasResource["dojox.grid._ViewManager"]){dojo._hasResource["dojox.grid._ViewManager"]=true;dojo.provide("dojox.grid._ViewManager");dojo.declare("dojox.grid._ViewManager",null,{constructor:function(_8c1){this.grid=_8c1;},defaultWidth:200,views:[],resize:function(){this.onEach("resize");},render:function(){this.onEach("render");},addView:function(_8c2){_8c2.idx=this.views.length;this.views.push(_8c2);},destroyViews:function(){for(var i=0,v;v=this.views[i];i++){v.destroy();}this.views=[];},getContentNodes:function(){var _8c3=[];for(var i=0,v;v=this.views[i];i++){_8c3.push(v.contentNode);}return _8c3;},forEach:function(_8c4){for(var i=0,v;v=this.views[i];i++){_8c4(v,i);}},onEach:function(_8c5,_8c6){_8c6=_8c6||[];for(var i=0,v;v=this.views[i];i++){if(_8c5 in v){v[_8c5].apply(v,_8c6);}}},normalizeHeaderNodeHeight:function(){var _8c7=[];for(var i=0,v;(v=this.views[i]);i++){if(v.headerContentNode.firstChild){_8c7.push(v.headerContentNode);}}this.normalizeRowNodeHeights(_8c7);},normalizeRowNodeHeights:function(_8c8){var h=0;var _8c9=[];if(this.grid.rowHeight){h=this.grid.rowHeight;}else{if(_8c8.length<=1){return;}for(var i=0,n;(n=_8c8[i]);i++){if(!dojo.hasClass(n,"dojoxGridNonNormalizedCell")){_8c9[i]=n.firstChild.offsetHeight;h=Math.max(h,_8c9[i]);}}h=(h>=0?h:0);if(dojo.isMoz&&h){h++;}}for(i=0;(n=_8c8[i]);i++){if(_8c9[i]!=h){n.firstChild.style.height=h+"px";}}},resetHeaderNodeHeight:function(){for(var i=0,v,n;(v=this.views[i]);i++){n=v.headerContentNode.firstChild;if(n){n.style.height="";}}},renormalizeRow:function(_8ca){var _8cb=[];for(var i=0,v,n;(v=this.views[i])&&(n=v.getRowNode(_8ca));i++){n.firstChild.style.height="";_8cb.push(n);}this.normalizeRowNodeHeights(_8cb);},getViewWidth:function(_8cc){return this.views[_8cc].getWidth()||this.defaultWidth;},measureHeader:function(){this.resetHeaderNodeHeight();this.forEach(function(_8cd){_8cd.headerContentNode.style.height="";});var h=0;this.forEach(function(_8ce){h=Math.max(_8ce.headerNode.offsetHeight,h);});return h;},measureContent:function(){var h=0;this.forEach(function(_8cf){h=Math.max(_8cf.domNode.offsetHeight,h);});return h;},findClient:function(_8d0){var c=this.grid.elasticView||-1;if(c<0){for(var i=1,v;(v=this.views[i]);i++){if(v.viewWidth){for(i=1;(v=this.views[i]);i++){if(!v.viewWidth){c=i;break;}}break;}}}if(c<0){c=Math.floor(this.views.length/2);}return c;},arrange:function(l,w){var i,v,vw,len=this.views.length;var c=(w<=0?len:this.findClient());var _8d1=function(v,l){var ds=v.domNode.style;var hs=v.headerNode.style;if(!dojo._isBodyLtr()){ds.right=l+"px";if(dojo.isMoz){hs.right=l+v.getScrollbarWidth()+"px";hs.width=parseInt(hs.width,10)-v.getScrollbarWidth()+"px";}else{hs.right=l+"px";}}else{ds.left=l+"px";hs.left=l+"px";}ds.top=0+"px";hs.top=0;};for(i=0;(v=this.views[i])&&(i<c);i++){vw=this.getViewWidth(i);v.setSize(vw,0);_8d1(v,l);if(v.headerContentNode&&v.headerContentNode.firstChild){vw=v.getColumnsWidth()+v.getScrollbarWidth();}else{vw=v.domNode.offsetWidth;}l+=vw;}i++;var r=w;for(var j=len-1;(v=this.views[j])&&(i<=j);j--){vw=this.getViewWidth(j);v.setSize(vw,0);vw=v.domNode.offsetWidth;r-=vw;_8d1(v,r);}if(c<len){v=this.views[c];vw=Math.max(1,r-l);v.setSize(vw+"px",0);_8d1(v,l);}return l;},renderRow:function(_8d2,_8d3,_8d4){var _8d5=[];for(var i=0,v,n,_8d6;(v=this.views[i])&&(n=_8d3[i]);i++){_8d6=v.renderRow(_8d2);n.appendChild(_8d6);_8d5.push(_8d6);}if(!_8d4){this.normalizeRowNodeHeights(_8d5);}},rowRemoved:function(_8d7){this.onEach("rowRemoved",[_8d7]);},updateRow:function(_8d8,_8d9){for(var i=0,v;v=this.views[i];i++){v.updateRow(_8d8);}if(!_8d9){this.renormalizeRow(_8d8);}},updateRowStyles:function(_8da){this.onEach("updateRowStyles",[_8da]);},setScrollTop:function(_8db){var top=_8db;for(var i=0,v;v=this.views[i];i++){top=v.setScrollTop(_8db);if(dojo.isIE&&v.headerNode&&v.scrollboxNode){v.headerNode.scrollLeft=v.scrollboxNode.scrollLeft;}}return top;},getFirstScrollingView:function(){for(var i=0,v;(v=this.views[i]);i++){if(v.hasHScrollbar()||v.hasVScrollbar()){return v;}}return null;}});}if(!dojo._hasResource["dojox.grid._RowManager"]){dojo._hasResource["dojox.grid._RowManager"]=true;dojo.provide("dojox.grid._RowManager");(function(){var _8dc=function(_8dd,_8de){if(_8dd.style.cssText==undefined){_8dd.setAttribute("style",_8de);}else{_8dd.style.cssText=_8de;}};dojo.declare("dojox.grid._RowManager",null,{constructor:function(_8df){this.grid=_8df;},linesToEms:2,overRow:-2,prepareStylingRow:function(_8e0,_8e1){return {index:_8e0,node:_8e1,odd:Boolean(_8e0&1),selected:!!this.grid.selection.isSelected(_8e0),over:this.isOver(_8e0),customStyles:"",customClasses:"dojoxGridRow"};},styleRowNode:function(_8e2,_8e3){var row=this.prepareStylingRow(_8e2,_8e3);this.grid.onStyleRow(row);this.applyStyles(row);},applyStyles:function(_8e4){var i=_8e4;i.node.className=i.customClasses;var h=i.node.style.height;_8dc(i.node,i.customStyles+";"+(i.node._style||""));i.node.style.height=h;},updateStyles:function(_8e5){this.grid.updateRowStyles(_8e5);},setOverRow:function(_8e6){var last=this.overRow;this.overRow=_8e6;if((last!=this.overRow)&&(dojo.isString(last)||last>=0)){this.updateStyles(last);}this.updateStyles(this.overRow);},isOver:function(_8e7){return (this.overRow==_8e7&&!dojo.hasClass(this.grid.domNode,"dojoxGridColumnResizing"));}});})();}if(!dojo._hasResource["dojox.grid._FocusManager"]){dojo._hasResource["dojox.grid._FocusManager"]=true;dojo.provide("dojox.grid._FocusManager");dojo.declare("dojox.grid._FocusManager",null,{constructor:function(_8e8){this.grid=_8e8;this.cell=null;this.rowIndex=-1;this._connects=[];this._headerConnects=[];this.headerMenu=this.grid.headerMenu;this._connects.push(dojo.connect(this.grid.domNode,"onfocus",this,"doFocus"));this._connects.push(dojo.connect(this.grid.domNode,"onblur",this,"doBlur"));this._connects.push(dojo.connect(this.grid.domNode,"oncontextmenu",this,"doContextMenu"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onfocus",this,"doLastNodeFocus"));this._connects.push(dojo.connect(this.grid.lastFocusNode,"onblur",this,"doLastNodeBlur"));this._connects.push(dojo.connect(this.grid,"_onFetchComplete",this,"_delayedCellFocus"));this._connects.push(dojo.connect(this.grid,"postrender",this,"_delayedHeaderFocus"));},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);dojo.forEach(this._headerConnects,dojo.disconnect);delete this.grid;delete this.cell;},_colHeadNode:null,_colHeadFocusIdx:null,_contextMenuBindNode:null,tabbingOut:false,focusClass:"dojoxGridCellFocus",focusView:null,initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._initColumnHeaders();},isFocusCell:function(_8e9,_8ea){return (this.cell==_8e9)&&(this.rowIndex==_8ea);},isLastFocusCell:function(){if(this.cell){return (this.rowIndex==this.grid.rowCount-1)&&(this.cell.index==this.grid.layout.cellCount-1);}return false;},isFirstFocusCell:function(){if(this.cell){return (this.rowIndex===0)&&(this.cell.index===0);}return false;},isNoFocusCell:function(){return (this.rowIndex<0)||!this.cell;},isNavHeader:function(){return (!!this._colHeadNode);},getHeaderIndex:function(){if(this._colHeadNode){return dojo.indexOf(this._findHeaderCells(),this._colHeadNode);}else{return -1;}},_focusifyCellNode:function(_8eb){var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){dojo.toggleClass(n,this.focusClass,_8eb);if(_8eb){var sl=this.scrollIntoView();try{if(!this.grid.edit.isEditing()){dojox.grid.util.fire(n,"focus");if(sl){this.cell.view.scrollboxNode.scrollLeft=sl;}}}catch(e){}}}},_delayedCellFocus:function(){if(this.isNavHeader()||!this.grid._focused){return;}var n=this.cell&&this.cell.getNode(this.rowIndex);if(n){try{if(!this.grid.edit.isEditing()){dojo.toggleClass(n,this.focusClass,true);this.blurHeader();dojox.grid.util.fire(n,"focus");}}catch(e){}}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();this.grid.domNode.focus();}},_initColumnHeaders:function(){dojo.forEach(this._headerConnects,dojo.disconnect);this._headerConnects=[];var _8ec=this._findHeaderCells();for(var i=0;i<_8ec.length;i++){this._headerConnects.push(dojo.connect(_8ec[i],"onfocus",this,"doColHeaderFocus"));this._headerConnects.push(dojo.connect(_8ec[i],"onblur",this,"doColHeaderBlur"));}},_findHeaderCells:function(){var _8ed=dojo.query("th",this.grid.viewsHeaderNode);var _8ee=[];for(var i=0;i<_8ed.length;i++){var _8ef=_8ed[i];var _8f0=dojo.hasAttr(_8ef,"tabIndex");var _8f1=dojo.attr(_8ef,"tabIndex");if(_8f0&&_8f1<0){_8ee.push(_8ef);}}return _8ee;},_setActiveColHeader:function(_8f2,_8f3,_8f4){dojo.attr(this.grid.domNode,"aria-activedescendant",_8f2.id);if(_8f4!=null&&_8f4>=0&&_8f4!=_8f3){dojo.toggleClass(this._findHeaderCells()[_8f4],this.focusClass,false);}dojo.toggleClass(_8f2,this.focusClass,true);this._colHeadNode=_8f2;this._colHeadFocusIdx=_8f3;this._scrollHeader(this._colHeadFocusIdx);},scrollIntoView:function(){var info=(this.cell?this._scrollInfo(this.cell):null);if(!info||!info.s){return null;}var rt=this.grid.scroller.findScrollTop(this.rowIndex);if(info.n&&info.sr){if(info.n.offsetLeft+info.n.offsetWidth>info.sr.l+info.sr.w){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}}}if(info.r&&info.sr){if(rt+info.r.offsetHeight>info.sr.t+info.sr.h){this.grid.setScrollTop(rt+info.r.offsetHeight-info.sr.h);}else{if(rt<info.sr.t){this.grid.setScrollTop(rt);}}}return info.s.scrollLeft;},_scrollInfo:function(cell,_8f5){if(cell){var cl=cell,sbn=cl.view.scrollboxNode,sbnr={w:sbn.clientWidth,l:sbn.scrollLeft,t:sbn.scrollTop,h:sbn.clientHeight},rn=cl.view.getRowNode(this.rowIndex);return {c:cl,s:sbn,sr:sbnr,n:(_8f5?_8f5:cell.getNode(this.rowIndex)),r:rn};}return null;},_scrollHeader:function(_8f6){var info=null;if(this._colHeadNode){var cell=this.grid.getCell(_8f6);info=this._scrollInfo(cell,cell.getNode(0));}if(info&&info.s&&info.sr&&info.n){var _8f7=info.sr.l+info.sr.w;if(info.n.offsetLeft+info.n.offsetWidth>_8f7){info.s.scrollLeft=info.n.offsetLeft+info.n.offsetWidth-info.sr.w;}else{if(info.n.offsetLeft<info.sr.l){info.s.scrollLeft=info.n.offsetLeft;}else{if(dojo.isIE<=7&&cell&&cell.view.headerNode){cell.view.headerNode.scrollLeft=info.s.scrollLeft;}}}}},_isHeaderHidden:function(){var _8f8=this.focusView;if(!_8f8){for(var i=0,_8f9;(_8f9=this.grid.views.views[i]);i++){if(_8f9.headerNode){_8f8=_8f9;break;}}}return (_8f8&&dojo.getComputedStyle(_8f8.headerNode).display=="none");},colSizeAdjust:function(e,_8fa,_8fb){var _8fc=this._findHeaderCells();var view=this.focusView;if(!view){for(var i=0,_8fd;(_8fd=this.grid.views.views[i]);i++){if(_8fd.header.tableMap.map){view=_8fd;break;}}}var _8fe=_8fc[_8fa];if(!view||(_8fa==_8fc.length-1&&_8fa===0)){return;}view.content.baseDecorateEvent(e);e.cellNode=_8fe;e.cellIndex=view.content.getCellNodeIndex(e.cellNode);e.cell=(e.cellIndex>=0?this.grid.getCell(e.cellIndex):null);if(view.header.canResize(e)){var _8ff={l:_8fb};var drag=view.header.colResizeSetup(e,false);view.header.doResizeColumn(drag,null,_8ff);view.update();}},styleRow:function(_900){return;},setFocusIndex:function(_901,_902){this.setFocusCell(this.grid.getCell(_902),_901);},setFocusCell:function(_903,_904){if(_903&&!this.isFocusCell(_903,_904)){this.tabbingOut=false;if(this._colHeadNode){this.blurHeader();}this._colHeadNode=this._colHeadFocusIdx=null;this.focusGridView();this._focusifyCellNode(false);this.cell=_903;this.rowIndex=_904;this._focusifyCellNode(true);}if(dojo.isOpera){setTimeout(dojo.hitch(this.grid,"onCellFocus",this.cell,this.rowIndex),1);}else{this.grid.onCellFocus(this.cell,this.rowIndex);}},next:function(){if(this.cell){var row=this.rowIndex,col=this.cell.index+1,cc=this.grid.layout.cellCount-1,rc=this.grid.rowCount-1;if(col>cc){col=0;row++;}if(row>rc){col=cc;row=rc;}if(this.grid.edit.isEditing()){var _905=this.grid.getCell(col);if(!this.isLastFocusCell()&&(!_905.editable||this.grid.canEdit&&!this.grid.canEdit(_905,row))){this.cell=_905;this.rowIndex=row;this.next();return;}}this.setFocusIndex(row,col);}},previous:function(){if(this.cell){var row=(this.rowIndex||0),col=(this.cell.index||0)-1;if(col<0){col=this.grid.layout.cellCount-1;row--;}if(row<0){row=0;col=0;}if(this.grid.edit.isEditing()){var _906=this.grid.getCell(col);if(!this.isFirstFocusCell()&&!_906.editable){this.cell=_906;this.rowIndex=row;this.previous();return;}}this.setFocusIndex(row,col);}},move:function(_907,_908){var _909=_908<0?-1:1;if(this.isNavHeader()){var _90a=this._findHeaderCells();var _90b=currentIdx=dojo.indexOf(_90a,this._colHeadNode);currentIdx+=_908;while(currentIdx>=0&&currentIdx<_90a.length&&_90a[currentIdx].style.display=="none"){currentIdx+=_909;}if((currentIdx>=0)&&(currentIdx<_90a.length)){this._setActiveColHeader(_90a[currentIdx],currentIdx,_90b);}}else{if(this.cell){var sc=this.grid.scroller,r=this.rowIndex,rc=this.grid.rowCount-1,row=Math.min(rc,Math.max(0,r+_907));if(_907){if(_907>0){if(row>sc.getLastPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop+sc.findScrollTop(row)-sc.findScrollTop(r));}}else{if(_907<0){if(row<=sc.getPageRow(sc.page)){this.grid.setScrollTop(this.grid.scrollTop-sc.findScrollTop(r)-sc.findScrollTop(row));}}}}var cc=this.grid.layout.cellCount-1,i=this.cell.index,col=Math.min(cc,Math.max(0,i+_908));var cell=this.grid.getCell(col);while(col>=0&&col<cc&&cell&&cell.hidden===true){col+=_909;cell=this.grid.getCell(col);}if(!cell||cell.hidden===true){col=i;}var n=cell.getNode(row);if(!n&&_907){if((row+_907)>=0&&(row+_907)<=rc){this.move(_907>0?++_907:--_907,_908);}return;}else{if((!n||dojo.style(n,"display")==="none")&&_908){if((col+_907)>=0&&(col+_907)<=cc){this.move(_907,_908>0?++_908:--_908);}return;}}this.setFocusIndex(row,col);if(_907){this.grid.updateRow(r);}}}},previousKey:function(e){if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.previous();}else{if(!this.isNavHeader()&&!this._isHeaderHidden()){this.grid.domNode.focus();dojo.stopEvent(e);}else{this.tabOut(this.grid.domNode);if(this._colHeadFocusIdx!=null){dojo.toggleClass(this._findHeaderCells()[this._colHeadFocusIdx],this.focusClass,false);this._colHeadFocusIdx=null;}this._focusifyCellNode(false);}}},nextKey:function(e){var _90c=(this.grid.rowCount===0);if(e.target===this.grid.domNode&&this._colHeadFocusIdx==null){this.focusHeader();dojo.stopEvent(e);}else{if(this.isNavHeader()){this.blurHeader();if(!this.findAndFocusGridCell()){this.tabOut(this.grid.lastFocusNode);}this._colHeadNode=this._colHeadFocusIdx=null;}else{if(this.grid.edit.isEditing()){dojo.stopEvent(e);this.next();}else{this.tabOut(this.grid.lastFocusNode);}}}},tabOut:function(_90d){this.tabbingOut=true;_90d.focus();},focusGridView:function(){dojox.grid.util.fire(this.focusView,"focus");},focusGrid:function(_90e){this.focusGridView();this._focusifyCellNode(true);},findAndFocusGridCell:function(){var _90f=true;var _910=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_910){var _911=0;var cell=this.grid.getCell(_911);if(cell.hidden){_911=this.isNavHeader()?this._colHeadFocusIdx:0;}this.setFocusIndex(0,_911);}else{if(this.cell&&!_910){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);}this.focusGrid();}else{_90f=false;}}this._colHeadNode=this._colHeadFocusIdx=null;return _90f;},focusHeader:function(){var _912=this._findHeaderCells();var _913=this._colHeadFocusIdx;if(this._isHeaderHidden()){this.findAndFocusGridCell();}else{if(!this._colHeadFocusIdx){if(this.isNoFocusCell()){this._colHeadFocusIdx=0;}else{this._colHeadFocusIdx=this.cell.index;}}}this._colHeadNode=_912[this._colHeadFocusIdx];while(this._colHeadNode&&this._colHeadFocusIdx>=0&&this._colHeadFocusIdx<_912.length&&this._colHeadNode.style.display=="none"){this._colHeadFocusIdx++;this._colHeadNode=_912[this._colHeadFocusIdx];}if(this._colHeadNode&&this._colHeadNode.style.display!="none"){if(this.headerMenu&&this._contextMenuBindNode!=this.grid.domNode){this.headerMenu.unBindDomNode(this.grid.viewsHeaderNode);this.headerMenu.bindDomNode(this.grid.domNode);this._contextMenuBindNode=this.grid.domNode;}this._setActiveColHeader(this._colHeadNode,this._colHeadFocusIdx,_913);this._scrollHeader(this._colHeadFocusIdx);this._focusifyCellNode(false);}else{this.findAndFocusGridCell();}},blurHeader:function(){dojo.removeClass(this._colHeadNode,this.focusClass);dojo.removeAttr(this.grid.domNode,"aria-activedescendant");if(this.headerMenu&&this._contextMenuBindNode==this.grid.domNode){var _914=this.grid.viewsHeaderNode;this.headerMenu.unBindDomNode(this.grid.domNode);this.headerMenu.bindDomNode(_914);this._contextMenuBindNode=_914;}},doFocus:function(e){if(e&&e.target!=e.currentTarget){dojo.stopEvent(e);return;}if(!this.tabbingOut){this.focusHeader();}this.tabbingOut=false;dojo.stopEvent(e);},doBlur:function(e){dojo.stopEvent(e);},doContextMenu:function(e){if(!this.headerMenu){dojo.stopEvent(e);}},doLastNodeFocus:function(e){if(this.tabbingOut){this._focusifyCellNode(false);}else{if(this.grid.rowCount>0){if(this.isNoFocusCell()){this.setFocusIndex(0,0);}this._focusifyCellNode(true);}else{this.focusHeader();}}this.tabbingOut=false;dojo.stopEvent(e);},doLastNodeBlur:function(e){dojo.stopEvent(e);},doColHeaderFocus:function(e){this._setActiveColHeader(e.target,dojo.attr(e.target,"idx"),this._colHeadFocusIdx);this._scrollHeader(this.getHeaderIndex());dojo.stopEvent(e);},doColHeaderBlur:function(e){dojo.toggleClass(e.target,this.focusClass,false);}});}if(!dojo._hasResource["dojox.grid._EditManager"]){dojo._hasResource["dojox.grid._EditManager"]=true;dojo.provide("dojox.grid._EditManager");dojo.declare("dojox.grid._EditManager",null,{constructor:function(_915){this.grid=_915;if(dojo.isIE){this.connections=[dojo.connect(document.body,"onfocus",dojo.hitch(this,"_boomerangFocus"))];}else{this.connections=[dojo.connect(this.grid,"onBlur",this,"apply")];}},info:{},destroy:function(){dojo.forEach(this.connections,dojo.disconnect);},cellFocus:function(_916,_917){if(this.grid.singleClickEdit||this.isEditRow(_917)){this.setEditCell(_916,_917);}else{this.apply();}if(this.isEditing()||(_916&&_916.editable&&_916.alwaysEditing)){this._focusEditor(_916,_917);}},rowClick:function(e){if(this.isEditing()&&!this.isEditRow(e.rowIndex)){this.apply();}},styleRow:function(_918){if(_918.index==this.info.rowIndex){_918.customClasses+=" dojoxGridRowEditing";}},dispatchEvent:function(e){var c=e.cell,ed=(c&&c["editable"])?c:0;return ed&&ed.dispatchEvent(e.dispatch,e);},isEditing:function(){return this.info.rowIndex!==undefined;},isEditCell:function(_919,_91a){return (this.info.rowIndex===_919)&&(this.info.cell.index==_91a);},isEditRow:function(_91b){return this.info.rowIndex===_91b;},setEditCell:function(_91c,_91d){if(!this.isEditCell(_91d,_91c.index)&&this.grid.canEdit&&this.grid.canEdit(_91c,_91d)){this.start(_91c,_91d,this.isEditRow(_91d)||_91c.editable);}},_focusEditor:function(_91e,_91f){dojox.grid.util.fire(_91e,"focus",[_91f]);},focusEditor:function(){if(this.isEditing()){this._focusEditor(this.info.cell,this.info.rowIndex);}},_boomerangWindow:500,_shouldCatchBoomerang:function(){return this._catchBoomerang>new Date().getTime();},_boomerangFocus:function(){if(this._shouldCatchBoomerang()){this.grid.focus.focusGrid();this.focusEditor();this._catchBoomerang=0;}},_doCatchBoomerang:function(){if(dojo.isIE){this._catchBoomerang=new Date().getTime()+this._boomerangWindow;}},start:function(_920,_921,_922){this.grid.beginUpdate();this.editorApply();if(this.isEditing()&&!this.isEditRow(_921)){this.applyRowEdit();this.grid.updateRow(_921);}if(_922){this.info={cell:_920,rowIndex:_921};this.grid.doStartEdit(_920,_921);this.grid.updateRow(_921);}else{this.info={};}this.grid.endUpdate();this.grid.focus.focusGrid();this._focusEditor(_920,_921);this._doCatchBoomerang();},_editorDo:function(_923){var c=this.info.cell;if(c&&c.editable){c[_923](this.info.rowIndex);}},editorApply:function(){this._editorDo("apply");},editorCancel:function(){this._editorDo("cancel");},applyCellEdit:function(_924,_925,_926){if(this.grid.canEdit(_925,_926)){this.grid.doApplyCellEdit(_924,_926,_925.field);}},applyRowEdit:function(){this.grid.doApplyEdit(this.info.rowIndex,this.info.cell.field);},apply:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorApply();this.applyRowEdit();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},cancel:function(){if(this.isEditing()){this.grid.beginUpdate();this.editorCancel();this.info={};this.grid.endUpdate();this.grid.focus.focusGrid();this._doCatchBoomerang();}},save:function(_927,_928){var c=this.info.cell;if(this.isEditRow(_927)&&(!_928||c.view==_928)&&c.editable){c.save(c,this.info.rowIndex);}},restore:function(_929,_92a){var c=this.info.cell;if(this.isEditRow(_92a)&&c.view==_929&&c.editable){c.restore(c,this.info.rowIndex);}}});}if(!dojo._hasResource["dojox.grid.Selection"]){dojo._hasResource["dojox.grid.Selection"]=true;dojo.provide("dojox.grid.Selection");dojo.declare("dojox.grid.Selection",null,{constructor:function(_92b){this.grid=_92b;this.selected=[];this.setMode(_92b.selectionMode);},mode:"extended",selected:null,updating:0,selectedIndex:-1,setMode:function(mode){if(this.selected.length){this.deselectAll();}if(mode!="extended"&&mode!="multiple"&&mode!="single"&&mode!="none"){this.mode="extended";}else{this.mode=mode;}},onCanSelect:function(_92c){return this.grid.onCanSelect(_92c);},onCanDeselect:function(_92d){return this.grid.onCanDeselect(_92d);},onSelected:function(_92e){},onDeselected:function(_92f){},onChanging:function(){},onChanged:function(){},isSelected:function(_930){if(this.mode=="none"){return false;}return this.selected[_930];},getFirstSelected:function(){if(!this.selected.length||this.mode=="none"){return -1;}for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getNextSelected:function(_931){if(this.mode=="none"){return -1;}for(var i=_931+1,l=this.selected.length;i<l;i++){if(this.selected[i]){return i;}}return -1;},getSelected:function(){var _932=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_932.push(i);}}return _932;},getSelectedCount:function(){var c=0;for(var i=0;i<this.selected.length;i++){if(this.selected[i]){c++;}}return c;},_beginUpdate:function(){if(this.updating===0){this.onChanging();}this.updating++;},_endUpdate:function(){this.updating--;if(this.updating===0){this.onChanged();}},select:function(_933){if(this.mode=="none"){return;}if(this.mode!="multiple"){this.deselectAll(_933);this.addToSelection(_933);}else{this.toggleSelect(_933);}},addToSelection:function(_934){if(this.mode=="none"){return;}if(dojo.isArray(_934)){dojo.forEach(_934,this.addToSelection,this);return;}_934=Number(_934);if(this.selected[_934]){this.selectedIndex=_934;}else{if(this.onCanSelect(_934)!==false){this.selectedIndex=_934;var _935=this.grid.getRowNode(_934);if(_935){dojo.attr(_935,"aria-selected","true");}this._beginUpdate();this.selected[_934]=true;this.onSelected(_934);this._endUpdate();}}},deselect:function(_936){if(this.mode=="none"){return;}if(dojo.isArray(_936)){dojo.forEach(_936,this.deselect,this);return;}_936=Number(_936);if(this.selectedIndex==_936){this.selectedIndex=-1;}if(this.selected[_936]){if(this.onCanDeselect(_936)===false){return;}var _937=this.grid.getRowNode(_936);if(_937){dojo.attr(_937,"aria-selected","false");}this._beginUpdate();delete this.selected[_936];this.onDeselected(_936);this._endUpdate();}},setSelected:function(_938,_939){this[(_939?"addToSelection":"deselect")](_938);},toggleSelect:function(_93a){if(dojo.isArray(_93a)){dojo.forEach(_93a,this.toggleSelect,this);return;}this.setSelected(_93a,!this.selected[_93a]);},_range:function(_93b,inTo,func){var s=(_93b>=0?_93b:inTo),e=inTo;if(s>e){e=s;s=inTo;}for(var i=s;i<=e;i++){func(i);}},selectRange:function(_93c,inTo){this._range(_93c,inTo,dojo.hitch(this,"addToSelection"));},deselectRange:function(_93d,inTo){this._range(_93d,inTo,dojo.hitch(this,"deselect"));},insert:function(_93e){this.selected.splice(_93e,0,false);if(this.selectedIndex>=_93e){this.selectedIndex++;}},remove:function(_93f){this.selected.splice(_93f,1);if(this.selectedIndex>=_93f){this.selectedIndex--;}},deselectAll:function(_940){for(var i in this.selected){if((i!=_940)&&(this.selected[i]===true)){this.deselect(i);}}},clickSelect:function(_941,_942,_943){if(this.mode=="none"){return;}this._beginUpdate();if(this.mode!="extended"){this.select(_941);}else{var _944=this.selectedIndex;if(!_942){this.deselectAll(_941);}if(_943){this.selectRange(_944,_941);}else{if(_942){this.toggleSelect(_941);}else{this.addToSelection(_941);}}}this._endUpdate();},clickSelectEvent:function(e){this.clickSelect(e.rowIndex,dojo.isCopyKey(e),e.shiftKey);},clear:function(){this._beginUpdate();this.deselectAll();this._endUpdate();}});}if(!dojo._hasResource["dojox.grid._Events"]){dojo._hasResource["dojox.grid._Events"]=true;dojo.provide("dojox.grid._Events");dojo.declare("dojox.grid._Events",null,{cellOverClass:"dojoxGridCellOver",onKeyEvent:function(e){this.dispatchKeyEvent(e);},onContentEvent:function(e){this.dispatchContentEvent(e);},onHeaderEvent:function(e){this.dispatchHeaderEvent(e);},onStyleRow:function(_945){var i=_945;i.customClasses+=(i.odd?" dojoxGridRowOdd":"")+(i.selected?" dojoxGridRowSelected":"")+(i.over?" dojoxGridRowOver":"");this.focus.styleRow(_945);this.edit.styleRow(_945);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var dk=dojo.keys;var _946;switch(e.keyCode){case dk.ESCAPE:this.edit.cancel();break;case dk.ENTER:if(!this.edit.isEditing()){_946=this.focus.getHeaderIndex();if(_946>=0){this.setSortIndex(_946);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}if(!e.shiftKey){var _947=this.edit.isEditing();this.edit.apply();if(!_947){this.edit.setEditCell(this.focus.cell,this.focus.rowIndex);}}if(!this.edit.isEditing()){var _948=this.focus.focusView||this.views.views[0];_948.content.decorateEvent(e);this.onRowClick(e);dojo.stopEvent(e);}break;case dk.SPACE:if(!this.edit.isEditing()){_946=this.focus.getHeaderIndex();if(_946>=0){this.setSortIndex(_946);break;}else{this.selection.clickSelect(this.focus.rowIndex,dojo.isCopyKey(e),e.shiftKey);}dojo.stopEvent(e);}break;case dk.TAB:this.focus[e.shiftKey?"previousKey":"nextKey"](e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:if(!this.edit.isEditing()){var _949=e.keyCode;dojo.stopEvent(e);_946=this.focus.getHeaderIndex();if(_946>=0&&(e.shiftKey&&e.ctrlKey)){this.focus.colSizeAdjust(e,_946,(_949==dk.LEFT_ARROW?-1:1)*5);}else{var _94a=(_949==dk.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){_94a*=-1;}this.focus.move(0,_94a);}}break;case dk.UP_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(e);this.focus.move(-1,0);}break;case dk.DOWN_ARROW:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);this.focus.move(1,0);}break;case dk.PAGE_UP:if(!this.edit.isEditing()&&this.focus.rowIndex!==0){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.firstVisibleRow+1){this.focus.move(this.scroller.firstVisibleRow-this.focus.rowIndex,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex-1));this.focus.move(this.scroller.firstVisibleRow-this.scroller.lastVisibleRow+1,0);}}break;case dk.PAGE_DOWN:if(!this.edit.isEditing()&&this.focus.rowIndex+1!=this.rowCount){dojo.stopEvent(e);if(this.focus.rowIndex!=this.scroller.lastVisibleRow-1){this.focus.move(this.scroller.lastVisibleRow-this.focus.rowIndex-1,0);}else{this.setScrollTop(this.scroller.findScrollTop(this.focus.rowIndex+1));this.focus.move(this.scroller.lastVisibleRow-this.scroller.firstVisibleRow-1,0);}}break;default:break;}},onMouseOver:function(e){e.rowIndex==-1?this.onHeaderCellMouseOver(e):this.onCellMouseOver(e);},onMouseOut:function(e){e.rowIndex==-1?this.onHeaderCellMouseOut(e):this.onCellMouseOut(e);},onMouseDown:function(e){e.rowIndex==-1?this.onHeaderCellMouseDown(e):this.onCellMouseDown(e);},onMouseOverRow:function(e){if(!this.rows.isOver(e.rowIndex)){this.rows.setOverRow(e.rowIndex);e.rowIndex==-1?this.onHeaderMouseOver(e):this.onRowMouseOver(e);}},onMouseOutRow:function(e){if(this.rows.isOver(-1)){this.onHeaderMouseOut(e);}else{if(!this.rows.isOver(-2)){this.rows.setOverRow(-2);this.onRowMouseOut(e);}}},onMouseDownRow:function(e){if(e.rowIndex!=-1){this.onRowMouseDown(e);}},onCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onCellMouseDown:function(e){},onCellClick:function(e){this._click[0]=this._click[1];this._click[1]=e;if(!this.edit.isEditCell(e.rowIndex,e.cellIndex)){this.focus.setFocusCell(e.cell,e.rowIndex);}this.onRowClick(e);},onCellDblClick:function(e){if(this._click.length>1&&dojo.isIE){this.edit.setEditCell(this._click[1].cell,this._click[1].rowIndex);}else{if(this._click.length>1&&this._click[0].rowIndex!=this._click[1].rowIndex){this.edit.setEditCell(this._click[0].cell,this._click[0].rowIndex);}else{this.edit.setEditCell(e.cell,e.rowIndex);}}this.onRowDblClick(e);},onCellContextMenu:function(e){this.onRowContextMenu(e);},onCellFocus:function(_94b,_94c){this.edit.cellFocus(_94b,_94c);},onRowClick:function(e){this.edit.rowClick(e);this.selection.clickSelectEvent(e);},onRowDblClick:function(e){},onRowMouseOver:function(e){},onRowMouseOut:function(e){},onRowMouseDown:function(e){},onRowContextMenu:function(e){dojo.stopEvent(e);},onHeaderMouseOver:function(e){},onHeaderMouseOut:function(e){},onHeaderCellMouseOver:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);}},onHeaderCellMouseDown:function(e){},onHeaderClick:function(e){},onHeaderCellClick:function(e){this.setSortIndex(e.cell.index);this.onHeaderClick(e);},onHeaderDblClick:function(e){},onHeaderCellDblClick:function(e){this.onHeaderDblClick(e);},onHeaderCellContextMenu:function(e){this.onHeaderContextMenu(e);},onHeaderContextMenu:function(e){if(!this.headerMenu){dojo.stopEvent(e);}},onStartEdit:function(_94d,_94e){},onApplyCellEdit:function(_94f,_950,_951){},onCancelEdit:function(_952){},onApplyEdit:function(_953){},onCanSelect:function(_954){return true;},onCanDeselect:function(_955){return true;},onSelected:function(_956){this.updateRowStyles(_956);},onDeselected:function(_957){this.updateRowStyles(_957);},onSelectionChanged:function(){}});}if(!dojo._hasResource["dojox.grid._Grid"]){dojo._hasResource["dojox.grid._Grid"]=true;dojo.provide("dojox.grid._Grid");(function(){if(!dojo.isCopyKey){dojo.isCopyKey=dojo.dnd.getCopyKeyState;}dojo.declare("dojox.grid._Grid",[dijit._Widget,dijit._Templated,dojox.grid._Events],{templateString:"<div hidefocus=\"hidefocus\" role=\"grid\" dojoAttachEvent=\"onmouseout:_mouseOut\">\n\t<div class=\"dojoxGridMasterHeader\" dojoAttachPoint=\"viewsHeaderNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterView\" dojoAttachPoint=\"viewsNode\" role=\"presentation\"></div>\n\t<div class=\"dojoxGridMasterMessages\" style=\"display: none;\" dojoAttachPoint=\"messagesNode\"></div>\n\t<span dojoAttachPoint=\"lastFocusNode\" tabindex=\"0\"></span>\n</div>\n",classTag:"dojoxGrid",rowCount:5,keepRows:75,rowsPerPage:25,autoWidth:false,initialWidth:"",autoHeight:"",rowHeight:0,autoRender:true,defaultHeight:"15em",height:"",structure:null,elasticView:-1,singleClickEdit:false,selectionMode:"extended",rowSelector:"",columnReordering:false,headerMenu:null,placeholderLabel:"GridColumns",selectable:false,_click:null,loadingMessage:"<span class='dojoxGridLoading'>${loadingState}</span>",errorMessage:"<span class='dojoxGridError'>${errorState}</span>",noDataMessage:"",escapeHTMLInData:true,formatterScope:null,editable:false,sortInfo:0,themeable:true,_placeholders:null,_layoutClass:dojox.grid._Layout,buildRendering:function(){this.inherited(arguments);if(!this.domNode.getAttribute("tabIndex")){this.domNode.tabIndex="0";}this.createScroller();this.createLayout();this.createViews();this.createManagers();this.createSelection();this.connect(this.selection,"onSelected","onSelected");this.connect(this.selection,"onDeselected","onDeselected");this.connect(this.selection,"onChanged","onSelectionChanged");dojox.html.metrics.initOnFontResize();this.connect(dojox.html.metrics,"onFontResize","textSizeChanged");dojox.grid.util.funnelEvents(this.domNode,this,"doKeyEvent",dojox.grid.util.keyEvents);if(this.selectionMode!="none"){dojo.attr(this.domNode,"aria-multiselectable",this.selectionMode=="single"?"false":"true");}dojo.addClass(this.domNode,this.classTag);if(!this.isLeftToRight()){dojo.addClass(this.domNode,this.classTag+"Rtl");}},postMixInProperties:function(){this.inherited(arguments);var _958=dojo.i18n.getLocalization("dijit","loading",this.lang);this.loadingMessage=dojo.string.substitute(this.loadingMessage,_958);this.errorMessage=dojo.string.substitute(this.errorMessage,_958);if(this.srcNodeRef&&this.srcNodeRef.style.height){this.height=this.srcNodeRef.style.height;}this._setAutoHeightAttr(this.autoHeight,true);this.lastScrollTop=this.scrollTop=0;},postCreate:function(){this._placeholders=[];this._setHeaderMenuAttr(this.headerMenu);this._setStructureAttr(this.structure);this._click=[];this.inherited(arguments);if(this.domNode&&this.autoWidth&&this.initialWidth){this.domNode.style.width=this.initialWidth;}if(this.domNode&&!this.editable){dojo.attr(this.domNode,"aria-readonly","true");}},destroy:function(){this.domNode.onReveal=null;this.domNode.onSizeChange=null;delete this._click;this.edit.destroy();delete this.edit;this.views.destroyViews();if(this.scroller){this.scroller.destroy();delete this.scroller;}if(this.focus){this.focus.destroy();delete this.focus;}if(this.headerMenu&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.inherited(arguments);},_setAutoHeightAttr:function(ah,_959){if(typeof ah=="string"){if(!ah||ah=="false"){ah=false;}else{if(ah=="true"){ah=true;}else{ah=window.parseInt(ah,10);}}}if(typeof ah=="number"){if(isNaN(ah)){ah=false;}if(ah<0){ah=true;}else{if(ah===0){ah=false;}}}this.autoHeight=ah;if(typeof ah=="boolean"){this._autoHeight=ah;}else{if(typeof ah=="number"){this._autoHeight=(ah>=this.get("rowCount"));}else{this._autoHeight=false;}}if(this._started&&!_959){this.render();}},_getRowCountAttr:function(){return this.updating&&this.invalidated&&this.invalidated.rowCount!=undefined?this.invalidated.rowCount:this.rowCount;},textSizeChanged:function(){this.render();},sizeChange:function(){this.update();},createManagers:function(){this.rows=new dojox.grid._RowManager(this);this.focus=new dojox.grid._FocusManager(this);this.edit=new dojox.grid._EditManager(this);},createSelection:function(){this.selection=new dojox.grid.Selection(this);},createScroller:function(){this.scroller=new dojox.grid._Scroller();this.scroller.grid=this;this.scroller.renderRow=dojo.hitch(this,"renderRow");this.scroller.removeRow=dojo.hitch(this,"rowRemoved");},createLayout:function(){this.layout=new this._layoutClass(this);this.connect(this.layout,"moveColumn","onMoveColumn");},onMoveColumn:function(){this.render();},onResizeColumn:function(_95a){},createViews:function(){this.views=new dojox.grid._ViewManager(this);this.views.createView=dojo.hitch(this,"createView");},createView:function(_95b,idx){var c=dojo.getObject(_95b);var view=new c({grid:this,index:idx});this.viewsNode.appendChild(view.domNode);this.viewsHeaderNode.appendChild(view.headerNode);this.views.addView(view);dojo.attr(this.domNode,"align",dojo._isBodyLtr()?"left":"right");return view;},buildViews:function(){for(var i=0,vs;(vs=this.layout.structure[i]);i++){this.createView(vs.type||dojox._scopeName+".grid._View",i).setStructure(vs);}this.scroller.setContentNodes(this.views.getContentNodes());},_setStructureAttr:function(_95c){var s=_95c;if(s&&dojo.isString(s)){dojo.deprecated("dojox.grid._Grid.set('structure', 'objVar')","use dojox.grid._Grid.set('structure', objVar) instead","2.0");s=dojo.getObject(s);}this.structure=s;if(!s){if(this.layout.structure){s=this.layout.structure;}else{return;}}this.views.destroyViews();this.focus.focusView=null;if(s!==this.layout.structure){this.layout.setStructure(s);}this._structureChanged();},setStructure:function(_95d){dojo.deprecated("dojox.grid._Grid.setStructure(obj)","use dojox.grid._Grid.set('structure', obj) instead.","2.0");this._setStructureAttr(_95d);},getColumnTogglingItems:function(){return dojo.map(this.layout.cells,function(cell){if(!cell.menuItems){cell.menuItems=[];}var self=this;var item=new dijit.CheckedMenuItem({label:cell.name,checked:!cell.hidden,_gridCell:cell,onChange:function(_95e){if(self.layout.setColumnVisibility(this._gridCell.index,_95e)){var _95f=this._gridCell.menuItems;if(_95f.length>1){dojo.forEach(_95f,function(item){if(item!==this){item.setAttribute("checked",_95e);}},this);}_95e=dojo.filter(self.layout.cells,function(c){if(c.menuItems.length>1){dojo.forEach(c.menuItems,"item.set('disabled', false);");}else{c.menuItems[0].set("disabled",false);}return !c.hidden;});if(_95e.length==1){dojo.forEach(_95e[0].menuItems,"item.set('disabled', true);");}}},destroy:function(){var _960=dojo.indexOf(this._gridCell.menuItems,this);this._gridCell.menuItems.splice(_960,1);delete this._gridCell;dijit.CheckedMenuItem.prototype.destroy.apply(this,arguments);}});cell.menuItems.push(item);return item;},this);},_setHeaderMenuAttr:function(menu){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){p.unReplace(true);});this._placeholders=[];}if(this.headerMenu){this.headerMenu.unBindDomNode(this.viewsHeaderNode);}this.headerMenu=menu;if(!menu){return;}this.headerMenu.bindDomNode(this.viewsHeaderNode);if(this.headerMenu.getPlaceholders){this._placeholders=this.headerMenu.getPlaceholders(this.placeholderLabel);}},setHeaderMenu:function(menu){dojo.deprecated("dojox.grid._Grid.setHeaderMenu(obj)","use dojox.grid._Grid.set('headerMenu', obj) instead.","2.0");this._setHeaderMenuAttr(menu);},setupHeaderMenu:function(){if(this._placeholders&&this._placeholders.length){dojo.forEach(this._placeholders,function(p){if(p._replaced){p.unReplace(true);}p.replace(this.getColumnTogglingItems());},this);}},_fetch:function(_961){this.setScrollTop(0);},getItem:function(_962){return null;},showMessage:function(_963){if(_963){this.messagesNode.innerHTML=_963;this.messagesNode.style.display="";}else{this.messagesNode.innerHTML="";this.messagesNode.style.display="none";}},_structureChanged:function(){this.buildViews();if(this.autoRender&&this._started){this.render();}},hasLayout:function(){return this.layout.cells.length;},resize:function(_964,_965){this._pendingChangeSize=_964;this._pendingResultSize=_965;this.sizeChange();},_getPadBorder:function(){this._padBorder=this._padBorder||dojo._getPadBorderExtents(this.domNode);return this._padBorder;},_getHeaderHeight:function(){var vns=this.viewsHeaderNode.style,t=vns.display=="none"?0:this.views.measureHeader();vns.height=t+"px";this.views.normalizeHeaderNodeHeight();return t;},_resize:function(_966,_967){_966=_966||this._pendingChangeSize;_967=_967||this._pendingResultSize;delete this._pendingChangeSize;delete this._pendingResultSize;if(!this.domNode){return;}var pn=this.domNode.parentNode;if(!pn||pn.nodeType!=1||!this.hasLayout()||pn.style.visibility=="hidden"||pn.style.display=="none"){return;}var _968=this._getPadBorder();var hh=undefined;var h;if(this._autoHeight){this.domNode.style.height="auto";}else{if(typeof this.autoHeight=="number"){h=hh=this._getHeaderHeight();h+=(this.scroller.averageRowHeight*this.autoHeight);this.domNode.style.height=h+"px";}else{if(this.domNode.clientHeight<=_968.h){if(pn==document.body){this.domNode.style.height=this.defaultHeight;}else{if(this.height){this.domNode.style.height=this.height;}else{this.fitTo="parent";}}}}}if(_967){_966=_967;}if(_966){dojo.marginBox(this.domNode,_966);this.height=this.domNode.style.height;delete this.fitTo;}else{if(this.fitTo=="parent"){h=this._parentContentBoxHeight=this._parentContentBoxHeight||dojo._getContentBox(pn).h;this.domNode.style.height=Math.max(0,h)+"px";}}var _969=dojo.some(this.views.views,function(v){return v.flexCells;});if(!this._autoHeight&&(h||dojo._getContentBox(this.domNode).h)===0){this.viewsHeaderNode.style.display="none";}else{this.viewsHeaderNode.style.display="block";if(!_969&&hh===undefined){hh=this._getHeaderHeight();}}if(_969){hh=undefined;}this.adaptWidth();this.adaptHeight(hh);this.postresize();},adaptWidth:function(){var _96a=(!this.initialWidth&&this.autoWidth);var w=_96a?0:this.domNode.clientWidth||(this.domNode.offsetWidth-this._getPadBorder().w),vw=this.views.arrange(1,w);this.views.onEach("adaptWidth");if(_96a){this.domNode.style.width=vw+"px";}},adaptHeight:function(_96b){var t=_96b===undefined?this._getHeaderHeight():_96b;var h=(this._autoHeight?-1:Math.max(this.domNode.clientHeight-t,0)||0);this.views.onEach("setSize",[0,h]);this.views.onEach("adaptHeight");if(!this._autoHeight){var _96c=0,_96d=0;var _96e=dojo.filter(this.views.views,function(v){var has=v.hasHScrollbar();if(has){_96c++;}else{_96d++;}return (!has);});if(_96c>0&&_96d>0){dojo.forEach(_96e,function(v){v.adaptHeight(true);});}}if(this.autoHeight===true||h!=-1||(typeof this.autoHeight=="number"&&this.autoHeight>=this.get("rowCount"))){this.scroller.windowHeight=h;}else{this.scroller.windowHeight=Math.max(this.domNode.clientHeight-t,0);}},startup:function(){if(this._started){return;}this.inherited(arguments);if(this.autoRender){this.render();}},render:function(){if(!this.domNode){return;}if(!this._started){return;}if(!this.hasLayout()){this.scroller.init(0,this.keepRows,this.rowsPerPage);return;}this.update=this.defaultUpdate;this._render();},_render:function(){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this.setScrollTop(0);this.postrender();},prerender:function(){this.keepRows=this._autoHeight?0:this.keepRows;this.scroller.setKeepInfo(this.keepRows);this.views.render();this._resize();},postrender:function(){this.postresize();this.focus.initFocusView();dojo.setSelectable(this.domNode,this.selectable);},postresize:function(){if(this._autoHeight){var size=Math.max(this.views.measureContent())+"px";this.viewsNode.style.height=size;}},renderRow:function(_96f,_970){this.views.renderRow(_96f,_970,this._skipRowRenormalize);},rowRemoved:function(_971){this.views.rowRemoved(_971);},invalidated:null,updating:false,beginUpdate:function(){this.invalidated=[];this.updating=true;},endUpdate:function(){this.updating=false;var i=this.invalidated,r;if(i.all){this.update();}else{if(i.rowCount!=undefined){this.updateRowCount(i.rowCount);}else{for(r in i){this.updateRow(Number(r));}}}this.invalidated=[];},defaultUpdate:function(){if(!this.domNode){return;}if(this.updating){this.invalidated.all=true;return;}this.lastScrollTop=this.scrollTop;this.prerender();this.scroller.invalidateNodes();this.setScrollTop(this.lastScrollTop);this.postrender();},update:function(){this.render();},updateRow:function(_972){_972=Number(_972);if(this.updating){this.invalidated[_972]=true;}else{this.views.updateRow(_972);this.scroller.rowHeightChanged(_972);}},updateRows:function(_973,_974){_973=Number(_973);_974=Number(_974);var i;if(this.updating){for(i=0;i<_974;i++){this.invalidated[i+_973]=true;}}else{for(i=0;i<_974;i++){this.views.updateRow(i+_973,this._skipRowRenormalize);}this.scroller.rowHeightChanged(_973);}},updateRowCount:function(_975){if(this.updating){this.invalidated.rowCount=_975;}else{this.rowCount=_975;this._setAutoHeightAttr(this.autoHeight,true);if(this.layout.cells.length){this.scroller.updateRowCount(_975);}this._resize();if(this.layout.cells.length){this.setScrollTop(this.scrollTop);}}},updateRowStyles:function(_976){this.views.updateRowStyles(_976);},getRowNode:function(_977){if(this.focus.focusView&&!(this.focus.focusView instanceof dojox.grid._RowSelector)){return this.focus.focusView.rowNodes[_977];}else{for(var i=0,_978;(_978=this.views.views[i]);i++){if(!(_978 instanceof dojox.grid._RowSelector)){return _978.rowNodes[_977];}}}return null;},rowHeightChanged:function(_979){this.views.renormalizeRow(_979);this.scroller.rowHeightChanged(_979);},fastScroll:true,delayScroll:false,scrollRedrawThreshold:(dojo.isIE?100:50),scrollTo:function(_97a){if(!this.fastScroll){this.setScrollTop(_97a);return;}var _97b=Math.abs(this.lastScrollTop-_97a);this.lastScrollTop=_97a;if(_97b>this.scrollRedrawThreshold||this.delayScroll){this.delayScroll=true;this.scrollTop=_97a;this.views.setScrollTop(_97a);if(this._pendingScroll){window.clearTimeout(this._pendingScroll);}var _97c=this;this._pendingScroll=window.setTimeout(function(){delete _97c._pendingScroll;_97c.finishScrollJob();},200);}else{this.setScrollTop(_97a);}},finishScrollJob:function(){this.delayScroll=false;this.setScrollTop(this.scrollTop);},setScrollTop:function(_97d){this.scroller.scroll(this.views.setScrollTop(_97d));},scrollToRow:function(_97e){this.setScrollTop(this.scroller.findScrollTop(_97e)+1);},styleRowNode:function(_97f,_980){if(_980){this.rows.styleRowNode(_97f,_980);}},_mouseOut:function(e){this.rows.setOverRow(-2);},getCell:function(_981){return this.layout.cells[_981];},setCellWidth:function(_982,_983){this.getCell(_982).unitWidth=_983;},getCellName:function(_984){return "Cell "+_984.index;},canSort:function(_985){},sort:function(){},getSortAsc:function(_986){_986=_986==undefined?this.sortInfo:_986;return Boolean(_986>0);},getSortIndex:function(_987){_987=_987==undefined?this.sortInfo:_987;return Math.abs(_987)-1;},setSortIndex:function(_988,_989){var si=_988+1;if(_989!=undefined){si*=(_989?1:-1);}else{if(this.getSortIndex()==_988){si=-this.sortInfo;}}this.setSortInfo(si);},setSortInfo:function(_98a){if(this.canSort(_98a)){this.sortInfo=_98a;this.sort();this.update();}},doKeyEvent:function(e){e.dispatch="do"+e.type;this.onKeyEvent(e);},_dispatch:function(m,e){if(m in this){return this[m](e);}return false;},dispatchKeyEvent:function(e){this._dispatch(e.dispatch,e);},dispatchContentEvent:function(e){this.edit.dispatchEvent(e)||e.sourceView.dispatchContentEvent(e)||this._dispatch(e.dispatch,e);},dispatchHeaderEvent:function(e){e.sourceView.dispatchHeaderEvent(e)||this._dispatch("doheader"+e.type,e);},dokeydown:function(e){this.onKeyDown(e);},doclick:function(e){if(e.cellNode){this.onCellClick(e);}else{this.onRowClick(e);}},dodblclick:function(e){if(e.cellNode){this.onCellDblClick(e);}else{this.onRowDblClick(e);}},docontextmenu:function(e){if(e.cellNode){this.onCellContextMenu(e);}else{this.onRowContextMenu(e);}},doheaderclick:function(e){if(e.cellNode){this.onHeaderCellClick(e);}else{this.onHeaderClick(e);}},doheaderdblclick:function(e){if(e.cellNode){this.onHeaderCellDblClick(e);}else{this.onHeaderDblClick(e);}},doheadercontextmenu:function(e){if(e.cellNode){this.onHeaderCellContextMenu(e);}else{this.onHeaderContextMenu(e);}},doStartEdit:function(_98b,_98c){this.onStartEdit(_98b,_98c);},doApplyCellEdit:function(_98d,_98e,_98f){this.onApplyCellEdit(_98d,_98e,_98f);},doCancelEdit:function(_990){this.onCancelEdit(_990);},doApplyEdit:function(_991){this.onApplyEdit(_991);},addRow:function(){this.updateRowCount(this.get("rowCount")+1);},removeSelectedRows:function(){if(this.allItemsSelected){this.updateRowCount(0);}else{this.updateRowCount(Math.max(0,this.get("rowCount")-this.selection.getSelected().length));}this.selection.clear();}});dojox.grid._Grid.markupFactory=function(_992,node,ctor,_993){var d=dojo;var _994=function(n){var w=d.attr(n,"width")||"auto";if((w!="auto")&&(w.slice(-2)!="em")&&(w.slice(-1)!="%")){w=parseInt(w,10)+"px";}return w;};if(!_992.structure&&node.nodeName.toLowerCase()=="table"){_992.structure=d.query("> colgroup",node).map(function(cg){var sv=d.attr(cg,"span");var v={noscroll:(d.attr(cg,"noscroll")=="true")?true:false,__span:(!!sv?parseInt(sv,10):1),cells:[]};if(d.hasAttr(cg,"width")){v.width=_994(cg);}return v;});if(!_992.structure.length){_992.structure.push({__span:Infinity,cells:[]});}d.query("thead > tr",node).forEach(function(tr,_995){var _996=0;var _997=0;var _998;var _999=null;d.query("> th",tr).map(function(th){if(!_999){_998=0;_999=_992.structure[0];}else{if(_996>=(_998+_999.__span)){_997++;_998+=_999.__span;var _99a=_999;_999=_992.structure[_997];}}var cell={name:d.trim(d.attr(th,"name")||th.innerHTML),colSpan:parseInt(d.attr(th,"colspan")||1,10),type:d.trim(d.attr(th,"cellType")||""),id:d.trim(d.attr(th,"id")||"")};_996+=cell.colSpan;var _99b=d.attr(th,"rowspan");if(_99b){cell.rowSpan=_99b;}if(d.hasAttr(th,"width")){cell.width=_994(th);}if(d.hasAttr(th,"relWidth")){cell.relWidth=window.parseInt(dojo.attr(th,"relWidth"),10);}if(d.hasAttr(th,"hidden")){cell.hidden=(d.attr(th,"hidden")=="true"||d.attr(th,"hidden")===true);}if(_993){_993(th,cell);}cell.type=cell.type?dojo.getObject(cell.type):dojox.grid.cells.Cell;if(cell.type&&cell.type.markupFactory){cell.type.markupFactory(th,cell);}if(!_999.cells[_995]){_999.cells[_995]=[];}_999.cells[_995].push(cell);});});}return new ctor(_992,node);};})();}if(!dojo._hasResource["dojox.grid.DataSelection"]){dojo._hasResource["dojox.grid.DataSelection"]=true;dojo.provide("dojox.grid.DataSelection");dojo.declare("dojox.grid.DataSelection",dojox.grid.Selection,{getFirstSelected:function(){var idx=dojox.grid.Selection.prototype.getFirstSelected.call(this);if(idx==-1){return null;}return this.grid.getItem(idx);},getNextSelected:function(_99c){var _99d=this.grid.getItemIndex(_99c);var idx=dojox.grid.Selection.prototype.getNextSelected.call(this,_99d);if(idx==-1){return null;}return this.grid.getItem(idx);},getSelected:function(){var _99e=[];for(var i=0,l=this.selected.length;i<l;i++){if(this.selected[i]){_99e.push(this.grid.getItem(i));}}return _99e;},addToSelection:function(_99f){if(this.mode=="none"){return;}var idx=null;if(typeof _99f=="number"||typeof _99f=="string"){idx=_99f;}else{idx=this.grid.getItemIndex(_99f);}dojox.grid.Selection.prototype.addToSelection.call(this,idx);},deselect:function(_9a0){if(this.mode=="none"){return;}var idx=null;if(typeof _9a0=="number"||typeof _9a0=="string"){idx=_9a0;}else{idx=this.grid.getItemIndex(_9a0);}dojox.grid.Selection.prototype.deselect.call(this,idx);},deselectAll:function(_9a1){var idx=null;if(_9a1||typeof _9a1=="number"){if(typeof _9a1=="number"||typeof _9a1=="string"){idx=_9a1;}else{idx=this.grid.getItemIndex(_9a1);}dojox.grid.Selection.prototype.deselectAll.call(this,idx);}else{this.inherited(arguments);}}});}if(!dojo._hasResource["dojox.grid.DataGrid"]){dojo._hasResource["dojox.grid.DataGrid"]=true;dojo.provide("dojox.grid.DataGrid");dojo.declare("dojox.grid.DataGrid",dojox.grid._Grid,{store:null,query:null,queryOptions:null,fetchText:"...",sortFields:null,updateDelay:1,items:null,_store_connects:null,_by_idty:null,_by_idx:null,_cache:null,_pages:null,_pending_requests:null,_bop:-1,_eop:-1,_requests:0,rowCount:0,_isLoaded:false,_isLoading:false,postCreate:function(){this._pages=[];this._store_connects=[];this._by_idty={};this._by_idx=[];this._cache=[];this._pending_requests={};this._setStore(this.store);this.inherited(arguments);},createSelection:function(){this.selection=new dojox.grid.DataSelection(this);},get:function(_9a2,_9a3){if(_9a3&&this.field=="_item"&&!this.fields){return _9a3;}else{if(_9a3&&this.fields){var ret=[];var s=this.grid.store;dojo.forEach(this.fields,function(f){ret=ret.concat(s.getValues(_9a3,f));});return ret;}else{if(!_9a3&&typeof _9a2==="string"){return this.inherited(arguments);}}}return (!_9a3?this.defaultValue:(!this.field?this.value:(this.field=="_item"?_9a3:this.grid.store.getValue(_9a3,this.field))));},_checkUpdateStatus:function(){if(this.updateDelay>0){var _9a4=false;if(this._endUpdateDelay){clearTimeout(this._endUpdateDelay);delete this._endUpdateDelay;_9a4=true;}if(!this.updating){this.beginUpdate();_9a4=true;}if(_9a4){var _9a5=this;this._endUpdateDelay=setTimeout(function(){delete _9a5._endUpdateDelay;_9a5.endUpdate();},this.updateDelay);}}},_onSet:function(item,_9a6,_9a7,_9a8){this._checkUpdateStatus();var idx=this.getItemIndex(item);if(idx>-1){this.updateRow(idx);}},_createItem:function(item,_9a9){var idty=this._hasIdentity?this.store.getIdentity(item):dojo.toJson(this.query)+":idx:"+_9a9+":sort:"+dojo.toJson(this.getSortProps());var o=this._by_idty[idty]={idty:idty,item:item};return o;},_addItem:function(item,_9aa,_9ab){this._by_idx[_9aa]=this._createItem(item,_9aa);if(!_9ab){this.updateRow(_9aa);}},_onNew:function(item,_9ac){this._checkUpdateStatus();var _9ad=this.get("rowCount");this._addingItem=true;this.updateRowCount(_9ad+1);this._addingItem=false;this._addItem(item,_9ad);this.showMessage();},_onDelete:function(item){this._checkUpdateStatus();var idx=this._getItemIndex(item,true);if(idx>=0){this._pages=[];this._bop=-1;this._eop=-1;var o=this._by_idx[idx];this._by_idx.splice(idx,1);delete this._by_idty[o.idty];this.updateRowCount(this.get("rowCount")-1);if(this.get("rowCount")===0){this.showMessage(this.noDataMessage);}}},_onRevert:function(){this._refresh();},setStore:function(_9ae,_9af,_9b0){this._setQuery(_9af,_9b0);this._setStore(_9ae);this._refresh(true);},setQuery:function(_9b1,_9b2){this._setQuery(_9b1,_9b2);this._refresh(true);},setItems:function(_9b3){this.items=_9b3;this._setStore(this.store);this._refresh(true);},_setQuery:function(_9b4,_9b5){this.query=_9b4;this.queryOptions=_9b5||this.queryOptions;},_setStore:function(_9b6){if(this.store&&this._store_connects){dojo.forEach(this._store_connects,this.disconnect,this);}this.store=_9b6;if(this.store){var f=this.store.getFeatures();var h=[];this._canEdit=!!f["dojo.data.api.Write"]&&!!f["dojo.data.api.Identity"];this._hasIdentity=!!f["dojo.data.api.Identity"];if(!!f["dojo.data.api.Notification"]&&!this.items){h.push(this.connect(this.store,"onSet","_onSet"));h.push(this.connect(this.store,"onNew","_onNew"));h.push(this.connect(this.store,"onDelete","_onDelete"));}if(this._canEdit){h.push(this.connect(this.store,"revert","_onRevert"));}this._store_connects=h;}},_onFetchBegin:function(size,req){if(!this.scroller){return;}if(this.rowCount!=size){if(req.isRender){this.scroller.init(size,this.keepRows,this.rowsPerPage);this.rowCount=size;this._setAutoHeightAttr(this.autoHeight,true);this._skipRowRenormalize=true;this.prerender();this._skipRowRenormalize=false;}else{this.updateRowCount(size);}}if(!size){this.views.render();this._resize();this.showMessage(this.noDataMessage);this.focus.initFocusView();}else{this.showMessage();}},_onFetchComplete:function(_9b7,req){if(!this.scroller){return;}if(_9b7&&_9b7.length>0){dojo.forEach(_9b7,function(item,idx){this._addItem(item,req.start+idx,true);},this);this.updateRows(req.start,_9b7.length);if(req.isRender){this.setScrollTop(0);this.postrender();}else{if(this._lastScrollTop){this.setScrollTop(this._lastScrollTop);}}}delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;}this._pending_requests[req.start]=false;},_onFetchError:function(err,req){console.log(err);delete this._lastScrollTop;if(!this._isLoaded){this._isLoading=false;this._isLoaded=true;this.showMessage(this.errorMessage);}this._pending_requests[req.start]=false;this.onFetchError(err,req);},onFetchError:function(err,req){},_fetch:function(_9b8,_9b9){_9b8=_9b8||0;if(this.store&&!this._pending_requests[_9b8]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_9b8]=true;try{if(this.items){var _9ba=this.items;var _9bb=this.store;this.rowsPerPage=_9ba.length;var req={start:_9b8,count:this.rowsPerPage,isRender:_9b9};this._onFetchBegin(_9ba.length,req);var _9bc=0;dojo.forEach(_9ba,function(i){if(!_9bb.isItemLoaded(i)){_9bc++;}});if(_9bc===0){this._onFetchComplete(_9ba,req);}else{var _9bd=function(item){_9bc--;if(_9bc===0){this._onFetchComplete(_9ba,req);}};dojo.forEach(_9ba,function(i){if(!_9bb.isItemLoaded(i)){_9bb.loadItem({item:i,onItem:_9bd,scope:this});}},this);}}else{this.store.fetch({start:_9b8,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_9b9,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")});}}catch(e){this._onFetchError(e,{start:_9b8,count:this.rowsPerPage});}}},_clearData:function(){this.updateRowCount(0);this._by_idty={};this._by_idx=[];this._pages=[];this._bop=this._eop=-1;this._isLoaded=false;this._isLoading=false;},getItem:function(idx){var data=this._by_idx[idx];if(!data||(data&&!data.item)){this._preparePage(idx);return null;}return data.item;},getItemIndex:function(item){return this._getItemIndex(item,false);},_getItemIndex:function(item,_9be){if(!_9be&&!this.store.isItem(item)){return -1;}var idty=this._hasIdentity?this.store.getIdentity(item):null;for(var i=0,l=this._by_idx.length;i<l;i++){var d=this._by_idx[i];if(d&&((idty&&d.idty==idty)||(d.item===item))){return i;}}return -1;},filter:function(_9bf,_9c0){this.query=_9bf;if(_9c0){this._clearData();}this._fetch();},_getItemAttr:function(idx,attr){var item=this.getItem(idx);return (!item?this.fetchText:this.store.getValue(item,attr));},_render:function(){if(this.domNode.parentNode){this.scroller.init(this.get("rowCount"),this.keepRows,this.rowsPerPage);this.prerender();this._fetch(0,true);}},_requestsPending:function(_9c1){return this._pending_requests[_9c1];},_rowToPage:function(_9c2){return (this.rowsPerPage?Math.floor(_9c2/this.rowsPerPage):_9c2);},_pageToRow:function(_9c3){return (this.rowsPerPage?this.rowsPerPage*_9c3:_9c3);},_preparePage:function(_9c4){if((_9c4<this._bop||_9c4>=this._eop)&&!this._addingItem){var _9c5=this._rowToPage(_9c4);this._needPage(_9c5);this._bop=_9c5*this.rowsPerPage;this._eop=this._bop+(this.rowsPerPage||this.get("rowCount"));}},_needPage:function(_9c6){if(!this._pages[_9c6]){this._pages[_9c6]=true;this._requestPage(_9c6);}},_requestPage:function(_9c7){var row=this._pageToRow(_9c7);var _9c8=Math.min(this.rowsPerPage,this.get("rowCount")-row);if(_9c8>0){this._requests++;if(!this._requestsPending(row)){setTimeout(dojo.hitch(this,"_fetch",row,false),1);}}},getCellName:function(_9c9){return _9c9.field;},_refresh:function(_9ca){this._clearData();this._fetch(0,_9ca);},sort:function(){this.edit.apply();this._lastScrollTop=this.scrollTop;this._refresh();},canSort:function(){return (!this._isLoading);},getSortProps:function(){var c=this.getCell(this.getSortIndex());if(!c){if(this.sortFields){return this.sortFields;}return null;}else{var desc=c["sortDesc"];var si=!(this.sortInfo>0);if(typeof desc=="undefined"){desc=si;}else{desc=si?!desc:desc;}return [{attribute:c.field,descending:desc}];}},styleRowState:function(_9cb){if(this.store&&this.store.getState){var _9cc=this.store.getState(_9cb.index),c="";for(var i=0,ss=["inflight","error","inserting"],s;s=ss[i];i++){if(_9cc[s]){c=" dojoxGridRow-"+s;break;}}_9cb.customClasses+=c;}},onStyleRow:function(_9cd){this.styleRowState(_9cd);this.inherited(arguments);},canEdit:function(_9ce,_9cf){return this._canEdit;},_copyAttr:function(idx,attr){var row={};var _9d0={};var src=this.getItem(idx);return this.store.getValue(src,attr);},doStartEdit:function(_9d1,_9d2){if(!this._cache[_9d2]){this._cache[_9d2]=this._copyAttr(_9d2,_9d1.field);}this.onStartEdit(_9d1,_9d2);},doApplyCellEdit:function(_9d3,_9d4,_9d5){this.store.fetchItemByIdentity({identity:this._by_idx[_9d4].idty,onItem:dojo.hitch(this,function(item){var _9d6=this.store.getValue(item,_9d5);if(typeof _9d6=="number"){_9d3=isNaN(_9d3)?_9d3:parseFloat(_9d3);}else{if(typeof _9d6=="boolean"){_9d3=_9d3=="true"?true:_9d3=="false"?false:_9d3;}else{if(_9d6 instanceof Date){var _9d7=new Date(_9d3);_9d3=isNaN(_9d7.getTime())?_9d3:_9d7;}}}this.store.setValue(item,_9d5,_9d3);this.onApplyCellEdit(_9d3,_9d4,_9d5);})});},doCancelEdit:function(_9d8){var _9d9=this._cache[_9d8];if(_9d9){this.updateRow(_9d8);delete this._cache[_9d8];}this.onCancelEdit.apply(this,arguments);},doApplyEdit:function(_9da,_9db){var _9dc=this._cache[_9da];this.onApplyEdit(_9da);},removeSelectedRows:function(){if(this._canEdit){this.edit.apply();var fx=dojo.hitch(this,function(_9dd){if(_9dd.length){dojo.forEach(_9dd,this.store.deleteItem,this.store);this.selection.clear();}});if(this.allItemsSelected){this.store.fetch({query:this.query,queryOptions:this.queryOptions,onComplete:fx});}else{fx(this.selection.getSelected());}}}});dojox.grid.DataGrid.cell_markupFactory=function(_9de,node,_9df){var _9e0=dojo.trim(dojo.attr(node,"field")||"");if(_9e0){_9df.field=_9e0;}_9df.field=_9df.field||_9df.name;var _9e1=dojo.trim(dojo.attr(node,"fields")||"");if(_9e1){_9df.fields=_9e1.split(",");}if(_9de){_9de(node,_9df);}};dojox.grid.DataGrid.markupFactory=function(_9e2,node,ctor,_9e3){return dojox.grid._Grid.markupFactory(_9e2,node,ctor,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,_9e3));};}if(!dojo._hasResource["dojox.grid.enhanced._Events"]){dojo._hasResource["dojox.grid.enhanced._Events"]=true;dojo.provide("dojox.grid.enhanced._Events");dojo.declare("dojox.grid.enhanced._Events",null,{_events:null,headerCellActiveClass:"dojoxGridHeaderActive",cellActiveClass:"dojoxGridCellActive",rowActiveClass:"dojoxGridRowActive",constructor:function(_9e4){this._events=new dojox.grid._Events();for(var p in this._events){if(!this[p]){this.p=this._events.p;}}_9e4.mixin(_9e4,this);},dokeyup:function(e){this.focus.currentArea().keyup(e);},onKeyDown:function(e){if(e.altKey||e.metaKey){return;}var dk=dojo.keys;var _9e5=this.focus;switch(e.keyCode){case dk.TAB:if(e.ctrlKey){return;}_9e5.tab(e.shiftKey?-1:1,e);break;case dk.UP_ARROW:case dk.DOWN_ARROW:_9e5.currentArea().move(e.keyCode==dk.UP_ARROW?-1:1,0,e);break;case dk.LEFT_ARROW:case dk.RIGHT_ARROW:var _9e6=(e.keyCode==dk.LEFT_ARROW)?1:-1;if(dojo._isBodyLtr()){_9e6*=-1;}_9e5.currentArea().move(0,_9e6,e);break;case dk.F10:if(this.menus&&e.shiftKey){this.onRowContextMenu(e);}break;default:_9e5.currentArea().keydown(e);break;}},domouseup:function(e){if(e.cellNode){this.onMouseUp(e);}else{this.onRowSelectorMouseUp(e);}},domousedown:function(e){if(!e.cellNode){this.onRowSelectorMouseDown(e);}},onMouseUp:function(e){this[e.rowIndex==-1?"onHeaderCellMouseUp":"onCellMouseUp"](e);},onCellMouseDown:function(e){dojo.addClass(e.cellNode,this.cellActiveClass);dojo.addClass(e.rowNode,this.rowActiveClass);},onCellMouseUp:function(e){dojo.removeClass(e.cellNode,this.cellActiveClass);dojo.removeClass(e.rowNode,this.rowActiveClass);},onCellClick:function(e){this._events.onCellClick.call(this,e);this.focus.contentMouseEvent(e);},onCellDblClick:function(e){if(this.pluginMgr.isFixedCell(e.cell)){return;}if(this._click.length>1&&(!this._click[0]||!this._click[1])){this._click[0]=this._click[1]=e;}this._events.onCellDblClick.call(this,e);},onRowClick:function(e){this.edit.rowClick(e);if(!e.cell||(!e.cell.isRowSelector&&(!this.rowSelectCell||!this.rowSelectCell.disabled(e.rowIndex)))){this.selection.clickSelectEvent(e);}},onRowContextMenu:function(e){if(!this.edit.isEditing()&&this.menus){this.showMenu(e);}},onSelectedRegionContextMenu:function(e){if(this.selectedRegionMenu){this.selectedRegionMenu._openMyself({target:e.target,coords:e.keyCode!==dojo.keys.F10&&"pageX" in e?{x:e.pageX,y:e.pageY}:null});dojo.stopEvent(e);}},onHeaderCellMouseOut:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.cellOverClass);dojo.removeClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellMouseDown:function(e){if(e.cellNode){dojo.addClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellMouseUp:function(e){if(e.cellNode){dojo.removeClass(e.cellNode,this.headerCellActiveClass);}},onHeaderCellClick:function(e){this.focus.currentArea("header");if(!e.cell.isRowSelector){this._events.onHeaderCellClick.call(this,e);}this.focus.headerMouseEvent(e);},onRowSelectorMouseDown:function(e){this.focus.focusArea("rowHeader",e);},onRowSelectorMouseUp:function(e){},onMouseUpRow:function(e){if(e.rowIndex!=-1){this.onRowMouseUp(e);}},onRowMouseUp:function(e){}});}if(!dojo._hasResource["dojox.grid.enhanced._FocusManager"]){dojo._hasResource["dojox.grid.enhanced._FocusManager"]=true;dojo.provide("dojox.grid.enhanced._FocusManager");dojo.declare("dojox.grid.enhanced._FocusArea",null,{constructor:function(area,_9e7){this._fm=_9e7;this._evtStack=[area.name];var _9e8=function(){return true;};area.onFocus=area.onFocus||_9e8;area.onBlur=area.onBlur||_9e8;area.onMove=area.onMove||_9e8;area.onKeyUp=area.onKeyUp||_9e8;area.onKeyDown=area.onKeyDown||_9e8;dojo.mixin(this,area);},move:function(_9e9,_9ea,evt){if(this.name){var i,len=this._evtStack.length;for(i=len-1;i>=0;--i){if(this._fm._areas[this._evtStack[i]].onMove(_9e9,_9ea,evt)===false){return false;}}}return true;},_onKeyEvent:function(evt,_9eb){if(this.name){var i,len=this._evtStack.length;for(i=len-1;i>=0;--i){if(this._fm._areas[this._evtStack[i]][_9eb](evt,false)===false){return false;}}for(i=0;i<len;++i){if(this._fm._areas[this._evtStack[i]][_9eb](evt,true)===false){return false;}}}return true;},keydown:function(evt){return this._onKeyEvent(evt,"onKeyDown");},keyup:function(evt){return this._onKeyEvent(evt,"onKeyUp");},contentMouseEventPlanner:function(){return 0;},headerMouseEventPlanner:function(){return 0;}});dojo.declare("dojox.grid.enhanced._FocusManager",dojox.grid._FocusManager,{_stopEvent:function(evt){try{if(evt&&evt.preventDefault){dojo.stopEvent(evt);}}catch(e){}},constructor:function(grid){this.grid=grid;this._areas={};this._areaQueue=[];this._contentMouseEventHandlers=[];this._headerMouseEventHandlers=[];this._currentAreaIdx=-1;this._gridBlured=true;this._connects.push(dojo.connect(grid,"onBlur",this,"_doBlur"));this._connects.push(dojo.connect(grid.scroller,"renderPage",this,"_delayedCellFocus"));this.addArea({name:"header",onFocus:dojo.hitch(this,this.focusHeader),onBlur:dojo.hitch(this,this._blurHeader),onMove:dojo.hitch(this,this._navHeader),getRegions:dojo.hitch(this,this._findHeaderCells),onRegionFocus:dojo.hitch(this,this.doColHeaderFocus),onRegionBlur:dojo.hitch(this,this.doColHeaderBlur),onKeyDown:dojo.hitch(this,this._onHeaderKeyDown)});this.addArea({name:"content",onFocus:dojo.hitch(this,this._focusContent),onBlur:dojo.hitch(this,this._blurContent),onMove:dojo.hitch(this,this._navContent),onKeyDown:dojo.hitch(this,this._onContentKeyDown)});this.addArea({name:"editableCell",onFocus:dojo.hitch(this,this._focusEditableCell),onBlur:dojo.hitch(this,this._blurEditableCell),onKeyDown:dojo.hitch(this,this._onEditableCellKeyDown),onContentMouseEvent:dojo.hitch(this,this._onEditableCellMouseEvent),contentMouseEventPlanner:function(evt,_9ec){return -1;}});this.placeArea("header");this.placeArea("content");this.placeArea("editableCell");this.placeArea("editableCell","above","content");},destroy:function(){for(var name in this._areas){var area=this._areas[name];dojo.forEach(area._connects,dojo.disconnect);area._connects=null;if(area.uninitialize){area.uninitialize();}}this.inherited(arguments);},addArea:function(area){if(area.name&&dojo.isString(area.name)){if(this._areas[area.name]){dojo.forEach(area._connects,dojo.disconnect);}this._areas[area.name]=new dojox.grid.enhanced._FocusArea(area,this);if(area.onHeaderMouseEvent){this._headerMouseEventHandlers.push(area.name);}if(area.onContentMouseEvent){this._contentMouseEventHandlers.push(area.name);}}},getArea:function(_9ed){return this._areas[_9ed];},_bindAreaEvents:function(){var area,hdl,_9ee=this._areas;dojo.forEach(this._areaQueue,function(name){area=_9ee[name];if(!area._initialized&&dojo.isFunction(area.initialize)){area.initialize();area._initialized=true;}if(area.getRegions){area._regions=area.getRegions()||[];dojo.forEach(area._connects||[],dojo.disconnect);area._connects=[];dojo.forEach(area._regions,function(r){if(area.onRegionFocus){hdl=dojo.connect(r,"onfocus",area.onRegionFocus);area._connects.push(hdl);}if(area.onRegionBlur){hdl=dojo.connect(r,"onblur",area.onRegionBlur);area._connects.push(hdl);}});}});},removeArea:function(_9ef){var area=this._areas[_9ef];if(area){this.ignoreArea(_9ef);var i=dojo.indexOf(this._contentMouseEventHandlers,_9ef);if(i>=0){this._contentMouseEventHandlers.splice(i,1);}i=dojo.indexOf(this._headerMouseEventHandlers,_9ef);if(i>=0){this._headerMouseEventHandlers.splice(i,1);}dojo.forEach(area._connects,dojo.disconnect);if(area.uninitialize){area.uninitialize();}delete this._areas[_9ef];}},currentArea:function(_9f0,_9f1){var idx,cai=this._currentAreaIdx;if(dojo.isString(_9f0)&&(idx=dojo.indexOf(this._areaQueue,_9f0))>=0){if(cai!=idx){this.tabbingOut=false;if(_9f1&&cai>=0&&cai<this._areaQueue.length){this._areas[this._areaQueue[cai]].onBlur();}this._currentAreaIdx=idx;}}else{return (cai<0||cai>=this._areaQueue.length)?new dojox.grid.enhanced._FocusArea({},this):this._areas[this._areaQueue[this._currentAreaIdx]];}return null;},placeArea:function(name,pos,_9f2){if(!this._areas[name]){return;}var idx=dojo.indexOf(this._areaQueue,_9f2);switch(pos){case "after":if(idx>=0){++idx;}case "before":if(idx>=0){this._areaQueue.splice(idx,0,name);break;}default:this._areaQueue.push(name);break;case "above":var _9f3=true;case "below":var _9f4=this._areas[_9f2];if(_9f4){if(_9f3){_9f4._evtStack.push(name);}else{_9f4._evtStack.splice(0,0,name);}}}},ignoreArea:function(name){this._areaQueue=dojo.filter(this._areaQueue,function(_9f5){return _9f5!=name;});},focusArea:function(_9f6,evt){var idx;if(typeof _9f6=="number"){idx=_9f6<0?this._areaQueue.length+_9f6:_9f6;}else{idx=dojo.indexOf(this._areaQueue,dojo.isString(_9f6)?_9f6:(_9f6&&_9f6.name));}if(idx<0){idx=0;}var step=idx-this._currentAreaIdx;this._gridBlured=false;if(step){this.tab(step,evt);}else{this.currentArea().onFocus(evt,step);}},tab:function(step,evt){this._gridBlured=false;this.tabbingOut=false;if(step===0){return;}var cai=this._currentAreaIdx;var dir=step>0?1:-1;if(cai<0||cai>=this._areaQueue.length){cai=(this._currentAreaIdx+=step);}else{var _9f7=this._areas[this._areaQueue[cai]].onBlur(evt,step);if(_9f7===true){cai=(this._currentAreaIdx+=step);}else{if(dojo.isString(_9f7)&&this._areas[_9f7]){cai=this._currentAreaIdx=dojo.indexOf(this._areaQueue,_9f7);}}}for(;cai>=0&&cai<this._areaQueue.length;cai+=dir){this._currentAreaIdx=cai;if(this._areaQueue[cai]&&this._areas[this._areaQueue[cai]].onFocus(evt,step)){return;}}this.tabbingOut=true;if(step<0){this._currentAreaIdx=-1;dijit.focus(this.grid.domNode);}else{this._currentAreaIdx=this._areaQueue.length;dijit.focus(this.grid.lastFocusNode);}},_onMouseEvent:function(type,evt){var _9f8=type.toLowerCase(),_9f9=this["_"+_9f8+"MouseEventHandlers"],res=dojo.map(_9f9,function(_9fa){return {"area":_9fa,"idx":this._areas[_9fa][_9f8+"MouseEventPlanner"](evt,_9f9)};},this).sort(function(a,b){return b.idx-a.idx;}),_9fb=dojo.map(res,function(_9fc){return res.area;}),i=res.length;while(--i>=0){if(this._areas[res[i].area]["on"+type+"MouseEvent"](evt,_9fb)===false){return;}}},contentMouseEvent:function(evt){this._onMouseEvent("Content",evt);},headerMouseEvent:function(evt){this._onMouseEvent("Header",evt);},initFocusView:function(){this.focusView=this.grid.views.getFirstScrollingView()||this.focusView||this.grid.views.views[0];this._bindAreaEvents();},isNavHeader:function(){return this._areaQueue[this._currentAreaIdx]=="header";},previousKey:function(e){this.tab(-1,e);},nextKey:function(e){this.tab(1,e);},setFocusCell:function(_9fd,_9fe){if(_9fd){this.currentArea(this.grid.edit.isEditing()?"editableCell":"content",true);this._focusifyCellNode(false);this.cell=_9fd;this.rowIndex=_9fe;this._focusifyCellNode(true);}this.grid.onCellFocus(this.cell,this.rowIndex);},doFocus:function(e){if(e&&e.target==e.currentTarget&&!this.tabbingOut){if(this._gridBlured){this._gridBlured=false;if(this._currentAreaIdx<0||this._currentAreaIdx>=this._areaQueue.length){this.focusArea(0,e);}else{this.focusArea(this._currentAreaIdx,e);}}}else{this.tabbingOut=false;}dojo.stopEvent(e);},_doBlur:function(){this._gridBlured=true;},doLastNodeFocus:function(e){if(this.tabbingOut){this.tabbingOut=false;}else{this.focusArea(-1,e);}},_delayedHeaderFocus:function(){if(this.isNavHeader()){this.focusHeader();}},_delayedCellFocus:function(){this.currentArea("header",true);this.focusArea(this._currentAreaIdx);},_changeMenuBindNode:function(_9ff,_a00){var hm=this.grid.headerMenu;if(hm&&this._contextMenuBindNode==_9ff){hm.unBindDomNode(_9ff);hm.bindDomNode(_a00);this._contextMenuBindNode=_a00;}},focusHeader:function(evt,step){var _a01=false;this.inherited(arguments);if(this._colHeadNode&&dojo.style(this._colHeadNode,"display")!="none"){dijit.focus(this._colHeadNode);this._stopEvent(evt);_a01=true;}return _a01;},_blurHeader:function(evt,step){if(this._colHeadNode){dojo.removeClass(this._colHeadNode,this.focusClass);}dojo.removeAttr(this.grid.domNode,"aria-activedescendant");this._changeMenuBindNode(this.grid.domNode,this.grid.viewsHeaderNode);this._colHeadNode=this._colHeadFocusIdx=null;return true;},_navHeader:function(_a02,_a03,evt){var _a04=_a03<0?-1:1,_a05=dojo.indexOf(this._findHeaderCells(),this._colHeadNode);if(_a05>=0&&(evt.shiftKey&&evt.ctrlKey)){this.colSizeAdjust(evt,_a05,_a04*5);return;}this.move(_a02,_a03);},_onHeaderKeyDown:function(e,_a06){if(_a06){var dk=dojo.keys;switch(e.keyCode){case dk.ENTER:case dk.SPACE:var _a07=this.getHeaderIndex();if(_a07>=0&&!this.grid.pluginMgr.isFixedCell(e.cell)){this.grid.setSortIndex(_a07,null,e);dojo.stopEvent(e);}break;}}return true;},_setActiveColHeader:function(){this.inherited(arguments);dijit.focus(this._colHeadNode);},findAndFocusGridCell:function(){this._focusContent();},_focusContent:function(evt,step){var _a08=true;var _a09=(this.grid.rowCount===0);if(this.isNoFocusCell()&&!_a09){for(var i=0,cell=this.grid.getCell(0);cell&&cell.hidden;cell=this.grid.getCell(++i)){}this.setFocusIndex(0,cell?i:0);}else{if(this.cell&&!_a09){if(this.focusView&&!this.focusView.rowNodes[this.rowIndex]){this.grid.scrollToRow(this.rowIndex);this.focusGrid();}else{this.setFocusIndex(this.rowIndex,this.cell.index);}}else{_a08=false;}}if(_a08){this._stopEvent(evt);}return _a08;},_blurContent:function(evt,step){this._focusifyCellNode(false);return true;},_navContent:function(_a0a,_a0b,evt){if((this.rowIndex===0&&_a0a<0)||(this.rowIndex===this.grid.rowCount-1&&_a0a>0)){return;}this._colHeadNode=null;this.move(_a0a,_a0b,evt);if(evt){dojo.stopEvent(evt);}},_onContentKeyDown:function(e,_a0c){if(_a0c){var dk=dojo.keys,s=this.grid.scroller;switch(e.keyCode){case dk.ENTER:case dk.SPACE:var g=this.grid;if(g.indirectSelection){break;}g.selection.clickSelect(this.rowIndex,dojo.isCopyKey(e),e.shiftKey);g.onRowClick(e);dojo.stopEvent(e);break;case dk.PAGE_UP:if(this.rowIndex!==0){if(this.rowIndex!=s.firstVisibleRow+1){this._navContent(s.firstVisibleRow-this.rowIndex,0);}else{this.grid.setScrollTop(s.findScrollTop(this.rowIndex-1));this._navContent(s.firstVisibleRow-s.lastVisibleRow+1,0);}dojo.stopEvent(e);}break;case dk.PAGE_DOWN:if(this.rowIndex+1!=this.grid.rowCount){dojo.stopEvent(e);if(this.rowIndex!=s.lastVisibleRow-1){this._navContent(s.lastVisibleRow-this.rowIndex-1,0);}else{this.grid.setScrollTop(s.findScrollTop(this.rowIndex+1));this._navContent(s.lastVisibleRow-s.firstVisibleRow-1,0);}dojo.stopEvent(e);}break;}}return true;},_blurFromEditableCell:false,_isNavigating:false,_navElems:null,_focusEditableCell:function(evt,step){var _a0d=false;if(this._isNavigating){_a0d=true;}else{if(this.grid.edit.isEditing()&&this.cell){if(this._blurFromEditableCell||!this._blurEditableCell(evt,step)){this.setFocusIndex(this.rowIndex,this.cell.index);_a0d=true;}this._stopEvent(evt);}}return _a0d;},_applyEditableCell:function(){try{this.grid.edit.apply();}catch(e){console.warn("_FocusManager._applyEditableCell() error:",e);}},_blurEditableCell:function(evt,step){this._blurFromEditableCell=false;if(this._isNavigating){var _a0e=true;if(evt){var _a0f=this._navElems;var _a10=_a0f.lowest||_a0f.first;var _a11=_a0f.last||_a0f.highest||_a10;var _a12=dojo.isIE?evt.srcElement:evt.target;_a0e=_a12==(step>0?_a11:_a10);}if(_a0e){this._isNavigating=false;return "content";}return false;}else{if(this.grid.edit.isEditing()&&this.cell){if(!step||typeof step!="number"){return false;}var dir=step>0?1:-1;var cc=this.grid.layout.cellCount;for(var cell,col=this.cell.index+dir;col>=0&&col<cc;col+=dir){cell=this.grid.getCell(col);if(cell.editable){this.cell=cell;this._blurFromEditableCell=true;return false;}}if((this.rowIndex>0||dir==1)&&(this.rowIndex<this.grid.rowCount||dir==-1)){this.rowIndex+=dir;for(col=dir>0?0:cc-1;col>=0&&col<cc;col+=dir){cell=this.grid.getCell(col);if(cell.editable){this.cell=cell;break;}}this._applyEditableCell();return "content";}}}return true;},_initNavigatableElems:function(){this._navElems=dijit._getTabNavigable(this.cell.getNode(this.rowIndex));},_onEditableCellKeyDown:function(e,_a13){var dk=dojo.keys,g=this.grid,edit=g.edit,_a14=false,_a15=true;switch(e.keyCode){case dk.ENTER:if(_a13&&edit.isEditing()){this._applyEditableCell();_a14=true;dojo.stopEvent(e);}case dk.SPACE:if(!_a13&&this._isNavigating){_a15=false;break;}if(_a13){if(!this.cell.editable&&this.cell.navigatable){this._initNavigatableElems();var _a16=this._navElems.lowest||this._navElems.first;if(_a16){this._isNavigating=true;dijit.focus(_a16);dojo.stopEvent(e);this.currentArea("editableCell",true);break;}}if(!_a14&&!edit.isEditing()&&!g.pluginMgr.isFixedCell(this.cell)){edit.setEditCell(this.cell,this.rowIndex);}if(_a14){this.currentArea("content",true);}else{if(this.cell.editable&&g.canEdit()){this.currentArea("editableCell",true);}}}break;case dk.PAGE_UP:case dk.PAGE_DOWN:if(!_a13&&edit.isEditing()){_a15=false;}break;case dk.ESCAPE:if(!_a13){edit.cancel();this.currentArea("content",true);}}return _a15;},_onEditableCellMouseEvent:function(evt){if(evt.type=="click"){var cell=this.cell||evt.cell;if(cell&&!cell.editable&&cell.navigatable){this._initNavigatableElems();if(this._navElems.lowest||this._navElems.first){var _a17=dojo.isIE?evt.srcElement:evt.target;if(_a17!=cell.getNode(evt.rowIndex)){this._isNavigating=true;this.focusArea("editableCell",evt);dijit.focus(_a17);return false;}}}else{if(this.grid.singleClickEdit){this.currentArea("editableCell");return false;}}}return true;}});}if(!dojo._hasResource["dojox.grid.enhanced._PluginManager"]){dojo._hasResource["dojox.grid.enhanced._PluginManager"]=true;dojo.provide("dojox.grid.enhanced._PluginManager");dojo.declare("dojox.grid.enhanced._PluginManager",null,{_options:null,_plugins:null,_connects:null,constructor:function(_a18){this.grid=_a18;this._store=_a18.store;this._options={};this._plugins=[];this._connects=[];this._parseProps(this.grid.plugins);_a18.connect(_a18,"_setStore",dojo.hitch(this,function(_a19){if(this._store!==_a19){this.forEach("onSetStore",[_a19,this._store]);this._store=_a19;}}));},startup:function(){this.forEach("onStartUp");},preInit:function(){this.grid.focus.destroy();this.grid.focus=new dojox.grid.enhanced._FocusManager(this.grid);new dojox.grid.enhanced._Events(this.grid);this._init(true);this.forEach("onPreInit");},postInit:function(){this._init(false);dojo.forEach(this.grid.views.views,this._initView,this);this._connects.push(dojo.connect(this.grid.views,"addView",dojo.hitch(this,this._initView)));if(this._plugins.length>0){var edit=this.grid.edit;if(edit){edit.styleRow=function(_a1a){};}}this.forEach("onPostInit");},forEach:function(func,args){dojo.forEach(this._plugins,function(p){if(!p||!p[func]){return;}p[func].apply(p,args?args:[]);});},_parseProps:function(_a1b){if(!_a1b){return;}var p,_a1c={},_a1d=this._options,grid=this.grid;var _a1e=dojox.grid.enhanced._PluginManager.registry;for(p in _a1b){if(_a1b[p]){this._normalize(p,_a1b,_a1e,_a1c);}}if(_a1d.dnd||_a1d.indirectSelection){_a1d.columnReordering=false;}dojo.mixin(grid,_a1d);},_normalize:function(p,_a1f,_a20,_a21){if(!_a20[p]){throw new Error("Plugin "+p+" is required.");}if(_a21[p]){throw new Error("Recursive cycle dependency is not supported.");}var _a22=this._options;if(_a22[p]){return _a22[p];}_a21[p]=true;_a22[p]=dojo.mixin({},_a20[p],dojo.isObject(_a1f[p])?_a1f[p]:{});var _a23=_a22[p]["dependency"];if(_a23){if(!dojo.isArray(_a23)){_a23=_a22[p]["dependency"]=[_a23];}dojo.forEach(_a23,function(_a24){if(!this._normalize(_a24,_a1f,_a20,_a21)){throw new Error("Plugin "+_a24+" is required.");}},this);}delete _a21[p];return _a22[p];},_init:function(pre){var p,_a25,_a26=this._options;for(p in _a26){_a25=_a26[p]["preInit"];if((pre?_a25:!_a25)&&_a26[p]["class"]&&!this.pluginExisted(p)){this.loadPlugin(p);}}},loadPlugin:function(name){var _a27=this._options[name];if(!_a27){return null;}var _a28=this.getPlugin(name);if(_a28){return _a28;}var _a29=_a27["dependency"];dojo.forEach(_a29,function(_a2a){if(!this.loadPlugin(_a2a)){throw new Error("Plugin "+_a2a+" is required.");}},this);var cls=_a27["class"];delete _a27["class"];_a28=new this.getPluginClazz(cls)(this.grid,_a27);this._plugins.push(_a28);return _a28;},_initView:function(view){if(!view){return;}dojox.grid.util.funnelEvents(view.contentNode,view,"doContentEvent",["mouseup","mousemove"]);dojox.grid.util.funnelEvents(view.headerNode,view,"doHeaderEvent",["mouseup"]);},pluginExisted:function(name){return !!this.getPlugin(name);},getPlugin:function(name){var _a2b=this._plugins;name=name.toLowerCase();for(var i=0,len=_a2b.length;i<len;i++){if(name==_a2b[i]["name"].toLowerCase()){return _a2b[i];}}return null;},getPluginClazz:function(_a2c){if(dojo.isFunction(_a2c)){return _a2c;}var _a2d="Please make sure Plugin \""+_a2c+"\" is existed.";try{var cls=dojo.getObject(_a2c);if(!cls){throw new Error(_a2d);}return cls;}catch(e){throw new Error(_a2d);}},isFixedCell:function(cell){return cell&&(cell.isRowSelector||cell.fixedPos);},destroy:function(){dojo.forEach(this._connects,dojo.disconnect);this.forEach("destroy");if(this.grid.unwrap){this.grid.unwrap();}delete this._connects;delete this._plugins;delete this._options;}});dojox.grid.enhanced._PluginManager.registerPlugin=function(_a2e,_a2f){if(!_a2e){console.warn("Failed to register plugin, class missed!");return;}var cls=dojox.grid.enhanced._PluginManager;cls.registry=cls.registry||{};cls.registry[_a2e.prototype.name]=dojo.mixin({"class":_a2e},(_a2f?_a2f:{}));};}if(!dojo._hasResource["dojox.grid.enhanced.plugins._SelectionPreserver"]){dojo._hasResource["dojox.grid.enhanced.plugins._SelectionPreserver"]=true;dojo.provide("dojox.grid.enhanced.plugins._SelectionPreserver");dojo.declare("dojox.grid.enhanced.plugins._SelectionPreserver",null,{_connects:[],constructor:function(_a30){this.selection=_a30;var grid=this.grid=_a30.grid;grid.onSelectedById=this.onSelectedById;this.reset();var _a31=grid._clearData;var _a32=this;grid._clearData=function(){_a32._updateMapping(!grid._noInternalMapping);_a32._trustSelection=[];_a31.apply(grid,arguments);};this.connect(grid,"_setStore","reset");this.connect(grid,"_addItem","_reSelectById");this.connect(_a30,"addToSelection",dojo.hitch(this,"_selectById",true));this.connect(_a30,"deselect",dojo.hitch(this,"_selectById",false));this.connect(_a30,"selectRange",dojo.hitch(this,"_updateMapping",true,true,false));this.connect(_a30,"deselectRange",dojo.hitch(this,"_updateMapping",true,false,false));this.connect(_a30,"deselectAll",dojo.hitch(this,"_updateMapping",true,false,true));},destroy:function(){this.reset();dojo.forEach(this._connects,dojo.disconnect);delete this._connects;},connect:function(obj,_a33,_a34){var conn=dojo.connect(obj,_a33,this,_a34);this._connects.push(conn);return conn;},reset:function(){this._idMap=[];this._selectedById={};this._trustSelection=[];this._defaultSelected=false;},_reSelectById:function(item,_a35){var s=this.selection,g=this.grid;if(item&&g._hasIdentity){var id=g.store.getIdentity(item);if(this._selectedById[id]===undefined){if(!this._trustSelection[_a35]){s.selected[_a35]=this._defaultSelected;}}else{s.selected[_a35]=this._selectedById[id];}this._idMap.push(id);g.onSelectedById(id,_a35,s.selected[_a35]);}},_selectById:function(_a36,_a37){if(this.selection.mode=="none"||!this.grid._hasIdentity){return;}var item=_a37;if(typeof _a37=="number"||typeof _a37=="string"){var _a38=this.grid._by_idx[_a37];item=_a38&&_a38.item;}if(item){var id=this.grid.store.getIdentity(item);this._selectedById[id]=!!_a36;}else{this._trustSelection[_a37]=true;}},onSelectedById:function(id,_a39,_a3a){},_updateMapping:function(_a3b,_a3c,_a3d,from,to){var s=this.selection,g=this.grid,flag=0,_a3e=0,i,id;for(i=g.rowCount-1;i>=0;--i){if(!g._by_idx[i]){++_a3e;flag+=s.selected[i]?1:-1;}else{id=g._by_idx[i].idty;if(id&&(_a3b||this._selectedById[id]===undefined)){this._selectedById[id]=!!s.selected[i];}}}if(_a3e){this._defaultSelected=flag>0;}if(!_a3d&&from!==undefined&&to!==undefined){_a3d=!g.usingPagination&&Math.abs(to-from+1)===g.rowCount;}if(_a3d&&!g.usingPagination){for(i=this._idMap.length;i>=0;--i){this._selectedById[this._idMap[i]]=_a3c;}}}});}if(!dojo._hasResource["dojox.grid.EnhancedGrid"]){dojo._hasResource["dojox.grid.EnhancedGrid"]=true;dojo.provide("dojox.grid.EnhancedGrid");dojo.experimental("dojox.grid.EnhancedGrid");dojo.declare("dojox.grid.EnhancedGrid",dojox.grid.DataGrid,{plugins:null,pluginMgr:null,keepSelection:false,_pluginMgrClass:dojox.grid.enhanced._PluginManager,postMixInProperties:function(){this._nls=dojo.i18n.getLocalization("dojox.grid.enhanced","EnhancedGrid",this.lang);this.inherited(arguments);},postCreate:function(){this.pluginMgr=new this._pluginMgrClass(this);this.pluginMgr.preInit();this.inherited(arguments);this.pluginMgr.postInit();},plugin:function(name){return this.pluginMgr.getPlugin(name);},startup:function(){this.inherited(arguments);this.pluginMgr.startup();},createSelection:function(){this.selection=new dojox.grid.enhanced.DataSelection(this);},canSort:function(_a3f,_a40){return true;},doKeyEvent:function(e){try{var view=this.focus.focusView;view.content.decorateEvent(e);if(!e.cell){view.header.decorateEvent(e);}}catch(e){}this.inherited(arguments);},doApplyCellEdit:function(_a41,_a42,_a43){if(!_a43){this.invalidated[_a42]=true;return;}this.inherited(arguments);},mixin:function(_a44,_a45){var _a46={};for(var p in _a45){if(p=="_inherited"||p=="declaredClass"||p=="constructor"||_a45["privates"]&&_a45["privates"][p]){continue;}_a46[p]=_a45[p];}dojo.mixin(_a44,_a46);},_copyAttr:function(idx,attr){if(!attr){return;}return this.inherited(arguments);},_getHeaderHeight:function(){this.inherited(arguments);return dojo.marginBox(this.viewsHeaderNode).h;},_fetch:function(_a47,_a48){if(this.items){return this.inherited(arguments);}_a47=_a47||0;if(this.store&&!this._pending_requests[_a47]){if(!this._isLoaded&&!this._isLoading){this._isLoading=true;this.showMessage(this.loadingMessage);}this._pending_requests[_a47]=true;try{var req={start:_a47,count:this.rowsPerPage,query:this.query,sort:this.getSortProps(),queryOptions:this.queryOptions,isRender:_a48,onBegin:dojo.hitch(this,"_onFetchBegin"),onComplete:dojo.hitch(this,"_onFetchComplete"),onError:dojo.hitch(this,"_onFetchError")};this._storeLayerFetch(req);}catch(e){this._onFetchError(e,{start:_a47,count:this.rowsPerPage});}}return 0;},_storeLayerFetch:function(req){this.store.fetch(req);},getCellByField:function(_a49){return dojo.filter(this.layout.cells,function(cell){return cell.field==_a49;})[0];},onMouseUp:function(e){},createView:function(){var view=this.inherited(arguments);if(dojo.isMoz){var _a4a=function(_a4b,_a4c){for(var n=_a4b;n&&_a4c(n);n=n.parentNode){}return n;};var _a4d=function(_a4e){var name=_a4e.toUpperCase();return function(node){return node.tagName!=name;};};var func=view.header.getCellX;view.header.getCellX=function(e){var x=func.call(view.header,e);var n=_a4a(e.target,_a4d("th"));if(n&&n!==e.target&&dojo.isDescendant(e.target,n)){x+=n.firstChild.offsetLeft;}return x;};}return view;},destroy:function(){delete this._nls;this.selection.destroy();this.pluginMgr.destroy();this.inherited(arguments);}});dojo.provide("dojox.grid.enhanced.DataSelection");dojo.declare("dojox.grid.enhanced.DataSelection",dojox.grid.DataSelection,{constructor:function(grid){if(grid.keepSelection){this.preserver=new dojox.grid.enhanced.plugins._SelectionPreserver(this);}},_range:function(_a4f,inTo){this.grid._selectingRange=true;this.inherited(arguments);this.grid._selectingRange=false;this.onChanged();},deselectAll:function(_a50){this.grid._selectingRange=true;this.inherited(arguments);this.grid._selectingRange=false;this.onChanged();},destroy:function(){if(this.preserver){this.preserver.destroy();}}});dojox.grid.EnhancedGrid.markupFactory=function(_a51,node,ctor,_a52){return dojox.grid._Grid.markupFactory(_a51,node,ctor,dojo.partial(dojox.grid.DataGrid.cell_markupFactory,_a52));};dojox.grid.EnhancedGrid.registerPlugin=function(_a53,_a54){dojox.grid.enhanced._PluginManager.registerPlugin(_a53,_a54);};}if(!dojo._hasResource["soliant.widget.StudentSearch"]){dojo._hasResource["soliant.widget.StudentSearch"]=true;dojo.provide("soliant.widget.StudentSearch");dojo.declare("soliant.widget.StudentSearch",[dijit._Widget,dijit._Templated],{widgetsInTemplate:true,id_student_search:"",url:"/student-search/search",saveurl:"/student-search/save",studentSearchGrid:"",templateString:dojo.cache("soliant.widget","StudentSearch/StudentSearch.html","<div dojoType=\"soliant.widget.StudentSearch\">\n\t<style type=\"text/css\">\n\t  @import \"/js/dojo_development/dojo/dojox/grid/resources/Grid.css\";\n\t  @import \"/js/dojo_development/dojo/dojox/grid/resources/{{ theme }}Grid.css\";\n\t  .dojoxGrid table {\n\t    margin: 0;\n\t  }\n\t</style>\n\t<div dojoType=\"dijit.form.Form\" dojoAttachPoint=\"studentSearchForm\">\n\t\t<div style=\"padding-left:10px;float:left;\">\n\t\t\t<input type=\"hidden\" id=\"id_student_search\" name=\"id_student_search\" value=\"${id_student_search}\" dojoType=\"dijit.form.TextBox\">\n\t\t    <div style=\"float:left;\">\n\t\t    \tLimit to:\n\t\t    </div>\n\t\t    <div style=\"float:left;\">\n\t\t    \t<select name=\"limitto\" id=\"limitto\" dojoType=\"dijit.form.Select\" dojoAttachPoint=\"studentSearchLimitTo\">\n\t\t    \t\t<option value=\"all\">All</option>\n\t\t    \t\t<option value=\"caseload\">Caseload</option>\n\t\t    \t</select>\n\t\t\t</div>\t\t    \n\t\t    <div style=\"float:left;\">\n\t\t    \tStatus:\n\t\t    </div>\n\t\t    <div style=\"float:left;\">\n\t\t    \t<select name=\"status\" id=\"status\" dojoType=\"dijit.form.Select\" dojoAttachPoint=\"studentSearchStatus\">\n\t\t    \t\t<option value=\"All\">All</option>\n\t\t    \t\t<option value=\"Active\">Active</option>\n\t\t    \t\t<option value=\"Inactive\">Inactive</option>\n\t\t    \t\t<option value=\"Never Qualified\">Never Qualified</option>\n\t\t    \t\t<option value=\"No Longer Qualifies\">No Longer Qualifies</option>\n\t\t    \t\t<option value=\"Transferred to Non-SRS District\">Transferred to Non-SRS District</option>\n\t\t    \t</select>\n\t\t\t</div>\t\t    \n\t\t    <div style=\"float:left;\">\n\t\t    \tOrder by:\n\t\t    </div>\n\t\t    <div style=\"float:left;\">\n\t\t    \t<select name=\"sort_order\" id=\"orderby\" dojoType=\"dijit.form.Select\" dojoAttachPoint=\"studentSearchOrder\">\n\t\t    \t\t<option value=\"name\">Name</option>\n\t\t    \t\t<option value=\"school\">School</option>\n\t\t    \t</select>\n\t\t\t</div>\t\t    \n\t\t</div>\n\t\t<div style=\"padding-left:5px;float:left;\">\n\t\t    <div style=\"float:left;\">\n\t\t    \tRecords per page:\n\t\t    </div>\n\t\t    <div style=\"float:left;\">\n\t\t    \t<select name=\"recs_per\" id=\"recsPer\" dojoType=\"dijit.form.Select\" dojoAttachPoint=\"studentSearchRecsPer\">\n\t\t    \t\t<option value=\"2\">2</option>\n\t\t    \t\t<option value=\"5\">5</option>\n\t\t    \t\t<option selected=\"selected\" value=\"20\">20</option>\n\t\t    \t</select>\n\t\t\t</div>\t\t    \n\t\t    <div style=\"float:left;\">\n\t\t        <button id=\"search\" name=\"search\" dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick: search\">Search</button>\n\t\t    </div>\n\t\t    <div style=\"float:left;\">\n\t\t        <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick: save\">Save Search</button>\n\t\t    </div>\n\t\t    <div style=\"float:left;\">\n\t\t\t    <button dojoType=\"dijit.form.Button\" dojoAttachEvent=\"onClick: getsearchrow\">Add Row</button>\n\t\t\t</div>\t\t    \n\t\t</div>\n\t\t<div style=\"padding-left:10px;float:right;\">\n\t\t\t<div dojoAttachPoint=\"studentSearchFormRows\"></div>\n\t\t</div>\n\t</div>\n\t<div class=\"claro\" style=\"height:400px;clear:both;margin-top:10px;\" dojoAttachPoint=\"studentSearchGrid\"></div>\n</div>\n"),startup:function(){this.inherited(arguments);this.getSearchHeader();this.manageRemoveRowLinks();},getSearchHeader:function(){var _a55={handleAs:"json",url:"/student-search/getsearchheader/id_student_search/"+this.id_student_search,sync:true,load:dojo.hitch(this,"buildSearchHeader"),error:function(data,_a56){console.debug("error");alert("Error");}};var _a57=dojo.xhrPost(_a55);},buildSearchHeader:function(data,_a58){var _a59=data.items[0];var _a5a=_a59["subforms"]["my_searches"];this.studentSearchLimitTo.attr("value",_a59["limitto"]);this.studentSearchStatus.attr("value",_a59["status"]);this.studentSearchOrder.attr("value",_a59["sort_order"]);this.studentSearchRecsPer.attr("value",_a59["recs_per"]);this.buildSearchRows(_a5a);this.buildSearchList(_a59);},getsearchrow:function(evt){xhrArgs={url:"/student-search/addrow/id_student_search/"+this.id_student_search,handleAs:"json",load:dojo.hitch(this,"addsearchrow"),};dojo.xhrPost(xhrArgs);},addsearchrow:function(data,_a5b){var _a5c=data.items[0];var _a5d=new Array();_a5d[0]=_a5c;this.buildSearchRows(_a5d);},buildSearchRows:function(_a5e){that=this;dojo.forEach(_a5e,function(row){var _a5f="rowNode"+row["id_student_search_rows"];var _a60=dojo.create("div",{id:_a5f,style:"clear:both;"},that.studentSearchFormRows);var _a61=dojo.create("div",{name:"searchFieldContainer",style:"display: inline-block;"},_a5f);var _a62=dojo.create("div",{name:"searchValueContainer",style:"display: inline-block;"},_a5f);var _a63=dojo.create("div",{name:"deleteRowContainer",style:"display: inline-block;"},_a5f);deleteLink=new dijit.form.Button({"class":"button_remove_row",label:"Delete Row",title:"Delete Search Row!",onClick:dojo.hitch(this,function(){that.deletesearchrow(row["id_student_search_rows"]);})}).placeAt(_a63);new dijit.form.Select({name:"search_field",options:[{label:"Name First",value:"name_first"},{label:"Name Last",value:"name_last",selected:true},{label:"ID Student (District)",value:"id_student"}],value:row["search_field"]}).placeAt(_a61);new dijit.form.TextBox({name:"search_value",value:row["search_value"]}).placeAt(_a62);new dijit.form.TextBox({name:"id_student_search_rows",value:row["id_student_search_rows"],type:"hidden"}).placeAt(_a62);});that.manageRemoveRowLinks();},search:function(evt){that=this;submitObj=new Object();data=this.studentSearchForm.getValues();submitObj.data=dojo.toJson(data);var _a64={content:submitObj,handleAs:"json",url:this.url,sync:true,load:dojo.hitch(this,"searchResults"),error:function(data,_a65){console.debug("error");alert("There was an error while trying to submit your issue. Please contact an administrator.");}};dojo.xhrPost(_a64);},searchResults:function(data,_a66){that=this;var _a67=dojo.map(data.items,function(_a68){return {fullname:_a68.name_last+", "+_a68.name_first,name_county:_a68.name_county,name_district:_a68.name_district,name_school:_a68.name_school,id_student:_a68.id_student};});var _a69=new dojo.data.ItemFileReadStore({data:{items:_a67}});this._createGrid(_a69,this.studentSearchGrid);},save:function(evt){submitObj=new Object();data=this.studentSearchForm.getValues();submitObj.data=dojo.toJson(data);var _a6a={content:submitObj,handleAs:"json",url:this.saveurl,sync:true,load:function(data,_a6b){alert("The search has been saved.");},error:function(data,_a6c){console.debug("error");alert("There was an error saving the search.");}};dojo.xhrPost(_a6a);},deletesearchrow:function(_a6d,evt){that=this;xhrArgs={url:"/student-search/removerow/id_student_search_row/"+_a6d,handleAs:"json",load:function(data,_a6e){var _a6f=data.items;if("success"==data.items[0]["result"]){var _a70="rowNode"+data.items[0]["id_student_search_row"];dojo.destroy(_a70);that.manageRemoveRowLinks();}}};dojo.xhrPost(xhrArgs);},manageRemoveRowLinks:function(){var node=this.domNode;searchRows=dojo.query(".button_remove_row",node);if(1<searchRows.length){$display="";}else{$display="none";}dojo.forEach(searchRows,function(row,_a71){dojo.style(row,"display",$display);});},_createGrid:function(_a72,_a73){that=this;var _a74=this._getGridLayout();var node=dojo.create("div",{},_a73,"only");var grid=new dojox.grid.EnhancedGrid({store:_a72,structure:_a74,rowsPerPage:10,clientSort:true},node);grid.update();grid.startup();return grid;},_getGridLayout:function(){return [[{field:"id_student",name:"Id Student",width:"10%"},{field:"fullname",name:"Student Name",width:"15%"},{field:"name_county",name:"County",width:"20%"},{field:"name_district",name:"District",width:"20%"},{field:"name_school",name:"School",width:"20%"}]];},buildSearchList:function(_a75){console.debug("buildSearchList",_a75);if(dojo.byId("StudentSearch_Widget_List")){dojo.byId("StudentSearch_Widget_List").innerHTML="";}}});}if(!dojo._hasResource["dojox.form.uploader.Base"]){dojo._hasResource["dojox.form.uploader.Base"]=true;dojo.provide("dojox.form.uploader.Base");dojo.declare("dojox.form.uploader.Base",[dijit._Widget,dijit._Templated],{getForm:function(){if(!this.form){var n=this.domNode;while(n&&n.tagName&&n!==document.body){if(n.tagName.toLowerCase()=="form"){this.form=n;break;}n=n.parentNode;}}return this.form;},getUrl:function(){if(this.uploadUrl){this.url=this.uploadUrl;}if(this.url){return this.url;}if(this.getForm()){this.url=this.form.action;}return this.url;},connectForm:function(){this.url=this.getUrl();if(!this._fcon&&!!this.getForm()){this._fcon=true;this.connect(this.form,"onsubmit",function(evt){dojo.stopEvent(evt);this.submit(dojo.formToObject(this.form));});}},supports:function(what){if(!this._hascache){this._hascache={testDiv:dojo.create("div"),testInput:dojo.create("input",{type:"file"}),xhr:!!window.XMLHttpRequest?new XMLHttpRequest():{}};dojo.style(this._hascache.testDiv,"opacity",0.7);}switch(what){case "FormData":return !!window.FormData;case "sendAsBinary":return !!this._hascache.xhr.sendAsBinary;case "opacity":return dojo.style(this._hascache.testDiv,"opacity")==0.7;case "multiple":if(this.force=="flash"||this.force=="iframe"){return false;}var res=dojo.attr(this._hascache.testInput,"multiple");return res===true||res===false;}return false;},getMimeType:function(){return "application/octet-stream";},getFileType:function(name){return name.substring(name.lastIndexOf(".")+1).toUpperCase();},convertBytes:function(_a76){var kb=Math.round(_a76/1024*100000)/100000;var mb=Math.round(_a76/1048576*100000)/100000;var gb=Math.round(_a76/1073741824*100000)/100000;var _a77=_a76;if(kb>1){_a77=kb.toFixed(1)+" kb";}if(mb>1){_a77=mb.toFixed(1)+" mb";}if(gb>1){_a77=gb.toFixed(1)+" gb";}return {kb:kb,mb:mb,gb:gb,bytes:_a76,value:_a77};}});}if(!dojo._hasResource["dojox.form.Uploader"]){dojo._hasResource["dojox.form.Uploader"]=true;dojo.provide("dojox.form.Uploader");dojo.experimental("dojox.form.Uploader");dojo.declare("dojox.form.Uploader",[dojox.form.uploader.Base],{uploadOnSelect:false,tabIndex:0,multiple:false,label:"Upload...",url:"",name:"uploadedfile",flashFieldName:"",uploadType:"form",_nameIndex:0,widgetsInTemplate:true,templateString:"<div class=\"dojoxFileInput\"><div dojoType=\"dijit.form.Button\" dojoAttachPoint=\"button\">${label}</div></div>",postMixInProperties:function(){this._inputs=[];this._getButtonStyle(this.srcNodeRef);this.inherited(arguments);},postCreate:function(){var _a78=false;var _a79=this.domNode.parentNode;var _a7a=this._getNodePosition(this.domNode);if(!this.btnSize.w||!this.btnSize.h){dojo.body().appendChild(this.domNode);this._getButtonStyle(this.domNode);_a78=true;}this._setButtonStyle();if(_a78){dojo.place(this.domNode,_a7a.node,_a7a.pos);}this.inherited(arguments);},onChange:function(_a7b){},onBegin:function(_a7c){},onProgress:function(_a7d){},onComplete:function(_a7e){this.reset();},onCancel:function(){},onAbort:function(){},onError:function(_a7f){},upload:function(_a80){},submit:function(form){},reset:function(){this._disconnectButton();dojo.forEach(this._inputs,dojo.destroy,dojo);this._inputs=[];this._nameIndex=0;this._createInput();},getFileList:function(){var _a81=[];if(this.supports("multiple")){dojo.forEach(this.inputNode.files,function(f,i){_a81.push({index:i,name:f.name,size:f.size,type:f.type});},this);}else{dojo.forEach(this._inputs,function(n,i){_a81.push({index:i,name:n.value.substring(n.value.lastIndexOf("\\")+1),size:0,type:n.value.substring(n.value.lastIndexOf(".")+1)});},this);}return _a81;},_getValueAttr:function(){return this.getFileList();},_setValueAttr:function(_a82){console.error("Uploader value is read only");},_getDisabledAttr:function(){return this._disabled;},_setDisabledAttr:function(_a83){if(this._disabled==_a83){return;}this.button.set("disabled",_a83);dojo.style(this.inputNode,"display",_a83?"none":"block");},_getNodePosition:function(node){if(node.previousSibling){return {node:node.previousSibling,pos:"after"};}return {node:node.nextSibling,pos:"before"};},_getButtonStyle:function(node){if(!node){this.btnSize={w:200,h:25};}else{this.btnSize=dojo.marginBox(node);}},_setButtonStyle:function(){var _a84=true;if(!this.domNode.parentNode||!this.domNode.parentNode.tagName){document.body.appendChild(this.domNode);_a84=false;}dojo.style(this.domNode,{width:this.btnSize.w+"px",height:(this.btnSize.h+4)+"px",overflow:"hidden",position:"relative"});this.inputNodeFontSize=Math.max(2,Math.max(Math.ceil(this.btnSize.w/60),Math.ceil(this.btnSize.h/15)));this._createInput();dojo.style(this.button.domNode,{margin:"0px",display:"block",verticalAlign:"top"});dojo.style(this.button.domNode.firstChild,{margin:"0px",display:"block"});if(!_a84){document.body.removeChild(this.domNode);}},_createInput:function(){if(this._inputs.length){dojo.style(this.inputNode,{top:"500px"});this._disconnectButton();this._nameIndex++;}var name;if(this.supports("multiple")){name=this.name+"s[]";}else{name=this.name+(this.multiple?this._nameIndex:"");}this.inputNode=dojo.create("input",{type:"file",name:name,className:"dojoxInputNode"},this.domNode,"first");if(this.supports("multiple")&&this.multiple){dojo.attr(this.inputNode,"multiple",true);}this._inputs.push(this.inputNode);dojo.style(this.inputNode,{fontSize:this.inputNodeFontSize+"em"});var size=dojo.marginBox(this.inputNode);dojo.style(this.inputNode,{position:"absolute",top:"-2px",left:"-"+(size.w-this.btnSize.w-2)+"px",opacity:0});this._connectButton();},_connectButton:function(){this._cons=[];var cs=dojo.hitch(this,function(nm){this._cons.push(dojo.connect(this.inputNode,nm,this,function(evt){this.button._cssMouseEvent({type:nm});}));});cs("mouseover");cs("mouseout");cs("mousedown");this._cons.push(dojo.connect(this.inputNode,"change",this,function(evt){this.onChange(this.getFileList(evt));if(!this.supports("multiple")&&this.multiple){this._createInput();}}));this.button.set("tabIndex",-1);if(this.tabIndex>-1){this.inputNode.tabIndex=this.tabIndex;var _a85=dojo.style(this.button.domNode.firstChild,"border");this._cons.push(dojo.connect(this.inputNode,"focus",this,function(){dojo.style(this.button.domNode.firstChild,"border","1px dashed #ccc");}));this._cons.push(dojo.connect(this.inputNode,"blur",this,function(){dojo.style(this.button.domNode.firstChild,"border",_a85);}));}},_disconnectButton:function(){dojo.forEach(this._cons,dojo.disconnect,dojo);}});(function(){dojox.form.UploaderOrg=dojox.form.Uploader;var _a86=[dojox.form.UploaderOrg];dojox.form.addUploaderPlugin=function(plug){_a86.push(plug);dojo.declare("dojox.form.Uploader",_a86,{});};})();}if(!dojo._hasResource["dojox.form.uploader.plugins.HTML5"]){dojo._hasResource["dojox.form.uploader.plugins.HTML5"]=true;dojo.provide("dojox.form.uploader.plugins.HTML5");dojo.declare("dojox.form.uploader.plugins.HTML5",[],{errMsg:"Error uploading files. Try checking permissions",uploadType:"html5",postCreate:function(){this.connectForm();this.inherited(arguments);if(this.uploadOnSelect){this.connect(this,"onChange","upload");}},upload:function(_a87){this.onBegin(this.getFileList());if(this.supports("FormData")){this.uploadWithFormData(_a87);}else{if(this.supports("sendAsBinary")){this.sendAsBinary(_a87);}}},submit:function(form){form=!!form?form.tagName?form:this.getForm():this.getForm();var data=dojo.formToObject(form);console.log("form data:",data);this.upload(data);},sendAsBinary:function(data){if(!this.getUrl()){console.error("No upload url found.",this);return;}var _a88="---------------------------"+(new Date).getTime();var xhr=this.createXhr();xhr.setRequestHeader("Content-Type","multipart/form-data; boundary="+_a88);var msg=this._buildRequestBody(data,_a88);if(!msg){this.onError(this.errMsg);}else{xhr.sendAsBinary(msg);}},uploadWithFormData:function(data){if(!this.getUrl()){console.error("No upload url found.",this);return;}var fd=new FormData();dojo.forEach(this.inputNode.files,function(f,i){fd.append(this.name+"s[]",f);},this);if(data){for(var nm in data){fd.append(nm,data[nm]);}}var xhr=this.createXhr();xhr.send(fd);},_xhrProgress:function(evt){if(evt.lengthComputable){var o={bytesLoaded:evt.loaded,bytesTotal:evt.total,type:evt.type,timeStamp:evt.timeStamp};if(evt.type=="load"){o.percent="100%",o.decimal=1;}else{o.decimal=evt.loaded/evt.total;o.percent=Math.ceil((evt.loaded/evt.total)*100)+"%";}this.onProgress(o);}},createXhr:function(){var xhr=new XMLHttpRequest();var _a89;xhr.upload.addEventListener("progress",dojo.hitch(this,"_xhrProgress"),false);xhr.addEventListener("load",dojo.hitch(this,"_xhrProgress"),false);xhr.addEventListener("error",dojo.hitch(this,function(evt){this.onError(evt);clearInterval(_a89);}),false);xhr.addEventListener("abort",dojo.hitch(this,function(evt){this.onAbort(evt);clearInterval(_a89);}),false);xhr.onreadystatechange=dojo.hitch(this,function(){if(xhr.readyState===4){console.info("COMPLETE");clearInterval(_a89);this.onComplete(dojo.eval(xhr.responseText));}});xhr.open("POST",this.getUrl());_a89=setInterval(dojo.hitch(this,function(){try{if(typeof (xhr.statusText)){}}catch(e){clearInterval(_a89);}}),250);return xhr;},_buildRequestBody:function(data,_a8a){var EOL="\r\n";var part="";_a8a="--"+_a8a;var _a8b=[];dojo.forEach(this.inputNode.files,function(f,i){var _a8c=this.name+"s[]";var _a8d=this.inputNode.files[i].fileName;var _a8e;try{_a8e=this.inputNode.files[i].getAsBinary()+EOL;part+=_a8a+EOL;part+="Content-Disposition: form-data; ";part+="name=\""+_a8c+"\"; ";part+="filename=\""+_a8d+"\""+EOL;part+="Content-Type: "+this.getMimeType()+EOL+EOL;part+=_a8e;}catch(e){_a8b.push({index:i,name:_a8d});}},this);if(_a8b.length){if(_a8b.length>=this.inputNode.files.length){this.onError({message:this.errMsg,filesInError:_a8b});part=false;}}if(!part){return false;}if(data){for(var nm in data){part+=_a8a+EOL;part+="Content-Disposition: form-data; ";part+="name=\""+nm+"\""+EOL+EOL;part+=data[nm]+EOL;}}part+=_a8a+"--"+EOL;return part;}});dojox.form.addUploaderPlugin(dojox.form.uploader.plugins.HTML5);}if(!dojo._hasResource["dojox.embed.flashVars"]){dojo._hasResource["dojox.embed.flashVars"]=true;dojo.provide("dojox.embed.flashVars");dojo.mixin(dojox.embed.flashVars,{serialize:function(n,o){var esc=function(val){if(typeof val=="string"){val=val.replace(/;/g,"_sc_");val=val.replace(/\./g,"_pr_");val=val.replace(/\:/g,"_cl_");}return val;};var df=dojox.embed.flashVars.serialize;var txt="";if(dojo.isArray(o)){for(var i=0;i<o.length;i++){txt+=df(n+"."+i,esc(o[i]))+";";}return txt.replace(/;{2,}/g,";");}else{if(dojo.isObject(o)){for(var nm in o){txt+=df(n+"."+nm,esc(o[nm]))+";";}return txt.replace(/;{2,}/g,";");}}return n+":"+o;}});}if(!dojo._hasResource["dojox.embed.Flash"]){dojo._hasResource["dojox.embed.Flash"]=true;dojo.provide("dojox.embed.Flash");(function(){var _a8f,_a90;var _a91=9;var _a92="dojox-embed-flash-",_a93=0;var _a94={expressInstall:false,width:320,height:240,swLiveConnect:"true",allowScriptAccess:"sameDomain",allowNetworking:"all",style:null,redirect:null};function prep(_a95){_a95=dojo.delegate(_a94,_a95);if(!("path" in _a95)){console.error("dojox.embed.Flash(ctor):: no path reference to a Flash movie was provided.");return null;}if(!("id" in _a95)){_a95.id=(_a92+_a93++);}return _a95;};if(dojo.isIE){_a8f=function(_a96){_a96=prep(_a96);if(!_a96){return null;}var p;var path=_a96.path;if(_a96.vars){var a=[];for(p in _a96.vars){a.push(p+"="+_a96.vars[p]);}_a96.params.FlashVars=a.join("&");delete _a96.vars;}var s="<object id=\""+_a96.id+"\" "+"classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" "+"width=\""+_a96.width+"\" "+"height=\""+_a96.height+"\""+((_a96.style)?" style=\""+_a96.style+"\"":"")+">"+"<param name=\"movie\" value=\""+path+"\" />";if(_a96.params){for(p in _a96.params){s+="<param name=\""+p+"\" value=\""+_a96.params[p]+"\" />";}}s+="</object>";return {id:_a96.id,markup:s};};_a90=(function(){var _a97=10,_a98=null;while(!_a98&&_a97>7){try{_a98=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_a97--);}catch(e){}}if(_a98){var v=_a98.GetVariable("$version").split(" ")[1].split(",");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();dojo.addOnUnload(function(){var _a99=function(){};var objs=dojo.query("object").reverse().style("display","none").forEach(function(i){for(var p in i){if((p!="FlashVars")&&dojo.isFunction(i[p])){try{i[p]=_a99;}catch(e){}}}});});}else{_a8f=function(_a9a){_a9a=prep(_a9a);if(!_a9a){return null;}var p;var path=_a9a.path;if(_a9a.vars){var a=[];for(p in _a9a.vars){a.push(p+"="+_a9a.vars[p]);}_a9a.params.flashVars=a.join("&");delete _a9a.vars;}var s="<embed type=\"application/x-shockwave-flash\" "+"src=\""+path+"\" "+"id=\""+_a9a.id+"\" "+"width=\""+_a9a.width+"\" "+"height=\""+_a9a.height+"\""+((_a9a.style)?" style=\""+_a9a.style+"\" ":"")+"pluginspage=\""+window.location.protocol+"//www.adobe.com/go/getflashplayer\" ";if(_a9a.params){for(p in _a9a.params){s+=" "+p+"=\""+_a9a.params[p]+"\"";}}s+=" />";return {id:_a9a.id,markup:s};};_a90=(function(){var _a9b=navigator.plugins["Shockwave Flash"];if(_a9b&&_a9b.description){var v=_a9b.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split(".");return {major:(v[0]!=null)?parseInt(v[0]):0,minor:(v[1]!=null)?parseInt(v[1]):0,rev:(v[2]!=null)?parseInt(v[2]):0};}return {major:0,minor:0,rev:0};})();}dojox.embed.Flash=function(_a9c,node){if(location.href.toLowerCase().indexOf("file://")>-1){throw new Error("dojox.embed.Flash can't be run directly from a file. To instatiate the required SWF correctly it must be run from a server, like localHost.");}this.available=dojox.embed.Flash.available;this.minimumVersion=_a9c.minimumVersion||_a91;this.id=null;this.movie=null;this.domNode=null;if(node){node=dojo.byId(node);}setTimeout(dojo.hitch(this,function(){if(_a9c.expressInstall||this.available&&this.available>=this.minimumVersion){if(_a9c&&node){this.init(_a9c,node);}else{this.onError("embed.Flash was not provided with the proper arguments.");}}else{if(!this.available){this.onError("Flash is not installed.");}else{this.onError("Flash version detected: "+this.available+" is out of date. Minimum required: "+this.minimumVersion);}}}),100);};dojo.extend(dojox.embed.Flash,{onReady:function(_a9d){console.warn("embed.Flash.movie.onReady:",_a9d);},onLoad:function(_a9e){console.warn("embed.Flash.movie.onLoad:",_a9e);},onError:function(msg){},_onload:function(){clearInterval(this._poller);delete this._poller;delete this._pollCount;delete this._pollMax;this.onLoad(this.movie);},init:function(_a9f,node){console.log("embed.Flash.movie.init");this.destroy();node=dojo.byId(node||this.domNode);if(!node){throw new Error("dojox.embed.Flash: no domNode reference has been passed.");}var p=0,_aa0=false;this._poller=null;this._pollCount=0;this._pollMax=15;this.pollTime=100;if(dojox.embed.Flash.initialized){this.id=dojox.embed.Flash.place(_a9f,node);this.domNode=node;setTimeout(dojo.hitch(this,function(){this.movie=this.byId(this.id,_a9f.doc);this.onReady(this.movie);this._poller=setInterval(dojo.hitch(this,function(){try{p=this.movie.PercentLoaded();}catch(e){console.warn("this.movie.PercentLoaded() failed");}if(p==100){this._onload();}else{if(p==0&&this._pollCount++>this._pollMax){clearInterval(this._poller);throw new Error("Building SWF failed.");}}}),this.pollTime);}),1);}},_destroy:function(){try{this.domNode.removeChild(this.movie);}catch(e){}this.id=this.movie=this.domNode=null;},destroy:function(){if(!this.movie){return;}var test=dojo.delegate({id:true,movie:true,domNode:true,onReady:true,onLoad:true});for(var p in this){if(!test[p]){delete this[p];}}if(this._poller){dojo.connect(this,"onLoad",this,"_destroy");}else{this._destroy();}},byId:function(_aa1,doc){doc=doc||document;if(doc.embeds[_aa1]){return doc.embeds[_aa1];}if(doc[_aa1]){return doc[_aa1];}if(window[_aa1]){return window[_aa1];}if(document[_aa1]){return document[_aa1];}return null;}});dojo.mixin(dojox.embed.Flash,{minSupported:8,available:_a90.major,supported:(_a90.major>=_a90.required),minimumRequired:_a90.required,version:_a90,initialized:false,onInitialize:function(){dojox.embed.Flash.initialized=true;},__ie_markup__:function(_aa2){return _a8f(_aa2);},proxy:function(obj,_aa3){dojo.forEach((dojo.isArray(_aa3)?_aa3:[_aa3]),function(item){this[item]=dojo.hitch(this,function(){return (function(){return eval(this.movie.CallFunction("<invoke name=\""+item+"\" returntype=\"javascript\">"+"<arguments>"+dojo.map(arguments,function(item){return __flash__toXML(item);}).join("")+"</arguments>"+"</invoke>"));}).apply(this,arguments||[]);});},obj);}});dojox.embed.Flash.place=function(_aa4,node){var o=_a8f(_aa4);node=dojo.byId(node);if(!node){node=dojo.doc.createElement("div");node.id=o.id+"-container";dojo.body().appendChild(node);}if(o){node.innerHTML=o.markup;return o.id;}return null;};dojox.embed.Flash.onInitialize();})();}if(!dojo._hasResource["dojox.form.uploader.plugins.Flash"]){dojo._hasResource["dojox.form.uploader.plugins.Flash"]=true;dojo.provide("dojox.form.uploader.plugins.Flash");dojo.declare("dojox.form.uploader.plugins.Flash",[],{swfPath:dojo.config.uploaderPath||dojo.moduleUrl("dojox.form","resources/uploader.swf"),skipServerCheck:true,serverTimeout:2000,isDebug:false,devMode:false,deferredUploading:0,force:"",postMixInProperties:function(){if(!this.supports("multiple")){this.uploadType="flash";this._files=[];this._fileMap={};this._createInput=this._createFlashUploader;this.getFileList=this.getFlashFileList;this.reset=this.flashReset;this.upload=this.uploadFlash;this.submit=this.submitFlash;this.fieldname="flashUploadFiles";}this.inherited(arguments);},onReady:function(_aa5){},onLoad:function(_aa6){},onFileChange:function(_aa7){},onFileProgress:function(_aa8){},getFlashFileList:function(){return this._files;},flashReset:function(){this.flashMovie.reset();this._files=[];},uploadFlash:function(){this.onBegin(this.getFileList());this.flashMovie.doUpload();},submitFlash:function(_aa9){this.onBegin(this.getFileList());this.flashMovie.doUpload(_aa9);},_change:function(_aaa){this._files=this._files.concat(_aaa);dojo.forEach(_aaa,function(f){f.bytesLoaded=0;f.bytesTotal=f.size;this._fileMap[f.name+"_"+f.size]=f;},this);this.onChange(this._files);this.onFileChange(_aaa);},_complete:function(_aab){var o=this._getCustomEvent();o.type="load";this.onComplete(_aab);},_progress:function(f){this._fileMap[f.name+"_"+f.bytesTotal].bytesLoaded=f.bytesLoaded;var o=this._getCustomEvent();this.onFileProgress(f);this.onProgress(o);},_error:function(err){this.onError(err);},_onFlashBlur:function(_aac){},_getCustomEvent:function(){var o={bytesLoaded:0,bytesTotal:0,type:"progress",timeStamp:new Date().getTime()};for(var nm in this._fileMap){o.bytesTotal+=this._fileMap[nm].bytesTotal;o.bytesLoaded+=this._fileMap[nm].bytesLoaded;}o.decimal=o.bytesLoaded/o.bytesTotal;o.percent=Math.ceil((o.bytesLoaded/o.bytesTotal)*100)+"%";return o;},_connectFlash:function(){this._subs=[];this._cons=[];var _aad=dojo.hitch(this,function(s,_aae){this._subs.push(dojo.subscribe(this.id+s,this,_aae));});_aad("/filesSelected","_change");_aad("/filesUploaded","_complete");_aad("/filesProgress","_progress");_aad("/filesError","_error");_aad("/filesCanceled","onCancel");_aad("/stageBlur","_onFlashBlur");var cs=dojo.hitch(this,function(s,nm){this._cons.push(dojo.subscribe(this.id+s,this,function(evt){this.button._cssMouseEvent({type:nm});}));});cs("/up","mouseup");cs("/down","mousedown");cs("/over","mouseover");cs("/out","mouseout");this.connect(this.domNode,"focus",function(){this.flashMovie.focus();this.flashMovie.doFocus();});if(this.tabIndex>=0){dojo.attr(this.domNode,"tabIndex",this.tabIndex);}},_createFlashUploader:function(){var url=this.getUrl();if(url){if(url.toLowerCase().indexOf("http")<0&&url.indexOf("/")!=0){var loc=window.location.href.split("/");loc.pop();loc=loc.join("/")+"/";url=loc+url;}}else{console.warn("Warning: no uploadUrl provided.");}this.inputNode=dojo.create("div",{className:"dojoxFlashNode"},this.domNode,"first");dojo.style(this.inputNode,{position:"absolute",top:"-2px",width:this.btnSize.w+"px",height:this.btnSize.h+"px",opacity:0});var w=this.btnSize.w;var h=this.btnSize.h;var args={expressInstall:true,path:(this.swfPath.uri||this.swfPath)+"?cb_"+(new Date().getTime()),width:w,height:h,allowScriptAccess:"always",allowNetworking:"all",vars:{uploadDataFieldName:this.flashFieldName||this.name+"Flash",uploadUrl:url,uploadOnSelect:this.uploadOnSelect,deferredUploading:this.deferredUploading||0,selectMultipleFiles:this.multiple,id:this.id,isDebug:this.isDebug,noReturnCheck:this.skipServerCheck,serverTimeout:this.serverTimeout},params:{scale:"noscale",wmode:"transparent",wmode:"opaque",allowScriptAccess:"always",allowNetworking:"all"}};this.flashObject=new dojox.embed.Flash(args,this.inputNode);this.flashObject.onError=dojo.hitch(function(msg){console.error("Flash Error: "+msg);});this.flashObject.onReady=dojo.hitch(this,function(){this.onReady(this);});this.flashObject.onLoad=dojo.hitch(this,function(mov){this.flashMovie=mov;this.flashReady=true;this.onLoad(this);});this._connectFlash();}});dojox.form.addUploaderPlugin(dojox.form.uploader.plugins.Flash);}if(!dojo._hasResource["dojox.form.uploader.FileList"]){dojo._hasResource["dojox.form.uploader.FileList"]=true;dojo.provide("dojox.form.uploader.FileList");dojo.declare("dojox.form.uploader.FileList",[dojox.form.uploader.Base],{uploaderId:"",uploader:null,headerIndex:"#",headerType:"Type",headerFilename:"File Name",headerFilesize:"Size",_upCheckCnt:0,rowAmt:0,templateString:"<div class=\"dojoxUploaderFileList\">"+"<div dojoAttachPoint=\"progressNode\" class=\"dojoxUploaderFileListProgress\"><div dojoAttachPoint=\"percentBarNode\" class=\"dojoxUploaderFileListProgressBar\"></div><div dojoAttachPoint=\"percentTextNode\" class=\"dojoxUploaderFileListPercentText\">0%</div></div>"+"<table class=\"dojoxUploaderFileListTable\">"+"<tr class=\"dojoxUploaderFileListHeader\"><th class=\"dojoxUploaderIndex\">${headerIndex}</th><th class=\"dojoxUploaderIcon\">${headerType}</th><th class=\"dojoxUploaderFileName\">${headerFilename}</th><th class=\"dojoxUploaderFileSize\">${headerFilesize}</th></tr>"+"<tr ><td colSpan=\"4\" class=\"dojoxUploaderFileListContainer\" dojoAttachPoint=\"containerNode\">"+"<table class=\"dojoxUploaderFileListContent\" dojoAttachPoint=\"listNode\"></table>"+"</td><tr>"+"</table>"+"<div>",postCreate:function(){this.setUploader();this.hideProgress();},reset:function(){for(var i=0;i<this.rowAmt;i++){this.listNode.deleteRow(0);}this.rowAmt=0;},setUploader:function(){if(!this.uploaderId&&!this.uploader){console.warn("uploaderId not passed to UploaderFileList");}else{if(this.uploaderId&&!this.uploader){this.uploader=dijit.byId(this.uploaderId);}else{if(this._upCheckCnt>4){console.warn("uploader not found for ID ",this.uploaderId);return;}}}if(this.uploader){this.connect(this.uploader,"onChange","_onUploaderChange");this.connect(this.uploader,"reset","reset");this.connect(this.uploader,"onBegin",function(){this.showProgress(true);});this.connect(this.uploader,"onProgress","_progress");this.connect(this.uploader,"onComplete",function(){setTimeout(dojo.hitch(this,function(){this.hideProgress(true);}),1250);});}else{this._upCheckCnt++;setTimeout(dojo.hitch(this,"setUploader"),250);}},hideProgress:function(_aaf){var o=_aaf?{ani:true,endDisp:"none",beg:15,end:0}:{endDisp:"none",ani:false};this._hideShowProgress(o);},showProgress:function(_ab0){var o=_ab0?{ani:true,endDisp:"block",beg:0,end:15}:{endDisp:"block",ani:false};this._hideShowProgress(o);},_progress:function(_ab1){this.percentTextNode.innerHTML=_ab1.percent;dojo.style(this.percentBarNode,"width",_ab1.percent);},_hideShowProgress:function(o){var node=this.progressNode;var _ab2=function(){dojo.style(node,"display",o.endDisp);};if(o.ani){dojo.style(node,"display","block");dojo.animateProperty({node:node,properties:{height:{start:o.beg,end:o.end,units:"px"}},onEnd:_ab2}).play();}else{_ab2();}},_onUploaderChange:function(_ab3){this.reset();dojo.forEach(_ab3,function(f,i){this._addRow(i+1,this.getFileType(f.name),f.name,f.size);},this);},_addRow:function(_ab4,type,name,size){var c,r=this.listNode.insertRow(-1);c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderIndex");c.innerHTML=_ab4;c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderIcon");c.innerHTML=type;c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderFileName");c.innerHTML=name;c=r.insertCell(-1);dojo.addClass(c,"dojoxUploaderSize");c.innerHTML=this.convertBytes(size).value;this.rowAmt++;}});}if(!dojo._hasResource["dojox.form.FileInput"]){dojo._hasResource["dojox.form.FileInput"]=true;dojo.provide("dojox.form.FileInput");dojo.experimental("dojox.form.FileInput");dojo.declare("dojox.form.FileInput",dijit.form._FormWidget,{label:"Browse ...",cancelText:"Cancel",name:"uploadFile",templateString:dojo.cache("dojox.form","resources/FileInput.html","<div class=\"dijitFileInput\">\n\t<input id=\"${id}\" class=\"dijitFileInputReal\" type=\"file\" dojoAttachPoint=\"fileInput\" name=\"${name}\" />\n\t<div class=\"dijitFakeInput\">\n\t\t<input class=\"dijitFileInputVisible\" type=\"text\" dojoAttachPoint=\"focusNode, inputNode\" />\n\t\t<div class=\"dijitInline dijitFileInputText\" dojoAttachPoint=\"titleNode\">${label}</div>\n\t\t<div class=\"dijitInline dijitFileInputButton\" dojoAttachPoint=\"cancelNode\" \n\t\t\tdojoAttachEvent=\"onclick:reset\">${cancelText}</div>\n\t</div>\n</div>\n"),startup:function(){this._listener=this.connect(this.fileInput,"onchange","_matchValue");this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");},postCreate:function(){},_matchValue:function(){this.inputNode.value=this.fileInput.value;if(this.inputNode.value){this.cancelNode.style.visibility="visible";dojo.fadeIn({node:this.cancelNode,duration:275}).play();}},setLabel:function(_ab5,_ab6){this.titleNode.innerHTML=_ab5;},reset:function(e){this.disconnect(this._listener);this.disconnect(this._keyListener);if(this.fileInput){this.domNode.removeChild(this.fileInput);}dojo.fadeOut({node:this.cancelNode,duration:275}).play();this.fileInput=document.createElement("input");this.fileInput.setAttribute("type","file");this.fileInput.setAttribute("id",this.id);this.fileInput.setAttribute("name",this.name);dojo.addClass(this.fileInput,"dijitFileInputReal");this.domNode.appendChild(this.fileInput);this._keyListener=this.connect(this.fileInput,"onkeyup","_matchValue");this._listener=this.connect(this.fileInput,"onchange","_matchValue");this.inputNode.value="";}});}if(!dojo._hasResource["dojo.io.iframe"]){dojo._hasResource["dojo.io.iframe"]=true;dojo.provide("dojo.io.iframe");dojo.getObject("io",true,dojo);dojo.io.iframe={create:function(_ab7,_ab8,uri){if(window[_ab7]){return window[_ab7];}if(window.frames[_ab7]){return window.frames[_ab7];}var _ab9=null;var turi=uri;if(!turi){if(dojo.config["useXDomain"]&&!dojo.config["dojoBlankHtmlUrl"]){console.warn("dojo.io.iframe.create: When using cross-domain Dojo builds,"+" please save dojo/resources/blank.html to your domain and set djConfig.dojoBlankHtmlUrl"+" to the path on your domain to blank.html");}turi=(dojo.config["dojoBlankHtmlUrl"]||dojo.moduleUrl("dojo","resources/blank.html"));}var _ab9=dojo.place("<iframe id=\""+_ab7+"\" name=\""+_ab7+"\" src=\""+turi+"\" onload=\""+_ab8+"\" style=\"position: absolute; left: 1px; top: 1px; height: 1px; width: 1px; visibility: hidden\">",dojo.body());window[_ab7]=_ab9;return _ab9;},setSrc:function(_aba,src,_abb){try{if(!_abb){if(dojo.isWebKit){_aba.location=src;}else{frames[_aba.name].location=src;}}else{var idoc;if(dojo.isIE||dojo.isWebKit){idoc=_aba.contentWindow.document;}else{idoc=_aba.contentWindow;}if(!idoc){_aba.location=src;return;}else{idoc.location.replace(src);}}}catch(e){console.log("dojo.io.iframe.setSrc: ",e);}},doc:function(_abc){var doc=_abc.contentDocument||(((_abc.name)&&(_abc.document)&&(dojo.doc.getElementsByTagName("iframe")[_abc.name].contentWindow)&&(dojo.doc.getElementsByTagName("iframe")[_abc.name].contentWindow.document)))||((_abc.name)&&(dojo.doc.frames[_abc.name])&&(dojo.doc.frames[_abc.name].document))||null;return doc;},send:function(args){if(!this["_frame"]){this._frame=this.create(this._iframeName,dojo._scopeName+".io.iframe._iframeOnload();");}var dfd=dojo._ioSetArgs(args,function(dfd){dfd.canceled=true;dfd.ioArgs._callNext();},function(dfd){var _abd=null;try{var _abe=dfd.ioArgs;var dii=dojo.io.iframe;var ifd=dii.doc(dii._frame);var _abf=_abe.handleAs;_abd=ifd;if(_abf!="html"){if(_abf=="xml"){if(dojo.isIE<9||(dojo.isIE&&dojo.isQuirks)){dojo.query("a",dii._frame.contentWindow.document.documentElement).orphan();var _ac0=(dii._frame.contentWindow.document).documentElement.innerText;_ac0=_ac0.replace(/>\s+</g,"><");_ac0=dojo.trim(_ac0);var _ac1={responseText:_ac0};_abd=dojo._contentHandlers["xml"](_ac1);}}else{_abd=ifd.getElementsByTagName("textarea")[0].value;if(_abf=="json"){_abd=dojo.fromJson(_abd);}else{if(_abf=="javascript"){_abd=dojo.eval(_abd);}}}}}catch(e){_abd=e;}finally{_abe._callNext();}return _abd;},function(_ac2,dfd){dfd.ioArgs._hasError=true;dfd.ioArgs._callNext();return _ac2;});dfd.ioArgs._callNext=function(){if(!this["_calledNext"]){this._calledNext=true;dojo.io.iframe._currentDfd=null;dojo.io.iframe._fireNextRequest();}};this._dfdQueue.push(dfd);this._fireNextRequest();dojo._ioWatch(dfd,function(dfd){return !dfd.ioArgs["_hasError"];},function(dfd){return (!!dfd.ioArgs["_finished"]);},function(dfd){if(dfd.ioArgs._finished){dfd.callback(dfd);}else{dfd.errback(new Error("Invalid dojo.io.iframe request state"));}});return dfd;},_currentDfd:null,_dfdQueue:[],_iframeName:dojo._scopeName+"IoIframe",_fireNextRequest:function(){try{if((this._currentDfd)||(this._dfdQueue.length==0)){return;}do{var dfd=this._currentDfd=this._dfdQueue.shift();}while(dfd&&dfd.canceled&&this._dfdQueue.length);if(!dfd||dfd.canceled){this._currentDfd=null;return;}var _ac3=dfd.ioArgs;var args=_ac3.args;_ac3._contentToClean=[];var fn=dojo.byId(args["form"]);var _ac4=args["content"]||{};if(fn){if(_ac4){var _ac5=function(name,_ac6){dojo.create("input",{type:"hidden",name:name,value:_ac6},fn);_ac3._contentToClean.push(name);};for(var x in _ac4){var val=_ac4[x];if(dojo.isArray(val)&&val.length>1){var i;for(i=0;i<val.length;i++){_ac5(x,val[i]);}}else{if(!fn[x]){_ac5(x,val);}else{fn[x].value=val;}}}}var _ac7=fn.getAttributeNode("action");var _ac8=fn.getAttributeNode("method");var _ac9=fn.getAttributeNode("target");if(args["url"]){_ac3._originalAction=_ac7?_ac7.value:null;if(_ac7){_ac7.value=args.url;}else{fn.setAttribute("action",args.url);}}if(!_ac8||!_ac8.value){if(_ac8){_ac8.value=(args["method"])?args["method"]:"post";}else{fn.setAttribute("method",(args["method"])?args["method"]:"post");}}_ac3._originalTarget=_ac9?_ac9.value:null;if(_ac9){_ac9.value=this._iframeName;}else{fn.setAttribute("target",this._iframeName);}fn.target=this._iframeName;dojo._ioNotifyStart(dfd);fn.submit();}else{var _aca=args.url+(args.url.indexOf("?")>-1?"&":"?")+_ac3.query;dojo._ioNotifyStart(dfd);this.setSrc(this._frame,_aca,true);}}catch(e){dfd.errback(e);}},_iframeOnload:function(){var dfd=this._currentDfd;if(!dfd){this._fireNextRequest();return;}var _acb=dfd.ioArgs;var args=_acb.args;var _acc=dojo.byId(args.form);if(_acc){var _acd=_acb._contentToClean;for(var i=0;i<_acd.length;i++){var key=_acd[i];for(var j=0;j<_acc.childNodes.length;j++){var _ace=_acc.childNodes[j];if(_ace.name==key){dojo.destroy(_ace);break;}}}if(_acb["_originalAction"]){_acc.setAttribute("action",_acb._originalAction);}if(_acb["_originalTarget"]){_acc.setAttribute("target",_acb._originalTarget);_acc.target=_acb._originalTarget;}}_acb._finished=true;}};}if(!dojo._hasResource["soliant.widget.FileUploader"]){dojo._hasResource["soliant.widget.FileUploader"]=true;dojo.provide("soliant.widget.FileUploader");dojo.declare("soliant.widget.FileUploader",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("soliant.widget","FileUploader/FileUploader.html","<div dojoType=\"soliant.widget.FileUploader\" class=\"soliantFileUploader\">\n\t<div dojoType=\"dijit.form.Form\" action=\"/file-uploader/save\" dojoAttachPoint=\"FileUploaderForm\" enctype=\"multipart/form-data\" >\n\t\t<fieldset>\n\t\t\t<legend>PDF Uploads</legend>\n\t\t\t<div dojoAttachPoint=\"FileUploaderDiv\" class=\"FileUploaderInput\"></div>\n\t\t\t<div dojoAttachPoint=\"UploadButton\"\n\t\t\t\t\tdojoAttachEvent=\"onclick:upload\" \n\t\t\t\t\tclass=\"dijitFileInput dijitFileInputButton UploadButton\">Upload</div>\n\t\t\t\t\t\n\t\t\t<div dojoAttachPoint=\"uploadFormFileList\" \n\t\t\t\t\tdojoType=\"dojox.form.uploader.FileList\" \n\t\t\t\t\tuploaderId=\"willbereplacedwith_uploadFormFileId\" \n\t\t\t\t\tclass=\"FileList\"></div>\n\t\t</fieldset>\n\t</div>\n\n\t<div dojoType=\"dijit.form.Form\" action=\"/file-uploader/save\" dojoAttachPoint=\"FileUploaderFormIE\" enctype=\"multipart/form-data\" >\n\t\t<fieldset>\n\t\t\t<legend>PDF Uploads</legend>\n\t\t\t<div dojoAttachPoint=\"FileUploaderDivIE\" class=\"\"FileUploaderInput\"\"></div>\n\t\t\t<div dojoAttachPoint=\"UploadButtonIE\"\n\t\t\t\t\tdojoAttachEvent=\"onclick:upload\" \n\t\t\t\t\tclass=\"dijitFileInput dijitFileInputButton UploadButtonIE\">Upload</div>\n\t\t</fieldset>\n\t</div>\n\t<div dojoAttachPoint=\"ResultMessage\"></div>\n</div>\n"),widgetsInTemplate:true,baseClass:"fileUploader",saveurl:"/file-uploader/save",saveurlIE:"/file-uploader/save-ie",uploaderId:"",document_id:null,form_number:null,parent_id:"",fileMask:["PDF File","*.pdf"],uploader:"",forceFileInput:false,startup:function(){this.inherited(arguments);if(null==this.document_id||null==this.form_number){console.debug("Document id or form number are null.");return;}},postCreate:function(){var _acf=this.domNode;this.inherited(arguments);if(dojo.isIE||this.forceFileInput){this.FileUploaderForm.destroyDescendants();dojo.destroy(this.FileUploaderForm.attr("id"));console.debug("running IE style");this.uploader=new dojox.form.FileInput({"class":"FileInputIE",},this.FileUploaderDivIE);this.uploaderId=this.uploader.attr("id");dojo.connect(this.uploader,"_matchValue",this,"_matchValue");dojo.connect(this.uploader,"reset",this,"reset");dojo.removeClass(_acf,"soliantFileUploader");dojo.addClass(_acf,"soliantFileUploaderIE");}else{this.FileUploaderFormIE.destroyDescendants();dojo.destroy(this.FileUploaderFormIE.attr("id"));console.debug("running normal style");this.uploader=new dojox.form.Uploader({label:"Click to select a PDF.",showProgress:true,serverTimeout:30000,degradable:true,forceFlash:true,isDebug:true,fileMask:this.fileMask});dojo.connect(this.uploader,"onComplete",this,"onComplete");this.uploaderId=this.uploader.attr("id");this.FileUploaderDiv.appendChild(this.uploader.domNode);this.uploadFormFileList.attr("uploaderId",this.uploader.attr("id"));}},onComplete:function(_ad0){console.debug("onComplete");},upload:function(){console.debug("upload");if(dojo.isIE||this.forceFileInput){submitObj=new Object();submitObj.form_number=this.form_number;submitObj.document_id=this.document_id;dojo.io.iframe.send({form:this.FileUploaderFormIE.attr("id"),content:submitObj,url:this.saveurlIE,load:dojo.hitch(this,"callbackIE")});}else{submitObj=new Object();submitObj.form_number=this.form_number;submitObj.document_id=this.document_id;var _ad1=dijit.byId(this.uploaderId);var _ad2=_ad1.upload(submitObj);dojo.connect(_ad1,"onProgress",function(_ad3){console.debug("yahoo1");});dojo.connect(_ad1,"onComplete",function(_ad4){console.debug("ahmen1");});console.debug("result",_ad2);if(null!=this.parent_id){}}},callbackIE:function(data,_ad5){dojo.fadeIn({node:this.ResultMessage,duration:275}).play();if(data){var _ad6=dojo.fromJson(data);if(_ad6.status&&_ad6.status=="success"){this.ResultMessage.innerHTML="Your file has been uploaded.";dijit.byId(this.uploaderId).reset();}else{if(_ad6.errorMessage){this.ResultMessage.innerHTML=_ad6.errorMessage;}else{this.ResultMessage.innerHTML="There was an error uploading the file.";}}}else{this.ResultMessage.innerHTML="There was an error uploading the file.";}dojo.fadeOut({node:this.ResultMessage,duration:275,delay:5000}).play();if(null!=this.parent_id){dijit.byId(this.parent_id).search();}return data;},_matchValue:function(data,_ad7){u=dijit.byId(this.uploaderId);if(u.inputNode.value){dojo.style(this.UploadButtonIE,"visibility","visible");dojo.fadeIn({node:this.UploadButtonIE,duration:275}).play();}},reset:function(data,_ad8){dojo.fadeOut({node:this.UploadButtonIE,duration:275}).play();}});}if(!dojo._hasResource["soliant.widget.FileList"]){dojo._hasResource["soliant.widget.FileList"]=true;dojo.provide("soliant.widget.FileList");dojo.declare("soliant.widget.FileList",[dijit._Widget,dijit._Templated],{templateString:dojo.cache("soliant.widget","FileList/FileList.html","<div dojoType=\"soliant.widget.FileList\">\n\t<table dojoAttachPoint=\"${baseClass}Container\">\n\t\t<tr>\n\t\t\t<td colspan=\"3\">\n\t\t\t\t<div dojoAttachPoint=\"${baseClass}Uploader\"></div>\n\t\t\t</td>\n\t\t</tr>\n\t\t<tr class=\"${baseClass}Header\">\n\t\t\t<td class=\"${baseClass}HeaderDelete\" dojoAttachPoint=\"${baseClass}HeaderDelete\">Delete</td>\n\t\t\t<td class=\"${baseClass}HeaderFilename\">Filename</td>\n\t\t\t<td class=\"${baseClass}HeaderPreview\">Preview</td>\n\t\t</tr>\n\t\t<tr>\n\t\t\t<td>\n\t\t\t\t<div>\n\t\t\t\t\t<div dojoAttachPoint=\"${baseClass}DeleteButton\"\n\t\t\t\t\t\tdojoAttachEvent=\"onclick:delete\" \n\t\t\t\t\t\tclass=\"dijitFileInput dijitFileInputButton DeleteButton\">Delete</div>\n\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t\t<td colspan=\"2\"></td>\n\t\t</tr>\n\t</table>\n</div>\n"),widgetsInTemplate:true,baseClass:"fileList",document_id:null,form_number:null,use_file_uploader:true,fu:null,url:"/file-list/search",deleteurl:"/file-list/delete",saveurl:"/file-list/save",startup:function(){this.inherited(arguments);if(null==this.document_id||null==this.form_number){console.debug("Document id or form number are null.");return;}if(this.use_file_uploader){this.fu=new soliant.widget.FileUploader({form_number:this.form_number,document_id:this.document_id,parent_id:this.id,forceFileInput:true},this.fileListUploader);this.fu.startup();}this.search();},_setDocumentId:function(id){this.document_id=id;},_getDocumentId:function(){return this.document_id;},_setFormNumber:function(_ad9){this.form_number=_ad9;},_getFormNumber:function(){return this.form_number;},"delete":function(evt){var _ada=dojo.query("input:checked",this.domNode);if(_ada.length>=1){deleteFiles=new Array();dojo.forEach(_ada,function(row,_adb){console.debug(row.value,_adb);deleteFiles[_adb]=row.value;});console.debug(deleteFiles);submitObj=new Object();submitObj.form_number=this._getFormNumber();submitObj.document_id=this._getDocumentId();submitObj.deleteFiles=dojo.toJson(deleteFiles);var _adc={content:submitObj,handleAs:"json",url:this.deleteurl,sync:true,load:dojo.hitch(this,"deleteResults"),error:function(data,_add){console.debug("error");alert("There was an error while trying to perform this search.");}};deferred=dojo.xhrPost(_adc);deferred.then(this.search());}},showHideDeleteButton:function(evt){var _ade=this.domNode;if(dojo.query("input:checked",_ade).length>=1){dojo.style(this.fileListDeleteButton,"visibility","visible");dojo.fadeIn({node:this.fileListDeleteButton,duration:275}).play();}else{dojo.fadeOut({node:this.fileListDeleteButton,duration:275}).play();dojo.style(this.fileListDeleteButton,"visibility","hidden");}},search:function(evt){this.removeFileListRows();submitObj=new Object();submitObj.form_number=this._getFormNumber();submitObj.document_id=this._getDocumentId();var _adf={content:submitObj,handleAs:"json",url:this.url,sync:true,load:dojo.hitch(this,"searchResults"),error:function(data,_ae0){console.debug("error");alert("There was an error while trying to perform this search.");}};var _ae1=dojo.xhrPost(_adf);_ae1.then(this.showHideDeleteButton());},searchResults:function(data,_ae2){that=this;dojo.forEach(data.items,function(row,_ae3){if("error"!=row.result){that.addFileListRow(that.fileListContainer,_ae3,row.filename);}});},deleteResults:function(data,_ae4){console.debug("delete result");},addFileListRow:function(_ae5,_ae6,_ae7){var _ae8=_ae5.rows.length;var row=_ae5.insertRow(_ae8-1);dojo.addClass(row,"fileListInsertedRow");if(this.use_file_uploader){var _ae9=dojo.create("td",{"class":"fileListListDelete"},row);dojo.create("input",{id:"fileListListDelete_"+_ae6,"class":"fileListDeleteCheckbox",type:"checkbox",value:_ae7},_ae9);dojo.connect(dojo.byId("fileListListDelete_"+_ae6),"onchange",this,"showHideDeleteButton");}else{dojo.fadeOut({node:this.fileListHeaderDelete,duration:275}).play();dojo.style(this.fileListHeaderDelete,"visibility","hidden");dojo.style(this.fileListHeaderDelete,"display","none");}var _aea=dojo.create("td",{"class":"fileListListFilename"},row);dojo.create("div",{innerHTML:_ae7},_aea);var _aeb=dojo.create("td",{"class":"fileListListPreview"},row);dojo.create("a",{href:"/file-list/printpdf/document/"+this._getDocumentId()+"/form_number/"+this._getFormNumber()+"/filename/"+encodeURIComponent(_ae7),innerHTML:"view"},_aeb);},removeFileListRows:function(_aec,_aed,_aee){var _aef=dojo.query(".fileListInsertedRow",this.domNode);console.debug("insertedRows below");console.debug(_aef);if(_aef.length>=1){dojo.forEach(_aef,function(node,_af0){console.debug(node,_af0);dojo.destroy(node);});}},save:function(evt){submitObj=new Object();data=this.fileListForm.getValues();submitObj.data=dojo.toJson(data);var _af1={content:submitObj,handleAs:"json",url:this.saveurl,sync:true,load:function(data,_af2){alert("The item has been saved.");},error:function(data,_af3){console.debug("error");alert("There was an error saving the item.");}};dojo.xhrPost(_af1);}});}if(!dojo._hasResource["includes.js"]){dojo._hasResource["includes.js"]=true;dojo.provide("includes.js");}function StartCountDown(_af4,_af5){console.debug("StartCountDown");var _af6=new Date(_af5);var dnow=new Date();ddiff=new Date(_af6-dnow);gsecs=Math.floor(ddiff.valueOf()/1000);if(switchFlagElement=document.getElementById(_af4+"_timer_switch")){switchFlagElement.innerHTML=1;}CountBack(_af4,gsecs);};function ClearCountDown(_af7,msg){if(switchFlagElement=document.getElementById(_af7+"_timer_switch")){switchMsgHtml="<span id=\""+_af7+"_timer_switch_msg\" style=\"visibility:hidden\">"+msg+"</span>";switchFlagElement.innerHTML="-1"+switchMsgHtml;}};function Calcage(secs,num1,num2){s=((Math.floor(secs/num1))%num2).toString();if(s.length<2){s="0"+s;}return (s);};function CountBack(_af8,secs){switchFlagMsg="Checkout Expired One";switchFlag=1;if(switchFlagElement=document.getElementById(_af8+"_timer_switch")){if(switchFlagMsgElement=document.getElementById(_af8+"_timer_switch_msg")){switchFlagMsg=switchFlagMsgElement.innerHTML;}switchFlagAndMsg=switchFlagElement.innerHTML;switchFlag=switchFlagAndMsg.replace(/(<(.+))/ig,"");}var _af9;var _afa="%%M%%:%%S%%";_af9=_afa.replace(/%%D%%/g,Calcage(secs,86400,100000));_af9=_af9.replace(/%%H%%/g,Calcage(secs,3600,24));_af9=_af9.replace(/%%M%%/g,Calcage(secs,60,60));_af9=_af9.replace(/%%S%%/g,Calcage(secs,1,60));if(secs>0&&1==switchFlag){switchHtml="<span id=\""+_af8+"_timer_switch\" style=\"visibility:hidden\">"+switchFlag+"</span>";document.getElementById(_af8).innerHTML=_af9+" minutes"+switchHtml;setTimeout("CountBack('"+_af8+"',"+(secs-1)+");",990);}else{if(-1==switchFlag){document.getElementById(_af8).innerHTML=switchFlagMsg;}else{document.getElementById(_af8).innerHTML=switchFlagMsg;dojo.byId("zend_checkout").value=0;}}};var dateFormat=function(){var _afb=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,_afc=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,_afd=/[^-+\dA-Z]/g,pad=function(val,len){val=String(val);len=len||2;while(val.length<len){val="0"+val;}return val;};return function(date,mask,utc){var dF=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(date)=="[object String]"&&!/\d/.test(date)){mask=date;date=undefined;}date=date?new Date(date):new Date;if(isNaN(date)){throw SyntaxError("invalid date");}mask=String(dF.masks[mask]||mask||dF.masks["default"]);if(mask.slice(0,4)=="UTC:"){mask=mask.slice(4);utc=true;}var _afe=utc?"getUTC":"get",d=date[_afe+"Date"](),D=date[_afe+"Day"](),m=date[_afe+"Month"](),y=date[_afe+"FullYear"](),H=date[_afe+"Hours"](),M=date[_afe+"Minutes"](),s=date[_afe+"Seconds"](),L=date[_afe+"Milliseconds"](),o=utc?0:date.getTimezoneOffset(),_aff={d:d,dd:pad(d),ddd:dF.i18n.dayNames[D],dddd:dF.i18n.dayNames[D+7],m:m+1,mm:pad(m+1),mmm:dF.i18n.monthNames[m],mmmm:dF.i18n.monthNames[m+12],yy:String(y).slice(2),yyyy:y,h:H%12||12,hh:pad(H%12||12),H:H,HH:pad(H),M:M,MM:pad(M),s:s,ss:pad(s),l:pad(L,3),L:pad(L>99?Math.round(L/10):L),t:H<12?"a":"p",tt:H<12?"am":"pm",T:H<12?"A":"P",TT:H<12?"AM":"PM",Z:utc?"UTC":(String(date).match(_afc)||[""]).pop().replace(_afd,""),o:(o>0?"-":"+")+pad(Math.floor(Math.abs(o)/60)*100+Math.abs(o)%60,4),S:["th","st","nd","rd"][d%10>3?0:(d%100-d%10!=10)*d%10]};return mask.replace(_afb,function($0){return $0 in _aff?_aff[$0]:$0.slice(1,$0.length-1);});};}();dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(mask,utc){return dateFormat(this,mask,utc);};dojo.i18n._preloadLocalizations("srs_forms.nls.includes",["ROOT","ar","ca","cs","da","de","de-de","el","en","en-gb","en-us","es","es-es","fi","fi-fi","fr","fr-fr","he","he-il","hu","it","it-it","ja","ja-jp","ko","ko-kr","nb","nl","nl-nl","pl","pt","pt-br","pt-pt","ru","sk","sl","sv","th","tr","xx","zh","zh-cn","zh-tw"]);
